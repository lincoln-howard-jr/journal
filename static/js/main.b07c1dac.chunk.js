(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{145:function(e,t){},147:function(e,t){},157:function(e,t){},159:function(e,t){},186:function(e,t){},188:function(e,t){},189:function(e,t){},194:function(e,t){},196:function(e,t){},215:function(e,t){},227:function(e,t){},230:function(e,t){},254:function(e,t,n){},255:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n.n(c),i=n(131),s=n.n(i),o=n(2),u=n.n(o),l=n(4),j=n(10),d=n(7),f=n(3);var h=function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{className:"long",children:e.children}),Object(r.jsx)("h1",{className:"short",children:e.short?e.short:e.children})]})},b=function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{className:"long",children:e.children}),Object(r.jsx)("h2",{className:"short",children:e.short?e.short:e.children})]})},p=function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h3",{className:"long",children:e.children}),Object(r.jsx)("h3",{className:"short",children:e.short?e.short:e.children})]})},m=n(257),x=n(21),O="2ac3ij97dhtkag9fljdsuo1203",g="us-east-1_tRcA2uwF6",v=null,w=new x.e({UserPoolId:g,ClientId:O}),y=null,k=null,S=null,C={get get(){return new Headers({"x-amz-access-token":k})},get post(){return new Headers({"x-amz-access-token":k,"Content-Type":"application/json"})}},N=function(e){return new Promise((function(t,n){try{v=new x.a({Username:e,ClientMetadata:{phoneNumber:e}}),y=new x.c({Username:e,Pool:w}),t()}catch(r){n(r)}}))},M=function(){return new Promise((function(e,t){try{y=w.getCurrentUser(),e()}catch(n){t(n)}}))},A=function(){return new Promise((function(e,t){try{if(!y)throw"Cognito user must be defined to get access token";y.getSession((function(n,r){if(n)return t(n);k=r.getAccessToken().getJwtToken(),S=new x.b({RefreshToken:r.getRefreshToken().getToken()}),e()}))}catch(n){t(n)}}))},F=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.signOut();case 3:t(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){var c,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=new x.d({Name:"phone_number",Value:t}),a=new x.d({Name:"custom:custom:id",Value:Object(m.a)()}),i=[c,a],w.signUp(t,Object(m.a)(),i,null,(function(e,t){if(e)return r(e);y=t.user,n()}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e,t,n){return new Promise(function(){var r=Object(l.a)(u.a.mark((function r(c,a){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,N(e);case 2:y.setAuthenticationFlowType("CUSTOM_CHALLENGE"),console.log(y,v),y.initiateAuth(v,{onSuccess:function(e){return c(e)},onFailure:function(e){return a(e)},customChallenge:function(e){var r=this;n(),t((function(e){return y.sendCustomChallengeAnswer(e,r)}))}});case 5:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())},q={get get(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries"+(e?"?userId="+e:""),{method:"get",headers:C.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries",{method:"post",headers:C.post,body:JSON.stringify(e)})}},get hide(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries/".concat(e),{method:"delete",headers:C.get})}}},P={get get(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills".concat(e?"?userId="+e:""),{method:"get",headers:C.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills",{method:"post",headers:C.get,body:JSON.stringify(e)})}},get del(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills/".concat(e),{method:"delete",headers:C.get})}}},I={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares",{method:"get",headers:C.get})}},get getById(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries/".concat(e),{method:"get",headers:C.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares",{method:"post",headers:new Headers({"x-amz-access-token":k,"Content-Type":"application/json"}),body:JSON.stringify(e)})}},get toggleFreeze(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares/".concat(e),{method:"put",headers:new Headers({"x-amz-access-token":k})})}}},E={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions",{method:"get",headers:C.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions",{method:"post",headers:new Headers({"x-amz-access-token":k,"Content-Type":"application/json"}),body:JSON.stringify(e)})}},get del(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions/".concat(e),{method:"DELETE",headers:new Headers({"x-amz-access-token":k})})}}},z={get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/audios",{method:"post",headers:new Headers({"x-amz-access-token":k,"Content-Type":"application/json"}),body:JSON.stringify(e)})}}},R={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/notifications",{headers:new Headers({"x-amz-access-token":k})})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/notifications",{method:"post",headers:new Headers({"x-amz-access-token":k,"Content-Type":"application/json"}),body:JSON.stringify(e)})}},get del(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/notifications/".concat(e),{method:"DELETE",headers:new Headers({"x-amz-access-token":k})})}}},Y={get get(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/metrix".concat(e?"?userId="+e:""),{headers:new Headers({"x-amz-access-token":k})})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/metrix",{method:"post",headers:new Headers({"x-amz-access-token":k,"Content-Type":"application/json"}),body:JSON.stringify(e)})}},get del(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/metrix/".concat(e),{method:"DELETE",headers:new Headers({"x-amz-access-token":k})})}}},J={get get(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/measurements/".concat(e?"?userId="+e:""),{headers:new Headers({"x-amz-access-token":k})})}},get post(){return function(e,t){fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/metrix/".concat(e),{method:"post",headers:new Headers({"x-amz-access-token":k,"Content-Type":"application/json"}),body:JSON.stringify(t)})}},get put(){return function(e,t){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/measurements/".concat(e),{method:"put",headers:new Headers({"x-amz-access-token":k,"Content-Type":"application/json"}),body:JSON.stringify({value:t})})}}};JSON.parse(localStorage.getItem("keep-alive"));var W=n(9),L=function(e,t,n){return e<=n&&e>=t},B=function(e,t){return 60*e+t},H={type:function(e){return function(t){return t.entryType===e.entryType}},date:function(e){return function(t){return"single-day"===e.mode?L(t.start,(n=e.date,new Date(n.getFullYear(),n.getMonth(),n.getDate())),function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)}(e.date)):"after"===e.mode?new Date(t.start)>e.date:"before"===e.mode?new Date(t.end)<e.date:void 0;var n}},time:function(e){return function(t){var n=e.time.split(" "),r=Object(f.a)(n,2),c=r[0],a=r[1];console.log(c.split(":"));var i=c.split(":").map((function(e){return parseInt(e)})),s=Object(f.a)(i,2),o=s[0],u=s[1],l=o%12+("pm"===a?12:0);return console.log(e,l,u),"is-at"===e.mode?L(B(l,u),B(t.start.getHours(),t.start.getHours()),B(t.end.getHours(),t.end.getHours())):"before"===e.mode?B(t.start.getHours(),t.start.getMinutes())<=B(l,u):"after"===e.mode?B(t.start.getHours(),t.start.getMinutes())>=B(l,u):void 0}}},V=function(e){return e.map((function(e){return H[e.type](e.value)}))},U=["January","February","March","April","May","June","July","August","September","October","November","December"],Q=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e);return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate()).toString()},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e);return"".concat(Q[t.getDay()],", ").concat(U[t.getMonth()]," ").concat(t.getDate())},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return"".concat(e.getHours()%12||12,":").concat("0".concat(e.getMinutes()).slice(-2)," ").concat(e.getHours()>11?"pm":"am")},_=function(e){if(e instanceof Date)return e;var t=e.split("-"),n=Object(f.a)(t,3),r=n[0],c=n[1],a=n[2];return r=parseInt(r),c=parseInt(c)-1,a=parseInt(a),new Date(r,c,a)},Z=function(e){var t=e.map((function(e){return Object.assign(e,{start:new Date(e.start),end:new Date(e.end)})}));return t.sort((function(e,t){return t.start-e.start})),t.reduce((function(e,t){return function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=t.filter((function(e){return e[n]===r}));if(a.length>0)return a[0].list;var i=(e={},Object(j.a)(e,n,r),Object(j.a)(e,"meta",c),Object(j.a)(e,"list",[]),e);return t.push(i),i.list}(e,"date",G(t.start),{date:K(t.start)}).push(t),e}),[])},$=864e5;var ee=function(e,t,n){var r,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.filter((function(e){return e[t]===n}));if(a.length>0)return a[0].list;var i=(r={},Object(j.a)(r,t,n),Object(j.a)(r,"meta",c),Object(j.a)(r,"list",[]),r);return e.push(i),i.list};var te=window.location.href.split("?")[0];"/"===te.charAt(te.length-1)&&(te=te.substring(0,te.length-1));var ne=te;var re,ce=n(133),ae=n.n(ce),ie=null,se=window.AudioContext||window.webkitAudioContext,oe=null,ue=null,le=[],je=[],de=!!se,fe=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.navigator.mediaDevices.getUserMedia({audio:!0});case 3:oe=e.sent,t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){if(!oe)throw new Error("no stream available to record");(ue=new window.MediaRecorder(oe)).ondataavailable=function(e){le.push(e.data)}},be=function(){return!!oe&&!!ue&&!!le},pe=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:300,e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,ie=new se,be()){e.next=4;break}throw new Error("Environment not set up for recording");case 4:setTimeout((function(){ue.start(),n()}),t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),console.log("\n    current state:\n      stream = ".concat(oe,"\n      mediaRecorder = ").concat(ue,"\n      chunks = ").concat(le,"\n    "));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{ue.stop(),setTimeout((function(){return t()}),150)}catch(r){n(r),console.log("\n    current state:\n      stream = ".concat(oe,"\n      mediaRecorder = ").concat(ue,"\n      chunks = ").concat(le,"\n    "))}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"recording",e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(r,c){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t(),e.prev=1,e.t0=ie,e.next=5,le[0].arrayBuffer();case 5:e.t1=e.sent,e.t2=function(e){re=new ae.a.Mp3Encoder(e.numberOfChannels,e.sampleRate,256e3),je.push(re.encodeBuffer(e.getChannelData(0).map((function(e){return 1e4*e})))),je.push(new Int16Array(re.flush()));var t=new File(je,n,{type:"audio/mp3"});a(),r(t)},e.t0.decodeAudioData.call(e.t0,e.t1,e.t2),e.next=14;break;case 10:e.prev=10,e.t3=e.catch(1),a(),c(e.t3);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Oe=function(e){var t=e.split(" "),n=Object(f.a)(t,2),r=n[0],c=n[1],a=r.split(":"),i=Object(f.a)(a,2),s=i[0],o=i[1];return parseInt(s)%12*60+parseInt(o)+("pm"===c?720:0)},ge=function(e,t){return Oe(e.notificationTime)-Oe(t.notificationTime)};var ve={"default-0":"...","default-1":"...","default-2":"..."},we=[{id:"default-5",unit:"number",range:[1,10],step:1,prompt:"How would I rate how I feel right now?",frequency:"as needed",isDefault:!0},{id:"default-6",unit:"number",range:[0,16],step:.25,prompt:"How much sleep did I get last night?",frequency:"daily",unitLabel:"hours",isDefault:!0},{id:"default-7",unit:"boolean",prompt:"Did I accomplish my goals this week?",frequency:"weekly",isDefault:!0}],ye=[].concat([{id:"default-0",unit:"string",prompt:"What have I done today?",frequency:"as needed"},{id:"default-1",unit:"string",prompt:"How do I feel?",frequency:"as needed"},{id:"default-2",unit:"string",prompt:"What else am I going to do today?",frequency:"as needed"},{id:"default-4",unit:"string",prompt:"What are my goals this week?",frequency:"weekly"}],we),ke=new Date;ke=new Date(ke.getFullYear(),ke.getMonth(),ke.getDate());var Se=new Date(ke.getFullYear(),ke.getMonth(),ke.getDate()+1),Ce=new Date;Ce=new Date(Ce.getFullYear(),Ce.getMonth(),Ce.getDate()-Ce.getDay());var Ne=new Date;Ne=new Date(Ce.getFullYear(),Ce.getMonth(),0);var Me={useAuth:function(e){var t=Object(c.useState)(null),n=Object(f.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(f.a)(i,2),o=s[0],j=s[1],d=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(c,i){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T(t,n,r);case 3:return e.next=5,A();case 5:localStorage.setItem("keep-alive",!0),a(!0),c(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),i(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),h=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M();case 3:return e.next=5,A();case 5:t(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F();case 3:localStorage.setItem("keep-alive",!1),window.location.reload(),t(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M();case 3:return e.next=5,h();case 5:return e.next=7,new Promise((function(e,t){try{if(!y)throw"Cannot refresh empty cognito user";if(!S)throw"Cannot refresh empty refresh token";y.refreshSession(S,(function(n,r){if(n)return t(n);k=r.getAccessToken().getJwtToken(),S=new x.b({RefreshToken:r.getRefreshToken().getToken()}),e()}))}catch(n){t(n)}}));case 7:a(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),a(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(c,i){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(t);case 3:return e.next=5,d(t,n,r);case 5:a(!0),c(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),j(e.t0),i(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){r&&e&&e()}),[r]),Object(c.useEffect)((function(){p()}),[]),{user:r,err:o,login:d,logout:b,register:m}},useJournal:function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(0),i=Object(f.a)(a,2),s=i[0],o=i[1],j=Object(c.useState)([]),d=Object(f.a)(j,2),h=d[0],b=d[1],p=Object(c.useState)([]),m=Object(f.a)(p,2),x=m[0],O=m[1],g=Object(c.useState)(""),v=Object(f.a)(g,2),w=v[0],y=v[1],k=Object(c.useState)([]),S=Object(f.a)(k,2),C=S[0],N=S[1],M=Object(c.useState)([]),A=Object(f.a)(M,2),F=A[0],D=A[1],T=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.get(t);case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,r(c),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.post(t);case 3:return e.next=5,T();case 5:n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.hide(t);case 3:return e.next=5,T();case 5:n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e){return F.includes(e)},z=function(e){b(e);var t=V(e);O(t),o(s+1)};return Object(c.useEffect)((function(){!function(){var e=x.reduce((function(e,t){return e.filter(t)}),n);if(0===w.length)return N(Z(e));var t=n.filter((function(e){return"freeform"===e.entryType})).map((function(e){return Object.assign(e,{text:e.freeform})})).filter((function(e){return e.text.match(w.toLowerCase())})),r=n.filter((function(e){return"questions"===e.entryType})).map((function(e){return Object.assign(e,{text:e.answers.join(" ").toLowerCase()})})).filter((function(e){return e.text.match(w.toLowerCase())}));e=Z([].concat(Object(W.a)(r),Object(W.a)(t))),N(e)}()}),[n,h.length,w,s]),{entries:C,entryList:n,filters:h,filterIterator:s,getEntries:T,createEntry:P,hideEntry:I,toggleStageForRemoval:function(e){E(e)&&D((function(t){return t.filter((function(t){return t.id!==e}))})),D((function(t){return[].concat(Object(W.a)(t),[e])}))},shouldRemove:E,setQuery:y,clearSearch:function(){return z([]),y(""),o(s+1),Promise.resolve()},setFilters:z}},useWriting:function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1],a=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.get();case 3:return c=e.sent,e.next=6,c.json();case 6:a=e.sent,r(a.map((function(e){return{prompt:e.body,id:"custom-question-".concat(e.id),unit:"string",frequency:"as needed"}}))),t(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),n(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,c){var a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.post(t);case 3:return a=e.sent,e.next=6,a.json();case 6:i=e.sent,r((function(e){return[].concat(Object(W.a)(e),[t])})),n(i),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),c(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.del(t);case 3:if(e.sent.ok){e.next=6;break}throw new Error("Could not delete question");case 6:return e.next=8,a();case 8:n(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),r(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{questions:n,getQuestions:a,createQuestion:i,deleteQuestion:s}},useSettings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.localStorage,n=JSON.parse(t.getItem("therapy-journal-settings")||"{}"),r=Object.assign(e,n),a=Object(c.useState)(r),i=Object(f.a)(a,2),s=i[0],o=i[1],u=Object(c.useState)(0),l=Object(f.a)(u,2),h=l[0],b=l[1],p=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?n.reduce((function(e,t){var n=t.charAt(0),r=t.substring(1);return"!"===n?e&&!s[r]:"|"===n?e||s[r]:"&"===n?e&&s[r]:e}),s[e]):s[e]},m=function(){return Object.assign({},s)},x=function(e,t){s[e]||(o(Object(d.a)(Object(d.a)({},s),{},Object(j.a)({},e,t))),b(h+1))},O=function(e){delete s[e],b(h+1)},g=function(){o({}),b(h+1)},v=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),c=2;c<n;c++)r[c-2]=arguments[c];if(!r.length)return o(Object(d.a)(Object(d.a)({},s),{},Object(j.a)({},e,t)));var a=r.reduce((function(e,n){var r=n.charAt(0),c=n.substring(1);return"!"===r?Object(d.a)(Object(d.a)({},e),{},Object(j.a)({},c,!t)):"|"===r&&!1===t?Object(d.a)(Object(d.a)({},e),{},Object(j.a)({},c,!0)):e}),Object(j.a)({},e,t));o((function(e){return Object.assign(e,a)})),b(h+1)},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.reduce((function(e,t){var n=t.key,r=t.value;return Object.assign(e,Object(j.a)({},n,r))}),{});o((function(e){return Object.assign(e,t)})),b(h+1)},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){if(!t.length)return o(Object(d.a)(Object(d.a)({},s),{},Object(j.a)({},e,!s[e])));var r=!s[e],c=t.reduce((function(e,t){var n=t.charAt(0),c=t.substring(1);return"!"===n?Object(d.a)(Object(d.a)({},e),{},Object(j.a)({},c,!r)):"|"===n&&!1===r?Object(d.a)(Object(d.a)({},e),{},Object(j.a)({},c,!0)):e}),Object(j.a)({},e,r));o(Object(d.a)(Object(d.a)({},s),c)),b(h+1)}};return Object(c.useEffect)((function(){t.setItem("therapy-journal-settings",JSON.stringify(s))}),[s]),{getSetting:p,removeSetting:O,getAll:m,toggle:y,addSetting:x,set:v,setAll:w,clearSettings:g}},useSharing:function(e){var t=Object(c.useState)([]),n=Object(f.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)([]),s=Object(f.a)(i,2),o=s[0],j=s[1],d=Object(c.useState)([]),h=Object(f.a)(d,2),b=h[0],p=h[1],m=function(){var t=Object(l.a)(u.a.mark((function t(){var n,r,c,i,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.get();case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,c=r.sharedWithMe,i=r.sharedByMe,j(i),a(c),s=i.map((function(e){return{key:"share-".concat(e.id),value:!e.frozen}})),e.setAll(s),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){var c,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.getById(t);case 3:return c=e.sent,e.next=6,c.json();case 6:a=e.sent,i=Z(a),p(i),n(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.toggleFreeze(t);case 3:return e.next=5,m();case 5:n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(c,a){var i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=10===t.length?"+1".concat(t):t,e.next=4,I.post({shareWith:i,name:n,shareWithName:r});case 4:return e.next=6,m();case 6:c(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return{sharedByMe:o,sharedWithMe:r,sharedJournal:b,getShareById:x,getShares:m,shareJournal:g,toggleFreeze:O}},useSkills:function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),i=Object(f.a)(a,2),s=(i[0],i[1],function(){var e=Object(l.a)(u.a.mark((function e(t){var n,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get(t);case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,a=c.reduce((function(e,t){return ee(e,"category",t.category,{category:t.category}).push(t),e}),[]),r(a),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}());return{skills:n,getSkills:s,submitSkill:function(e){return new Promise(function(){var t=Object(l.a)(u.a.mark((function t(n,r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.post(e);case 3:return t.next=5,s();case 5:n(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),r(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}())},removeSkill:function(e){return new Promise(function(){var t=Object(l.a)(u.a.mark((function t(n,r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.del(e);case 3:return t.next=5,s();case 5:n(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),r(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}())}}},useRouter:function(){var e=new URLSearchParams(window.location.search).get("page")||"write",t=Object(c.useState)(e),n=Object(f.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(new URLSearchParams(window.location.search)),s=Object(f.a)(i,2),o=s[0],u=s[1];return{page:r,params:o,redirect:function(e){var t=e.split("?"),n=t.length>1?new URLSearchParams("?".concat(t[1])).get("page"):"write";window.history.pushState({previous:r,next:n},"Journal","".concat(ne).concat(e)),a(n),t.length>1&&u(new URLSearchParams("?".concat(t[1]))),function(){setTimeout((function(){window.scrollBy({left:0,top:-window.scrollY,behavior:"smooth"})}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}(100)}}},useAudio:function(e){var t=Object(c.useState)("not-started"),n=Object(f.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(f.a)(i,2),o=s[0],j=s[1],d=Object(c.useState)("audio-recording-".concat(X(),"-").concat(G(),".mp3")),h=Object(f.a)(d,2),b=h[0],p=h[1],m=Object(c.useState)(0),x=Object(f.a)(m,2),O=x[0],g=x[1],v=Object(c.useState)(!1),w=Object(f.a)(v,2),y=w[0],k=w[1],S=Object(c.useState)(null),C=Object(f.a)(S,2),N=C[0],M=C[1],A=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe();case 2:a("recording"),k(window.setInterval((function(){return g((function(e){return e+1}))}),1e3));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var t=Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.clearInterval(y),k(!1),g(0),t.next=5,me();case 5:return t.next=7,xe(e,"audio-recording-".concat(X(),"-").concat(G(),".mp3"));case 7:n=t.sent,console.log(n),j(n),a("finished");case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.clearInterval(y),a("paused"),ue.pause();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(window.setInterval((function(){return g((function(e){return e+1}))}),1e3)),a("recording"),ue.resume();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{initAudio:function(){var t=Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e(),t.prev=1,t.next=4,fe();case 4:he(),M(be()),n(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),audioRecording:o,audioRecordingTitle:b,timeElapsed:O,recordingStatus:r,ready:N,startRecording:A,stopRecording:F,pauseRecording:D,resumeRecording:T,resetAudioInformation:function(){j(null),p("audio-recording-".concat(X(),"-").concat(G(),".mp3")),g(0),a("not-started"),k(!1)},setAudioRecordingTitle:p}},useNotifications:function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1],a=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.get();case 3:return c=e.sent,e.next=6,c.json();case 6:(a=e.sent).sort(ge),r(a),t(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),n(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{notifications:n,getNotifications:a,createNotification:function(e){return new Promise(function(){var t=Object(l.a)(u.a.mark((function t(n,r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.post(e);case 3:return t.next=5,a();case 5:n(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),r(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}())},deleteNotification:function(e){return new Promise(function(){var t=Object(l.a)(u.a.mark((function t(n,r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.del(e);case 3:return t.next=5,a();case 5:n(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),r(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}())}}},useMetrix:function(){var e=Object(c.useState)(we),t=Object(f.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),i=Object(f.a)(a,2),s=i[0],o=i[1],j=Object(c.useState)([]),d=Object(f.a)(j,2),h=d[0],b=d[1],p=Object(c.useState)([]),m=Object(f.a)(p,2),x=m[0],O=m[1],g=Object(c.useState)(null),v=Object(f.a)(g,2),w=v[0],y=v[1],k=Object(c.useState)(null),S=Object(f.a)(k,2),C=S[0],N=S[1],M=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.get(t);case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,r([].concat(Object(W.a)(we),Object(W.a)(c))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("#getMetrix",e.t0);case 13:return e.abrupt("return",Promise.resolve());case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.post(t);case 3:if(e.sent.ok){e.next=6;break}throw new Error("request not ok");case 6:return e.next=8,M();case 8:n(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("#createMetrix",e.t0),r(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.del(t);case 3:return e.next=5,M();case 5:n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.get(t);case 3:return n=e.sent,e.next=6,n.json();case 6:r=(r=e.sent).map((function(e){return Object.assign(e,{measurement:e.measurement||e.value,measuredAt:new Date(e.measuredAt)})})),o(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("#getMeasurements",e.t0);case 14:return e.abrupt("return",Promise.resolve());case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.post(t.id,{measurement:n,unit:t.unit,measuredAt:r});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(h.map((function(e){return J.post(e.metricId,e.body)})));case 3:return b([]),e.next=6,D();case 6:t(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("#createMeasurements",e.t0),n(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.put(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){if(n.length&&s.length){var e=s.filter((function(e){var t;return"daily"===(null===(t=n.find((function(t){return t.id===e.metric})))||void 0===t?void 0:t.frequency)})).filter((function(e){return(t=e.measuredAt)>ke&&t<Se;var t})),t=s.filter((function(e){var t;return"weekly"===(null===(t=n.find((function(t){return t.id===e.metric})))||void 0===t?void 0:t.frequency)})).filter((function(e){return e.measuredAt>Ce})),r=s.filter((function(e){var t;return"monthly"===(null===(t=n.find((function(t){return t.id===e.metric})))||void 0===t?void 0:t.frequency)})).filter((function(e){return e.measuredAt>Ne})),c=[].concat(Object(W.a)(n.filter((function(t){return!!e.find((function(e){return e.metric===t.id}))})).map((function(e){return e.id}))),Object(W.a)(n.filter((function(e){return!!t.find((function(t){return t.metric===e.id}))})).map((function(e){return e.id}))),Object(W.a)(n.filter((function(e){return!!r.find((function(t){return t.metric===e.id}))})).map((function(e){return e.id}))));O(c)}}),[n,s]),{metrix:n,singleMetrix:w,singleMeasurement:C,measurements:s,captured:x,getMetrix:M,setSingleMetrix:y,setSingleMeasurement:N,createMetrix:A,updateMeasurement:P,deleteMetrix:F,getMeasureValue:function(e){var t,n;return null===(t=h.find((function(t){return t.metricId===(null===e||void 0===e?void 0:e.id)})))||void 0===t||null===(n=t.body)||void 0===n?void 0:n.measurement},getMeasurements:D,measure:function(e,t){if([].concat(Object(W.a)(n),Object(W.a)(we)).find((function(t){return e.id===t.id}))){var r=h.slice(),c=r.findIndex((function(t){return t.metricId===e.id}));if(-1===c)return b([].concat(Object(W.a)(h),[{metricId:e.id,body:{measurement:t,unit:e.unit}}]));void 0===t?r.splice(c,1):r[c].body.measurement=t,b(r)}},createMeasurements:q,measureHistoric:T,isCaptured:function(e){return x.includes(e)}}}},Ae={"custom-questions":!0,"default-questions":!0,"custom-metrix":!0,freeform:!1,"skill-add-mode":!1},Fe=Object(c.createContext)(),De=function(){return a.a.useContext(Fe)};function Te(e){var t=e.children,n={},a=Object(c.useState)(null),i=Object(f.a)(a,2),s=i[0],o=i[1];n.freeze=function(e){return o(""),function(){o(null)}};var u=Object(c.useState)(null),l=Object(f.a)(u,2),j=l[0],d=l[1];n.closeModal=function(){return d(null)},n.setModal=d;var h=Object(c.useState)(!1),b=Object(f.a)(h,2),p=b[0],m=b[1];n.viewMode={isViewOnly:p,setIsViewOnly:m},n.settings=Me.useSettings(Ae),n.session=Me.useSettings(ve,sessionStorage),n.skills=Me.useSkills(),n.journal=Me.useJournal(),n.sharing=Me.useSharing(n.settings),n.writing=Me.useWriting(),n.metrix=Me.useMetrix(),n.router=Me.useRouter(),n.audio=Me.useAudio(n.freeze),n.notifications=Me.useNotifications(),n.viewSharedJournal=function(e){n.journal.getEntries(e),n.skills.getSkills(e),n.viewMode.setIsViewOnly(!0),n.router.redirect("/?page=journal")},n.viewMyJournal=function(){n.journal.getEntries(),n.skills.getSkills(),n.viewMode.setIsViewOnly(!1),n.router.redirect("/?page=settings")};return n.auth=Me.useAuth((function(){n.metrix.getMetrix(),n.metrix.getMeasurements(),n.skills.getSkills(),n.writing.getQuestions(),n.journal.getEntries(),n.sharing.getShares((function(e){e.sharedByMe.forEach((function(e){n.settings.set("share-".concat(e.id),!e.frozen)}))})),n.notifications.getNotifications(),de?(n.settings.set("audio-recording-supported",!0),n.settings.set("audio-recording",!1)):(n.settings.set("audio-recording-supported",!1),n.settings.set("audio-recording",!1))})),Object(r.jsxs)(Fe.Provider,{value:n,children:[null!==s&&Object(r.jsx)("div",{id:"loading-animation"}),null!==j&&Object(r.jsx)("div",{id:"modal-backdrop",children:Object(r.jsx)("div",{id:"modal-content",children:j})}),t]})}var qe=function(){var e=De().audio,t=e.initAudio,n=e.ready,a=e.recordingStatus,i=e.audioRecording,s=e.timeElapsed,o=e.audioRecordingTitle,u=e.startRecording,l=e.stopRecording,j=e.pauseRecording,d=e.resumeRecording,f=e.resetAudioInformation,h=e.setAudioRecordingTitle;return Object(c.useEffect)((function(){n||t()}),[]),null===n?null:"not-started"===a?Object(r.jsxs)("div",{className:"recorder-container grid text-center",children:[Object(r.jsx)("p",{children:'Click "Record" to speak your journal entry!'}),Object(r.jsx)("button",{onClick:u,children:"Record"})]}):"paused"===a?Object(r.jsxs)("div",{className:"recorder-container grid text-center",children:[Object(r.jsx)("div",{className:"timer",children:Object(r.jsxs)("span",{children:[Math.floor(s/60),":","00".concat(s%60).slice(-2)]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:d,children:"Resume"}),Object(r.jsx)("button",{onClick:l,children:"Finish"})]})]}):"recording"===a?Object(r.jsxs)("div",{className:"recorder-container grid text-center",children:[Object(r.jsx)("div",{className:"timer flashing",children:Object(r.jsxs)("span",{children:[Math.floor(s/60),":","00".concat(s%60).slice(-2)]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:l,children:"Stop"}),Object(r.jsx)("button",{onClick:j,children:"Pause"})]})]}):"finished"===a?Object(r.jsx)("div",{className:"recorder-container grid text-center",children:Object(r.jsxs)("figure",{className:"audio-recording",children:[Object(r.jsxs)("figcaption",{children:[Object(r.jsxs)("p",{children:["Title:\xa0\xa0\xa0",Object(r.jsx)("input",{className:"audio-title-input",onChange:function(e){return h(e.target.value)},value:o})]}),Object(r.jsx)("p",{className:"fake-button",children:Object(r.jsx)("a",{className:"error",onClick:f,children:"Start Over"})})]}),Object(r.jsx)("audio",{controls:!0,src:window.URL.createObjectURL(i)})]})}):Object(r.jsx)("div",{children:"Error! Error!"})};function Pe(){var e=De(),t=e.auth.user,n=e.router.page,a=e.journal.createEntry,i=e.settings.getSetting,s=e.writing,o=s.recordingStatus,m=s.resetAudioInformation,x=e.audio,O=x.audioRecording,g=x.audioRecordingTitle,v=e.freeze,w=Object(c.useState)(new Date),y=Object(f.a)(w,2),k=y[0],S=y[1],C=Object(c.useState)({}),N=Object(f.a)(C,2),M=N[0],A=N[1],F=Object(c.useRef)(),D=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v(),e.prev=1,r={entryType:"freeform",freeform:F.current.innerText,start:k,end:new Date},e.next=5,a(r);case 5:F.current.innerText="Your entry here!",S(new Date),n(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),n();case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v(),e.prev=1,r={entryType:"audio",start:k,end:new Date},e.next=5,z.post({filename:g});case 5:return c=e.sent,e.next=8,c.json();case 8:return i=e.sent,e.next=11,fetch(i.uploadUrl,{method:"PUT",body:O});case 11:return r.audio=i.id,r.title=g,e.next=15,a(r);case 15:m(),n(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),n();case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}();return"write"===n&&t?i("freeform","!audio-recording")?Object(r.jsxs)("main",{id:"freeform-entry",children:[Object(r.jsx)(h,{short:"New Entry",children:"New Freeform Entry"}),Object(r.jsx)(b,{children:K()}),Object(r.jsx)(p,{children:X(k)}),Object(r.jsx)("div",{onFocus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n){M[e]||(n.target.innerText=t,A(Object(d.a)(Object(d.a)({},M),{},Object(j.a)({},e,!0))))}}("freeform"),ref:F,contentEditable:!0,children:"Your entry here!"}),Object(r.jsx)("button",{onClick:D,children:"Submit"})]}):i("freeform","&audio-recording")?Object(r.jsxs)("main",{id:"audio-entry",children:[Object(r.jsx)(h,{short:"New Entry",children:"New Audio Entry"}),Object(r.jsx)(b,{children:K()}),Object(r.jsx)(p,{children:X(k)}),Object(r.jsx)(qe,{}),"finished"===o&&Object(r.jsx)("button",{onClick:T,children:"Submit"})]}):null:null}n.p;var Ie=400,Ee=100,ze=25,Re={r:5};function Ye(e){var t=Object(f.a)(e.range,2),n=t[0],a=t[1],i=e.step,s=e.defaultValue,o=e.onChange,u=Object(c.useRef)(),l=Object(c.useState)(s||n),j=Object(f.a)(l,2),h=j[0],b=j[1],p=Object(c.useState)(!1),m=Object(f.a)(p,2),x=m[0],O=m[1],g=function(){var e=i%1?"".concat(i).split(".")[1].length:0,t=e?parseFloat:parseInt,r=Math.round(n+(h-n)/i)*i;return(r=t(r.toFixed(e)))<n&&(r=n),r>a&&(r=a),r},v=function(e,t){var n=t-e;return function(r){return r<e&&(r=e),r>t&&(r=t),ze+350*(r-e)/n}}(n,a),w=function(e){if(x){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ie,r=t-e,c=n-ze*n/Ie*2;return function(e){return(e-ze)*r/c}}(n,a,u.current.clientWidth),r=e.movementX?h+e.movementX*(a-n)/(u.current.clientWidth-5*u.current.clientWidth/Ie*10):e.touches&&e.touches.length?t(e.touches[0].clientX):h;r<n&&(r=n),r>a&&(r=a),b(r)}};return Object(c.useEffect)((function(){o&&o(g())}),[h]),Object(r.jsxs)("svg",{ref:u,onTouchMove:w,onTouchCancel:function(){return O(!1)},onMouseMove:w,onMouseLeave:function(){return O(!1)},onMouseUp:function(){return O(!1)},viewBox:"0 0 ".concat(Ie," ").concat(Ee),className:"component-slider-svg",children:[Object(r.jsxs)("g",{className:"slider-base",children:[Object(r.jsx)("circle",Object(d.a)({cx:v(n),cy:50},Re)),Object(r.jsx)("line",{x1:v(n)+5,x2:v(a)-5,y1:50,y2:50}),Object(r.jsx)("circle",Object(d.a)({cx:v(a),cy:50},Re)),Object(r.jsx)("text",{x:v(n),y:80,textAnchor:"left",children:n}),Object(r.jsx)("text",{x:v(a),y:80,textAnchor:"end",children:a})]}),Object(r.jsxs)("g",{className:"slider-value",children:[Object(r.jsx)("circle",{onTouchStart:function(){return O(!0)},onMouseDown:function(){return O(!0)},cx:v(h),cy:50,r:10}),Object(r.jsx)("line",{x1:v(h),x2:v(h),y1:25,y2:35}),Object(r.jsx)("text",{x:v(h),y:20,textAnchor:"middle",children:g()})]})]})}var Je={boolean:function(e){var t=e.onChange,n=e.defaultValue;return Object(r.jsx)("div",{children:Object(r.jsxs)("select",{defaultValue:n,onChange:function(e){return t(""===e.target.value?void 0:e.target.value)},children:[Object(r.jsx)("option",{value:void 0}),Object(r.jsx)("option",{children:"Yes"}),Object(r.jsx)("option",{children:"No"})]})})},number:function(e){var t=e.onChange,n=e.defaultValue,c=e.range,a=e.step;return Object(r.jsx)("div",{children:Object(r.jsx)(Ye,{range:c,step:a,defaultValue:n,onChange:t})})},string:function(e){var t=e.onChange,n=e.autofocus,a=e.defaultValue,i=void 0===a?"...":a,s=Object(c.useRef)(),o=Object(c.useState)("..."===i),u=Object(f.a)(o,2),l=u[0],j=u[1];return Object(c.useEffect)((function(){s.current&&n&&s.current.focus()}),[s]),Object(r.jsx)("div",{ref:s,onFocus:function(){l&&(s.current.innerText="",j(!1))},contentEditable:!0,onBlur:function(e){return t(e.target.innerText)},children:i})}};var We=n.p+"static/media/cancel.da5c4222.svg",Le=n.p+"static/media/trash.dd7f053f.svg";function Be(){var e=De(),t=e.auth.user,n=e.router.page,i=e.journal.createEntry,s=e.settings.getSetting,o=e.writing.questions,j=e.metrix,m=j.metrix,x=(j.getMeasureValue,j.createMeasurements),O=j.measure,g=j.isCaptured,v=e.session,w=e.freeze,y=["default-questions","custom-questions","use-metrix"].map((function(e){return s(e)})),k=Object(c.useState)(new Date),S=Object(f.a)(k,2),C=S[0],N=S[1],M=Object(c.useState)(ye[0].id),A=Object(f.a)(M,2),F=A[0],D=A[1],T=Object(c.useState)(""),q=Object(f.a)(T,2),P=q[0],I=q[1],E=function(){var e=[];return y[0]&&(e=ye),y[1]&&(e=[].concat(Object(W.a)(e),Object(W.a)(o))),y[2]&&(e=[].concat(Object(W.a)(e),Object(W.a)(m))),e},z=function(){var e=v.getAll(),t=E(),n=Object.keys(e).filter((function(t){return void 0!==e[t]})).map((function(e){return t.find((function(t){return t.id===e}))})).filter((function(e){return e}));return n.sort((function(e,n){return t.findIndex((function(t){return t.id===e.id}))-t.findIndex((function(e){return e.id===n.id}))})),n},R=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,r,c,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w(),e.prev=1,n=E(),r=v.getAll(),c=Object.keys(r).filter((function(e){return null!==r[e]&&void 0!==r[e]})).map((function(e){return n.find((function(t){return t.id===e}))})).filter((function(e){return e})),a=c.map((function(e){return r[e.id]})),c=c.map((function(e){return e.prompt})),s={entryType:"questions",start:C,end:new Date,questions:c,answers:a},e.next=10,i(s);case 10:return e.next=12,x();case 12:v.clearSettings(),N(new Date),t(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),t();case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){D("")}),[n]),t&&"write"===n?s("freeform")?null:Object(r.jsxs)("main",{id:"question-answer-entry",children:[Object(r.jsx)(h,{short:"New Entry",children:"New Question & Answer Entry"}),Object(r.jsx)(b,{children:K()}),Object(r.jsx)(p,{children:X(C)}),Object(r.jsxs)("div",{className:"questions",children:[z().map((function(e){var t=Je[e.unit],n={defaultValue:v.getSetting(e.id)};return Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsxs)("span",{className:"prompt-prompt",children:[Object(r.jsxs)("b",{children:[e.prompt,e.unitLabel?" (".concat(e.unitLabel,")"):""]}),Object(r.jsx)("span",{onClick:function(){return function(e){O(e,void 0),v.removeSetting(e.id)}(e)},children:Object(r.jsx)("img",{src:Le})})]}),Object(r.jsx)(t,Object(d.a)(Object(d.a)({autofocus:F===e.id,onChange:function(t){return function(e,t){O(e,t),v.set(e.id,t)}(e,t)}},n),e)),Object(r.jsx)("hr",{className:"prompt-divider"})]},"prompt-".concat(e.unit,"-").concat(e.id))})),0!==E().filter((function(e){return z().find((function(t){return t.id===e.id}))}))&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("section",{onClick:function(){return I("selecting")},className:"add-a-section ".concat(P),children:"+"}),Object(r.jsxs)("section",{children:["selecting"===P&&Object(r.jsxs)("select",{autoFocus:!0,onChange:function(e){return e.target.value&&function(e){var t=E().find((function(t){return e===t.id}));t&&(v.set(t.id,null),D(t.id))}(e.target.value)||I("")},children:[Object(r.jsx)("option",{value:null,defaultChecked:!0}),E().filter((function(e){return!g(e)})).filter((function(e){return!z().find((function(t){return e.id===t.id}))})).map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.prompt},"option-".concat(prompt.unit,"-").concat(prompt.id))}))]}),Object(r.jsx)("span",{className:"fake-button",onClick:function(){return I("")},children:Object(r.jsx)("img",{src:We})})]})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{onClick:R,children:"Submit"})})]})]}):null}var He=n.p+"static/media/calendar.0073112f.svg",Ve=n.p+"static/media/caret-down.bfd98d54.svg",Ue=[0,31,28,31,30,31,30,31,31,30,31,30,31],Qe=function(e,t){return Ue[e]+(t%4===0?1:0)};var Ge=function(e){var t=e.value,n=e.remove,a=e.setValue,i=new Date(t.date),s=Object(c.useState)(t.mode),o=Object(f.a)(s,2),u=o[0],l=o[1],j=Object(c.useState)(i.getMonth()+1),d=Object(f.a)(j,2),h=d[0],b=d[1],p=Object(c.useState)(i.getDate()),m=Object(f.a)(p,2),x=m[0],O=m[1],g=Object(c.useState)(i.getFullYear()),v=Object(f.a)(g,2),w=v[0],y=v[1],k=Object(c.useState)(Qe(h,w)),S=Object(f.a)(k,2),C=S[0],N=S[1];return Object(c.useEffect)((function(){if(NaN!==h&&NaN!==x&&NaN!==w){var e=Qe(h,w);N(e),a(Object.assign(t,{mode:u,date:new Date(w,h-1,x,0,0,0)}))}}),[x,h,w,u]),Object(r.jsxs)("li",{className:"grid filter date-filter",children:[Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:He,alt:"Date Filter"})}),Object(r.jsx)("span",{className:t.modeFinal?"":"fake-button",onClick:function(){t.modeFinal||l("single-day"===u?"after":"after"===u?"before":"single-day")},children:Object(r.jsxs)("span",{className:"grid switch-mode",children:[Object(r.jsx)("span",{children:"single-day"===t.mode?"Day Of":"after"===t.mode?"After":"Before"}),!t.modeFinal&&Object(r.jsx)("img",{style:{display:"inline",transform:"rotate(-90deg)"},width:8,height:8,src:Ve})]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{type:"tel",min:1,max:12,defaultValue:h,onChange:function(e){return b(parseInt(e.target.value))}}),Object(r.jsx)("span",{children:"/"}),Object(r.jsx)("input",{type:"tel",min:1,max:C,defaultValue:x,onChange:function(e){return O(parseInt(e.target.value))}}),Object(r.jsx)("span",{children:"/"}),Object(r.jsx)("input",{type:"tel",min:2020,max:(new Date).getFullYear(),defaultValue:w,onChange:function(e){return y(parseInt(e.target.value))}})]}),Object(r.jsx)("span",{children:Object(r.jsx)("span",{className:"fake-button",onClick:n,children:"remove"})})]})},Ke=n.p+"static/media/stopwatch.43421b05.svg";function Xe(e){var t=e.value,n=e.onChange,c=function(){return t.split(" ")[0].split(":")[1]},a=function(){return t.split(" ")[0].split(":")[0]},i=function(){return t.split(" ")[1]};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("input",{type:"number",onChange:function(e){var t=parseInt(e.target.value);t<1||t>12||n("".concat(e.target.value,":").concat(c()," ").concat(i()))},value:a()}),":",Object(r.jsx)("input",{type:"number",onChange:function(e){var t=parseInt(e.target.value);t<0||t>59||n("".concat(a(),":").concat(("00"+e.target.value).slice(-2)," ").concat(i()))},value:c()}),Object(r.jsx)("span",{className:"fake-button",onClick:function(){return n("".concat(a(),":").concat(c()," ").concat("pm"===i()?"am":"pm"))},children:i()})]})}var _e=function(e){var t=e.value,n=e.remove,c=e.setValue;return Object(r.jsxs)("li",{className:"grid filter time-filter",children:[Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:Ke})}),Object(r.jsx)("span",{className:"fake-button",onClick:function(){var e="is-at"===t.mode?"after":"after"===t.mode?"before":"is-at";c({time:t.time,mode:e})},children:Object(r.jsxs)("span",{className:"grid switch-mode",children:[Object(r.jsx)("span",{children:"is-at"===t.mode?"Exact":"after"===t.mode?"After":"Before"}),Object(r.jsx)("img",{style:{display:"inline",transform:"rotate(-90deg)"},width:8,height:8,src:Ve})]})}),Object(r.jsx)("div",{children:Object(r.jsx)(Xe,{value:t.time,onChange:function(e){return c({time:e,mode:t.mode})}})}),Object(r.jsx)("span",{children:Object(r.jsx)("span",{className:"fake-button",onClick:n,children:"remove"})})]})},Ze=n.p+"static/media/search.28b0ad10.svg",$e=n.p+"static/media/filter.8be2c938.svg",et=(n.p,n.p+"static/media/book.65cd22a3.svg"),tt=n.p+"static/media/dashboard.4dfd917f.svg",nt=(n.p,n.p+"static/media/left-arrow.7f101ba2.svg"),rt=(n.p,n.p,n.p,n.p+"static/media/plus.a86e5868.svg"),ct=n.p+"static/media/ruler.7e9ac949.svg",at=n.p+"static/media/settings.d2739024.svg",it=n.p+"static/media/skill.23054f65.svg",st=n.p+"static/media/checkmark.1d073034.svg",ot=n.p+"static/media/key.4617432b.svg",ut={date:Ge,time:_e};function lt(){var e=De(),t=e.journal,n=t.query,a=t.filters,i=t.filterIterator,s=t.setQuery,o=t.setFilters,u=e.router.redirect,l=e.viewMode.isViewOnly,j=Object(c.useState)(!1),d=Object(f.a)(j,2),h=d[0],b=d[1],p=Object(c.useState)([]),m=Object(f.a)(p,2),x=m[0],O=m[1],g=Object(c.useState)([]),v=Object(f.a)(g,2),w=v[0],y=v[1],k=Object(c.useState)([]),S=Object(f.a)(k,2),C=(S[0],S[1]);Object(c.useEffect)((function(){O(a.filter((function(e){return"date"===e.type}))),y(a.filter((function(e){return"time"===e.type}))),C(a.filter((function(e){return"type"===e.type})))}),[i]);var N=function(e){return function(){a.splice(e,1),o(a)}},M=function(e){return function(t){a[e].value=t,o(a)}};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"grid search-container",children:[l&&Object(r.jsx)("span",{}),!l&&Object(r.jsx)("span",{onClick:function(){return u("/?page=write")},children:Object(r.jsx)("img",{src:rt})}),Object(r.jsxs)("form",{className:"search-bar",onSubmit:function(e){return e.preventDefault()},children:[Object(r.jsx)("input",{value:n,onChange:function(e){return s(e.target.value)},placeholder:"Search..."}),Object(r.jsx)("img",{src:Ze})]}),Object(r.jsx)("span",{onClick:function(e){return b(!h)},className:"open-filters",children:Object(r.jsx)("img",{src:$e})})]}),h?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("ol",{className:"grid filter-list",children:a.map((function(e,t){var n=ut[e.type];return Object(r.jsx)(n,{value:e.value,remove:N(t),setValue:M(t)})}))}),0===a.length&&Object(r.jsx)("div",{className:"grid",children:"You don't have any filters, add some by clicking on the icons below!"}),Object(r.jsxs)("ul",{className:"grid add-filter-list",children:[Object(r.jsx)("li",{onClick:function(){if(0===x.length){var e=[].concat(Object(W.a)(a),[{type:"date",value:{mode:"single-day",date:new Date}}]);o(e)}else{if(1!==x.length)return;var t=a.filter((function(e){return"date"===e.type}))[0];t.value=Object.assign(t.value,{mode:"after",modeFinal:!0});var n=[].concat(Object(W.a)(a),[{type:"date",value:{mode:"before",modeFinal:!0,date:new Date}}]);o(n)}},className:x.length<2?"":"add-filter-disabled",children:Object(r.jsx)("img",{src:He,alt:"date filter"})}),Object(r.jsx)("li",{onClick:function(){if(0===w.length){var e=[].concat(Object(W.a)(a),[{type:"time",value:{mode:"is-at",time:"".concat((new Date).getHours()%12||12,":").concat(("00"+(new Date).getMinutes()).slice(-2)," ").concat((new Date).getHours<12?"am":"pm")}}]);o(e)}else{if(1!==w.length)return;w[0].value.mode="after";var t=[].concat(Object(W.a)(a),[{type:"time",value:{mode:"before",time:w[0].value.time}}]);o(t)}},className:w.length<2?"":"add-filter-disabled",children:Object(r.jsx)("img",{src:Ke,alt:"time filter"})})]}),Object(r.jsx)("hr",{})]}):Object(r.jsx)("div",{className:"none"})]})}function jt(e){var t=e.date,n=void 0===t?new Date:t,c=e.className,a=void 0===c?"":c,i=2*Math.PI*(60*n.getHours()+n.getMinutes())/720,s=2*Math.PI*n.getMinutes()/60;return Object(r.jsxs)("svg",{viewBox:"0 0 100 100",className:"analog-clock "+a,children:[Object(r.jsx)("circle",{className:"clock-outline",fill:"transparent",r:48,cx:50,cy:50}),Object(r.jsx)("g",{className:"clock-ticks",children:new Array(12).fill(1).map((function(e,t){return Object(r.jsx)("line",{x1:50+42*Math.sin(2*Math.PI*t/12),y1:50+42*Math.cos(2*Math.PI*t/12),x2:50+44*Math.sin(2*Math.PI*t/12),y2:50+44*Math.cos(2*Math.PI*t/12)})}))}),Object(r.jsx)("line",{x1:50,x2:50+24*Math.sin(i),y1:50,y2:50-24*Math.cos(i)}),Object(r.jsx)("line",{x1:50,x2:50+36*Math.sin(s),y1:50,y2:50-36*Math.cos(s)})]})}function dt(e){var t=e.entry,n=e.resolve,c=e.reject,a=De(),i=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.journal.hideEntry(t.id);case 3:n(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),c("Couldn't  successfully hide entry!");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"grid remove-entry-modal",children:[Object(r.jsxs)("p",{children:["Are you sure you want to hide your journal entry from ",K(t.start)," at ",X(t.start)]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:i,children:"Yes, hide it!"}),Object(r.jsx)("button",{onClick:function(){return c("Cancelled")},children:"No, don't!"})]})]})}function ft(e){var t=e.idx,n=De(),a=n.setModal,i=n.closeModal,s=Object(c.useState)(""),o=Object(f.a)(s,2),j=o[0],d=o[1],h=function(e){return new Promise(function(){var t=Object(l.a)(u.a.mark((function t(n,c){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a(Object(r.jsx)(dt,{entry:e,resolve:n,reject:c}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},m=function(e){return Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h(e);case 3:return t.prev=3,i(),t.finish(3);case 6:case"end":return t.stop()}}),t,null,[[0,,3,6]])})))};return Object(r.jsxs)("article",{className:j,children:[Object(r.jsxs)("header",{onClick:function(){d(""===j?"open":"")},children:[Object(r.jsx)(b,{short:G(t.list[0].start),children:t.meta.date}),Object(r.jsx)("ol",{children:t.list.map((function(e){return Object(r.jsx)("li",{children:Object(r.jsx)(jt,{date:e.start})})}))})]}),t.list.map((function(e){return Object(r.jsxs)("section",{children:[Object(r.jsxs)("header",{children:[Object(r.jsx)("span",{}),Object(r.jsxs)(p,{short:X(e.start),children:[X(e.start)," - ",X(e.end)]}),Object(r.jsx)("span",{onClick:m(e),children:Object(r.jsx)("img",{src:Le})})]}),("questions"===e.entryType||!e.entryType)&&e.questions.map((function(t,n){return Object(r.jsxs)("p",{children:[Object(r.jsxs)("b",{children:[t," "]}),e.answers[n]]},"".concat(e.id,"-question-").concat(n))})),"freeform"===e.entryType&&Object(r.jsx)("p",{children:e.freeform}),"audio"===e.entryType&&Object(r.jsxs)("figure",{children:[Object(r.jsx)("figcaption",{children:Object(r.jsx)("p",{children:e.audio.title})}),Object(r.jsx)("audio",{controls:!0,src:e.audio.url})]})]})}))]})}function ht(){var e=De(),t=e.auth.user,n=e.router.page,c=e.journal,a=c.entries;c.clearSearch,c.hideEntry,e.freeze;return t&&"journal"===n?Object(r.jsxs)("main",{className:"view-journal",children:[Object(r.jsx)(h,{children:"Journal"}),Object(r.jsx)(lt,{}),a.map((function(e){return Object(r.jsx)(ft,{idx:e})}))]}):null}var bt=function(e){var t=e.replaceAll(/[^0-9]/g,"");if(10!==t.length)throw new Error("Phone number must be 10 digits, current length: "+t.length);return"+1"+t},pt={"minus.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/cursor-creative" title="Cursor Creative">Cursor Creative</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"calendar.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"pen.svg":'Icons made by <a href="https://www.flaticon.com/authors/icongeek26" title="Icongeek26">Icongeek26</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"book.svg":'Icons made by <a href="https://www.flaticon.com/authors/zlatko-najdenovski" title="Zlatko Najdenovski">Zlatko Najdenovski</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"plus.svg":'Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"list.svg":'Icons made by <a href="https://www.flaticon.com/authors/phatplus" title="phatplus">phatplus</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"skill.svg":'Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"settings.svg":'Icons made by <a href="https://www.flaticon.com/authors/srip" title="srip">srip</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"search.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/pixel-perfect" title="Pixel perfect">Pixel perfect</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"filter.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/kirill-kazachek" title="Kirill Kazachek">Kirill Kazachek</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"stopwatch.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/good-ware" title="Good Ware">Good Ware</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"caret-down.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/dave-gandy" title="Dave Gandy">Dave Gandy</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"trash.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/dinosoftlabs" title="DinosoftLabs">DinosoftLabs</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"cancel.svg":'<div>Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"back.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/gregor-cresnar" title="Gregor Cresnar">Gregor Cresnar</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"next.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/gregor-cresnar" title="Gregor Cresnar">Gregor Cresnar</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"happy.svg":'<div>Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"dashboard.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/pixel-perfect" title="Pixel perfect">Pixel perfect</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"left-arrow.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/pixel-perfect" title="Pixel perfect">Pixel perfect</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"more.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/kirill-kazachek" title="Kirill Kazachek">Kirill Kazachek</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"ruler.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/good-ware" title="Good Ware">Good Ware</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"checkmark.svg":'<div>Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"key.svg":'<div>Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>'};n.p;var mt={boolean:"Yes/No",number:"Number Range"},xt=function(e){return new RegExp(/[0-9]/,"g").test(e)},Ot=function(e){return"Backspace"===e},gt=function(e){return"Left"===e||"ArrowLeft"===e},vt=function(e){return"Right"===e||"ArrowRight"===e},wt=function(e){return"."===e},yt=function(e){var t=e.value,n=e.setValue,c=e.placeholder;return Object(r.jsx)("span",{className:"inline-input",children:Object(r.jsx)("input",{placeholder:c,type:"tel",defaultValue:t,onBlur:function(e){return function(e){return 0===[xt,Ot,gt,vt,wt].filter((function(t){return t(e.key)})).length}(e)?e.target.value.length?void n(parseFloat(e.target.value)):n(0):e.preventDefault()}})})},kt=function(e){var t=e.value,n=e.setValue,c=e.placeholder;return Object(r.jsx)("span",{className:"inline-input",children:Object(r.jsx)("input",{placeholder:c,onChange:function(e){return n(e.target.value)},value:t})})};function St(){var e=De(),t=e.writing,n=t.questions,a=t.createQuestion,i=t.deleteQuestion,s=e.settings,o=(s.toggle,s.getSetting,e.metrix),j=o.metrix,d=o.createMetrix,h=o.deleteMetrix,b=e.freeze,p=Object(c.useState)("?"),m=Object(f.a)(p,2),x=m[0],O=m[1],g=Object(c.useState)(null),v=Object(f.a)(g,2),w=v[0],y=v[1],k=Object(c.useState)(""),S=Object(f.a)(k,2),C=S[0],N=S[1],M=Object(c.useState)(""),A=Object(f.a)(M,2),F=A[0],D=A[1],T=Object(c.useState)(""),q=Object(f.a)(T,2),P=q[0],I=q[1],E=Object(c.useState)("as needed"),z=Object(f.a)(E,2),R=z[0],Y=z[1],J=Object(c.useState)(null),W=Object(f.a)(J,2),L=W[0],B=W[1],H=Object(c.useState)(""),V=Object(f.a)(H,2),U=V[0],Q=V[1],G=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,t=b(),e.next=5,a(x);case 5:O("?"),t(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t();case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,t=b(),n={prompt:x,unit:w,frequency:R},L&&(n.unitLabel=L),"number"===w&&(n.range=[C,F],n.step=P),e.next=8,d(n);case 8:$(0),O("?"),y(null),N(""),D(""),I(""),Y("as needed"),B(""),t(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),t();case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(){return e.apply(this,arguments)}}(),X=Object(c.useState)(0),_=Object(f.a)(X,2),Z=_[0],$=_[1];Object(c.useEffect)((function(){Q("")}),[Z]);var ee=[Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Write a Custom Prompt"}),Object(r.jsx)("div",{contentEditable:!0,className:"add-question-input",onInput:function(e){return O(e.target.innerText)},children:"?"}),Object(r.jsx)("span",{children:Object(r.jsx)("button",{onClick:function(){return $(Z+1)},children:"Next"})})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Add a Metric?"}),Object(r.jsx)("p",{children:x}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return $(Z-1)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){return $(Z+1)},children:"Yes, Add Metric"}),Object(r.jsx)("button",{onClick:G,children:"No, Create Question"})]})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Select Metric Type"}),Object(r.jsx)("p",{children:x}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return $(Z-1)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){y("number"),$(Z+1)},children:"Numeric"}),Object(r.jsx)("button",{onClick:function(){y("boolean"),$(Z+2)},children:"Yes/No"})]})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Numeric Metric Details"}),Object(r.jsx)("p",{children:x}),U&&U.length>0&&Object(r.jsx)("p",{className:"error",children:U}),Object(r.jsxs)("p",{children:[null!==L?Object(r.jsxs)(r.Fragment,{children:["Measured with unit ",Object(r.jsx)(kt,{placeholder:"unit label",value:L,setValue:B})," from"]}):"From"," ",Object(r.jsx)(yt,{placeholder:"min",value:C,setValue:N})," to ",Object(r.jsx)(yt,{placeholder:"max",value:F,setValue:D}),"   in intervals of ",Object(r.jsx)(yt,{placeholder:"step",value:P,setValue:I}),"."]}),Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"checkbox",defaultChecked:L,onChange:function(e){return B(e.target.checked?"":null)}})," has unit label"]}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return $(Z-1)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){(function(){var e=[];return"number"!==typeof C&&e.push("min value must be a number"),"number"!==typeof F&&e.push("max value must be a number"),C>=F&&e.push("max value must be greater than min value"),("number"!==typeof P||P<=0)&&e.push("step interval must be a positive number"),e.length&&Q("Error: "+e.join(", ")),0===e.length})()&&$(Z+1)},children:"Set Frequency"})]})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Set Frequency"}),Object(r.jsx)("p",{children:x}),Object(r.jsx)("p",{children:mt[w]}),Object(r.jsxs)("p",{children:["This question should be answered ",Object(r.jsxs)("select",{onChange:function(e){return Y(e.target.value)},children:[Object(r.jsx)("option",{children:"as needed"}),Object(r.jsx)("option",{children:"daily"}),Object(r.jsx)("option",{children:"weekly"}),Object(r.jsx)("option",{children:"monthly"})]}),"."]}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return $(Z-1)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){return $(Z+1)},children:"Review"})]})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:x}),Object(r.jsxs)("p",{children:[mt[w]," - ",R]}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return $(Z-1)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){return K()},children:"Create Metric"})]})]})];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Default Prompts"}),Object(r.jsx)("ul",{className:"prompt-list",children:ye.map((function(e){return Object(r.jsx)("li",{className:"manage-default-question",children:e.prompt},"manage-default-questions-".concat(e.prompt))}))}),Object(r.jsx)("b",{children:"Custom Questions"}),Object(r.jsx)("ul",{className:"prompt-list",children:n.map((function(e){return Object(r.jsxs)("li",{className:"manage-custom-question",children:[Object(r.jsx)("span",{}),Object(r.jsx)("span",{children:e.prompt}),Object(r.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return i(e.id.split("-")[2])},children:Object(r.jsx)("img",{src:Le})})]},"manage-custom-question-".concat(e.id))}))}),Object(r.jsx)("b",{children:"Custom Metrix"}),Object(r.jsx)("ul",{className:"prompt-list",children:j.filter((function(e){return!e.isDefault})).map((function(e){return Object(r.jsxs)("li",{className:"manage-custom-metrix",children:[Object(r.jsx)("span",{}),Object(r.jsx)("span",{children:e.prompt}),Object(r.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return h(e.id)},children:Object(r.jsx)("img",{src:Le})})]},"manage-custom-metrix-".concat(e.id))}))}),Object(r.jsx)("div",{children:ee[Z]})]})}function Ct(){var e=De(),t=e.sharing.shareJournal,n=e.settings,a=Object(c.useRef)(),i=Object(c.useRef)(),s=Object(c.useRef)(),o=function(){var e=Object(l.a)(u.a.mark((function e(){var r,c,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.current.value,r=bt(r),c=i.current.value,o=s.current.value,e.next=6,t(r,c,o);case 6:l=e.sent,n.addSetting("share-".concat(l.id),!0),a.current.value="",s.current.value="";case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"action",children:[Object(r.jsx)("b",{style:{textDecoration:"none"},children:"Share Your Journal With"}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{ref:s,placeholder:"James Allen"}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"tel",ref:a,placeholder:"123-456-7890"}),Object(r.jsx)("br",{}),Object(r.jsx)("b",{style:{textDecoration:"none"},children:"Your Name"}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{ref:i}),Object(r.jsx)("br",{}),Object(r.jsx)("span",{onClick:o,children:"Submit"})]})}function Nt(){var e=De(),t=e.freeze,n=e.sharing,c=n.sharedByMe,i=n.toggleFreeze,s=function(e){return Object(l.a)(u.a.mark((function n(){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t(""),n.prev=1,n.next=4,i(e.id);case 4:r(),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),r();case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))};return Object(r.jsxs)("div",{children:[Object(r.jsx)("b",{style:{textDecoration:"none"},children:"Who You Share Your Journal With"}),Object(r.jsx)("hr",{style:{width:"25vw"}}),0===c.length&&Object(r.jsx)("span",{style:{textDecoration:"none"},children:"You haven't shared your journal - no pressure"}),c.map((function(e){return Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsx)(Ft,{onToggle:s(e),title:e.shareWithName||e.shareWith,setting:"share-".concat(e.id)}),Object(r.jsx)("br",{})]},"share-".concat(e.id))}))]})}function Mt(){var e=De(),t=e.sharing.sharedWithMe,n=e.viewSharedJournal,c=t.filter((function(e){return!e.frozen}));return 0===c.length?Object(r.jsx)("div",{className:"none"}):Object(r.jsxs)("div",{className:"action",children:[Object(r.jsx)("b",{style:{textDecoration:"none"},children:"Journals Shared With You"}),Object(r.jsx)("hr",{style:{width:"25vw"}}),c.map((function(e){return Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsx)("span",{onClick:function(){return n(e.userId)},children:e.name}),Object(r.jsx)("br",{})]},"share-".concat(e.id))}))]})}function At(e){var t=e.longTitle,n=e.shortTitle,a=e.children,i=Object(c.useState)(!1),s=Object(f.a)(i,2),o=s[0],u=s[1];return Object(r.jsxs)("div",{className:"setting-group"+(o?" open":""),children:[Object(r.jsxs)("header",{onClick:function(){return u(!o)},children:[Object(r.jsx)("span",{}),Object(r.jsx)(p,{short:n,children:t}),Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:Ve})})]}),a,Object(r.jsx)("div",{})]})}function Ft(e){var t=e.setting,n=e.title,c=e.relationships,a=void 0===c?[]:c,i=e.onToggle,s=De().settings,o=s.getSetting,u=s.toggle;return a.reduce((function(e,t){if(!e)return e;if("+"!==t.charAt(0))return e;var n=t.substring(1);return o(n)}),!0)?Object(r.jsxs)("div",{className:"setting",children:[Object(r.jsx)("div",{children:Object(r.jsx)("b",{children:n})}),Object(r.jsx)("div",{children:Object(r.jsx)("span",{onClick:i||u(t,a),className:o(t)?"toggle on":"toggle"})})]}):Object(r.jsx)("div",{className:"none"})}var Dt=function(){var e=De(),t=e.router,n=t.page,a=(t.redirect,e.settings),i=a.getSetting,s=(a.iter,e.auth),o=s.user,u=s.logout,l=Object(c.useState)("attributions"),j=Object(f.a)(l,2),d=j[0],b=j[1];return o&&"settings"===n?Object(r.jsxs)("main",{className:"settings",children:[Object(r.jsx)(h,{children:"Settings"}),Object(r.jsxs)("div",{className:"settings-container",children:[Object(r.jsxs)(At,{longTitle:"Journal Settings",shortTitle:"Journal",children:[Object(r.jsx)("p",{children:"Make journal entries the way you want to make them. These settings are specific to your device, so you can have different preferences on your phone, tablet, laptop or whatever else you use!"}),Object(r.jsx)(Ft,{setting:"freeform",title:"Enable Freeform"}),i("freeform")&&Object(r.jsx)(Ft,{setting:"audio-recording",title:"Enable Audio Recording"}),Object(r.jsx)(Ft,{setting:"default-questions",title:"Show Default Questions"}),Object(r.jsx)(Ft,{setting:"custom-questions",title:"Show Custom Questions"}),Object(r.jsx)(Ft,{setting:"use-metrix",title:"Show Custom Metrix"})]}),Object(r.jsx)(At,{shortTitle:"Prompts",longTitle:"Manage Prompts",children:Object(r.jsx)(St,{})}),Object(r.jsxs)(At,{shortTitle:"Sharing",longTitle:"Manage Journal Sharing",children:[Object(r.jsx)("p",{children:"View journals shared with you and who you've shared your journal with."}),Object(r.jsx)(Mt,{}),Object(r.jsx)(Nt,{}),Object(r.jsx)(Ct,{})]}),Object(r.jsxs)(At,{shortTitle:"Misc",longTitle:"Miscellaneous",children:[Object(r.jsx)("div",{className:"action",children:window.navigator.canShare&&Object(r.jsx)("span",{onClick:function(){window.navigator.share({title:"My Journal",url:"https://lincoln-howard-jr.github.io/journal/"})},children:"Share This Application"})}),Object(r.jsx)("div",{className:"action",children:Object(r.jsx)("span",{onClick:u,children:"Log Out"})}),"attributions"===d&&Object(r.jsx)("div",{className:"action",children:Object(r.jsx)("span",{onClick:function(){return b("")},children:"Show Attributions"})}),Object(r.jsxs)("div",{className:"attributions",id:d,children:[Object(r.jsx)("div",{className:"fake-button",children:Object(r.jsx)("span",{onClick:function(){return b("attributions")},children:"Hide Attributions"})}),Object(r.jsx)("ul",{children:Object.keys(pt).map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsx)("b",{children:e}),Object(r.jsx)("br",{}),Object(r.jsx)("span",{dangerouslySetInnerHTML:{__html:pt[e]}})]},"attribiution-".concat(e))}))})]})]})]})]}):null};function Tt(){var e=De(),t=e.auth.user,n=e.router.page,a=e.skills,i=a.skills,s=a.submitSkill,o=a.removeSkill,j=e.freeze,d=Object(c.useState)(null),m=Object(f.a)(d,2),x=m[0],O=m[1],g=Object(c.useState)(null),v=Object(f.a)(g,2),w=v[0],y=v[1],k=Object(c.useRef)(),S=Object(c.useRef)(),C=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault&&t.preventDefault(),n=j(),e.prev=2,r=k.current.value,c=S.current.innerText,e.next=7,s({category:r,skill:c});case 7:k.current.value="Tools For ...",S.current.innerText="...",n(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),y("Error while submitting skill, try again in a few..."),n();case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return t?"skills"!==n?null:Object(r.jsxs)("main",{children:[Object(r.jsx)(h,{children:"Skills"}),Object(r.jsx)("p",{style:{maxWidth:"60ch",margin:"15px auto"},children:"Treat this as a reference sheet for your coping skills for a given situation. You are unique and so are the things that work for you - so add whatever you works for you!"}),Object(r.jsx)("datalist",{id:"skills-categories",children:i.map((function(e){return Object(r.jsx)("option",{children:e.meta.category})}))}),!!w&&Object(r.jsx)("p",{style:{maxWidth:"60ch",margin:"15px auto"},children:w}),Object(r.jsxs)("form",{onSubmit:C,className:"new-skill-form",children:[Object(r.jsx)(p,{children:"Add a Skill"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Category:"}),Object(r.jsx)("input",{list:"skills-categories",ref:k,defaultValue:"Tools For"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Skill:"}),Object(r.jsx)("p",{style:{padding:7.5},ref:S,contentEditable:!0,children:"..."})]}),Object(r.jsx)("button",{onClick:C,children:"Add Skill"})]}),i.map((function(e){return Object(r.jsxs)("section",{className:"skill-category-container".concat(x===e.meta.category?" open":""),children:[Object(r.jsx)("header",{style:{cursor:"pointer"},onClick:function(){return x===e.meta.category?O(null):O(e.meta.category)},children:Object(r.jsx)(b,{children:e.meta.category})}),e.list.map((function(t){return Object(r.jsxs)("div",{className:"single-skill",children:[Object(r.jsx)("span",{children:t.skill}),x===e.meta.category&&Object(r.jsx)("span",{onClick:function(){return o(t.id)},children:Object(r.jsx)("img",{src:Le})})]})}))]},"cat-".concat(e.meta.category))}))]}):null}function qt(){var e=De(),t=e.auth.user,n=e.router,c=n.page,a=n.redirect,i=e.viewMode.isViewOnly,s=e.viewMyJournal;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("nav",{className:i?"view-only":"",children:Object(r.jsxs)("ul",{children:[i&&Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("li",{className:"write"===c?"active":"",onClick:s,children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:nt}),Object(r.jsx)("label",{children:"Go Back"})]})}),Object(r.jsxs)("li",{className:"skills"===c?"active":"",onClick:function(){a("/?page=skills")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:it}),Object(r.jsx)("label",{children:"Skills"})]}),Object(r.jsxs)("li",{className:"journal"===c?"active":"",onClick:function(){a("/?page=journal")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:et}),Object(r.jsx)("label",{children:"Journal"})]}),Object(r.jsxs)("li",{className:"metrix"===c?"active":"",onClick:function(){a("/?page=metrix")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:ct}),Object(r.jsx)("label",{children:"Metrix"})]}),Object(r.jsxs)("li",{className:"dashboard"===c?"active":"",onClick:function(){a("/?page=dashboard")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:tt}),Object(r.jsx)("label",{children:"Dash"})]})]})}),"settings"!==c&&t&&Object(r.jsx)("div",{onClick:function(){return a("/?page=settings")},id:"settings-menu-icon",children:Object(r.jsx)("img",{src:at,alt:""})})]})}function Pt(){var e=De().auth,t=e.user,n=e.login,a=e.register,i=Object(c.useState)(""),s=Object(f.a)(i,2),o=s[0],d=s[1],b=Object(c.useState)(!1),p=Object(f.a)(b,2),m=p[0],x=p[1],O=Object(c.useState)((function(e){return function(){return console.log(e)}})),g=Object(f.a)(O,2),v=g[0],w=g[1],y=Object(c.useRef)(),k=function(e){return d(function(e){var t=function(e){return e.replaceAll(/[^0-9]/g,"")}(e);return t.length>10&&(t=t.substr(0,10)),console.log(t),0===t.length?t:t.length<4?"(".concat(t):t.length<7?"(".concat(t.substr(0,3),") ").concat(t.substr(3)):"(".concat(t.substr(0,3),") ").concat(t.substr(3,3),"-").concat(t.substr(6))}(e))},S=function(e){x(!0),w((function(){return function(){e(y.current.value)}})),y.current.focus()},C=Object(c.useState)(!1),N=Object(f.a)(C,2),M=N[0],A=N[1],F=Object(c.useState)(null),D=Object(f.a)(F,2),T=D[0],q=D[1],P=function(){A(!0)},I=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=bt(o),e.next=4,a(t,S,P);case 4:q(null),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),q(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=bt(o),e.next=4,n(t,S,P);case 4:q(null),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),q(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return t?null:Object(r.jsxs)("main",{children:[Object(r.jsx)(h,{children:"Your Journal"}),Object(r.jsxs)("div",{className:"grid",children:[Object(r.jsx)("h3",{children:M?"Your secret code in on the way!":"Enter your phone number:"}),Object(r.jsx)("span",{style:{display:null!==T?"grid":"none"},className:"error",children:null===T||void 0===T?void 0:T.message})]}),Object(r.jsx)("div",{className:"phone-number-input",children:Object(r.jsx)("input",{autoComplete:"tel-local",type:"tel",placeholder:"123-456-7890",value:o,onChange:function(e){return k(e.target.value)},disabled:!!m})}),m&&Object(r.jsx)("div",{className:"phone-number-input",children:Object(r.jsx)("input",Object(j.a)({ref:y,autoComplete:"one-time-code",placeholder:"Secret Code"},"ref",y))}),Object(r.jsxs)("div",{className:"phone-number-input",children:[!m&&Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:E,children:"Login"}),Object(r.jsx)("button",{onClick:I,children:"Register"})]}),m&&Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("button",{onClick:v,children:"Submit!"})})]}),Object(r.jsxs)("section",{children:[Object(r.jsx)("h3",{children:"About Us"}),Object(r.jsx)("hr",{}),Object(r.jsx)("b",{children:"Why A Journal?"}),Object(r.jsx)("p",{children:"Journaling provides anyone with a structure to deeper understanding of themselves and their emotional wellbeing. Oftentimes describing a situation or emotion in writing provides a sense of clarity not found in other ways. Also available to you is a place to write down and sort skills you have learned."}),Object(r.jsx)("b",{children:"How Does It Work?"}),Object(r.jsx)("p",{children:'To start, register an account with your phone number. You will be texted a secret code. Enter that and... well that\'s it, you now have your very own journal! To put it simply, you write details about your life in your journal. Again, but in more detail, you can structure your journal in different ways. Journal entries can be formatted as "question and answer" or as "freeform writing" or "audio journaling" (this is easily switched with one click in the settings tab). All journal entries automatically include the date and time of writing and can be found listed in chronological order. You also can curate a list of skills for different situations and share your journal if need be.'})]}),Object(r.jsxs)("section",{children:[Object(r.jsx)("h3",{children:"Terms of Service"}),Object(r.jsx)("hr",{}),Object(r.jsx)("b",{children:"Privacy"}),Object(r.jsx)("p",{children:"None of your information (journal entries, coping skills, phone number, etc) will be publicly available nor will it be shared unless you explicitly share it."}),Object(r.jsx)("b",{children:"Sharing"}),Object(r.jsx)("p",{children:"By nature of being a journaling application, the contained subject matter will often be sensitive information. With this application, you can share your journal with anyone. However, it is recommended for, and with intention of, sharing with medical professionals only. In the case of abuse of this feature deemed detrimental to the health of another individual, we retain the right to terminate your account."})]})]})}var It=175;function Et(e){var t=e.start,n=e.size;return Object(r.jsx)("circle",{fill:"transparent",cx:375,cy:250,r:It,strokeWidth:17.5,strokeDasharray:"".concat(2*Math.PI*It),strokeDashoffset:"".concat(2*Math.PI*It*(100-n)/100),style:{transformOrigin:"center",transform:"rotate(".concat(360*t/100-90,"deg)")}})}function zt(e){var t=e.data,n=void 0===t?[]:t;return Object(r.jsxs)("svg",{className:"pie-chart",viewBox:"0 0 ".concat(750," ").concat(500),children:[Object(r.jsx)("g",{className:"the-pie",children:n.map((function(e){return Object(r.jsx)(Et,Object(d.a)({},e))}))}),Object(r.jsx)("g",{className:"legend",children:n.map((function(e,t){return Object(r.jsx)("text",{textAnchor:"middle",x:375,y:25*n.length*(t-(n.length-1)/2)/((n.length-1)/2)+250,children:e.label})}))})]})}var Rt=750,Yt=500,Jt=35,Wt=125,Lt=864e5;function Bt(e,t){var n=t.toLowerCase();return e.includes(n)?e.filter((function(e){return e!==n})):e.length<4?[].concat(Object(W.a)(e),[n]):e}function Ht(){var e=De().journal.entries,t=Object(c.useState)([]),n=Object(f.a)(t,2),a=n[0],i=n[1],s=Object(c.useReducer)(Bt,[]),o=Object(f.a)(s,2),u=o[0],l=o[1],j=Object(c.useState)([]),d=Object(f.a)(j,2),h=d[0],b=d[1],p=Object(c.useState)(new Date),m=Object(f.a)(p,2),x=m[0],O=m[1],g=Object(c.useState)(new Date),v=Object(f.a)(g,2),w=v[0],y=v[1],k=Object(c.useState)(1),S=Object(f.a)(k,2),C=S[0],N=S[1],M=function(e){return e/C};Object(c.useEffect)((function(){if(0!==e.length){var t=e.map((function(e){return Object.assign(e,{date:_(e.date)})}));t=(t=t.sort((function(e,t){return e.date-t.date}))).map((function(e){var t=e.list.map((function(e){return"questions"===e.entryType|!e.entryType?e.answers.join(" "):"freeform"===e.entryType?e.freeform:""})).join(" ").toLowerCase();return Object.assign(e,{text:t})})),i(t),O(t[0].date),y(t[t.length-1].date)}}),[e]),Object(c.useEffect)((function(){for(var e=Math.floor((w.getTime()-x.getTime())/Lt),t=u.map((function(){return new Array(e).fill(0)})),n=0,r=0;r<e;r++){if(!(new Date(x.getTime()+r*Lt)<a[n].date)){for(var c=0;c<t.length;c++)t[c][r]=a[n].text.split(u[c]).length-1;n++}}var i=Math.max.apply(Math,Object(W.a)(t.flat()));i<1&&(i=1),N(i),b(t)}),[u]);return Object(r.jsxs)("figure",{className:"keywords",children:[Object(r.jsx)("figcaption",{children:"Keyword Search"}),Object(r.jsx)("section",{className:"keyword-container",children:Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l(e.target.elements.keyword.value),e.target.elements.keyword.value=""},className:"keyword-search",children:[Object(r.jsx)("input",{name:"keyword",placeholder:"keyword",autoComplete:"off"}),Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"submit",hidden:!0})," ",Object(r.jsx)("img",{src:Ze})]})]})}),Object(r.jsxs)("svg",{className:"keyword-chart",viewBox:"0 0 ".concat(Rt," ").concat(Yt),children:[Object(r.jsxs)("g",{className:"keyword-chart-axis",children:[Object(r.jsx)("line",{x1:Jt,x2:715,y1:465,y2:465}),Object(r.jsx)("line",{x1:Jt,x2:Jt,y1:465,y2:160}),Object(r.jsx)("text",{x:17.5,y:465,textAnchor:"middle",children:"0"}),Object(r.jsx)("text",{x:17.5,y:160,textAnchor:"middle",children:C}),Object(r.jsx)("text",{x:87.5,y:491.25,textAnchor:"middle",children:G(x)}),Object(r.jsx)("text",{x:662.5,y:491.25,textAnchor:"middle",children:G(w)}),Object(r.jsx)("g",{className:"keyword-chart-labels",children:u.map((function(e,t){return Object(r.jsx)("text",{textAnchor:"middle",x:Jt+(t+.5)*Rt/4,y:Wt,onClick:function(){return l(e)},children:e})}))})]}),h.map((function(e,t){return Object(r.jsx)("g",{className:"keyword-trendline-".concat(t+1),children:e.map((function(t,n){return n===e.length-1?null:Object(r.jsx)("line",{x1:Jt+680*n/e.length,x2:Jt+680*(n+1)/e.length,y1:465-305*M(t),y2:465-305*M(e[n+1])})}))},"keyword-trendline-".concat(u[t]))}))]},"keyword-chart")]})}function Vt(e){var t=e.key,n=e.time,c=e.i,a=e.hourlyMax,i=e.onClick,s=n.filter((function(e){return"questions"===e.entryType||!e.entryType})).length,o=n.filter((function(e){return"freeform"===e.entryType})).length,u=n.filter((function(e){return"audio"===e.entryType})).length,l=s+o+u,j=[u/l,o/l,s/l],f=610,h=61/24,b={x:70+h+c*f/24,width:24.145833333333336},p=430-330*n.length/a,m=330*n.length/a,x=[Object(d.a)(Object(d.a)({},b),{},{key:"bar-".concat(c,"-breakdown-",0),y:p,height:j.length>0?j[0]*m:0}),Object(d.a)(Object(d.a)({},b),{},{key:"bar-".concat(c,"-breakdown-",1),y:j.length>0?p+j[0]*m:p,height:j.length>0?j[1]*m:0}),Object(d.a)(Object(d.a)({},b),{},{key:"bar-".concat(c,"-breakdown-",2),y:j.length>0?p+(1-j[2])*m:0,height:j.length>0?j[2]*m:0})];return x=(x=x.map((function(e){return isNaN(e.height)?Object(d.a)(Object(d.a)({},e),{},{height:0}):e}))).map((function(e){return isNaN(e.y)?Object(d.a)(Object(d.a)({},e),{},{y:0}):e})),Object(r.jsxs)("g",{className:"bar-chart-bar",onClick:i,children:[Object(r.jsx)("g",{className:"bar-chart-bar-group",children:x.map((function(e){return Object(r.jsx)("rect",Object(d.a)({},e))}))}),Object(r.jsxs)("text",{style:{transformOrigin:"".concat(100*(70+(c-.5)*f/24)/Rt,"% ").concat(98,"%")},className:"bar-chart-bar-label",textAnchor:"center",x:70+(c-.5)*f/24,y:465,children:[c%12||12,c>11?"PM":"AM"]})]},t)}var Ut=Object(c.memo)(Vt);function Qt(e){var t=e.number;return Object(r.jsxs)("svg",{viewBox:"0 0 100 100",className:"number-counter",children:[Object(r.jsx)("rect",{x:10,y:10,width:80,height:80,rx:5}),Object(r.jsx)("text",{textAnchor:"middle",x:50,y:65,children:t})]})}var Gt=function(){var e=new Date;return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),[new Date(e.getFullYear(),e.getMonth(),e.getDate()-7),e]},Kt=function(){var e=Gt(),t=Object(f.a)(e,2),n=t[0],r=t[1];return function(e){return e<r&&e>n}};function Xt(){var e=De(),t=e.journal,n=t.entryList,a=t.entries,i=(t.setFilters,e.router.redirect,Kt()),s=Gt(),o=(Object(f.a)(s,1)[0],Object(c.useState)("...")),u=Object(f.a)(o,2),l=u[0],j=u[1];return Object(c.useEffect)((function(){n.length&&j(""+n.filter((function(e){return i(e.start)})).length)}),[a]),Object(r.jsxs)("figure",{children:[Object(r.jsxs)("figcaption",{children:["Entries",Object(r.jsx)("br",{}),"(Past Week)"]}),Object(r.jsx)(Qt,{number:l})]})}function _t(){var e=De().journal,t=e.entryList,n=e.entries,a=Kt(),i=Object(c.useState)("..."),s=Object(f.a)(i,2),o=s[0],u=s[1];return Object(c.useEffect)((function(){if(t.length){var e=t.filter((function(e){return a(e.start)})).reduce((function(e,t){return e+("questions"===t.entryType?t.questions.length:0)}),0);u(e)}}),[n]),Object(r.jsxs)("figure",{children:[Object(r.jsxs)("figcaption",{children:["Questions Answered",Object(r.jsx)("br",{}),"(Past Week)"]}),Object(r.jsx)(Qt,{number:o})]})}function Zt(){var e=De().journal,t=e.entryList,n=e.entries,a=Object(c.useState)("..."),i=Object(f.a)(a,2),s=i[0],o=i[1];return Object(c.useEffect)((function(){if(n.length){var e=n.map((function(e){return new Date(e.list[0].start)})),r=new Date(Math.min.apply(Math,Object(W.a)(e)));r=new Date(r.getFullYear(),r.getMonth(),r.getDate());var c=new Date,a=((c=new Date(c.getFullYear(),c.getMonth(),c.getDate()))-r)/864e5,i=t.length/a;o(i.toFixed(1))}}),[n]),Object(r.jsxs)("figure",{children:[Object(r.jsxs)("figcaption",{children:["Entries",Object(r.jsx)("br",{}),"(Per Day)"]}),Object(r.jsx)(Qt,{number:s})]})}function $t(){var e=De().skills.skills,t=Object(c.useState)("..."),n=Object(f.a)(t,2),a=n[0],i=n[1];return Object(c.useEffect)((function(){e&&e.length&&i(e.reduce((function(e,t){return e+t.list.length}),0))}),[e]),Object(r.jsxs)("figure",{children:[Object(r.jsxs)("figcaption",{children:["Your Skills",Object(r.jsx)("br",{}),"(All Time)"]}),Object(r.jsx)(Qt,{number:a})]})}var en=function(e,t){return e[new Date(t.start).getHours()].push(t),e},tn=function(){var e=De(),t=e.journal,n=t.entryList,a=t.setFilters,i=e.router.redirect,s=Object(c.useState)(null),o=Object(f.a)(s,2),j=o[0],d=o[1],h=Object(c.useState)(null),b=Object(f.a)(h,2),p=b[0],m=b[1],x=function(e){return Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a([{type:"time",value:{mode:"after",time:"".concat(e%12||12,":00 ").concat(e<12?"am":"pm")}},{type:"time",value:{mode:"before",time:"".concat((e+1)%12||12,":00 ").concat(e+1<12?"am":"pm")}}]),i("/?page=journal");case 2:case"end":return t.stop()}}),t)})))};return Object(c.useEffect)((function(){var e=n.reduce(en,new Array(24).fill(1).map((function(){return[]})));m(e.reduce((function(e,t){return t.length>e?t.length:e}),1)),d(e)}),[n]),null!==p&&j?Object(r.jsxs)("figure",{className:"time-of-day",children:[Object(r.jsx)("figcaption",{children:"Entries By Time Of Day"}),Object(r.jsxs)("svg",{viewBox:"0 0 ".concat(Rt," ").concat(Yt),children:[Object(r.jsx)("line",{x1:70,y1:430,x2:680,y2:430}),Object(r.jsx)(Ut,{time:j[0],i:0,hourlyMax:p,onClick:x(0)}),Object(r.jsx)(Ut,{time:j[1],i:1,hourlyMax:p,onClick:x(1)}),Object(r.jsx)(Ut,{time:j[2],i:2,hourlyMax:p,onClick:x(2)}),Object(r.jsx)(Ut,{time:j[3],i:3,hourlyMax:p,onClick:x(3)}),Object(r.jsx)(Ut,{time:j[4],i:4,hourlyMax:p,onClick:x(4)}),Object(r.jsx)(Ut,{time:j[5],i:5,hourlyMax:p,onClick:x(5)}),Object(r.jsx)(Ut,{time:j[6],i:6,hourlyMax:p,onClick:x(6)}),Object(r.jsx)(Ut,{time:j[7],i:7,hourlyMax:p,onClick:x(7)}),Object(r.jsx)(Ut,{time:j[8],i:8,hourlyMax:p,onClick:x(8)}),Object(r.jsx)(Ut,{time:j[9],i:9,hourlyMax:p,onClick:x(9)}),Object(r.jsx)(Ut,{time:j[10],i:10,hourlyMax:p,onClick:x(10)}),Object(r.jsx)(Ut,{time:j[11],i:11,hourlyMax:p,onClick:x(11)}),Object(r.jsx)(Ut,{time:j[12],i:12,hourlyMax:p,onClick:x(12)}),Object(r.jsx)(Ut,{time:j[13],i:13,hourlyMax:p,onClick:x(13)}),Object(r.jsx)(Ut,{time:j[14],i:14,hourlyMax:p,onClick:x(14)}),Object(r.jsx)(Ut,{time:j[15],i:15,hourlyMax:p,onClick:x(15)}),Object(r.jsx)(Ut,{time:j[16],i:16,hourlyMax:p,onClick:x(16)}),Object(r.jsx)(Ut,{time:j[17],i:17,hourlyMax:p,onClick:x(17)}),Object(r.jsx)(Ut,{time:j[18],i:18,hourlyMax:p,onClick:x(18)}),Object(r.jsx)(Ut,{time:j[19],i:19,hourlyMax:p,onClick:x(19)}),Object(r.jsx)(Ut,{time:j[20],i:20,hourlyMax:p,onClick:x(20)}),Object(r.jsx)(Ut,{time:j[21],i:21,hourlyMax:p,onClick:x(21)}),Object(r.jsx)(Ut,{time:j[22],i:22,hourlyMax:p,onClick:x(22)}),Object(r.jsx)(Ut,{time:j[23],i:23,hourlyMax:p,onClick:x(23)}),Object(r.jsxs)("g",{className:"bar-chart-text",children:[Object(r.jsx)("text",{x:83.33333333333333,y:50,children:"Questions"}),Object(r.jsx)("text",{x:3e3/9,y:50,children:"Freeform"}),Object(r.jsx)("text",{x:5250/9,y:50,children:"Audio"})]})]},"time-of-day-svg")]}):null},nn=new Date;nn=new Date(nn.getFullYear(),nn.getMonth(),nn.getDate()+1);var rn=864e5;var cn={boolean:Object(c.memo)((function(e){var t=e.mezs,n=e.metric;if(!t.length)return Object(r.jsx)("p",{children:"No measurements yet!"});var c,a=t.filter((function(e){return"Yes"===e.measurement})).length,i=t.filter((function(e){return"No"===e.measurement})).length,s=0;"daily"===n.frequency&&(c=t[0].measuredAt,s=Math.ceil((nn.getTime()-c.getTime())/rn)-a-i),"weekly"===n.frequency&&(s=function(e){return Math.ceil((nn.getTime()-e.getTime())/6048e5)}(t[0].measuredAt)-a-i),"monthly"===n.frequency&&(s=function(e){return 12*(nn.getFullYear()-e.getFullYear())+nn.getMonth()-e.getMonth()}(t[0].measuredAt)-a-i);var o=a+i+s,u=[{label:"Yes",size:100*a/o,start:0},{label:"No",size:100*i/o,start:100*a/o}];return s&&u.push({label:"Blank",size:100*s/o,start:100-100*s/o}),Object(r.jsx)(zt,{data:u})})),number:Object(c.memo)((function(e){var t=e.mezs,n=e.onClick,c=e.metric;if(!t.length)return Object(r.jsx)("p",{children:"No measurements yet!"});var a=[t[0].measuredAt,nn],i=function(e){return Jt+680*(e-a[0])/(a[1]-a[0])},s=c.range,o=function(e){return Jt+(430-430*(e-s[0])/(s[1]-s[0]))};return Object(r.jsxs)("svg",{className:"single-metrix-graph",viewBox:"0 0 ".concat(Rt," ").concat(Yt),children:[Object(r.jsxs)("g",{className:"single-metrix-axis",children:[Object(r.jsx)("line",{x1:i(a[0]),x2:i(a[1]),y1:o(s[0]),y2:o(s[0])}),Object(r.jsx)("line",{x1:i(a[0]),x2:i(a[0]),y1:o(s[0]),y2:o(s[1])}),Object(r.jsx)("text",{x:i(a[0])-Jt,y:o(s[0]),textAnchor:"start",children:s[0]}),Object(r.jsx)("text",{x:i(a[0])-Jt,y:o(s[1]),textAnchor:"start",children:s[1]}),Object(r.jsx)("text",{x:i(a[0])+Jt,y:o(s[0])+Jt,textAnchor:"middle",children:G(a[0])}),Object(r.jsx)("text",{x:i(a[1])-Jt,y:o(s[0])+Jt,textAnchor:"middle",children:G(a[1])})]}),Object(r.jsx)("g",{children:t.map((function(e){return Object(r.jsx)("circle",{style:{transformOrigin:"".concat(100*i(e.measuredAt)/Rt,"% ").concat(93,"%")},onClick:n(e),cx:i(e.measuredAt),cy:o(e.measurement),r:8},"metrix-graph-circle-".concat(e.id))}))})]})}))};function an(){var e=De(),t=e.metrix,n=t.metrix,a=t.setSingleMetrix,i=t.setSingleMeasurement,s=t.measurements,o=e.router.redirect,u=Object(c.useState)(null),l=Object(f.a)(u,2),j=l[0],d=l[1],h=Object(c.useState)(!1),b=Object(f.a)(h,2),p=b[0],m=b[1];if(Object(c.useEffect)((function(){n.length&&s.length&&d(0)}),[n,s]),null===j)return null;var x=n[j],O=s.filter((function(e){return e.metric===n[j].id})).sort((function(e,t){return e.measuredAt-t.measuredAt})),g=cn[x.unit];return Object(r.jsxs)("figure",{className:"single-metrix-carousel",children:[Object(r.jsxs)("figcaption",{children:[p&&Object(r.jsxs)(r.Fragment,{children:["Switch to another metrix:",Object(r.jsx)("br",{}),Object(r.jsxs)("select",{onChange:function(e){d(e.target.value),m(!1)},children:[Object(r.jsx)("option",{value:j}),n.filter((function(e){return e.id!==x.id})).map((function(e){return Object(r.jsx)("option",{value:n.indexOf(e),children:e.prompt},"metrix-carousel-select-".concat(e.id))}))]})]}),!p&&Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{children:x.prompt}),Object(r.jsx)("span",{onClick:m,children:Object(r.jsx)("img",{style:{cursor:"pointer"},src:Ve})})]})]}),Object(r.jsx)(g,{onClick:function(e){return function(){a(n[j]),i(e),o("/?page=metrix")}},metric:x,mezs:O})]})}var sn=function(e,t){return e[new Date(t.start).getHours()].push(t),e},on=function(e,t){return e[t.entryType]?e[t.entryType].push(t):e[t.entryType]=[t],e};function un(){var e=De(),t=e.journal,n=t.entryList,a=(t.setFilters,e.router.redirect,Object(c.useState)(null)),i=Object(f.a)(a,2),s=i[0],o=i[1],u=Object(c.useState)(null),l=Object(f.a)(u,2),j=l[0],d=l[1],h=Object(c.useState)(-1),b=Object(f.a)(h,2),p=(b[0],b[1]);if(Object(c.useEffect)((function(){var e=n.reduce(sn,new Array(24).fill(1).map((function(){return[]})));p(e.reduce((function(e,t){return t.length>e?t.length:e}),1)),o(e),d(function(e){for(var t=e.reduce(on,{}),n=Object.keys(t),r=[];n.length>0;){var c=n.pop(),a=0===r.length?0:r[0].start+r[0].size,i=100*t[c].length/e.length;r.unshift({label:c,start:a,size:i})}return r}(n))}),[n]),!s)return null;var m=[Object(r.jsx)(tn,{}),Object(r.jsxs)("figure",{className:"type-of-entry",children:[Object(r.jsx)("figcaption",{children:"Entries By Type"}),Object(r.jsx)(zt,{data:j})]}),Object(r.jsx)(Ht,{}),Object(r.jsx)(an,{})];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"row two-items",children:[m[1],m[0]]}),Object(r.jsx)("div",{className:"row one-item",children:m[3]}),Object(r.jsxs)("div",{className:"row four-items",children:[Object(r.jsx)(_t,{}),Object(r.jsx)(Xt,{}),Object(r.jsx)(Zt,{}),Object(r.jsx)($t,{})]}),Object(r.jsx)("div",{className:"row one-item",children:m[2]})]})}var ln=function(){var e=De(),t=e.router.page,n=e.journal.entryList;return"dashboard"!==t?null:n.length<10?Object(r.jsxs)("main",{children:[Object(r.jsx)(h,{children:"Dashboard"}),Object(r.jsxs)(p,{children:["Unlock ",Object(r.jsx)("span",{style:{display:"inline-block",marginInline:"var(--body-text-size)",width:"var(--h3-font-size)"},children:Object(r.jsx)("img",{style:{width:"100%"},src:ot})})," the dashboard when you make 10 journal entries!"]}),Object(r.jsxs)(p,{children:["Only ",10-n.length," entries to go!"]}),Object(r.jsx)(jt,{className:"large"}),Object(r.jsx)(p,{children:"It's only a matter of time!"})]}):Object(r.jsxs)("main",{className:"dashboard",children:[Object(r.jsx)(h,{children:"Dashboard"}),Object(r.jsx)(un,{})]})};n(254);function jn(){var e=De(),t=e.auth.user,n=e.router.page,a=e.metrix,i=a.metrix,s=a.measurements,o=a.getMeasurements,j=a.singleMetrix,b=a.setSingleMetrix,p=a.updateMeasurement,m=a.measureHistoric,x=Object(c.useState)([]),O=Object(f.a)(x,2),g=O[0],v=O[1],w=Object(c.useState)([]),y=Object(f.a)(w,2),k=y[0],S=y[1],C=Object(c.useState)([]),N=Object(f.a)(C,2),M=N[0],A=(N[1],Object(c.useState)(!1)),F=Object(f.a)(A,2),D=(F[0],F[1]),T=Object(c.useState)(!1),q=Object(f.a)(T,2),P=q[0],I=q[1],E=function(e){var t=e.id,n=function(e){var t=e.id;return M.filter((function(e){return e===t})).length>0}({id:t})?" selected":" ",r=Y===t?" editing":"";return"".concat(n).concat(r)};Object(c.useEffect)((function(){g.length&&D(M.length===g.length)}),[M]);var z=Object(c.useState)(null),R=Object(f.a)(z,2),Y=R[0],J=R[1],W=Object(c.useState)(null),L=Object(f.a)(W,2),B=L[0],H=L[1],V=Object(c.useState)(null),U=Object(f.a)(V,2),Q=U[0],K=U[1],_=Object(c.useRef)(),Z=function(e){return function(){H(e.measurement),J(e.id)}},ee=function(){var e=_.current.innerText;"number"===j.unit&&((e=parseFloat(e))<j.range[0]||e>j.range[1]||(e-j.range[0])%j.step>0)&&K("Number must be between ".concat(j.range[0]," and ").concat(j.range[1]," in increments of ").concat(j.step)),"boolean"===j.unit&&"Yes"!==e&&"No"!==e&&K("Must be Yes/No answer"),H(e)},te=function(){var e=k.filter((function(e){return e.id===Y}))[0];_.current&&(_.current.innerText=e.measurement),H(null),J(null)};return Object(c.useEffect)((function(){if(j&&j.id){var e=s.filter((function(e){return e.metric===j.id})).sort((function(e,t){return t.measuredAt-e.measuredAt}));if("as needed"===j.frequency&&(v(e),S(e.map((function(e){return{mez:e,id:e.id,date:G(e.measuredAt),time:X(e.measuredAt),measurement:e.measurement||e.value}})))),"daily"===j.frequency){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=new Date(e);n=new Date(n.getFullYear(),n.getMonth(),n.getDate());for(var r=new Date(t.getFullYear(),t.getMonth(),t.getDate()),c=[];n<=r;)c.splice(0,0,n),n=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1);return c}(e[e.length-1].measuredAt),n=t.map((function(t){return e.find((function(e){return n=t,(r=e.measuredAt)>=n&&r.getTime()-n.getTime()<$;var n,r}))}));v(e),S(n.map((function(e,n){return e?{mez:e,id:e.id,date:G(e.measuredAt),time:e.isHistoric?"N/A":X(e.measuredAt),measurement:e.measurement||e.value}:{mez:{id:"__".concat(j.id,"-").concat(n),measurement:"..."},id:"__".concat(j.id,"-").concat(n),date:G(t[n]),time:"...",measurement:"...",dateObj:t[n]}})))}}}),[j,s]),t&&"metrix"===n?j?Object(r.jsxs)("main",{className:"single-metrix",children:[Object(r.jsx)("header",{children:Object(r.jsx)(h,{short:"Metrix",children:"Metrix History"})}),Object(r.jsxs)("div",{className:"single-metrix-info",children:[Object(r.jsx)("p",{children:Object(r.jsxs)("span",{children:[j.prompt,j.unitLabel?" ".concat(j.unitLabel):""]})}),Object(r.jsx)("p",{children:Object(r.jsxs)("span",{children:["Recorded ",j.frequency]})}),P&&Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{children:Object(r.jsxs)("select",{onChange:function(e){b(i.find((function(t){return t.id===e.target.value}))),I(!1)},children:[Object(r.jsx)("option",{value:null===j||void 0===j?void 0:j.id,children:"-- select metrix --"}),i.filter((function(e){return e!==j})).map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.prompt},"metrix-history-select-".concat(e.id))}))]})}),Object(r.jsx)("span",{onClick:function(){return I(!1)},children:Object(r.jsx)("img",{style:{cursor:"pointer"},src:We})})]}),!P&&Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{children:"Review Another Metrix"}),Object(r.jsx)("span",{onClick:function(){return I(!0)},children:Object(r.jsx)("img",{style:{cursor:"pointer"},src:Ve})})]})]}),0===k.length&&Object(r.jsx)("p",{className:"text-center",children:"No measurements yet!"}),k.length>0&&Object(r.jsxs)("ul",{className:"metrix-history",children:[Object(r.jsxs)("li",{className:"metrix-history-header",children:[Object(r.jsx)("span",{children:"Date"}),Object(r.jsx)("span",{children:"Time"}),Object(r.jsx)("span",{children:"Measurement"})]}),k.map((function(e){var t,n=e.mez,c=e.id,a=e.date,i=e.time,s=e.measurement,f=e.dateObj;return Object(r.jsxs)("li",{className:"metrix-measurement ".concat(E(n)),children:[Object(r.jsx)("span",{children:a}),Object(r.jsx)("span",{children:i}),Object(r.jsxs)("div",{children:[Object(r.jsx)("p",Object(d.a)(Object(d.a)({onBlur:ee},{ref:Y===c?_:null}),{},{contentEditable:c===Y,children:Y===c?B:s})),Y===n.id&&Object(r.jsx)("span",{onClick:(t=f,Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Q){e.next=2;break}return e.abrupt("return");case 2:if(!(null===Y||void 0===Y?void 0:Y.startsWith("__"))){e.next=5;break}return e.next=5,m(j,B,t);case 5:if(console.log((null===Y||void 0===Y?void 0:Y.startsWith("__"))?"done with measuring":"have not measured yet"),null===Y||void 0===Y?void 0:Y.startsWith("__")){e.next=9;break}return e.next=9,p(Y,B);case 9:console.log("done with measuring"),setTimeout(Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:console.log("updated measurements");case 3:case"end":return e.stop()}}),e)}))),2500),K(null),H(null),J(null);case 14:case"end":return e.stop()}}),e)})))),children:Object(r.jsx)("img",{src:st})})]}),Object(r.jsxs)("span",{onClick:Y===n.id?te:Z(n),className:"metrix-more",children:[Y!==n.id&&Object(r.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAvCAYAAABzJ5OsAAAABmJLR0QAWQCqAL2tfwFCAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH5AwcFAYk70i+6QAAAhhJREFUaN7t2btrFFEUx/GPWR9NFIy2loIiaSQiPjpt1NgJGttELK0tBQUfVTor0bSi4gMRbMVOlPwBESEoKmgaFfERi53Bw7C72TG690bmwGWXO4fL93fnt7NnzmUFx6pMONbhIHZiLebwEG9z38DDeIXFyviC82jlCn4KPwLwV3yoiLhX3JmsYiqAv8dEYRkYxZMg4EFOAiYD+Dy2dshZg1u5CZisWOVajwdHVcD9lL+BqQp4OaZrCDiXGnweu/GshoCnRd4njKQELz0+UkPAWMg7kRpcTQEtfC5yzuYAXkfAhrDWmVzA+xVwOlzbmxP4UgJGsVDMzWIoN/BuAmbwLpQPe3IFL2NjRcAivuHYIIqs5YCXsX9Q4PEv/w22L3O9bXhdrPe9KNoa8Aa8AW/AG/AGvAFPDn4IP/9irbJDu333z2sVuBMKoxfYtFLA14f3xShgc85WKWMiQN8N35/XvAMD3fGqZV4Wr2EX/uAODHzHYThY5nKYryMgCTicDJC7Ktf6EZAMvJNl1BCQFDxa5lKPvE4CkoLT7gF2s0w1roTc2RRPlWqUreQ5Sx+2tfBokO2Jfi1zsUvOUNGSmC5qnQiexCqdLDNW2eEDuBo6V3F8xHXskzBuB8u0euxwCTyDo34fgiWLaJn5Hjt8A0dyAI5xvANsBB7PDRhWF59bwtyC9sHtTTzW7sxmHcPapw3jMjxt/i/jF9CzX+22W/9hAAAAAElFTkSuQmCC"}),Y===n.id&&Object(r.jsx)("img",{src:We})]})]},"single-metrix-measurement-".concat(c))}))]})]}):Object(r.jsxs)("main",{className:"single-metrix",children:[Object(r.jsx)("header",{children:Object(r.jsx)(h,{children:"Metrix"})}),Object(r.jsxs)("div",{className:"single-metrix-info",children:[Object(r.jsx)("p",{children:Object(r.jsx)("span",{children:"Select Metrix to Review"})}),Object(r.jsx)("p",{children:Object(r.jsxs)("select",{onChange:function(e){return b(i.find((function(t){return t.id===e.target.value})))},children:[Object(r.jsx)("option",{value:null===j||void 0===j?void 0:j.id}),i.filter((function(e){return e!==j})).map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.prompt},"metrix-history-select-".concat(e.id))}))]})})]}),Object(r.jsx)("p",{className:"text-center",children:Object(r.jsx)("b",{children:"Once you select a metric to review, it's history will show up here!"})})]}):null}var dn=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Pt,{}),Object(r.jsx)(Tt,{}),Object(r.jsx)(Pe,{}),Object(r.jsx)(Be,{}),Object(r.jsx)(ht,{}),Object(r.jsx)(Dt,{}),Object(r.jsx)(ln,{}),Object(r.jsx)(jn,{}),Object(r.jsx)(qt,{})]})};console.warn=function(){},console.error=function(){},s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(Te,{children:Object(r.jsx)(dn,{})})}),document.getElementById("root"))}},[[255,1,2]]]);
//# sourceMappingURL=main.b07c1dac.chunk.js.map