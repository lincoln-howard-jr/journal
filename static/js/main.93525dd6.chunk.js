(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{124:function(e,t,n){},130:function(e,t){},132:function(e,t){},142:function(e,t){},144:function(e,t){},171:function(e,t){},173:function(e,t){},174:function(e,t){},179:function(e,t){},181:function(e,t){},200:function(e,t){},212:function(e,t){},215:function(e,t){},219:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(4),a=n.n(r),s=n(6),i=n(5),o=n.n(i),l=n(115),u=n.n(l),d=n(12),j=n.p+"static/media/skill.23054f65.svg",h=n.p+"static/media/plus.a86e5868.svg",f=n.p+"static/media/book.65cd22a3.svg",b=n.p+"static/media/settings.d2739024.svg",p=(n(124),n(221)),w=n(17),O="2ac3ij97dhtkag9fljdsuo1203",m="us-east-1_tRcA2uwF6",x=null,g=new w.e({UserPoolId:m,ClientId:O}),v=null,y=null,k=function(){return new Promise((function(e,t){try{if(!v)throw"Cognito user must be defined to get access token";v.getSession((function(n,c){if(n)return t(n);y=c.getAccessToken().getJwtToken(),new w.b({RefreshToken:c.getRefreshToken().getToken()}),console.log("access token retrieved"),e()}))}catch(n){t(n)}}))},S=function(){var e=Object(s.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(a.a.mark((function e(c,r){var s,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=new w.d({Name:"phone_number",Value:t}),i=new w.d({Name:"custom:custom:id",Value:Object(p.a)()}),o=[s,i],g.signUp(t,n,o,null,(function(e,t){if(e)return r(e);v=t.user,k().then((function(e){return c()})).err((function(e){return r(e)}))}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries",{method:"get",headers:new Headers({"x-amz-access-token":y})})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries",{method:"post",headers:new Headers({"x-amz-access-token":y,"Content-Type":"application/json"}),body:JSON.stringify(e)})}}},F={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills",{method:"get",headers:new Headers({"x-amz-access-token":y})})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills",{method:"post",headers:new Headers({"x-amz-access-token":y,"Content-Type":"application/json"}),body:JSON.stringify(e)})}}},I=y,T=["January","February","March","April","May","June","July","August","September","October","November","December"],D=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return"".concat(D[e.getDay()],", ").concat(T[e.getMonth()]," ").concat(e.getDate())},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return"".concat(e.getHours()%12||12,":").concat("0".concat(e.getMinutes()).slice(-2)," ").concat(e.getHours()>11?"pm":"am")};var J=function(e){var t=e.display,n=Object(i.useState)(new Date),r=Object(d.a)(n,2),o=r[0],l=r[1],u=Object(i.useRef)(),j=function(){var e=Object(s.a)(a.a.mark((function e(){var t,n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(u.current.querySelectorAll("b")).map((function(e){return e.innerText})),n=Array.from(u.current.querySelectorAll("div")).map((function(e){return e.innerText})),c=new Date,e.next=5,C.post({questions:t,answers:n,start:o,end:c});case 5:Array.from(u.current.querySelectorAll("div")).map((function(e){return e.innerText="..."})),l(new Date);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)("main",{style:{display:t},children:[Object(c.jsx)("h2",{children:A()}),Object(c.jsx)("h3",{children:N(o)}),Object(c.jsxs)("div",{ref:u,className:"questions",children:[Object(c.jsx)("b",{children:"What have I done today?"}),Object(c.jsx)("div",{contentEditable:!0,children:"..."}),Object(c.jsx)("b",{children:"How do I feel?"}),Object(c.jsx)("div",{contentEditable:!0,children:"..."}),Object(c.jsx)("b",{children:"What else am I going to do?"}),Object(c.jsx)("div",{contentEditable:!0,children:"..."})]}),Object(c.jsx)("button",{onClick:j,children:"Complete"})]})},q=n(117),M=n(16),P=["January","February","March","April","May","June","July","August","September","October","November","December"],z=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return"".concat(e.getMonth(),"-").concat(e.getDate(),"-").concat(e.getFullYear()).toString()},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return"".concat(z[e.getDay()],", ").concat(P[e.getMonth()]," ").concat(e.getDate())},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return"".concat(e.getHours()%12||12,":").concat("0".concat(e.getMinutes()).slice(-2)," ").concat(e.getHours()>11?"pm":"am")},U=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,c=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=t.filter((function(e){return e[n]===c}));if(a.length>0)return a[0].list;var s=(e={},Object(M.a)(e,n,c),Object(M.a)(e,"meta",r),Object(M.a)(e,"list",[]),e);return t.push(s),s.list},W=function(e){var t=e.date,n=e.isOpen,r=e.open,a=e.close;return n?Object(c.jsxs)("header",{className:"entry-header",children:[Object(c.jsx)("span",{onClick:a,children:"x"}),Object(c.jsx)("h2",{children:t})]}):Object(c.jsxs)("header",{className:"entry-header",children:[Object(c.jsx)("span",{onClick:r,children:"more"}),Object(c.jsx)("h2",{children:t})]})},V=function(e){var t=e.entries,n=e.open;return t.map((function(e){return n?Object(c.jsxs)("section",{children:[Object(c.jsx)("h3",{children:R(e.start)}),e.questions.map((function(t,n){return Object(c.jsx)("section",{children:Object(c.jsxs)("p",{children:[Object(c.jsxs)("b",{children:[t," "]}),e.answers[n]]})})}))]},"entry-".concat(e.id)):Object(c.jsx)("div",{})}))};var Z=function(e){var t=e.display,n=Object(i.useState)([]),r=Object(d.a)(n,2),o=r[0],l=r[1],u=Object(i.useState)([]),j=Object(d.a)(u,2),h=j[0],f=j[1],b=function(){var e=Object(s.a)(a.a.mark((function e(){var t,n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.get();case 3:return t=e.sent,e.next=6,t.json();case 6:(n=(n=e.sent).map((function(e){return Object.assign(e,{start:new Date(e.start),end:new Date(e.end)})}))).sort((function(e,t){return t.start-e.start})),c=n.reduce((function(e,t){return U(e,"date",E(t.start),{date:H(t.start)}).push(t),e}),[]),l(c),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),alert(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){b()}),[]),Object(c.jsx)("main",{style:{display:t},children:o.map((function(e){return Object(c.jsxs)("article",{children:[Object(c.jsx)(W,{date:e.meta.date,isOpen:-1!==h.indexOf(e.date),open:function(){f((function(t){return[].concat(Object(q.a)(t),[e.date])}))},close:function(){f((function(t){return t.filter((function(t){return t!==e.date}))}))},index:e}),Object(c.jsx)(V,{open:-1!==h.indexOf(e.date),entries:e.list})]},"index-".concat(e.date))}))})},_=n.p+"static/media/pen.27ec406e.svg",B=function(e,t,n){var c,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.filter((function(e){return e[t]===n}));if(a.length>0)return a[0].list;var s=(c={},Object(M.a)(c,t,n),Object(M.a)(c,"meta",r),Object(M.a)(c,"list",[]),c);return e.push(s),s.list};var L=function(e){var t=e.display,n=Object(i.useState)([]),r=Object(d.a)(n,2),o=r[0],l=r[1],u=Object(i.useState)("reference"),j=Object(d.a)(u,2),h=j[0],f=j[1],b=Object(i.useRef)(),p=Object(i.useRef)(),w=function(){var e=Object(s.a)(a.a.mark((function e(){var t,n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.get();case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,c=n.reduce((function(e,t){return B(e,"category",t.category,{category:t.category}).push(t),e}),[]),l(c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),alert(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){w()}),[I]);var O=function(){var e=Object(s.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(b,p),t={category:b.current.value,skill:p.current.innerText},e.next=4,F.post(t);case 4:f("reference");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("main",{style:{display:"edit"===h?t:"none"},children:[Object(c.jsx)("h2",{children:"New Skill"}),Object(c.jsxs)("div",{children:["Category: ",Object(c.jsx)("input",{ref:b,defaultValue:"Tools For ..."})]}),Object(c.jsxs)("div",{children:["Skill: ",Object(c.jsx)("p",{style:{padding:7.5},ref:p,contentEditable:!0,children:"..."})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{onClick:O,children:"Add Skill"}),Object(c.jsx)("button",{onClick:function(){f("reference")},children:"Cancel"})]})]}),Object(c.jsxs)("main",{style:{display:"reference"===h?t:"none"},children:[Object(c.jsx)("span",{onClick:function(){f("edit")},style:{height:64,display:"grid",alignItems:"center",justifyContent:"center"},children:Object(c.jsx)("img",{src:_,width:24,height:24})}),o.map((function(e){return Object(c.jsxs)("section",{children:[Object(c.jsx)("h2",{children:e.meta.category}),Object(c.jsx)("ul",{children:e.list.map((function(e){return Object(c.jsx)("li",{children:e.skill})}))})]})}))]})]})},Y={"calendar.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"pen.svg":'Icons made by <a href="https://www.flaticon.com/authors/icongeek26" title="Icongeek26">Icongeek26</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"book.svg":'Icons made by <a href="https://www.flaticon.com/authors/zlatko-najdenovski" title="Zlatko Najdenovski">Zlatko Najdenovski</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"plus.svg":'Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"list.svg":'Icons made by <a href="https://www.flaticon.com/authors/phatplus" title="phatplus">phatplus</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"skill.svg":'Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"settings.svg":'Icons made by <a href="https://www.flaticon.com/authors/srip" title="srip">srip</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>'},G={write:"Check In",journal:"Therapy Journal",settings:"Customize",skills:"Coping Skills"};var K=function(e){var t=e.install,n=e.swStatus,r=Object(i.useState)("write"),o=Object(d.a)(r,2),l=o[0],u=o[1],p=Object(i.useState)(null),O=Object(d.a)(p,2),m=O[0],y=O[1],C=function(){var e=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,t){try{if(!g)throw"Must configure user pool before calling login";v=g.getCurrentUser(),e()}catch(n){t(n)}}));case 3:return e.next=5,k();case 5:y(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),y(!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){y(!!I)}),[I]),Object(i.useEffect)((function(){C()}),[]);var F=Object(i.useRef)(),T=Object(i.useRef)();return m?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("header",{children:[Object(c.jsx)("h1",{children:G[l]}),!n&&Object(c.jsx)("button",{onClick:t,children:"Install!"})]}),Object(c.jsx)(J,{display:"write"===l?"grid":"none"}),Object(c.jsx)(Z,{display:"journal"===l?"grid":"none"}),Object(c.jsx)(L,{display:"skills"===l?"grid":"none"}),Object(c.jsx)("nav",{children:Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{}),Object(c.jsxs)("li",{className:"calendar"===l?"active":"",onClick:function(){u("skills")},children:[Object(c.jsx)("img",{alt:"",width:"32",height:"32",src:j}),Object(c.jsx)("label",{children:"Skills"})]}),Object(c.jsxs)("li",{className:"write"===l?"active":"",onClick:function(){u("write")},children:[Object(c.jsx)("img",{alt:"",width:"32",height:"32",src:h}),Object(c.jsx)("label",{children:"Write"})]}),Object(c.jsxs)("li",{className:"journal"===l?"active":"",onClick:function(){u("journal")},children:[Object(c.jsx)("img",{alt:"",width:"32",height:"32",src:f}),Object(c.jsx)("label",{children:"Journal"})]}),Object(c.jsxs)("li",{className:"settings"===l?"active":"",onClick:function(){u("settings")},children:[Object(c.jsx)("img",{alt:"",width:"32",height:"32",src:b}),Object(c.jsx)("label",{children:"Settings"})]}),Object(c.jsx)("li",{})]})}),Object(c.jsxs)("div",{id:"attributions",children:[Object(c.jsx)("h2",{children:"Attributions"}),Object(c.jsx)("ul",{children:Object.keys(Y).map((function(e){return Object(c.jsxs)("li",{children:[e," - ",Y[e]]},"attribiution-".concat(e))}))})]})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("header",{children:Object(c.jsx)("h1",{children:"Therapy Journal"})}),Object(c.jsxs)("main",{children:[Object(c.jsx)("h2",{children:"can i get ur number?"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("input",{ref:F}),Object(c.jsx)("p",{children:"(and password)"}),Object(c.jsx)("input",{type:"password",ref:T})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{onClick:function(){var e,t,n=T.current.value,c=F.current.value,r="+1".concat(c.replaceAll("-",""));e=r,t=n,new Promise((function(n,c){try{x=new w.a({Username:e,Password:t}),(v=new w.c({Username:e,Pool:g})).authenticateUser(x,{onSuccess:function(e){return n(e)},onFailure:function(e){return c(e)}})}catch(r){c(r)}}))},children:"Log In"}),Object(c.jsx)("button",{onClick:function(){var e=T.current.value,t=F.current.value,n="+1".concat(t.replaceAll("-",""));S(n,e)},children:"Register"})]})]})]})},Q=localStorage.getItem("sw-status"),X=function(){var e=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Q){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,navigator.serviceWorker.register(window.location.href+"/sw.js");case 5:localStorage.setItem("sw-status","installed"),alert("Therapy Journal has installed!"),window.location.reload(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();u.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(K,{install:X,swStatus:Q})}),document.getElementById("root"))}},[[219,1,2]]]);
//# sourceMappingURL=main.93525dd6.chunk.js.map