{"version":3,"sources":["pages/components/Headers.js","pages/components/H1.js","pages/components/H2.js","pages/components/H3.js","lib/auth.js","lib/filters.js","lib/indexing.js","hooks/useSkills.js","lib/base.js","lib/webaudio.js","hooks/useNotifications.js","lib/defaultQuestions.js","hooks/useMetrix.js","hooks/index.js","hooks/useAuth.js","hooks/useJournal.js","hooks/useWriting.js","hooks/useSettings.js","hooks/useSharing.js","hooks/useRouter.js","lib/scrolling.js","hooks/useAudio.js","lib/defaultSettings.js","AppProvider.js","pages/components/AudioRecorder.js","img/back.svg","img/book.svg","img/calendar.svg","img/cancel.svg","img/caret-down.svg","img/dashboard.svg","img/filter.svg","img/left-arrow.svg","img/happy.svg","img/plus.svg","img/list.svg","img/minus.svg","img/more.svg","img/next.svg","img/ruler.svg","img/search.svg","img/settings.svg","img/skill.svg","img/stopwatch.svg","img/trash.svg","img/checkmark.svg","img/key.svg","img/star.svg","img/star filled.svg","pages/components/Slider.js","pages/components/Metrix.js","pages/NewWrite.js","pages/components/DateFilter.js","pages/components/TimePicker.js","pages/components/TimeFilter.js","pages/components/Query.js","pages/components/viz/AnalogClock.js","pages/NewJournal.js","lib/attributions.js","pages/components/CustomQuestions.js","lib/sanitizePhoneNumber.js","pages/Settings.js","pages/NewSkills.js","pages/components/Nav.js","pages/Auth.js","pages/components/viz/PieChart.js","pages/components/viz/dimensions.js","pages/components/viz/WordCount.js","pages/components/viz/Bar.js","pages/components/viz/Counter.js","pages/components/viz/Stats.js","pages/components/viz/TimeOfDayBarChart.js","pages/components/viz/MetrixCarousel.js","pages/components/viz/Metrics.js","pages/Dashboard.js","pages/MetrixHistory.js","img/pen-small.png","App.js","index.js"],"names":["H1","props","className","children","short","H2","H3","poolDetails","authDetails","Pool","AmazonCognitoIdentity","UserPoolId","ClientId","cognitoUser","accessToken","refreshToken","headers","get","Headers","login","Username","Promise","resolve","reject","ClientMetadata","phoneNumber","e","console","log","getCurrentUser","signOut","a","register","attributePhoneNumber","Name","Value","customAttributeId","id","attributeList","signUp","err","result","user","customFlow","cb","onCodeSent","onSuccess","setAuthenticationFlowType","initiateAuth","r","onFailure","customChallenge","challengeParameters","answer","sendCustomChallengeAnswer","entries","userId","fetch","method","body","post","JSON","stringify","skills","shares","questions","notifications","metrix","measurements","metric","value","isInRange","is","after","before","toMinutes","hours","minutes","filterTypes","type","entry","entryType","date","mode","start","Date","getFullYear","getMonth","getDate","ceil","end","time","split","ampm","map","num","parseInt","_hours","getHours","getMinutes","constructFilterList","filters","filter","months","days","dateShortHand","_d","d","toString","printDate","getDay","getTime","slice","dateFromShortHand","year","month","runIndexEntries","arr","el","Object","assign","sort","b","reduce","acc","val","indexedArr","key","meta","found","length","list","index","push","findIndex","oneDay","path","window","location","href","charAt","substring","encoder","audioCtx","AudioContext","webkitAudioContext","stream","mediaRecorder","chunks","mp3data","hasBrowserSupport","getUserMedia","navigator","mediaDevices","audio","createMediaRecorder","Error","MediaRecorder","ondataavailable","evt","data","isReadyForRecording","offset","setTimeout","stop","extract","freeze","title","unfreeze","arrayBuffer","decoded","lame","Mp3Encoder","numberOfChannels","sampleRate","encodeBuffer","getChannelData","Int16Array","flush","file","File","decodeAudioData","_time","compareTimes","notificationTime","settingMap","defaultMetrix","unit","range","step","prompt","frequency","isDefault","unitLabel","thisMorning","tonight","thisWeek","thisMonth","useAuth","onSessionActive","useState","setUser","setErr","init","retrieveSession","getSession","session","getAccessToken","getJwtToken","RefreshToken","getRefreshToken","getToken","logout","reload","refreshSession","_register","useEffect","useJournal","entryList","setEntryList","filterIterator","setIter","actualSetFilter","filterList","setFilterList","query","setQuery","setIdx","getEntries","api","req","json","createEntry","hideEntry","hide","setFilters","fl","freeform","text","match","toLowerCase","qa","answers","join","runQuery","clearSearch","useWriting","setQuestions","getQuestions","qs","q","createQuestion","deleteQuestion","del","ok","useSettings","defaultSettings","storage","localStorage","storedSettings","parse","getItem","currentSettings","settings","setSettings","iter","getSetting","setting","relationships","relation","affected","getAll","addSetting","initial","removeSetting","clearSettings","set","changes","_sett","setAll","toggle","to","setItem","useSharing","sharedWithMe","setSharedWithMe","sharedByMe","setSharedByMe","sharedJournal","setSharedJournal","getShares","sett","sbm","frozen","getShareById","getById","dict","toggleFreeze","shareJournal","phone","name","shareWithName","shareWith","useSkills","setSkills","getSkills","indexed","category","submitSkill","removeSkill","useRouter","initialPage","URLSearchParams","search","page","setPage","params","setParams","redirect","url","nextPage","history","pushState","previous","next","base","scrollBy","left","top","scrollY","behavior","scrollToTop","useAudio","recordingStatus","setRecordingStatus","audioRecording","setAudioRecording","audioRecordingTitle","setAudioRecordingTitle","timeElapsed","setTimeElapsed","timer","setTimer","ready","setReady","startRecording","WebAudio","setInterval","stopRecording","clearInterval","pauseRecording","pause","resumeRecording","resume","initAudio","resetAudioInformation","useNotifications","setNotifications","getNotifications","createNotification","deleteNotification","useMetrix","setMetrix","setMeasurements","newMeasurements","setNew","captured","setCaptured","singleMetrix","setSingleMetrix","singleMeasurement","setSingleMeasurement","getMetrix","metrixApi","createMetrix","deleteMetrix","getMeasurements","measurementsApi","m","measurement","measuredAt","measureHistoric","createMeasurements","all","mez","metricId","updateMeasurement","put","today","mes","find","met","cap","getMeasureValue","measure","nm","undefined","splice","isCaptured","includes","AppContext","createContext","useApp","React","useContext","AppProvider","setFrozen","message","modal","setModal","closeModal","isViewOnly","setIsViewOnly","viewMode","hooks","defaultQuestions","sessionStorage","journal","sharing","writing","router","viewSharedJournal","viewMyJournal","auth","forEach","share","Provider","AudioRecorder","onClick","Math","floor","onChange","target","controls","src","URL","createObjectURL","width","height","Slider","min","max","defaultValue","svgref","useRef","setValue","mouseIsDown","setMouseIsDown","roundToNearestStep","decimals","parseFloat","newVal","round","toFixed","clientWidth","setClientWidth","inv","useCallback","size","w","position","calcValue","current","pos","scaleX","drag","movementX","touches","clientX","ref","onTouchMove","onTouchCancel","onMouseMove","onMouseLeave","onMouseUp","viewBox","cx","cy","x1","x2","y1","y2","x","y","textAnchor","onTouchStart","onMouseDown","radius","MetrixType","boolean","number","string","autofocus","isFirstFocus","setIsFirstFocus","focus","onFocus","innerText","contentEditable","onBlur","remove","typeDict","freeformPrompt","Write","setty","k","setStart","autoFocusPrompt","setAFP","isSelecting","setIsSelecting","allPrompts","defaultPrompts","p","getActivePromts","rawPrompts","prompts","keys","submit","question","Metric","dv","Fragment","removePrompt","TrashSVG","autoFocus","addPromptById","defaultChecked","_m","CancelSVG","maxDaysIn","mm","yyyy","TimePicker","extractMinutes","extractHours","extractAmpm","TimeFilter","setMode","setMonth","dd","setDate","setYear","maxDays","setMaxDays","NaN","CalendarSVG","alt","modeFinal","style","display","transform","CaretSVG","StopwatchSVG","Query","open","setOpen","dateFilters","setDateFilters","timeFilters","setTimeFilters","setTypeFilter","setFilterValue","plus","onSubmit","preventDefault","placeholder","SearchIcon","FilterSVG","Filter","newFilters","curr","fil","AnalogClock","hourHand","PI","minuteHand","fill","Array","_","i","sin","cos","RemoveEntryModal","app","handleYes","JournalCard","idx","openRemoveModal","trash","Journal","metricTypeDict","isNumber","RegExp","test","isBackspace","isLeftArrow","isRightArrow","isDot","INI","fn","prevent","CES","CustomQuestion","setQuestion","metricType","setMetricType","rangeFrom","setRangeFrom","rangeTo","setRangeTo","stepInterval","setStepInterval","setFrequency","setUnitLabel","unitDescriptionError","setDescError","runCreateQuestion","runCreateMetric","obj","setStep","currentStep","steps","onInput","checked","errors","calculateDescError","cursor","starfilled","star","stripPhoneNumber","replaceAll","sanitizePhoneNumber","reduced","ShareJournal","rawPhoneNumber","_setPhoneNumber","setPhoneNumber","stripped","substr","fmtRawPhoneNumber","nameRef","swnRef","textDecoration","SharedByMe","onToggle","Setting","SharedWithMe","SettingGroup","longTitle","shortTitle","affector","Settings","attributionId","setAttributionId","canShare","attributions","dangerouslySetInnerHTML","__html","Skills","submitError","setError","categoryRef","skillRef","skill","maxWidth","margin","padding","Nav","leftarrow","book","ruler","dashboard","Auth","setPrompt","v","setAnswer","codeRef","promptForCode","_answer","codeSent","setCodeSent","onAuthError","setAuthError","onRegisterClick","onLogInClick","autoComplete","disabled","Segment","strokeWidth","strokeDasharray","strokeDashoffset","transformOrigin","PieChart","label","marginTop","keywordReducer","state","_keyword","keyword","word","WordCount","useReducer","keywords","toggleKeyword","wordCounts","setWordCounts","domain_0","setDomain0","domain_n","setDomainN","range_n","setRangeN","yscale","count","domain","wcl","j","rn","flat","elements","hidden","_Bar","hourlyMax","questionsCount","freeformCount","audioCount","total","breakdown","contentWidth","dimensions","y0","height_total","propArr","isNaN","memo","NumberCounter","rx","_inThisWeek","EntriesThisWeek","inThisWeek","setCount","QuestionsThisWeek","c","TotalEntryCount","now","daysBetween","SkillCount","reduceByTime","setIndexed","setMax","onBarClick","Bar","midnight","Graphs","mezs","yesCount","noCount","blankCount","weeksAfter","monthsAfter","xscale","SingleMetrixCarousel","currentMetrixIndex","setCurrentMetrixIndex","select","setSelect","Graph","indexOf","caretdown","reduceByType","Metrics","typeIndex","setTypeIndex","labels","pop","unshift","runIndexByType","metrics","TimeOfDayBarChart","Analytics","marginInline","MetrixHistory","singleMetrixMeasurements","setMez","instances","setInstances","selected","setAllSelected","editId","setEditMode","editValue","setEditValue","editError","setEditError","editingRef","updateValue","cancelEdit","scrollIntoView","_start","_end","generateDailyDateRange","day","reference","isHistoric","dateObj","generateWeeklyDateRange","generateMonthlyDateRange","cancel","startsWith","checkmark","App","Dashboard","warn","error","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cb08b5d4.chunk.js","sourcesContent":["import h1 from './H1';\nimport h2 from './H2';\nimport h3 from './H3';\n\nexport const H1 = h1\nexport const H2 = h2\nexport const H3 = h3","export default function H1 (props) {\n  return (\n    <>\n      <h1 className=\"long\">{props.children}</h1>\n      <h1 className=\"short\">{!!props.short ? props.short : props.children}</h1>\n    </>\n  )\n}","export default function H2 (props) {\n  return (\n    <>\n      <h2 className=\"long\">{props.children}</h2>\n      <h2 className=\"short\">{!!props.short ? props.short : props.children}</h2>\n    </>\n  )\n}","export default function H1 (props) {\n  return (\n    <>\n      <h3 className=\"long\">{props.children}</h3>\n      <h3 className=\"short\">{!!props.short ? props.short : props.children}</h3>\n    </>\n  )\n}","import {v4 as id} from 'uuid';\nimport * as AmazonCognitoIdentity from 'amazon-cognito-identity-js';\n\nconst poolDetails = {\n  AppClientId: '2ac3ij97dhtkag9fljdsuo1203',\n  IdentityPool:\t'us-east-1:de5287fc-3a2d-4cad-a685-b9d5bfe936e6',\n  PoolArm: 'arn:aws:cognito-idp:us-east-1:842200175734:userpool/us-east-1_tRcA2uwF6',\n  PoolId:\t'us-east-1_tRcA2uwF6'\n}\n\nlet authDetails = null;\nlet Pool = new AmazonCognitoIdentity.CognitoUserPool ({UserPoolId: poolDetails.PoolId, ClientId: poolDetails.AppClientId});\nlet cognitoUser = null;\nlet accessToken = null;\nlet refreshToken = null;\nlet headers = {\n  get get () {\n    return new Headers ({\n      'x-amz-access-token': accessToken\n    });\n  },\n  get post () {\n    return new Headers ({\n      'x-amz-access-token': accessToken,\n      'Content-Type': 'application/json'\n    });\n  }\n}\nexport const login = (Username) => new Promise ((resolve, reject) => {\n  try {\n    authDetails = new AmazonCognitoIdentity.AuthenticationDetails ({Username, ClientMetadata: {phoneNumber: Username}});\n    cognitoUser = new AmazonCognitoIdentity.CognitoUser ({Username, Pool});\n    resolve ();\n  } catch (e) {\n    console.log (e);\n    reject (e);\n  }\n});\n\nexport const getCurrentUser = () => new Promise ((resolve, reject) => {\n  try {\n    cognitoUser = Pool.getCurrentUser ();\n    resolve ();\n  } catch (e) {\n    reject (e);\n  }\n});\n\nexport const retrieveAccessToken = () => new Promise ((resolve, reject) => {\n  try {\n    if (!cognitoUser) throw 'Cognito user must be defined to get access token';\n    cognitoUser.getSession ((e, session) => {\n      if (e) return reject (e);\n      accessToken = session.getAccessToken ().getJwtToken ();\n      refreshToken = new AmazonCognitoIdentity.CognitoRefreshToken ({RefreshToken: session.getRefreshToken ().getToken ()});\n      resolve ();\n    });\n  } catch (e) {\n    reject (e);\n  }\n});\n\nexport const refreshSession = () => new Promise ((resolve, reject) => {\n  try {\n    if (!cognitoUser) throw 'Cannot refresh empty cognito user';\n    if (!refreshToken) throw 'Cannot refresh empty refresh token';\n    cognitoUser.refreshSession (refreshToken, (err, session) => {\n      if (err) return reject (err);\n      accessToken = session.getAccessToken ().getJwtToken ();\n      refreshToken = new AmazonCognitoIdentity.CognitoRefreshToken ({RefreshToken: session.getRefreshToken ().getToken ()});\n      resolve ();\n    });\n  } catch (e) {\n    reject (e);\n  }\n});\n\nexport const signOut = async () => new Promise (async (resolve, reject) => {\n  try {\n    await cognitoUser.signOut();\n    resolve ();\n  } catch (e) {\n    reject (e);\n  }\n});\n\nexport const register = async (phoneNumber) => new Promise (async (resolve, reject) => {\n  const attributePhoneNumber = new AmazonCognitoIdentity.CognitoUserAttribute ({Name: 'phone_number', Value: phoneNumber});\n  const customAttributeId = new AmazonCognitoIdentity.CognitoUserAttribute ({Name: 'custom:custom:id', Value: id ()})\n  const attributeList = [attributePhoneNumber, customAttributeId];\n  Pool.signUp (phoneNumber, id (), attributeList, null, (err, result) => {\n    if (err) return reject (err);\n    cognitoUser = result.user;\n    resolve ();\n  })\n});\n\nexport const customFlow = (phoneNumber, cb, onCodeSent, onSuccess) => new Promise (async (resolve, reject) => {\n  try {\n    await login (phoneNumber);\n  } catch (e) {\n    return reject (e);\n  }\n  cognitoUser.setAuthenticationFlowType ('CUSTOM_CHALLENGE');\n  cognitoUser.initiateAuth (authDetails, {\n    onSuccess: r => onSuccess (r),\n    onFailure: e => reject (e),\n    customChallenge: function (challengeParameters) {\n      onCodeSent ();\n      cb (answer => cognitoUser.sendCustomChallengeAnswer (answer, this))\n      resolve ();\n    }\n  });\n});\n\nexport const entries = {\n  get get () {\n    return userId => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries' + (userId ? '?userId=' + userId : ''), {\n      method: 'get',\n      headers: headers.get\n    });\n  },\n  get post () {\n    return body => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries', {\n      method: 'post',\n      headers: headers.post,\n      body: JSON.stringify (body)\n    });\n  }, \n  get hide () {\n    return id => fetch (`https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries/${id}`, {\n      method: 'delete',\n      headers: headers.get\n    })\n  }\n}\nexport const skills = {\n  get get () {\n    return userId => fetch (`https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills${userId ? '?userId=' + userId : ''}`, {\n      method: 'get',\n      headers: headers.get\n    });\n  },\n  get post () {\n    return body => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills', {\n      method: 'post',\n      headers: headers.get,\n      body: JSON.stringify (body)\n    });\n  },\n  get del () {\n    return id => fetch (`https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills/${id}`, {\n      method: 'delete',\n      headers: headers.get\n    })\n  }\n}\n\nexport const shares = {\n  get get () {\n    return () => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares', {\n      method: 'get',\n      headers: headers.get\n    });\n  },\n  get getById () {\n    return id => fetch (`https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries/${id}`, {\n      method: 'get',\n      headers: headers.get\n    });\n  },\n  get post () {\n    return body => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares', {\n      method: 'post',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken,\n        'Content-Type': 'application/json'\n      }),\n      body: JSON.stringify (body)\n    });\n  },\n  get toggleFreeze () {\n    return id => fetch (`https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares/${id}`, {\n      method: 'put',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken\n      })\n    });\n  }\n}\n\nexport const questions = {\n  get get () {\n    return () => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions', {\n      method: 'get',\n      headers: headers.get\n    });\n  },\n  get post () {\n    return body => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions', {\n      method: 'post',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken,\n        'Content-Type': 'application/json'\n      }),\n      body: JSON.stringify (body)\n    });\n  },\n  get del () {\n    return id => fetch (`https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions/${id}`, {\n      method: 'DELETE',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken\n      })\n    })\n  }\n}\nexport const audios = {\n  get post () {\n    return body => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/audios', {\n      method: 'post',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken,\n        'Content-Type': 'application/json'\n      }),\n      body: JSON.stringify (body)\n    })\n  }\n}\n\nexport const notifications = {\n  get get () {\n    return () => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/notifications', {\n      headers: new Headers ({\n        'x-amz-access-token': accessToken\n      })\n    })\n  },\n  get post () {\n    return body => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/notifications', {\n      method: 'post',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken,\n        'Content-Type': 'application/json'\n      }),\n      body: JSON.stringify (body)\n    })\n  },\n  get del () {\n    return id => fetch (`https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/notifications/${id}`, {\n      method: 'DELETE',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken\n      })\n    })\n  }\n}\n\nexport const metrix = {\n  get get () {\n    return userId => fetch (`https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/metrix${userId ? '?userId=' + userId : ''}`, {\n      headers: new Headers ({\n        'x-amz-access-token': accessToken\n      })\n    })\n  },\n  get post () {\n    return body => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/metrix', {\n      method: 'post',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken,\n        'Content-Type': 'application/json'\n      }),\n      body: JSON.stringify (body)\n    })\n  },\n  get del () {\n    return id => fetch (`https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/metrix/${id}`, {\n      method: 'DELETE',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken\n      })\n    })\n  }\n}\n\nexport const measurements = {\n  get get () {\n    return userId => fetch (`https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/measurements/${userId ? '?userId=' + userId : ''}`, {\n      headers: new Headers ({\n        'x-amz-access-token': accessToken\n      })\n    })\n  },\n  get post () {\n    return (metric, body) => {\n      fetch (`https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/metrix/${metric}`, {\n        method: 'post',\n        headers: new Headers ({\n          'x-amz-access-token': accessToken,\n          'Content-Type': 'application/json'\n        }),\n        body: JSON.stringify (body)\n      })\n    }\n  },\n  get put () {\n    return (id, value) => fetch (`https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/measurements/${id}`, {\n      method: 'put',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken,\n        'Content-Type': 'application/json'\n      }),\n      body: JSON.stringify ({value})\n    })\n  },\n}","const floor = date => {\n  return new Date (date.getFullYear (), date.getMonth (), date.getDate ())\n}\nconst ceil = date => {\n  return new Date (date.getFullYear (), date.getMonth (), date.getDate () + 1)\n}\nconst isInRange = (is, after, before) => {\n  return is <= before && is >= after;\n}\nconst toMinutes = (hours, minutes) => {\n  return hours * 60 + minutes;\n}\n\n// single-day | inclusive after | inclusive before\nconst constructDateFilter = value => entry => {\n  if (value.mode === 'single-day') {\n    return isInRange (entry.start, floor (value.date), ceil (value.date));\n  } else if (value.mode === 'after') {\n    return new Date (entry.start) > value.date;\n  } else if (value.mode === 'before') {\n    return new Date (entry.end) < value.date;\n  }\n}\n\nconst constructTimeFilter = value => entry => {\n  const [time, ampm] = value.time.split (' ');\n  console.log (time.split (':'))\n  const [_hours, minutes] = time.split (':').map (num => parseInt (num));\n  const hours = _hours % 12 + (ampm === 'pm' ? 12 : 0);\n  console.log (value, hours, minutes);\n  if (value.mode === 'is-at') {\n    return isInRange (toMinutes (hours, minutes), toMinutes (entry.start.getHours (), entry.start.getHours ()), toMinutes (entry.end.getHours (), entry.end.getHours ()));\n  } else if (value.mode === 'before') {\n    return toMinutes (entry.start.getHours (), entry.start.getMinutes ()) <= toMinutes (hours, minutes);\n  } else if (value.mode === 'after') {\n    return toMinutes (entry.start.getHours (), entry.start.getMinutes ()) >= toMinutes (hours, minutes);\n  }\n}\n\nconst constructEntryTypeFilter  = value => entry => {\n  return entry.entryType === value.entryType;\n}\n\nconst filterTypes = {\n  type: constructEntryTypeFilter,\n  date: constructDateFilter,\n  time: constructTimeFilter\n}\n\nconst constructFilterList = filters => {\n  let _f = filters.map (filter => filterTypes [filter.type] (filter.value))\n  return _f;\n}\n\nexport default constructFilterList","export const months = [\n  'January',\n  'February',\n  'March',\n  'April',\n  'May',\n  'June',\n  'July',\n  'August',\n  'September',\n  'October',\n  'November',\n  'December'\n]\nexport const days = [\n  \"Sunday\",\n  'Monday',\n  'Tuesday',\n  'Wednesday',\n  'Thursday',\n  'Friday',\n  'Saturday'\n]\n\nexport const dateShortHand = (_d=new Date ()) => {\n  let d = new Date (_d);\n  return `${d.getFullYear ()}-${d.getMonth () + 1}-${d.getDate ()}`.toString ();\n}\nexport const printDate = (_d=new Date ()) => {\n  let d = new Date (_d);\n  return  `${days [d.getDay ()]}, ${months [d.getMonth ()]} ${d.getDate ()}`;\n}\nexport const getTime = (d=new Date ()) => {  \n  return `${(d.getHours () % 12 || 12)}:${`0${d.getMinutes ()}`.slice(-2)} ${d.getHours () > 11 ? 'pm' : 'am'}`;\n}\nexport const dateFromShortHand = d => {\n  if (d instanceof Date) return d;\n  let [year, month, date] = d.split ('-');\n  year = parseInt (year);\n  month = parseInt (month) - 1;\n  date = parseInt (date);\n  return new Date (year, month, date);\n}\n\nexport const findIndex = (indexedArr=[], key, value, meta={}) => {\n  let found = indexedArr.filter (el => el [key] === value)\n  if (found.length > 0) return found [0].list;\n  let index = {[key]: value, meta, list: []};\n  indexedArr.push (index);\n  return index.list;\n}\n\nexport const runIndexEntries = (entries) => {\n  let arr = entries.map (el => Object.assign (el, {start: new Date (el.start), end: new Date (el.end)}));\n  arr.sort ((a, b) => b.start - a.start);\n  return arr.reduce ((acc, val) => {\n    findIndex (acc, 'date', dateShortHand (val.start), {date: printDate (val.start)}).push (val);\n    return acc;\n  }, []);\n}\n\nexport const wordCount = entry => {\n  if (entry.entryType === 'questions') return entry.answers.join (' ').split (' ').length;\n  if (entry.entryType === 'freeform') return entry.freeform.split (' ').length;\n  return 0;\n}\n\n\nexport const oneDay = 24 * 60 * 60 * 1000;\nexport const isInDay = (reference, date) => ((date >= reference) && ((date.getTime () - reference.getTime ()) < oneDay));\nexport const generateDailyDateRange = (_start, _end=new Date ()) => {\n  let start = new Date (_start);\n  start = new Date (start.getFullYear (), start.getMonth (), start.getDate ());\n  let end = new Date (_end.getFullYear (), _end.getMonth (), _end.getDate ());\n  const arr = [];\n  while (start <= end) {\n    arr.splice (0, 0, start);\n    start = new Date (start.getFullYear (), start.getMonth (), start.getDate () + 1);\n  }\n  return arr;\n}\n\nexport const oneWeek = 7 * oneDay;\nexport const isInWeek = (reference, date) => date >= reference && (date.getTime () - reference.getTime ()) < oneWeek;\nexport const generateWeeklyDateRange = (_start, _end=new Date ()) => {\n  let start = new Date (_start);\n  start = new Date (start.getFullYear (), start.getMonth (), start.getDate () - start.getDay ());\n  let end = new Date (_end.getFullYear (), _end.getMonth (), _end.getDate ());\n  const arr = [];\n  while (start <= end) {\n    arr.splice (0, 0, start);\n    start = new Date (start.getFullYear (), start.getMonth (), start.getDate () + 7);\n  }\n  return arr;\n}\n\nexport const isInMonth = (reference, date) => date.getFullYear () === reference.getFullYear () && date.getMonth () === reference.getMonth ();\nexport const generateMonthlyDateRange = (_start, _end=new Date ()) => {\n  let start = new Date (_start);\n  start = new Date (start.getFullYear (), start.getMonth (), 0);\n  let end = new Date (_end.getFullYear (), _end.getMonth (), _end.getDate ());\n  const arr = [];\n  while (start <= end) {\n    arr.splice (0, 0, start);\n    start = new Date (start.getFullYear (), start.getMonth () + 1, 0);\n  }\n  return arr;\n}\n","import {useState} from 'react';\nimport {skills as api} from '../lib/auth';\n\nconst findIndex = (indexedArr, key, value, meta={}) => {\n  let found = indexedArr.filter (el => el [key] === value)\n  if (found.length > 0) return found [0].list;\n  let index = {[key]: value, meta, list: []};\n  indexedArr.push (index);\n  return index.list;\n}\n\nexport default function useSkills (freeze) {\n\n  const [skills, setSkills] = useState ([]);\n  const getSkills = async userId => {\n    try {\n      let req = await api.get (userId);\n      let data = await req.json ();\n      let indexed = data.reduce ((acc, val) => {\n        findIndex (acc, 'category', val.category, {category: val.category}).push (val);\n        return acc;\n      }, []);\n      setSkills (indexed);\n    } catch (e) {\n    }\n  }\n  const submitSkill = (body) => new Promise (async (resolve, reject) => {\n    let unfreeze = freeze ();\n    try {\n      await api.post (body);\n      await getSkills ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    } finally {\n      unfreeze ();\n    }\n  })\n  const removeSkill = id => new Promise (async (resolve, reject) => {\n    let unfreeze = freeze ();\n    try {\n      await api.del (id);\n      await getSkills ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    } finally {\n      unfreeze ();\n    }\n  });\n  return {skills, getSkills, submitSkill, removeSkill}\n\n}","let path = window.location.href.split ('?') [0];\nif (path.charAt (path.length - 1) === '/') path = path.substring (0, path.length - 1);\nexport default path;","import lame from 'lamejs';\n\nlet audioCtx = null;\nlet AudioContext = (window.AudioContext || window.webkitAudioContext);\nlet encoder;\n\n\nlet stream = null;\nlet mediaRecorder = null;\nlet chunks = [];\nlet mp3data = [];\n\nexport const hasBrowserSupport = !!AudioContext;\n\nexport const getUserMedia = async () => new Promise (async (resolve, reject) => {\n  try {\n    stream = await window.navigator.mediaDevices.getUserMedia ({audio: true});\n    resolve ();\n  } catch (e) {\n    reject (e)\n  }\n});\nexport const createMediaRecorder = () => {\n  if (!stream) throw new Error ('no stream available to record');\n  mediaRecorder = new window.MediaRecorder (stream);\n  mediaRecorder.ondataavailable = evt => {\n    chunks.push (evt.data);\n  }\n}\nexport const isReadyForRecording = () => {\n  return (!!stream && !!mediaRecorder && !!chunks);\n}\nexport const getRecorderState = () => mediaRecorder?.state;\nexport const start = async (offset=300) => new Promise (async (resolve, reject) => {\n  try {\n    audioCtx = new AudioContext ();\n    // ensure environment ready for recording\n    if (!isReadyForRecording ()) throw new Error ('Environment not set up for recording');\n    setTimeout (() => {\n      mediaRecorder.start ();\n      resolve ();\n    }, offset);\n  } catch (e) {\n    console.log (e);\n    console.log (`\n    current state:\n      stream = ${stream}\n      mediaRecorder = ${mediaRecorder}\n      chunks = ${chunks}\n    `);\n  }\n})\nexport const stop = async () => new Promise (async (resolve, reject) => {\n  try {\n    mediaRecorder.stop ();\n    setTimeout (() => resolve (), 150);\n  } catch (e) {\n    reject (e);\n    console.log (`\n    current state:\n      stream = ${stream}\n      mediaRecorder = ${mediaRecorder}\n      chunks = ${chunks}\n    `);\n  }\n});\nexport const pause = () => {\n  mediaRecorder.pause ();\n}\nexport const resume = () => {\n  mediaRecorder.resume ();\n}\nexport const extract = async (freeze, title='recording') => new Promise (async (resolve, reject) => {\n  let unfreeze = freeze ();\n  try {\n    audioCtx.decodeAudioData (await chunks [0].arrayBuffer (), decoded => {\n      encoder = new lame.Mp3Encoder (decoded.numberOfChannels, decoded.sampleRate, 256000);\n      mp3data.push (encoder.encodeBuffer (decoded.getChannelData (0).map (data => data * 10000)));\n      mp3data.push (new Int16Array (encoder.flush ()));\n      let file = new File (mp3data, title, {type: 'audio/mp3'});\n      unfreeze ();\n      resolve (file);\n    });\n  } catch (e) {\n    unfreeze ();\n    reject (e);\n  }\n});","import {useState} from 'react';\nimport {notifications as api} from '../lib/auth';\n\nconst getMinutes = _time => {\n  let [time, ampm] = _time.split (' ');\n  let [hours, minutes] = time.split (':');\n  return (parseInt (hours) % 12) * 60 + parseInt (minutes) + (ampm === 'pm' ? 12 * 60 : 0);\n}\n\nconst compareTimes = (a, b) => {\n  let mina = getMinutes (a.notificationTime);\n  let minb = getMinutes (b.notificationTime);\n  return mina - minb;\n}\n\nexport default function useNotifications (freeze) {\n\n  const [notifications, setNotifications] = useState ([]);\n  const getNotifications = async () => new Promise (async (resolve, reject) => {\n    try {\n      let req = await api.get ();\n      let data = await req.json ();\n      data.sort (compareTimes);\n      setNotifications (data);\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  })\n  const createNotification = body => new Promise (async (resolve, reject) => {\n    let unfreeze = freeze ();\n    try {\n      await api.post (body);\n      await getNotifications ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    } finally {\n      unfreeze ();\n    }\n  })\n  const deleteNotification = id => new Promise (async (resolve, reject) => {\n    let unfreeze = freeze ();\n    try {\n      await api.del (id);\n      await getNotifications ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    } finally {\n      unfreeze ();\n    }\n  });\n  return {notifications, getNotifications, createNotification, deleteNotification}\n\n}","export const measurementMap = {\n  'default-5': 1,\n  'default-6': 0,\n  'default-7': null\n} \nexport const settingMap =  {\n  'default-0': '...',\n  'default-1': '...',\n  'default-2': '...'\n}\nexport const defaultQuestions = [\n  {\n    id: 'default-0',\n    unit: 'string',\n    prompt: 'What have I done today?',\n    frequency: 'as needed'\n  },\n  {\n    id: 'default-1',\n    unit: 'string',\n    prompt: 'How do I feel?',\n    frequency: 'as needed'\n  },\n  {\n    id: 'default-2',\n    unit: 'string',\n    prompt: 'What else am I going to do today?',\n    frequency: 'as needed'\n  },\n  {\n    id: 'default-4',\n    unit: 'string',\n    prompt: 'What are my goals this week?',\n    frequency: 'as needed'\n  }\n]\nexport const defaultMetrix = [\n  {\n    id: 'default-5',\n    unit: 'number',\n    range: [1, 10],\n    step: 1,\n    prompt: 'How would I rate how I feel right now?',\n    frequency: 'as needed',\n    isDefault: true\n  },\n  {\n    id: 'default-6',\n    unit: 'number',\n    range: [0, 16],\n    step: 0.25,\n    prompt: 'How much sleep did I get last night?',\n    frequency: 'daily',\n    unitLabel: 'hours',\n    isDefault: true\n  },\n  {\n    id: 'default-7',\n    unit: 'boolean',\n    prompt: 'Did I accomplish my goals this week?',\n    frequency: 'weekly',\n    isDefault: true\n  },\n]\nexport default [\n  ...defaultQuestions,\n  ...defaultMetrix\n]","import {useEffect, useState} from 'react';\nimport {metrix as metrixApi, measurements as measurementsApi} from '../lib/auth';\nimport { defaultMetrix } from '../lib/defaultQuestions';\n\nlet thisMorning = new Date ();\nthisMorning = new Date (thisMorning.getFullYear (), thisMorning.getMonth (), thisMorning.getDate ());\nlet tonight =  new Date (thisMorning.getFullYear (), thisMorning.getMonth (), thisMorning.getDate () + 1);\nconst isToday = date => date > thisMorning && date < tonight;\n\nlet thisWeek = new Date ();\nthisWeek = new Date (thisWeek.getFullYear (), thisWeek.getMonth (), thisWeek.getDate () - thisWeek.getDay ());\nconst isThisWeek = date => date > thisWeek;\n\nlet thisMonth = new Date ();\nthisMonth = new Date (thisWeek.getFullYear (), thisWeek.getMonth (), 0);\nconst isThisMonth = date => date > thisMonth;\n\nexport default function useMetrix (freeze) {\n  \n  // relevant state\n  const [metrix, setMetrix] = useState (defaultMetrix);\n  const [measurements, setMeasurements] = useState ([])\n  const [newMeasurements, setNew] = useState ([]);\n  const [captured, setCaptured] = useState ([]);\n  const [singleMetrix, setSingleMetrix] = useState (null);\n  const [singleMeasurement, setSingleMeasurement] = useState (null);\n\n  // get metrix\n  const getMetrix = async userId => {\n    try {\n      const req = await metrixApi.get (userId);\n      let data = await req.json ();\n      setMetrix ([...defaultMetrix, ...data]);\n    } catch (e) {\n      console.log ('#getMetrix', e);\n    }\n    return Promise.resolve ();\n  }\n\n  // create a metrix\n  const createMetrix = async body => new Promise (async (resolve, reject) => {\n    let unfreeze = freeze ();\n    try {\n      const req = await metrixApi.post (body);\n      if (!req.ok) throw new Error ('request not ok');\n      await getMetrix ();\n      resolve ();\n    } catch (e) {\n      console.log ('#createMetrix', e);\n      reject (e);\n    } finally {\n      unfreeze ();\n    }\n  })\n\n  const deleteMetrix = async id => new Promise (async (resolve, reject) => {\n    let unfreeze = freeze ();\n    try {\n      await metrixApi.del (id);\n      await getMetrix ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    } finally {\n      unfreeze ();\n    }\n  })\n\n  // get metrix\n  const getMeasurements = async userId => {\n    try {\n      const req = await measurementsApi.get (userId);\n      let data = await req.json ();\n      data = data.map (m => Object.assign (m, {measurement: (m.measurement || m.value), measuredAt: new Date (m.measuredAt)}));\n      setMeasurements (data);\n    } catch (e) {\n      console.log ('#getMeasurements', e);\n    }\n    return Promise.resolve ();\n  }\n\n  const measure = (metric, measurement) => {\n    let possible = [...metrix, ...defaultMetrix];\n    if (!possible.find (m => metric.id === m.id)) return;\n    let nm = newMeasurements.slice ();\n    let found = nm.findIndex (mez => mez.metricId === metric.id);\n    if (found === -1) return setNew ([...newMeasurements, {metricId: metric.id, body: {measurement, unit: metric.unit}}]);\n    if (measurement === undefined) nm.splice (found, 1);\n    else nm [found].body.measurement = measurement;\n    setNew (nm);\n  }\n\n  const measureHistoric = async (metric, measurement, measuredAt) => {\n    let unfreeze = freeze ();\n    try {\n      await measurementsApi.post (metric.id, {measurement, measuredAt, unit: metric.unit});\n    } finally {\n      unfreeze ();\n    }\n  }\n\n  const getMeasureValue = (prompt) => newMeasurements.find (mez => mez.metricId === prompt?.id)?.body?.measurement;\n\n  // create a metrix\n  const createMeasurements = async () => new Promise (async (resolve, reject) => {\n    let unfreeze = freeze ();\n    try {\n      await Promise.all (newMeasurements.map (mez => measurementsApi.post (mez.metricId, mez.body)));\n      setNew ([]);\n      await getMeasurements ();\n      resolve ();\n    } catch (e) {\n      console.log ('#createMeasurements', e);\n      reject (e);\n    } finally {\n      unfreeze ();\n    }\n  })\n\n  const updateMeasurement = async (mez, value) => {\n    let unfreeze = freeze ();\n    try {\n      await measurementsApi.put (mez, value);\n    } finally {\n      unfreeze ();\n    }\n  }\n\n  const isCaptured = (metricId) => captured.includes (metricId);\n\n  useEffect (() => {\n    if (!metrix.length || !measurements.length) return;\n    let today = measurements.filter (mes => metrix.find (met => met.id === mes.metric)?.frequency === 'daily').filter (m => isToday (m.measuredAt));\n    let thisWeek = measurements.filter (mes => metrix.find (met => met.id === mes.metric)?.frequency === 'weekly').filter (m => isThisWeek (m.measuredAt));\n    let thisMonth = measurements.filter (mes => metrix.find (met => met.id === mes.metric)?.frequency === 'monthly').filter (m => isThisMonth (m.measuredAt));\n    let cap = [\n      ...metrix.filter (metric => !!today.find (m => m.metric === metric.id)).map (metric => metric.id),\n      ...metrix.filter (metric => !!thisWeek.find (m => m.metric === metric.id)).map (metric => metric.id),\n      ...metrix.filter (metric => !!thisMonth.find (m => m.metric === metric.id)).map (metric => metric.id)\n    ]\n    setCaptured (cap);\n  }, [metrix, measurements]);\n\n  return {metrix, singleMetrix, singleMeasurement, measurements, captured, getMetrix, setSingleMetrix, setSingleMeasurement, createMetrix, updateMeasurement, deleteMetrix, getMeasureValue, getMeasurements, measure, createMeasurements, measureHistoric, isCaptured}\n\n}","import useAuth from './useAuth';\nimport useJournal from './useJournal';\nimport useWriting from './useWriting';\nimport useSettings from './useSettings';\nimport useSharing from './useSharing';\nimport useSkills from './useSkills';\nimport useRouter from './useRouter';\nimport useAudio from './useAudio';\nimport useNotifications from './useNotifications';\nimport useMetrix from './useMetrix';\n\nexport default {\n  useAuth,\n  useJournal,\n  useWriting,\n  useSettings,\n  useSharing,\n  useSkills,\n  useRouter,\n  useAudio,\n  useNotifications,\n  useMetrix\n}","import {useState, useEffect} from 'react';\nimport {login as _login, register as _register, getCurrentUser, retrieveAccessToken, refreshSession, signOut, customFlow} from '../lib/auth';\n\nexport default function useAuth (freeze, onSessionActive) {\n  // data\n  const [user, setUser] = useState (null);\n  const [err, setErr] = useState (null);\n\n  // login method - gets jwt from cognito and accuires barista session from api\n  const login = async (Username, cb, onCodeSent) => {\n    return new Promise (async (resolve, reject) => {\n      let unfreeze = freeze ();\n      try {\n        await customFlow (Username, cb, onCodeSent, init, setErr);\n        resolve ();\n        unfreeze ();\n      } catch (e) {\n        reject (e);\n        unfreeze ();\n      }\n    })\n  }\n\n  // retrieve locally stored user\n  const retrieveSession = async () => new Promise (async (resolve, reject) => {\n    try {\n      await getCurrentUser ();\n      await retrieveAccessToken ();\n      resolve ();\n    } catch (e) {\n      console.log (e);\n      reject (e);\n    }\n  });\n\n  // logout logs out locally\n  const logout = async () => new Promise (async (resolve, reject) => {\n    let unfreeze = freeze ();\n    try {\n      await signOut ();\n      window.location.reload ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    } finally {\n      unfreeze ();\n    }\n  })\n  \n  // init\n  const init = async () => {\n    try {\n      await getCurrentUser ();\n      await retrieveSession ();\n      await refreshSession ();\n      setUser (true);\n    } catch (e) {\n      setUser (false);\n    }\n  }\n\n  const register = async (phoneNumber, cb, onCodeSent) => new Promise (async (resolve, reject) => {\n    let unfreeze = freeze ();\n    try {\n      await _register (phoneNumber);\n      await customFlow (phoneNumber, cb, onCodeSent, init, setErr);\n      resolve ();\n    } catch (e) {\n      setErr (e);\n      reject (e);\n    } finally {\n      unfreeze ();\n    }\n  });\n\n  useEffect (() => {\n    if (user && onSessionActive) onSessionActive ();\n  }, [user]);\n\n  useEffect (() => {\n    init ();\n  }, []);\n\n  return {user, err, login, logout, register};\n}","import {useEffect, useState} from 'react';\nimport {entries as api, shares} from '../lib/auth';\nimport constructFilterList from '../lib/filters';\nimport {runIndexEntries} from '../lib/indexing';\n\nexport default function useJournal (freeze) {\n\n  // just journal stuff\n  const [entryList, setEntryList] = useState ([]); \n  // filters n stuff\n  const [filterIterator, setIter] = useState (0);\n  const [filters, actualSetFilter] = useState ([]);\n  const [filterList, setFilterList] = useState ([]);\n  const [query, setQuery] = useState ('');\n  const [entries, setIdx] = useState ([]);\n  // stage for removal\n  const [toRemove, setToRemove] = useState ([]);\n  \n  // read\n  const getEntries = async userId => {\n    try {\n      let req = await api.get (userId);\n      let arr = await req.json ();\n      setEntryList (arr);\n    } catch (e) {\n    }\n  }\n  // create\n  const createEntry = async body => new Promise (async (resolve, reject) => {\n    let unfreeze = freeze ();\n    try {\n      await api.post (body);\n      await getEntries ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    } finally {\n      unfreeze ();\n    }\n  })\n\n  // delete\n  const hideEntry = async id => new Promise (async (resolve, reject) => {\n    let unfreeze = freeze ();\n    try {\n      await api.hide (id);\n      await getEntries ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    } finally {\n      unfreeze ();\n    }\n  });\n\n  // calculate filter state\n  const setFilters = filters => {\n    actualSetFilter (filters);\n    let fl = constructFilterList (filters);\n    setFilterList (fl);\n    setIter (filterIterator + 1);\n  }\n\n  // actually query the entrylist\n  const runQuery = () => {\n    // run all filters\n    let result = filterList.reduce ((acc, val) => {\n      return acc.filter (val);\n    }, entryList);\n    // scenario in which there is no query\n    if (query.length === 0) return setIdx (runIndexEntries (result));\n    // separate freeform/audio/qa\n    let freeform = entryList.filter (e => e.entryType === 'freeform')\n      .map (entry => Object.assign (entry, {text: entry.freeform}))\n      .filter (({text}) => text.match (query.toLowerCase ()));;\n    let qa = entryList.filter (e => e.entryType === 'questions')\n      .map (entry => Object.assign (entry, {\n        text: entry.answers.join (' ').toLowerCase ()\n      }))\n      .filter (({text}) => text.match (query.toLowerCase ()));\n    result = runIndexEntries ([...qa, ...freeform]);\n    setIdx (result);\n  }\n\n  const clearSearch = () => {\n    setFilters ([]);\n    setQuery ('');\n    setIter (filterIterator + 1);\n    return Promise.resolve ();\n  }\n\n  // run the query\n  useEffect (() => {\n    runQuery ();\n  }, [entryList, filters.length, query, filterIterator]);\n\n  return {entries, entryList, filters, filterIterator, getEntries, createEntry, hideEntry, setQuery, clearSearch, setFilters};\n\n}","import { useState } from \"react\";\nimport {questions as api} from '../lib/auth';\n\nexport default function useWriting (freeze) {\n\n  const [questions, setQuestions] = useState ([]);\n  \n  const getQuestions = async () => new Promise (async (resolve, reject) => {\n    try {\n      let req = await api.get ();\n      let qs = await req.json ();\n      setQuestions (qs.map (q => ({prompt: q.body, id: `custom-question-${q.id}`, unit: 'string', frequency: 'as needed'})));\n      resolve (qs);\n    } catch (e) {\n      reject (e);\n    }\n  });\n\n  const createQuestion = async q => new Promise (async (resolve, reject) => {\n    let unfreeze = freeze ();\n    try {\n      await api.post (q);\n      await getQuestions ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    } finally {\n      unfreeze ();\n    }\n  });\n\n  const deleteQuestion = async q => new Promise (async (resolve, reject) => {\n    let unfreeze = freeze ();\n    try {\n      let req = await api.del (q);\n      if (!req.ok) throw new Error ('Could not delete question');\n      await getQuestions ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    } finally {\n      unfreeze ();\n    }\n  })\n\n  return {questions, getQuestions, createQuestion, deleteQuestion};\n \n}","import {useState, useEffect} from 'react';\n\n// Relationship API:\n//   |setting - this or setting must be true\n//   !setting - must be inverse of setting\n//   &setting - must also be true\n//   +setting - if setting is true, show this\n\nexport default function useSettings (defaultSettings={}, storage=window.localStorage) {\n  const storedSettings = JSON.parse (storage.getItem ('therapy-journal-settings') || '{}');\n  const currentSettings = Object.assign (defaultSettings, storedSettings);\n  const [settings, setSettings] = useState (currentSettings);\n  const [iter, setIter] = useState (0);\n  const getSetting = (setting, ...relationships) => {\n    if (!relationships.length) return settings [setting];\n    return relationships.reduce ((acc, val) => {\n      let relation = val.charAt (0);\n      let affected = val.substring (1);\n      if (relation === '!') return acc && !settings [affected];\n      if (relation === '|') return acc || settings [affected];\n      if (relation === '&') return acc && settings [affected];\n      return acc;\n    }, settings [setting]);\n  }\n  const getAll = () => {\n    return Object.assign ({}, settings);\n  }\n  const addSetting = (setting, initial) => {\n    if (settings [setting]) return;\n    setSettings ({...settings, [setting]: initial});\n    setIter (iter + 1);\n  }\n  const removeSetting = setting => {\n    delete settings [setting];\n    setIter (iter + 1);\n  }\n  const clearSettings = () => {\n    setSettings ({});\n    setIter (iter + 1);\n  }\n  const set = (setting, value, ...relationships) => {\n    if (!relationships.length) return setSettings ({...settings, [setting]: value});\n    let changes = relationships.reduce ((acc, val) => {\n      let relation = val.charAt (0);\n      let affected = val.substring (1);\n      if (relation === '!') return {\n        ...acc,\n        [affected]: !value\n      };\n      if (relation === '|' && value === false) return {\n        ...acc,\n        [affected]: true\n      };\n      return acc;\n    }, {[setting]: value});\n    setSettings (_sett => Object.assign (_sett, changes));\n    setIter (iter + 1);\n  }\n  const setAll = (arr=[]) => {\n    let changes = arr.reduce ((acc, {key, value}) => {\n      return Object.assign (acc, {[key]: value})\n    }, {});\n    setSettings (_sett => Object.assign (_sett, changes));\n    setIter (iter + 1);\n  }\n  const toggle = (setting, relationships=[]) => e => {\n    if (!relationships.length)  return setSettings ({...settings, [setting]: !settings[setting]})\n    let to = !settings [setting];\n    let changes = relationships.reduce ((acc, val) => {\n      let relation = val.charAt (0);\n      let affected = val.substring (1);\n      if (relation === '!') return {\n        ...acc,\n        [affected]: !to\n      };\n      if (relation === '|' && to === false) return {\n        ...acc,\n        [affected]: true\n      };\n      return acc;\n    }, {[setting]: to});\n    setSettings ({...settings, ...changes});\n    setIter (iter + 1);\n  }\n  useEffect (() => {\n    storage.setItem ('therapy-journal-settings', JSON.stringify (settings));\n  }, [settings]);\n\n  return {getSetting, removeSetting, getAll, toggle, addSetting, set, setAll, clearSettings}\n}","import {useState} from 'react';\nimport {shares as api} from '../lib/auth';\nimport {runIndexEntries} from '../lib/indexing';\n\nexport default function useSharing (freeze, settings) {\n\n  const [sharedWithMe, setSharedWithMe] = useState ([]);\n  const [sharedByMe, setSharedByMe] = useState ([]);\n  const [sharedJournal, setSharedJournal] = useState ([]);\n  const getShares = async () => {\n    try {\n      let req = await api.get ();\n      let {sharedWithMe, sharedByMe} = await req.json ();\n      setSharedByMe (sharedByMe);\n      setSharedWithMe (sharedWithMe);\n      let sett = sharedByMe.map (sbm => {return {key: `share-${sbm.id}`, value: !sbm.frozen}});\n      settings.setAll (sett);\n    } catch (e) {\n      console.log (e);\n    }\n  }\n  const getShareById = async id => new Promise (async (resolve, reject) => {\n    try {\n      let req = await api.getById (id);\n      let arr = await req.json ();\n      let dict = runIndexEntries (arr);\n      setSharedJournal (dict);\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  })\n\n  const toggleFreeze = async id => new Promise (async (resolve, reject) => {\n    let unfreeze = freeze ();\n    try {\n      await api.toggleFreeze (id);\n      await getShares ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    } finally {\n      unfreeze ();\n    }\n  });\n\n  const shareJournal = async (phone, name, shareWithName) => new Promise (async (resolve, reject) => {\n    let unfreeze = freeze ();\n    try {\n      let shareWith = (phone.length === 10) ? `+1${phone}` : phone;\n      await api.post ({shareWith, name, shareWithName});\n      await getShares ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    } finally {\n      unfreeze ();\n    }\n  })\n\n  return {sharedByMe, sharedWithMe, sharedJournal, getShareById, getShares, shareJournal, toggleFreeze};\n\n}","import {useState} from 'react';\nimport base from '../lib/base';\nimport {scrollToTop} from '../lib/scrolling';\n\nexport default function useRouter () {\n  // router section\n  let initialPage = new URLSearchParams (window.location.search).get ('page') || 'write';\n  const [page, setPage] = useState (initialPage);\n  const [params, setParams] = useState (new URLSearchParams (window.location.search));\n  const redirect = (url) => {\n    let arr = url.split ('?');\n    let nextPage = arr.length > 1 ? new URLSearchParams (`?${arr [1]}`).get ('page') : 'write';\n    window.history.pushState ({previous: page, next: nextPage}, 'Journal', `${base}${url}`)\n    setPage (nextPage);\n    if (arr.length > 1) setParams (new URLSearchParams (`?${arr [1]}`));\n    scrollToTop (100);\n  }\n\n  return {page, params, redirect};\n\n}","export const scrollToTop = (offset=0) => setTimeout (() => {\n  window.scrollBy ({\n    left: 0,\n    top: -window.scrollY,\n    behavior: 'smooth'\n  })\n}, offset);\n\nexport const runScroll = (top=2 * window.innerHeight / 3, offset=100) => setTimeout (() => {\n  window.scrollTo ({\n    top: document.body.scrollHeight,\n    behavior: 'smooth'\n  });\n}, offset);","import {getTime, dateShortHand} from '../lib/indexing';\nimport * as WebAudio from '../lib/webaudio';\nimport { useState } from \"react\";\n\nexport default function useAudio (freeze) {\n  // statful stuff\n  const [recordingStatus, setRecordingStatus] = useState ('not-started');\n  const [audioRecording, setAudioRecording] = useState (null);\n  const [audioRecordingTitle, setAudioRecordingTitle] = useState (`audio-recording-${getTime ()}-${dateShortHand ()}.mp3`);\n  const [timeElapsed, setTimeElapsed] = useState (0);\n  const [timer, setTimer] = useState (false);\n  const [ready, setReady] = useState (null);\n\n  // reset all audio recording stuff\n  const resetAudioInformation = () => {\n    setAudioRecording (null);\n    setAudioRecordingTitle (`audio-recording-${getTime ()}-${dateShortHand ()}.mp3`);\n    setTimeElapsed (0);\n    setRecordingStatus ('not-started');\n    setTimer (false);\n  }\n  // start recording audio\n  const startRecording = async () => {\n    await WebAudio.start ();\n    setRecordingStatus ('recording');\n    setTimer (window.setInterval (() => setTimeElapsed (time => time + 1), 1000));\n  }\n  // end the recording and extract the audio\n  const stopRecording = async () => {\n    window.clearInterval (timer);\n    setTimer (false);\n    setTimeElapsed (0);\n    await WebAudio.stop ();\n    let file = await WebAudio.extract (freeze, `audio-recording-${getTime ()}-${dateShortHand ()}.mp3`);\n    console.log (file);\n    setAudioRecording (file);\n    setRecordingStatus ('finished');\n  }\n  // pause the recording, do not end\n  const pauseRecording = async () => {\n    window.clearInterval (timer);\n    setRecordingStatus ('paused');\n    WebAudio.pause ();\n  }\n  // resume the recording\n  const resumeRecording = async () => {\n    setTimer (window.setInterval (() => setTimeElapsed (time => time + 1), 1000));\n    setRecordingStatus ('recording');\n    WebAudio.resume ();\n  }\n  // ensure web-audio is ready\n  const initAudio = async () => {\n    let unfreeze = freeze ();\n    try {\n      await WebAudio.getUserMedia ()\n      WebAudio.createMediaRecorder ();\n      setReady (WebAudio.isReadyForRecording ());\n      unfreeze ();\n    } catch (e) {\n      unfreeze ();\n    }\n  }\n\n  return {initAudio, audioRecording, audioRecordingTitle, timeElapsed, recordingStatus, ready, startRecording, stopRecording, pauseRecording, resumeRecording, resetAudioInformation, setAudioRecordingTitle};\n}","export default {\n  'custom-questions': true,\n  'default-questions': true,\n  'custom-metrix': true,\n  freeform: false,\n  'starred-string-default-0': true,\n  'starred-string-default-1': true,\n  'starred-string-default-2': true\n}\n","// create a context usable across the whole application\nimport React, { createContext, useState } from \"react\";\nimport hooks from './hooks';\nimport {settingMap as defaultQuestions} from \"./lib/defaultQuestions\";\nimport defaultSettings from './lib/defaultSettings';\nimport {hasBrowserSupport} from './lib/webaudio'\n// react context api\nconst AppContext = createContext ();\nexport const useApp = () => React.useContext (AppContext);\n\n// the component\nexport default function AppProvider ({children}) {\n\n  // value used in the ctx\n  const value = {}\n\n  // freeze/unfreeze animation\n  const [frozen, setFrozen] = useState (null);\n  value.freeze = message => {\n    setFrozen (message='');\n    return function unfreeze () {\n      setFrozen (null);\n    }\n  }\n\n  // modal\n  const [modal, setModal] = useState (null);\n  value.closeModal = () => setModal (null);\n  value.setModal = setModal;\n\n  // view only mode for shared journals\n  const [isViewOnly, setIsViewOnly] = useState (false);\n  value.viewMode = {isViewOnly, setIsViewOnly};\n\n  // instantiate hooks\n  value.settings = hooks.useSettings (defaultSettings);\n  value.session = hooks.useSettings (defaultQuestions, sessionStorage);\n  value.skills = hooks.useSkills (value.freeze);\n  value.journal = hooks.useJournal (value.freeze);\n  value.sharing = hooks.useSharing (value.freeze, value.settings);\n  value.writing = hooks.useWriting (value.freeze);\n  value.metrix = hooks.useMetrix (value.freeze);\n  value.router = hooks.useRouter (value.freeze);\n  value.audio = hooks.useAudio (value.freeze);\n  value.notifications = hooks.useNotifications (value.freeze);\n\n  // switch to viewing a shared journal\n  value.viewSharedJournal = id => {\n    value.journal.getEntries (id);\n    value.skills.getSkills (id);\n    value.viewMode.setIsViewOnly (true);\n    value.router.redirect ('/?page=journal')\n  }\n  value.viewMyJournal = () => {\n    value.journal.getEntries ();\n    value.skills.getSkills ();\n    value.viewMode.setIsViewOnly (false);\n    value.router.redirect ('/?page=settings');\n  }\n\n  // after log in initialize all the stuff\n  const onAuth = () => {\n    value.metrix.getMetrix ();\n    value.metrix.getMeasurements ();\n    value.skills.getSkills ();\n    value.writing.getQuestions ();\n    value.journal.getEntries ();\n    value.sharing.getShares (({sharedByMe}) => {\n      sharedByMe.forEach (share => {\n        value.settings.set (`share-${share.id}`, !share.frozen);\n      });\n    });\n    value.notifications.getNotifications ();\n    if (!hasBrowserSupport) {\n      value.settings.set ('audio-recording-supported', false);\n      value.settings.set ('audio-recording', false);\n    } else {\n      value.settings.set ('audio-recording-supported', true);\n      value.settings.set ('audio-recording', false);\n    }\n  }\n\n  // auth hook\n  value.auth = hooks.useAuth (value.freeze, onAuth);\n\n  // just wrap the whole app component in this\n  return (\n    <AppContext.Provider value={value} >\n      {\n        frozen !== null &&\n        <div id=\"loading-animation\"></div>\n      }\n      {\n        modal !== null &&\n        <div id=\"modal-backdrop\">\n          <div id=\"modal-content\">\n            {modal}\n          </div>\n        </div>\n      }\n      {children}\n    </AppContext.Provider>\n  )\n}","import { useEffect } from 'react';\nimport { useApp } from '../../AppProvider';\n\nfunction AudioRecorder () {\n  const {audio: {\n    initAudio,\n    ready,\n    recordingStatus,\n    audioRecording,\n    timeElapsed,\n    audioRecordingTitle,\n    startRecording,\n    stopRecording,\n    pauseRecording,\n    resumeRecording,\n    resetAudioInformation,\n    setAudioRecordingTitle\n  }} = useApp ();\n\n  useEffect (() => {\n    if (!ready) initAudio ();\n  }, []);\n\n  if (ready === null) return null;\n  if (recordingStatus === 'not-started') return (\n    <div className=\"recorder-container grid text-center\">\n      <p>Click \"Record\" to speak your journal entry!</p>\n      <button onClick={startRecording}>Record</button>\n    </div>\n  )\n  if (recordingStatus === 'paused') return (\n    <div className=\"recorder-container grid text-center\">\n      <div className=\"timer\"><span>{Math.floor (timeElapsed / 60)}:{`00${timeElapsed % 60}`.slice (-2)}</span></div>\n      <div>\n        <button onClick={resumeRecording}>Resume</button>\n        <button onClick={stopRecording}>Finish</button>\n      </div>\n    </div>\n  )\n  if (recordingStatus === 'recording') return (\n    <div className=\"recorder-container grid text-center\">\n      <div className=\"timer flashing\"><span>{Math.floor (timeElapsed / 60)}:{`00${timeElapsed % 60}`.slice (-2)}</span></div>\n      <div>\n        <button onClick={stopRecording}>Stop</button>\n        <button onClick={pauseRecording}>Pause</button>\n      </div>\n    </div>\n  )\n  if (recordingStatus === 'finished') return (\n    <div className=\"recorder-container grid text-center\">\n      <figure className=\"audio-recording\">\n        <figcaption>\n          <p>\n            Title:&nbsp;&nbsp;&nbsp;\n            <input className=\"audio-title-input\" onChange={e => setAudioRecordingTitle (e.target.value)} value={audioRecordingTitle} />\n          </p>\n          <p className=\"fake-button\"><a className=\"error\" onClick={resetAudioInformation}>Start Over</a></p>\n        </figcaption>\n        <audio controls src={window.URL.createObjectURL (audioRecording)} />\n      </figure>\n    </div>\n  )\n  return (\n    <div>Error! Error!</div>\n  )\n}\nexport default AudioRecorder","export default __webpack_public_path__ + \"static/media/back.46f9b388.svg\";","export default __webpack_public_path__ + \"static/media/book.65cd22a3.svg\";","export default __webpack_public_path__ + \"static/media/calendar.0073112f.svg\";","export default __webpack_public_path__ + \"static/media/cancel.da5c4222.svg\";","export default __webpack_public_path__ + \"static/media/caret-down.bfd98d54.svg\";","export default __webpack_public_path__ + \"static/media/dashboard.4dfd917f.svg\";","export default __webpack_public_path__ + \"static/media/filter.8be2c938.svg\";","export default __webpack_public_path__ + \"static/media/left-arrow.7f101ba2.svg\";","export default __webpack_public_path__ + \"static/media/happy.2fd56c08.svg\";","export default __webpack_public_path__ + \"static/media/plus.a86e5868.svg\";","export default __webpack_public_path__ + \"static/media/list.65c76186.svg\";","export default __webpack_public_path__ + \"static/media/minus.88ead845.svg\";","export default __webpack_public_path__ + \"static/media/more.e1e2c114.svg\";","export default __webpack_public_path__ + \"static/media/next.e69630ed.svg\";","export default __webpack_public_path__ + \"static/media/ruler.7e9ac949.svg\";","export default __webpack_public_path__ + \"static/media/search.28b0ad10.svg\";","export default __webpack_public_path__ + \"static/media/settings.d2739024.svg\";","export default __webpack_public_path__ + \"static/media/skill.23054f65.svg\";","export default __webpack_public_path__ + \"static/media/stopwatch.43421b05.svg\";","export default __webpack_public_path__ + \"static/media/trash.dd7f053f.svg\";","export default __webpack_public_path__ + \"static/media/checkmark.1d073034.svg\";","export default __webpack_public_path__ + \"static/media/key.4617432b.svg\";","export default __webpack_public_path__ + \"static/media/star.dd913ac2.svg\";","export default __webpack_public_path__ + \"static/media/star filled.c07a5d2e.svg\";","import {useCallback, useEffect, useRef, useState} from 'react';\nconst width = 400;\nconst height = 100;\nconst padding = 25;\nconst radius = 5;\nconst r = {r: radius};\n\nconst scaleX = (min, max) => {\n  const range = max - min;\n  const w = width - 2 * padding;\n  return value => {\n    if (value < min) value = min;\n    if (value > max) value = max;\n    return padding + (w) * (value - min) / range;\n  }\n}\n\nconst calcValue = (min, max, clientWidth) => {\n  const size = (clientWidth / width);\n  const w = size * (width - 2 * padding);\n  const range = max - min;\n  return function (position) {return (position - (size * padding)) * range / (w);}\n}\n\nexport default function Slider ({range: [min, max], step, defaultValue, onChange}) {\n  const svgref = useRef ();\n  const [value, setValue] = useState (defaultValue || min);\n  const [mouseIsDown, setMouseIsDown] = useState (false);\n  const roundToNearestStep = () => {\n    let decimals = step % 1 ? `${step}`.split ('.') [1].length : 0;\n    let parse = decimals ? parseFloat : parseInt;\n    let newVal = Math.round (min + (value - min) / step) * step;\n    newVal = parse (newVal.toFixed (decimals));\n    if (newVal < min) newVal = min; \n    if (newVal > max) newVal = max;\n    return newVal;\n  }\n\n  const [clientWidth, setClientWidth] = useState (width);\n  const inv = useCallback (calcValue (min, max, clientWidth), [clientWidth]);\n  useEffect (() => {\n    if (svgref.current) setClientWidth (svgref.current.clientWidth);\n  }, [svgref.current?.clientWidth])\n  const pos = scaleX (min, max);\n  const drag = e => {\n    if (!mouseIsDown) return;\n    let newVal = e.movementX ? value + (e.movementX * (max - min) / (svgref.current.clientWidth - (svgref.current.clientWidth * radius / width) * 10)) : (e.touches && e.touches.length) ? inv (e.touches [0].clientX): value;\n    if (newVal < min) newVal = min; \n    if (newVal > max) newVal = max;\n    setValue (newVal);\n  }\n  useEffect (() => {\n    onChange && onChange (roundToNearestStep ())\n  }, [value])\n  return (\n    <svg ref={svgref} onTouchMove={drag} onTouchCancel={() => setMouseIsDown (false)} onMouseMove={drag} onMouseLeave={() => setMouseIsDown (false)} onMouseUp={() => setMouseIsDown (false)} viewBox={`0 0 ${width} ${height}`} className=\"component-slider-svg\">\n      <g className=\"slider-base\">\n        <circle cx={pos (min)} cy={height / 2} {...r} />\n        <line x1={pos (min) + radius} x2={pos (max) - radius} y1={height / 2} y2={height / 2} />\n        <circle cx={pos (max)} cy={height / 2} {...r} />\n        <text x={pos (min)} y={height * .8} textAnchor=\"left\">{min}</text>\n        <text x={pos(max)} y={height * .8} textAnchor=\"end\">{max}</text>\n      </g>\n      <g className=\"slider-value\">\n        <circle onTouchStart={() => setMouseIsDown (true)} onMouseDown={() => setMouseIsDown (true)} cx={pos (value)} cy={height / 2} r={radius * 2} />\n        <line x1={pos (value)} x2={pos (value)} y1={height * .25} y2={height * .35}></line>\n        <text x={pos (value)} y={height * .2} textAnchor=\"middle\">{roundToNearestStep (value)}</text>\n      </g>\n    </svg>\n  )\n}","import { useEffect, useRef, useState } from \"react\";\nimport { useApp } from \"../../AppProvider\";\nimport { trash } from \"../../img/images\";\nimport MoreSVG from '../../img/more.svg';\nimport AudioRecorder from \"./AudioRecorder\";\nimport Slider from \"./Slider\";\n\nexport const units = {\n  boolean: 'Yes/No',\n  number: 'Number',\n  string: 'Question & Answer'\n}\n\nexport function BooleanMetric ({onChange, defaultValue}) {\n  return (\n    <div>\n      <select defaultValue={defaultValue} onChange={e => onChange (e.target.value === '' ? undefined : e.target.value)}>\n        <option value={undefined}></option>\n        <option>Yes</option>\n        <option>No</option>\n      </select>\n    </div>\n  )\n}\n\nexport function NumberMetric ({onChange, defaultValue, range, step}) {\n  return (\n    <div>\n      <Slider range={range} step={step} defaultValue={defaultValue} onChange={onChange} />\n    </div>\n  )\n}\n\nexport function StringMetric ({onChange, autofocus, defaultValue='...'}) {\n  const ref = useRef ();\n  const [isFirstFocus, setIsFirstFocus] = useState (defaultValue === '...');\n  const onFirstFocus = () => {\n    if (!isFirstFocus) return;\n    ref.current.innerText = '';\n    setIsFirstFocus (false);\n  }\n  useEffect (() => {\n    if (ref.current && autofocus) {\n      ref.current.focus ();\n    }\n  }, [ref]);\n  return (\n    <div ref={ref} onFocus={onFirstFocus} contentEditable onBlur={e => onChange (e.target.innerText)}>{defaultValue}</div>\n  )\n}\n\nexport function FreeformMetric ({onChange, autofocus, defaultValue='...', remove}) {\n  const ref = useRef ();\n  const [isFirstFocus, setIsFirstFocus] = useState (defaultValue === '...');\n  const onFirstFocus = () => {\n    if (!isFirstFocus) return;\n    ref.current.innerText = '';\n    setIsFirstFocus (false);\n  }\n  useEffect (() => {\n    if (ref.current && autofocus) {\n      ref.current.focus ();\n    }\n  }, [ref]);\n  return (\n    <div className=\"freeform-entry\" ref={ref} onFocus={onFirstFocus} contentEditable onBlur={e => onChange (e.target.innerText)}>{defaultValue}</div>\n  )\n}\n\nexport function AudioMetric ({onChange}) {\n  return (\n    <AudioRecorder />\n  )\n}\n\nexport const MetrixType = {\n  boolean: BooleanMetric,\n  number: NumberMetric,\n  string: StringMetric,\n  freeform: FreeformMetric,\n  audio: AudioMetric\n}\n\nexport default function MetrixToggles () {\n  \n  const {metrix: {metrix}} = useApp ();\n\n  // const submit = async () => {\n  //   await createMeasurements ();\n  //   redirect ('/?page=dash')\n  // }\n\n  // // route parameter determined prompts\n  // if (user && page === 'metrix' && params.get ('take-action') === 'prompt' && metrix.length) {\n  //   return (\n  //     <main id=\"custom-question-editor\">\n  //       <H1>Metrix</H1>\n  //       {\n  //         params.getAll ('measure-metric-id').filter (id => !isCaptured (id)).map (metricId => metrix.find (m => m.id === metricId)).filter (m => m).map (metric => (\n  //         <>\n  //           <b>{metric.prompt}</b>\n  //           <div className={`metrix ${metric.unit}`}>\n  //             {\n  //               metric.unit === 'boolean' &&\n  //               <BooleanMetric onChange={value => {console.log ('click', value); measure (metric, value)}} />\n  //             }\n  //             {\n  //               metric.unit === 'number' &&\n  //               <NumberMetric range={metric.range ? metric.range : [1, 10]} step={metric.step ? metric.step : 1} onChange={value => measure (metric, value)} />\n  //             }\n  //           </div>\n  //         </>\n  //         ))\n  //       }\n  //       {\n  //         !!params.getAll ('measure-metric-id').filter (id => !isCaptured (id)).map (metricId => metrix.find (m => m.id === metricId)).map (metricId => metrix.find (m => m.id === metricId)).filter (m => m).length &&\n  //         <button onClick={submit}>Submit</button>\n  //       }\n  //       {\n  //         !params.getAll ('measure-metric-id').filter (id => !isCaptured (id)).map (metricId => metrix.find (m => m.id === metricId)).map (metricId => metrix.find (m => m.id === metricId)).filter (m => m).length &&\n  //         <div className=\"grid\">Congrats :) you're ahead of schedule! Nothing left to do here!</div>\n  //       }\n  //     </main>\n  //   );\n  // }\n\n  return (\n    <>\n      <ul className=\"current-metrix-list\">\n        {\n          metrix.map (metric => (\n            <li className=\"metrix-metric\">\n              <b>{metric.prompt}</b>\n              <span>{units [metric.unit]}</span>\n              <span><img src={MoreSVG} /></span>\n            </li>\n          ))\n        }\n      </ul>\n    </>\n  );\n}","import React, { useState, useEffect } from \"react\";\nimport { useApp } from \"../AppProvider\";\nimport {MetrixType} from './components/Metrix'\nimport {H1, H2, H3} from './components/Headers'\nimport {printDate, getTime} from '../lib/indexing';\nimport CancelSVG from '../img/cancel.svg'\nimport TrashSVG from '../img/trash.svg'\nimport defaultPrompts, {defaultQuestions, defaultMetrix} from \"../lib/defaultQuestions\";\n\nconst typeDict = {\n  boolean: '(metric) ',\n  number: '(metric) ',\n  string: '',\n  freeform: '[freeform]',\n  audio: '[audio]'\n}\n\nconst freeformPrompt = {\n  id: 'freeform',\n  unit: 'freeform',\n  frequency: 'as needed',\n  prompt: ''\n}\n\nconst audioPrompt = {\n  id: 'audio',\n  unit: 'audio',\n  frequency: 'as needed',\n  prompt: ''\n}\n\nexport default function Write () {\n\n  // state stuff\n  const {\n    auth: {user},\n    router: {page},\n    journal: {createEntry},\n    settings: {getSetting},\n    writing: {questions},\n    metrix: {metrix, createMeasurements, measure, isCaptured},\n    session,\n    freeze\n  } = useApp ();\n  const setty = ['default-questions', 'custom-questions', 'use-metrix', 'freeform'].map (k => getSetting (k));\n  const [start, setStart] = useState (new Date ());\n  const [autoFocusPrompt, setAFP] = useState ('');\n  const [isSelecting, setIsSelecting] = useState ('');\n\n  // get all prompts\n  const allPrompts = () => {\n    let arr = [];\n    if (setty [3]) arr = [...arr, freeformPrompt];\n    if (setty [0]) arr = [...arr, ...defaultPrompts.filter (p => !isCaptured (p.id))];\n    if (setty [1]) arr = [...arr, ...questions];\n    if (setty [2]) arr = [...arr, ...metrix.filter (p => !defaultMetrix.find (m => m.id === p.id)).filter (p => !isCaptured (p.id))];\n    return arr;\n  }\n\n  useEffect (() => {\n    session.clearSettings ();\n    const prompts = allPrompts ().filter (p => getSetting (`starred-${p.unit}-${p.id}`));\n    let all = prompts.map (p => {\n      let value = null;\n      if (p.unit === 'string') value = '...';\n      if (p.unit === 'number') value = p.range [0];\n      measure (p, value);\n      return {key: p.id, value};\n    });\n    session.setAll (all);\n  }, [metrix, questions]);\n\n  // get active prompts\n  const getActivePromts = () => {\n    let rawPrompts = session.getAll ();\n    let all = allPrompts ();\n    let prompts = Object.keys (rawPrompts).filter (k => rawPrompts [k] !== undefined).map (id => all.find (p => p.id === id)).filter (a => a);\n    prompts.sort ((a, b) => all.findIndex (p => p.id === a.id) - all.findIndex (p => p.id === b.id));\n    return prompts;\n  }\n\n  // create entry\n  const submit = async () => {\n    let unfreeze = freeze ();\n    try {\n      const all = allPrompts ();\n      const qa = session.getAll ();\n      let questions = Object.keys (qa).filter (id => (qa [id] !== null && qa [id] !== undefined)).map (id => all.find (p => p.id === id)).filter (a => a);\n      let answers = questions.map (question => qa [question.id]);\n      questions = questions.map (question => {return `${question.prompt}${question.unitLabel ? ` (${question.unitLabel})` : ''}`})\n      const body = {\n        entryType: 'questions',\n        start,\n        end: new Date (),\n        questions,\n        answers\n      }\n      await createEntry (body);\n      await createMeasurements ();\n      session.clearSettings ()\n      setStart (new Date ());\n      unfreeze ();\n    } catch (e) {\n      unfreeze ();\n    }\n  }\n\n  // add a prompt\n  const addPromptById = id => {\n    let prompt = allPrompts ().find (m => id === m.id);\n    let value = null;\n    if (prompt.unit === 'string') value = '...';\n    if (prompt.unit === 'number') value = prompt.range [0];\n    if (!prompt) return;\n    session.set (prompt.id, value);\n    measure (prompt, value);\n    setAFP (prompt.id);\n  }\n\n  // set value of a prompt\n  const onChange = (prompt, value) => {\n    measure (prompt, value);\n    session.set (prompt.id, value);\n  }\n\n  // remove prompt\n  const removePrompt = (prompt) => {\n    console.log (`remove prompt id=${prompt.id}`)\n    measure (prompt, undefined);\n    session.removeSetting (prompt.id);\n  }\n\n  useEffect (() => {\n    setAFP ('');\n  }, [page])\n\n  // only render if authenticated & on write page\n  if (!user || page !== 'write') return null;\n  return (\n    <main id=\"question-answer-entry\">\n      <H1 short={'New Entry'}>{'New Question & Answer Entry'}</H1>\n      <H2>{printDate ()}</H2>\n      <H3>{getTime (start)}</H3>\n      <div className=\"questions\">\n        {\n          getActivePromts ().map (prompt => {\n            const Metric = MetrixType [prompt.unit];\n            const dv = {\n              defaultValue: session.getSetting (prompt.id)\n            }\n            return (\n              <React.Fragment key={`prompt-${prompt.unit}-${prompt.id}`}>\n                <span className={`prompt-prompt ${prompt.unit}`}>\n                  <b>{prompt.prompt}{prompt.unitLabel ? ` (${prompt.unitLabel})` : ''}</b>\n                  <span onClick={() => removePrompt (prompt)}><img src={TrashSVG} /></span>\n                </span>\n                <Metric autofocus={autoFocusPrompt === prompt.id} onChange={value => onChange (prompt, value)} {...dv} {...prompt} />\n                <hr className=\"prompt-divider\" />\n              </React.Fragment>\n            )\n          })\n        }\n        {\n          allPrompts ().filter (m => getActivePromts ().find (p => p.id === m.id)) !== 0 &&\n          <>\n            <section onClick={() => setIsSelecting ('selecting')} className={`add-a-section ${isSelecting}`}>+</section>\n            <section>\n              {\n                isSelecting === 'selecting' &&\n                <select autoFocus onChange={e => e.target.value ? (addPromptById (e.target.value) || setIsSelecting ('')) : setIsSelecting ('')}>\n                  <option value={null} defaultChecked></option>\n                  {\n                    allPrompts ().filter (m => !getActivePromts ().find (_m => m.id === _m.id)).map (metric => (\n                      <option key={`option-${prompt.unit}-${prompt.id}`} value={metric.id}>{typeDict [metric.unit]}{metric.prompt}</option>\n                    ))\n                  }\n                </select>\n              }\n              <span className=\"fake-button\" onClick={() => setIsSelecting ('')}><img src={CancelSVG} /></span>\n            </section>\n          </>\n        }\n        <div>\n          <button onClick={submit}>Submit</button>\n        </div>\n      </div>\n    </main>\n  )\n}","import React, { useEffect, useState } from 'react'\nimport CalendarSVG from '../../img/calendar.svg'\nimport CaretSVG from '../../img/caret-down.svg'\n\nconst days = [\n  0,\n  31,\n  28,\n  31,\n  30,\n  31,\n  30,\n  31,\n  31,\n  30,\n  31,\n  30,\n  31\n]\n\nconst maxDaysIn = (mm, yyyy) => days [mm] + (yyyy % 4 === 0 ? 1 : 0);\n\nfunction DateFilter ({value, remove, setValue}) {\n  let d = new Date (value.date);\n  const [mode, setMode] = useState (value.mode);\n  const [mm, setMonth] = useState (d.getMonth () + 1);\n  const [dd, setDate] = useState (d.getDate ());\n  const [yyyy, setYear] = useState (d.getFullYear ());\n  const [maxDays, setMaxDays] = useState (maxDaysIn (mm, yyyy));\n  const cycleMode = () => {\n    if (value.modeFinal) return;\n    setMode (\n      mode === 'single-day' ? 'after' :\n      mode === 'after' ? 'before' : 'single-day'\n    )\n  }\n  useEffect (() => {\n    if (mm === NaN || dd === NaN || yyyy === NaN) return;\n    let max = maxDaysIn (mm, yyyy);\n    setMaxDays (max);\n    setValue (Object.assign (value, {\n      mode,\n      date: new Date (yyyy, mm - 1, dd, 0, 0, 0)\n    }));\n  }, [dd, mm, yyyy, mode]);\n  return (\n    <li className=\"grid filter date-filter\">\n      <span>\n        <img src={CalendarSVG} alt=\"Date Filter\" />\n      </span>\n      <span className={value.modeFinal ? '' : \"fake-button\"} onClick={cycleMode}>\n        <span className=\"grid switch-mode\">\n          <span>\n            {\n              value.mode === 'single-day' ? 'Day Of' :\n              value.mode === 'after' ? 'After' : 'Before'\n            }\n          </span>\n          {\n            !value.modeFinal &&\n            <img style={{display: 'inline', transform: 'rotate(-90deg)'}} width={8} height={8} src={CaretSVG} />\n          }\n        </span>\n      </span>\n      <div>\n        <input type=\"tel\" min={1} max={12} defaultValue={mm} onChange={e=>setMonth (parseInt (e.target.value))} />\n        <span>/</span>\n        <input type=\"tel\" min={1} max={maxDays} defaultValue={dd} onChange={e=>setDate (parseInt (e.target.value))} />\n        <span>/</span>\n        <input type=\"tel\" min={2020} max={new Date ().getFullYear ()} defaultValue={yyyy} onChange={e=>setYear (parseInt (e.target.value))}/>\n      </div>\n      <span>\n        <span className=\"fake-button\" onClick={remove}>remove</span>\n      </span>\n    </li>\n  )\n}\n\nexport default DateFilter\n","export default function TimePicker ({value, onChange}) {\n  const extractMinutes = () => value.split (' ') [0].split (':') [1];\n  const extractHours = () => value.split (' ') [0].split (':') [0];\n  const extractAmpm = () => value.split (' ') [1];\n  const updateMinutes = e => {\n    let value = parseInt (e.target.value);\n    if (value < 0 || value > 59) return;\n    onChange (`${extractHours ()}:${('00' + e.target.value).slice (-2)} ${extractAmpm ()}`)\n  }\n  const updateHours = e => {\n    let value = parseInt (e.target.value);\n    if (value < 1 || value > 12) return;\n    onChange (`${e.target.value}:${extractMinutes ()} ${extractAmpm ()}`)\n  }\n  const updateAmpm = () => onChange (`${extractHours ()}:${extractMinutes ()} ${extractAmpm () === 'pm' ? 'am' : 'pm'}`)\n  return (\n    <>\n      <input type=\"number\" onChange={updateHours} value={extractHours ()} />\n      :\n      <input type=\"number\" onChange={updateMinutes} value={extractMinutes ()} />\n      <span className=\"fake-button\" onClick={updateAmpm}>{extractAmpm ()}</span>\n    </>\n  )\n}","import {useState, useEffect} from 'react'\nimport StopwatchSVG from '../../img/stopwatch.svg';\nimport CaretSVG from '../../img/caret-down.svg'\nimport TimePicker from './TimePicker';\n\nfunction TimeFilter ({value, remove, setValue}) {\n  const cycleMode = () => {\n    let mode =  value.mode === 'is-at' ? 'after' :\n                value.mode === 'after' ? 'before' : 'is-at';\n    setValue ({time: value.time, mode})\n  }\n  return (\n    <li className=\"grid filter time-filter\">\n      <span>\n        <img src={StopwatchSVG} />\n      </span>\n      <span className=\"fake-button\" onClick={cycleMode}>\n        <span className=\"grid switch-mode\">\n          <span>{value.mode === 'is-at' ? 'Exact' : value.mode === 'after' ? 'After' : 'Before'}</span>\n          <img style={{display: 'inline', transform: 'rotate(-90deg)'}} width={8} height={8} src={CaretSVG} />\n        </span>\n      </span>\n      <div>\n        <TimePicker value={value.time} onChange={time => setValue ({time, mode: value.mode})} />\n      </div>\n      <span>\n        <span className=\"fake-button\" onClick={remove}>remove</span>\n      </span>\n    </li>\n  )\n}\n\nexport default TimeFilter\n","import {useEffect, useState} from 'react';\nimport {useApp} from '../../AppProvider';\nimport DateFilter from './DateFilter';\nimport TimeFilter from './TimeFilter';\nimport CalendarSVG from '../../img/calendar.svg';\nimport StopwatchSVG from '../../img/stopwatch.svg';\nimport SearchIcon from '../../img/search.svg';\nimport FilterSVG from '../../img/filter.svg';\nimport {plus} from '../../img/images';\n\nconst filterTypes = {\n  'date': DateFilter,\n  'time': TimeFilter\n}\n\nexport default function Query () {\n  \n  // state mgmt\n  const {journal: {query, filters, filterIterator, setQuery, setFilters}, router: {redirect}, viewMode: {isViewOnly}} = useApp ();\n  const [open, setOpen] = useState (false);\n  const [dateFilters, setDateFilters] = useState ([]);\n  const [timeFilters, setTimeFilters] = useState ([]);\n  const [typeFilter, setTypeFilter] = useState ([]);\n  \n  // on filter update, sort out filter lists\n  useEffect (() => {\n    setDateFilters (filters.filter (filter => filter.type === 'date'));\n    setTimeFilters (filters.filter (filter => filter.type === 'time'));\n    setTypeFilter (filters.filter (filter => filter.type === 'type'))\n  }, [filterIterator]);\n\n  // add date filter and reassign mode if necessary\n  const addDateFilter = () => {\n    if (dateFilters.length === 0) {\n      let newFilters = [...filters, {type: 'date', value: {mode: 'single-day', date: new Date ()}}]\n      setFilters (newFilters);\n    } else if (dateFilters.length === 1) {\n      let curr = filters.filter (fil => fil.type === 'date') [0];\n      curr.value = Object.assign (curr.value, {mode: 'after', modeFinal: true});\n      let newFilters = [...filters, {type: 'date', value: {mode: 'before', modeFinal: true, date: new Date ()}}];\n      setFilters (newFilters)\n    } else {\n      return;\n    }\n  }\n  const addTimeFilter = () => {\n    if (timeFilters.length === 0) {\n      let newFilters = [...filters, {\n        type: 'time',\n        value: {\n          mode: 'is-at',\n          time: `${new Date ().getHours () % 12 || 12}:${('00' + new Date ().getMinutes ()).slice (-2)} ${new Date ().getHours < 12 ? 'am' : 'pm'}`\n        }\n      }]\n      setFilters (newFilters);\n    } else if (timeFilters.length === 1) {\n      timeFilters [0].value.mode = 'after';\n      let newFilters = [...filters, {\n        type: 'time',\n        value: {\n          mode: 'before',\n          time: timeFilters [0].value.time\n        }\n      }]\n      setFilters (newFilters);\n    } else {\n      return;\n    }\n  }\n  const remove = index => () => {\n    filters.splice (index, 1);\n    setFilters (filters);\n  }\n  const setFilterValue = index => value => {\n    filters [index].value = value;\n    setFilters (filters);\n  }\n  return (\n    <>\n      <div className=\"grid search-container\">\n        {\n          isViewOnly &&\n          <span />\n        }\n        {\n          !isViewOnly &&\n          <span onClick={() => redirect ('/?page=write')}><img src={plus} /></span>\n        }\n        <form className=\"search-bar\" onSubmit={e => e.preventDefault ()}>\n          <input value={query} onChange={e => setQuery (e.target.value)} placeholder=\"Search...\" />\n          <img src={SearchIcon} />\n        </form>\n        <span onClick={e => setOpen (!open)} className=\"open-filters\">\n          <img src={FilterSVG} />\n        </span>\n      </div>\n      {\n        open ? (\n          <>\n            <ol className=\"grid filter-list\">\n              {\n                filters.map ((filter, index) => {\n                  let Filter = filterTypes [filter.type];\n                  return (\n                    <Filter value={filter.value} remove={remove (index)} setValue={setFilterValue (index)} />\n                  );\n                })\n              }\n            </ol>\n            {\n              (filters.length === 0) &&\n              <div className=\"grid\">\n                You don't have any filters, add some by clicking on the icons below!\n              </div>\n            }\n            <ul className=\"grid add-filter-list\">\n              <li onClick={addDateFilter} className={dateFilters.length < 2 ? '' : \"add-filter-disabled\"}>\n                <img src={CalendarSVG} alt=\"date filter\" />\n              </li>\n              <li onClick={addTimeFilter} className={timeFilters.length < 2 ? '' : \"add-filter-disabled\"}>\n                <img src={StopwatchSVG} alt=\"time filter\" />\n              </li>\n            </ul>\n            <hr />\n          </>\n        ) : (\n          <div className=\"none\" />\n        )\n      }\n    </>\n  )\n}","export default function AnalogClock ({date=new Date (), className=\"\"}) {\n  const hourHand = 2 * Math.PI * (date.getHours () * 60 + date.getMinutes ()) / (12 * 60);\n  const minuteHand = 2 * Math.PI * date.getMinutes () / 60;\n  return (\n    <svg viewBox=\"0 0 100 100\" className={\"analog-clock \" + className}>\n      <circle className=\"clock-outline\" fill=\"transparent\" r={48} cx={50} cy={50} />\n      <g className=\"clock-ticks\">\n        {\n          new Array (12).fill (1).map ((_, i) => (\n            <line x1={50 + Math.sin (2 * Math.PI * i / 12) * 42} y1={50 + Math.cos (2 * Math.PI * i / 12) * 42} x2={50 + Math.sin (2 * Math.PI * i / 12) * 44} y2={50 + Math.cos (2 * Math.PI * i / 12) * 44} />\n          ))\n        }\n      </g>\n      <line x1={50} x2={50 + 24 * Math.sin (hourHand)} y1={50} y2={50 - 24 * Math.cos (hourHand)} />\n      <line x1={50} x2={50 + 36 * Math.sin (minuteHand)} y1={50} y2={50 - 36 * Math.cos (minuteHand)} />\n    </svg>\n  )\n}","import { useEffect, useState } from \"react\";\nimport { useApp } from \"../AppProvider\";\nimport { dateShortHand, getTime, printDate } from \"../lib/indexing\";\nimport { H1, H2, H3 } from \"./components/Headers\";\nimport Query from \"./components/Query\";\nimport AnalogClock from \"./components/viz/AnalogClock\";\nimport {trash} from '../img/images';\n\nfunction RemoveEntryModal ({entry, resolve, reject}) {\n  const app = useApp ();\n  const handleYes = async () => {\n    try {\n      await app.journal.hideEntry (entry.id);\n      resolve ();\n    } catch (e) {\n      reject ('Couldn\\'t  successfully hide entry!')\n    }\n  }\n  const handleNo = () => reject ('Cancelled');\n  return (\n    <div className=\"grid remove-entry-modal\">\n      <p>Are you sure you want to hide your journal entry from {printDate (entry.start)} at {getTime (entry.start)}</p>\n      <div>\n        <button onClick={handleYes}>Yes, hide it!</button>\n        <button onClick={handleNo}>No, don't!</button>\n      </div>\n    </div>\n  )\n}\n\nfunction JournalCard ({idx}) {\n  const {setModal, closeModal} = useApp ();\n  const [open, setOpen] = useState ('');\n  const openRemoveModal = entry => new Promise (async (resolve, reject) => {\n    setModal (\n      <RemoveEntryModal entry={entry} resolve={resolve} reject={reject} />\n    )\n  });\n  const remove = entry => async () => {\n    try {\n      await openRemoveModal (entry);\n    } finally {\n      closeModal ();\n    }\n  }\n  return (\n    <article className={open}>\n      <header onClick={() => {setOpen (open === '' ? 'open' : '')}}>\n        <H2 short={dateShortHand (idx.list [0].start)}>{idx.meta.date}</H2>\n        <ol>\n          {\n            idx.list.map (entry => (\n              <li>\n                <AnalogClock date={entry.start} />\n              </li>\n            ))\n          }\n        </ol>\n      </header>\n      {\n        idx.list.map (entry => (\n          <section>\n            <header>\n              <span />\n              <H3 short={getTime (entry.start)}>\n                {getTime (entry.start)} - {getTime (entry.end)}\n              </H3>\n              <span onClick={remove (entry)}><img src={trash} /></span>\n            </header>\n            {\n              (entry.entryType === 'questions' || !entry.entryType) &&\n              entry.questions.map ((q, i) => (\n                <p key={`${entry.id}-question-${i}`}>\n                  <b>{q}</b>\n                  <br />\n                  {entry.answers [i]}\n                </p>\n              ))\n            }\n            {\n              entry.entryType === 'freeform' &&\n              <p>{entry.freeform}</p>\n            }\n            {\n              entry.entryType === 'audio' &&\n                <figure>\n                  <figcaption><p>{entry.audio.title}</p></figcaption>\n                  <audio controls src={entry.audio.url} />\n                </figure>\n            }\n          </section>\n        ))\n      }\n    </article>\n  )\n}\n\nexport default function Journal () {\n  const {auth: {user}, router: {page}, journal: {entries, clearSearch}} = useApp ();\n\n  useEffect (() => {\n    if (page !== 'journal') clearSearch ();\n  }, [page]);\n\n  if (!user || page !== 'journal') return null;\n  return (\n    <main className=\"view-journal\">\n      <H1>Journal</H1>\n      <Query />\n      {\n        entries.map (idx => (\n          <JournalCard idx={idx} />\n        ))\n      }\n    </main>\n  )\n\n}","export default {\n  'minus.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/cursor-creative\" title=\"Cursor Creative\">Cursor Creative</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',  'calendar.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/freepik\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'pen.svg': 'Icons made by <a href=\"https://www.flaticon.com/authors/icongeek26\" title=\"Icongeek26\">Icongeek26</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\"> www.flaticon.com</a>',\n  'book.svg': 'Icons made by <a href=\"https://www.flaticon.com/authors/zlatko-najdenovski\" title=\"Zlatko Najdenovski\">Zlatko Najdenovski</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\"> www.flaticon.com</a>',\n  'plus.svg': 'Icons made by <a href=\"https://www.flaticon.com/authors/freepik\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\"> www.flaticon.com</a>',\n  'list.svg': 'Icons made by <a href=\"https://www.flaticon.com/authors/phatplus\" title=\"phatplus\">phatplus</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\"> www.flaticon.com</a>',\n  'skill.svg': 'Icons made by <a href=\"https://www.flaticon.com/authors/freepik\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\"> www.flaticon.com</a>',\n  'settings.svg': 'Icons made by <a href=\"https://www.flaticon.com/authors/srip\" title=\"srip\">srip</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\"> www.flaticon.com</a>',\n  'search.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/pixel-perfect\" title=\"Pixel perfect\">Pixel perfect</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'filter.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/kirill-kazachek\" title=\"Kirill Kazachek\">Kirill Kazachek</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'stopwatch.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/good-ware\" title=\"Good Ware\">Good Ware</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'caret-down.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/dave-gandy\" title=\"Dave Gandy\">Dave Gandy</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'trash.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/dinosoftlabs\" title=\"DinosoftLabs\">DinosoftLabs</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'cancel.svg': '<div>Icons made by <a href=\"https://www.freepik.com\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'back.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/gregor-cresnar\" title=\"Gregor Cresnar\">Gregor Cresnar</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'next.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/gregor-cresnar\" title=\"Gregor Cresnar\">Gregor Cresnar</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'happy.svg': '<div>Icons made by <a href=\"https://www.freepik.com\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'dashboard.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/pixel-perfect\" title=\"Pixel perfect\">Pixel perfect</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'left-arrow.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/pixel-perfect\" title=\"Pixel perfect\">Pixel perfect</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'more.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/kirill-kazachek\" title=\"Kirill Kazachek\">Kirill Kazachek</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'ruler.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/good-ware\" title=\"Good Ware\">Good Ware</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'checkmark.svg': '<div>Icons made by <a href=\"https://www.freepik.com\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'key.svg' :'<div>Icons made by <a href=\"https://www.freepik.com\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'star.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/pixel-perfect\" title=\"Pixel perfect\">Pixel perfect</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'star filled.svg': '<div>Icons made by <a href=\"https://www.freepik.com\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n}","import { useEffect, useState } from \"react\";\nimport { useApp } from \"../../AppProvider\";\nimport defaultQuestions from \"../../lib/defaultQuestions\";\nimport { star, starfilled, trash } from \"../../img/images\";\n\nconst metricTypeDict = {\n  boolean: 'Yes/No',\n  number: 'Number Range'\n}\n\nconst isNumber = key => new RegExp (/[0-9]/, 'g').test (key);\nconst isBackspace = key => key === 'Backspace';\nconst isLeftArrow = key => key === 'Left' || key === 'ArrowLeft';\nconst isRightArrow = key => key === 'Right' || key === 'ArrowRight';\nconst isDot = key => key === '.';\n\nconst prevent = e => {\n  return [isNumber, isBackspace, isLeftArrow, isRightArrow, isDot].filter (fn => fn (e.key)).length === 0;\n}\n\nconst INI = ({value, setValue, placeholder}) => {\n  return (\n    <span className=\"inline-input\">\n      <input placeholder={placeholder} type=\"tel\" defaultValue={value} onBlur={e => {\n        if (!prevent (e)) return e.preventDefault ();\n        if (!e.target.value.length) return setValue (0);\n        setValue (parseFloat (e.target.value))\n      }} />\n    </span>\n  )\n}\n\nconst CES = ({value, setValue, placeholder}) => {\n  return (\n    <span className=\"inline-input\">\n      <input placeholder={placeholder} onChange={e => setValue (e.target.value)} value={value} />\n    </span>\n  )\n}\n\nexport default function CustomQuestion () {\n\n  // \n  const {writing: {questions, createQuestion, deleteQuestion}, settings: {toggle, getSetting}, metrix: {metrix, createMetrix, deleteMetrix}, freeze} = useApp ();\n  const [prompt, setQuestion] = useState ('?')\n  const [metricType, setMetricType] = useState (null);\n  const [rangeFrom, setRangeFrom] = useState ('');\n  const [rangeTo, setRangeTo] = useState ('');\n  const [stepInterval, setStepInterval] = useState ('');\n  const [frequency, setFrequency] = useState ('as needed');\n  const [unitLabel, setUnitLabel] = useState (null);\n  const [unitDescriptionError, setDescError] = useState ('');\n  \n  const calculateDescError = () => {\n    let errors = [];\n    if (typeof rangeFrom !== 'number') errors.push ('min value must be a number');\n    if (typeof rangeTo !== 'number') errors.push ('max value must be a number');\n    if (rangeFrom >= rangeTo) errors.push ('max value must be greater than min value');\n    if (typeof stepInterval !== 'number' || stepInterval <= 0) errors.push ('step interval must be a positive number');\n    if (errors.length) setDescError ('Error: ' + errors.join (', '));\n    return errors.length === 0;\n  }\n\n  // call api to create new question\n  const runCreateQuestion = async () => {\n    let unfreeze = null;\n    try {\n      unfreeze = freeze ();\n      await createQuestion (prompt);\n      setQuestion ('?')\n      unfreeze ();\n    } catch (e) {\n      unfreeze ();\n    }\n  }\n\n  // call api to create metric\n  const runCreateMetric = async () => {\n    let unfreeze = null;\n    try {\n      unfreeze = freeze ();\n      const obj = {\n        prompt,\n        unit: metricType,\n        frequency\n      }\n      if (unitLabel) obj.unitLabel = unitLabel;\n      if (metricType === 'number') {\n        obj.range = [rangeFrom, rangeTo];\n        obj.step = stepInterval;\n      }\n      await createMetrix (obj);\n      setStep (0);\n      setQuestion ('?');\n      setMetricType (null);\n      setRangeFrom ('');\n      setRangeTo ('');\n      setStepInterval ('');\n      setFrequency ('as needed');\n      setUnitLabel ('');\n      unfreeze ();\n    } catch (e) {\n      unfreeze ();\n    }\n  }\n\n  const [currentStep, setStep] = useState (0);\n  useEffect (() => {\n    setDescError ('');\n  }, [currentStep]);\n  const steps = [\n    // initial step - enter prompt\n    (\n      <button onClick={() => setStep (currentStep + 1)}>Create a Custom Prompt</button>\n    ),\n    (\n      <>\n        <b>Write a Custom Prompt</b>\n        <div contentEditable className=\"add-question-input\" onInput={e => setQuestion (e.target.innerText)}>?</div>\n        <span>\n          <button onClick={() => setStep (currentStep + 1)}>Next</button>\n        </span>\n      </>\n    ),\n    // user chooses whether to create a metrix or question\n    (\n      <>\n        <b>Add a Metric?</b>\n        <p>{prompt}</p>\n        <span>\n          <button onClick={() => setStep (currentStep - 1)}>Back</button>\n          <button onClick={() => setStep (currentStep + 1)}>Yes, Add Metric</button>\n          <button onClick={runCreateQuestion}>No, Create Question</button>\n        </span>\n      </>\n    ),\n    // if metrix user selects type\n    (\n      <>\n        <b>Select Metric Type</b>\n        <p>{prompt}</p>\n        <span>\n          <button onClick={() => setStep (currentStep - 1)}>Back</button>\n          <button onClick={() => {\n            setMetricType ('number');\n            setStep (currentStep + 1);\n          }}>Numeric</button>\n          <button onClick={() => {\n            setMetricType ('boolean');\n            setStep (currentStep + 2);\n          }}>Yes/No</button>\n        </span>\n      </>\n    ),\n    // if number select range and unit title\n    (\n      <>\n        <b>Numeric Metric Details</b>\n        <p>{prompt}</p>\n        {\n          unitDescriptionError && unitDescriptionError.length > 0 &&\n          <p className=\"error\">{unitDescriptionError}</p>\n        }\n        <p>\n          {\n          unitLabel !== null ?\n            (\n              <>\n                Measured with unit <CES placeholder='unit label' value={unitLabel} setValue={setUnitLabel} /> from\n              </>\n            ) : 'From'}\n          {' '}<INI placeholder='min' value={rangeFrom} setValue={setRangeFrom} /> to <INI placeholder='max' value={rangeTo} setValue={setRangeTo} />   in intervals of <INI placeholder='step' value={stepInterval} setValue={setStepInterval} />.\n        </p>\n        <label><input type=\"checkbox\" defaultChecked={unitLabel} onChange={e => setUnitLabel (e.target.checked ? '' : null)} /> has unit label</label>\n        <span>\n          <button onClick={() => setStep (currentStep - 1)}>Back</button>\n          <button onClick={() => {if (calculateDescError ()) setStep (currentStep + 1)}}>Set Frequency</button>\n        </span>\n      </>\n    ),\n    // set how often it should be answered\n    (\n      <>\n        <b>Set Frequency</b>\n        <p>{prompt}</p>\n        <p>{metricTypeDict [metricType]}</p>\n        <p>\n          This question should be answered <select onChange={e => setFrequency (e.target.value)}>\n            <option>as needed</option>\n            <option>daily</option>\n            <option>weekly</option>\n            <option>monthly</option>\n          </select>.\n        </p>\n        <span>\n          <button onClick={() => setStep (currentStep - 1)}>Back</button>\n          <button onClick={() => setStep (currentStep + 1)}>Review</button>\n        </span>\n      </>\n    ),\n    // review the metrix and create (or go back)\n    (\n      <>\n        <b>{prompt}</b>\n        <p>{metricTypeDict [metricType]} - {frequency}</p>\n        <span>\n          <button onClick={() => setStep (currentStep - 1)}>Back</button>\n          <button onClick={() => runCreateMetric ()}>Create Metric</button>\n        </span>\n      </>\n    )\n  ]\n\n  return (\n    <>\n      <b>Default Prompts</b>\n      <ul className=\"prompt-list\">\n      {\n          defaultQuestions.map (q => (\n            <li key={`manage-default-questions-${q.prompt}`} className={`manage-custom-question ${getSetting (`starred-${q.unit}-${q.id}`) ? 'starred' : ''}`}>\n              <span onClick={toggle (`starred-${q.unit}-${q.id}`)} style={{cursor: 'pointer'}}><img src={getSetting (`starred-${q.unit}-${q.id}`) ? starfilled : star} /></span>\n              <span>{q.prompt}</span>\n            </li>\n          ))\n        }\n      </ul>\n      <b>Custom Questions</b>\n      <ul className=\"prompt-list\">\n        {\n          questions.map (q => (\n            <li key={`manage-custom-question-${q.id}`} className={`manage-custom-question ${getSetting (`starred-${q.unit}-${q.id}`) ? 'starred' : ''}`}>\n              <span onClick={toggle (`starred-${q.unit}-${q.id}`)} style={{cursor: 'pointer'}}><img src={getSetting (`starred-${q.unit}-${q.id}`) ? starfilled : star} /></span>\n              <span>{q.prompt}</span>\n              <span style={{cursor: 'pointer'}} onClick={() => deleteQuestion (q.id.split ('-') [2])}>\n                <img src={trash} />\n              </span>\n            </li>\n          ))\n        }\n      </ul>\n      <b>Custom Metrix</b>\n      <ul className=\"prompt-list\">\n        {\n          metrix.filter (m => !m.isDefault).map (q => (\n            <li key={`manage-custom-metrix-${q.id}`} className={`manage-custom-question ${getSetting (`starred-${q.unit}-${q.id}`) ? 'starred' : ''}`}>\n              <span onClick={toggle (`starred-${q.unit}-${q.id}`)} style={{cursor: 'pointer'}}><img src={getSetting (`starred-${q.unit}-${q.id}`) ? starfilled : star} /></span>\n              <span>{q.prompt}</span>\n              <span style={{cursor: 'pointer'}} onClick={() => deleteMetrix (q.id)}>\n                <img src={trash} />\n              </span>\n            </li>\n          ))\n        }\n      </ul>\n      <div>\n        {steps [currentStep]}\n      </div>\n    </>\n  )\n\n}","\nconst sanitizePhoneNumber = number => {\n  let reduced = number.replaceAll (/[^0-9]/g, '');\n  if (reduced.length !== 10) throw new Error ('Phone number must be 10 digits, current length: ' + reduced.length);\n  return '+1' + reduced;\n}\n\nexport const stripPhoneNumber = number => number.replaceAll (/[^0-9]/g, '');\n\nexport default sanitizePhoneNumber","import React, { useRef, useState } from \"react\";\nimport {H1, H3} from \"./components/Headers\";\nimport attributions from '../lib/attributions'\nimport {useApp} from '../AppProvider';\nimport CaretSVG from '../img/caret-down.svg';\nimport CustomQuestion from \"./components/CustomQuestions\";\nimport sanitizePhoneNumber, {stripPhoneNumber} from '../lib/sanitizePhoneNumber';\n\nconst fmtRawPhoneNumber = number => {\n  let stripped = stripPhoneNumber (number);\n  if (stripped.length > 10) stripped = stripped.substr (0, 10);\n  console.log (stripped);\n  if (stripped.length === 0) return stripped;\n  if (stripped.length < 4) return `(${stripped}`;\n  if (stripped.length < 7) return `(${stripped.substr (0, 3)}) ${stripped.substr (3)}`;\n  return `(${stripped.substr (0, 3)}) ${stripped.substr (3, 3)}-${stripped.substr (6)}`;\n}\n\nfunction ShareJournal () {\n  const {sharing: {shareJournal}, settings} = useApp ();\n  const [rawPhoneNumber, _setPhoneNumber] = useState ('');\n  const setPhoneNumber = (number) => _setPhoneNumber (fmtRawPhoneNumber (number));\n  const nameRef = useRef ();\n  const swnRef = useRef ();\n  const onClick = async () => {\n    console.log (rawPhoneNumber);\n    return;\n    let phone = rawPhoneNumber;\n    phone = sanitizePhoneNumber (phone);\n    let name = nameRef.current.value;\n    let shareWithName = swnRef.current.value;\n    let share = await shareJournal (phone, name, shareWithName);\n    _setPhoneNumber ('');\n    swnRef.current.value = '';\n  }\n  return (\n    <div className=\"action\">\n      <b style={{textDecoration: 'none'}}>Share Your Journal With</b>\n      <br/>\n      <input ref={swnRef} placeholder=\"James Allen\" />\n      <br/>\n      <input type=\"tel\" placeholder=\"123-456-7890\" value={rawPhoneNumber} onChange={e => setPhoneNumber (e.target.value)} />\n      <br/>\n      <b style={{textDecoration: 'none'}}>Your Name</b>\n      <br/>\n      <input ref={nameRef} />\n      <br />\n      <button onClick={onClick}>Share Your Journal</button>\n    </div>\n  )\n}\n\nfunction SharedByMe () {\n  const {freeze, sharing: {sharedByMe, toggleFreeze}} = useApp ();\n\n  const onToggle = (share) => async () => {\n    let unfreeze = freeze ('');\n    try {\n      await toggleFreeze (share.id);\n      unfreeze ();\n    } catch (e) {\n      unfreeze ();\n    }\n  }\n  return (\n    <div>\n      <b style={{textDecoration: 'none'}}>Who You Share Your Journal With</b>\n      <hr style={{width: '25vw'}}/>\n      {\n        sharedByMe.length === 0 &&\n        <span style={{textDecoration: 'none'}}>You haven't shared your journal - no pressure</span>\n      }\n      {\n        sharedByMe.map (share => (\n          <React.Fragment key={`share-${share.id}`}>\n            <Setting onToggle={onToggle (share)} title={share.shareWithName || share.shareWith} setting={`share-${share.id}`} />\n            <br/>\n          </React.Fragment>\n        ))\n      }\n    </div>\n  );\n}\n\nfunction SharedWithMe () {\n  const {sharing: {sharedWithMe}, viewSharedJournal} = useApp ();\n  let shares = sharedWithMe.filter (share => !share.frozen);\n  if (shares.length === 0) return (<div className=\"none\" />)\n  return (\n    <div className=\"action\">\n      <b style={{textDecoration: 'none'}}>Journals Shared With You</b>\n      <hr style={{width: '25vw'}}/>\n      {\n        shares.map (share => (\n          <React.Fragment key={`share-${share.id}`}>\n            <span onClick={() => viewSharedJournal (share.userId)}>{share.name}</span>\n            <br />\n          </React.Fragment>\n        ))\n      }\n    </div>\n  )\n}\n\nexport function SettingGroup ({longTitle, shortTitle, children}) {\n  const [open, setOpen] = useState (false);\n  return (\n    <div className={'setting-group' + (open ? ' open' : '')}>\n      <header onClick={() => setOpen (!open)}>\n        <span />\n        <H3 short={shortTitle}>{longTitle}</H3>\n        <span><img src={CaretSVG} /></span>\n      </header>\n      {children}\n      <div></div>\n    </div>\n  )\n}\n\nexport function Setting ({setting, title, relationships=[], onToggle}) {\n  const {settings: {getSetting, toggle}} = useApp ();\n  let show = relationships.reduce ((acc, val) => {\n    if (!acc) return acc;\n    let relation = val.charAt (0);\n    if (relation !== '+') return acc;\n    let affector = val.substring (1);\n    return getSetting (affector);\n  }, true);\n  if (!show) return (\n    <div className=\"none\" />\n  )\n  return (\n    <div className=\"setting\">\n      <div><b>{title}</b></div>\n      <div><span onClick={onToggle ? onToggle : toggle (setting, relationships)} className={getSetting (setting) ? 'toggle on' : 'toggle'} /></div>\n    </div>\n  )\n}\n\nfunction Settings () {\n  const {router: {page}, settings: {getSetting, iter}, auth: {user, logout}} = useApp ();\n  const [attributionId, setAttributionId] = useState ('attributions');\n  if (!user) return null;\n  return page === 'settings' ? (\n    <main className=\"settings\">\n      <H1>Settings</H1>\n      <div className=\"settings-container\">\n        <SettingGroup longTitle={'Journal Settings'} shortTitle={'Journal'}>\n          <p>Make journal entries the way you want to make them. These settings are specific to your device, so you can have different preferences on your phone, tablet, laptop or whatever else you use!</p>\n          <Setting setting=\"freeform\" title=\"Enable Freeform\" />\n          {\n            false && getSetting ('freeform') &&\n            <Setting setting=\"audio-recording\" title=\"Enable Audio Recording\" />\n          }\n          <Setting setting=\"default-questions\" title=\"Show Default Questions\" />\n          <Setting setting=\"custom-questions\" title=\"Show Custom Questions\" />\n          <Setting setting=\"use-metrix\" title=\"Show Custom Metrix\" />\n        </SettingGroup>\n        <SettingGroup shortTitle=\"Prompts\" longTitle=\"Manage Prompts\">\n          <CustomQuestion />\n        </SettingGroup>\n        <SettingGroup shortTitle=\"Sharing\" longTitle=\"Manage Journal Sharing\">\n          <p>\n            View journals shared with you and manage who you shared your journal with.\n            You can always disable someone from seeing your journal once you share it with them.\n          </p>\n          <SharedWithMe/>\n          <SharedByMe/>\n          <ShareJournal/>\n        </SettingGroup>\n        <SettingGroup shortTitle=\"Misc\" longTitle=\"Miscellaneous\">\n          <div className=\"action\">\n            { \n              window.navigator.canShare &&\n              <span onClick={() => {\n                window.navigator.share ({\n                  title: 'My Journal',\n                  url: 'https://lincoln-howard-jr.github.io/journal/'\n                })\n              }}>Share This Application</span>\n            }\n          </div>\n          <div className=\"action\">\n            <span onClick={logout}>Log Out</span>\n          </div>\n          {\n            attributionId === 'attributions' &&\n            <div className=\"action\">\n              <span onClick={() => setAttributionId ('')}>Show Attributions</span>\n            </div>\n          }\n          <div className=\"attributions\" id={attributionId}>\n            <div className=\"fake-button\">\n              <span onClick={() => setAttributionId ('attributions')}>Hide Attributions</span>\n            </div>\n            <ul>\n              {Object.keys (attributions).map (k => (\n                <li key={`attribiution-${k}`}>\n                  <b>{k}</b>\n                  <br />\n                  <span dangerouslySetInnerHTML={{__html: attributions [k]}}/>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </SettingGroup>\n      </div>\n    </main>\n  ) : null;\n}\n\nexport default Settings\n","import { useRef, useState } from \"react\";\nimport { useApp } from \"../AppProvider\";\nimport { trash } from \"../img/images\";\nimport { H1, H2, H3 } from \"./components/Headers\";\n\nexport default function Skills () {\n  const {auth: {user}, router: {page}, skills: {skills, submitSkill, removeSkill}} = useApp ();\n  const [open, setOpen] = useState (null);\n  const [submitError, setError] = useState (null);\n  const categoryRef = useRef ();\n  const skillRef = useRef ();\n  const onSubmit = async e => {\n    if (e.preventDefault) e.preventDefault ();\n    try {\n      const category = categoryRef.current.value;\n      const skill = skillRef.current.innerText;\n      await submitSkill ({category, skill});\n      categoryRef.current.value = 'Tools For ...';\n      skillRef.current.innerText = '...';\n    } catch (e) {\n      setError ('Error while submitting skill, try again in a few...');\n    }\n    \n  }\n  if (!user) return null;\n  if (page !== 'skills') return null;\n  return (\n    <main>\n      <H1>Skills</H1>\n      <p style={{maxWidth: '60ch', margin: '15px auto'}}>\n        Treat this as a reference sheet for your coping skills for a given situation.\n        You are unique and so are the things that work for you - so add whatever you works for you!\n      </p>\n      <datalist id=\"skills-categories\">\n        {\n          skills.map (category => (\n            <option>{category.meta.category}</option>\n          ))\n        }\n      </datalist>\n      {\n        !!submitError &&\n        <p style={{maxWidth: '60ch', margin: '15px auto'}}>\n          {submitError}\n        </p>\n      }\n      <form onSubmit={onSubmit} className=\"new-skill-form\">\n        <H3>Add a Skill</H3>\n        <div>\n          <label>Category:</label>\n          <input list=\"skills-categories\" ref={categoryRef} defaultValue=\"Tools For\"/>\n        </div>\n        <div>\n          <label>Skill:</label>\n          <p style={{padding: 7.5}} ref={skillRef} contentEditable>...</p>\n        </div>\n        <button onClick={onSubmit}>Add Skill</button>\n      </form>\n      {\n        skills.map (category => (\n          <section className={`skill-category-container${open === category.meta.category ? ' open' : ''}`} key={`cat-${category.meta.category}`}>\n            <header style={{cursor: 'pointer'}} onClick={() => open === category.meta.category ? setOpen (null) : setOpen (category.meta.category)}>\n              <H2>{category.meta.category}</H2>\n            </header>\n            {\n              category.list.map (skill => (\n                <div className=\"single-skill\">\n                  <span>{skill.skill}</span>\n                  {\n                    open === category.meta.category &&\n                    <span onClick={() => removeSkill (skill.id)}><img src={trash} /></span>\n                  }\n                </div>\n              ))\n            }\n          </section>\n        ))\n      }\n\n    </main>\n  )\n}","import {skill, book, dashboard, settings, ruler, leftarrow} from '../../img/images';\nimport { useApp } from \"../../AppProvider\"\n\nexport default function Nav () {\n  const {auth: {user}, router: {page, redirect}, viewMode: {isViewOnly}, viewMyJournal} = useApp ();\n  return (\n    <>\n      <nav className={isViewOnly ? 'view-only' : ''}>\n        <ul>\n          {\n            isViewOnly &&\n            <>\n              <li className={page === 'write' ? 'active' : ''} onClick={viewMyJournal}>\n                <img alt=\"\" width=\"32\" height=\"32\" src={leftarrow} />\n                <label>Go Back</label>\n              </li>\n            </>\n          }\n          <li className={page === 'skills' ? 'active' : ''} onClick={() => {redirect (`/?page=skills`)}}>\n            <img alt=\"\" width=\"32\" height=\"32\" src={skill} />\n            <label>Skills</label>\n          </li>\n          <li className={page === 'journal' ? 'active' : ''} onClick={() => {redirect (`/?page=journal`)}}>\n            <img alt=\"\" width=\"32\" height=\"32\" src={book} />\n            <label>Journal</label>\n          </li>\n          <li className={page === 'metrix' ? 'active' : ''} onClick={() => {redirect (`/?page=metrix`)}}>\n            <img alt=\"\" width=\"32\" height=\"32\" src={ruler} />\n            <label>Metrix</label>\n          </li>\n          <li className={page === 'dashboard' ? 'active' : ''} onClick={() => {redirect (`/?page=dashboard`)}}>\n            <img alt=\"\" width=\"32\" height=\"32\" src={dashboard} />\n            <label>Dash</label>\n          </li>\n        </ul>\n      </nav>\n      {\n        page !== 'settings' && user &&\n        <div onClick={() => redirect ('/?page=settings')} id=\"settings-menu-icon\">\n          <img src={settings} alt=\"\" />\n        </div>\n      }\n    </>\n  )\n}","import { useRef, useState } from \"react\";\nimport { useApp } from \"../AppProvider\";\nimport {H1} from './components/Headers';\nimport sanitizePhoneNumber, {stripPhoneNumber} from '../lib/sanitizePhoneNumber';\n\nconst fmtRawPhoneNumber = number => {\n  let stripped = stripPhoneNumber (number);\n  if (stripped.length > 10) stripped = stripped.substr (0, 10);\n  console.log (stripped);\n  if (stripped.length === 0) return stripped;\n  if (stripped.length < 4) return `(${stripped}`;\n  if (stripped.length < 7) return `(${stripped.substr (0, 3)}) ${stripped.substr (3)}`;\n  return `(${stripped.substr (0, 3)}) ${stripped.substr (3, 3)}-${stripped.substr (6)}`;\n}\n\nexport default function Auth () {\n  // important global state\n  const {auth: {user, login, register, err}} = useApp ();\n  // auth flow\n  const [rawPhoneNumber, _setPhoneNumber] = useState ('');\n  const [prompt, setPrompt] = useState (false);\n  const [answer, setAnswer] = useState (v => () => console.log (v));\n  const codeRef = useRef ();\n  const setPhoneNumber = (number) => _setPhoneNumber (fmtRawPhoneNumber (number));\n  const promptForCode = _answer => {\n    setPrompt (true);\n    setAnswer (() => () => {_answer (codeRef.current.value)});\n    codeRef.current.focus ();\n  }\n  const [codeSent, setCodeSent] = useState (false);\n  const [onAuthError, setAuthError] = useState (null);\n  const onCodeSent = () => {\n    setCodeSent (true);\n  }\n  const onRegisterClick = async () => {\n    try {\n      let phoneNumber = sanitizePhoneNumber (rawPhoneNumber);\n      setAuthError (null);\n      await register (phoneNumber, promptForCode, onCodeSent);\n    } catch (e) {\n      setAuthError (e);\n    }\n  }\n  const onLogInClick = async () => {\n    try {\n      let phoneNumber = sanitizePhoneNumber (rawPhoneNumber);\n      setAuthError (null);\n      await login (phoneNumber, promptForCode, onCodeSent);\n    } catch (e) {\n      setAuthError (e);\n    }\n  }\n  if (!!user) return null;\n  return (\n    <main>\n      <H1>Your Journal</H1>\n      <div className=\"grid\">\n        <h3>{codeSent ? 'Your secret code in on the way!' : 'Enter your phone number:'}</h3>\n        <span style={{display: (onAuthError !== null ? 'grid' : 'none')}} className=\"error\">{onAuthError?.message}</span>\n        <span style={{display: (err !== null ? 'grid' : 'none')}} className=\"error\">{err?.message}</span>\n      </div>\n      <div className=\"phone-number-input\">\n        <input autoComplete=\"tel-local\" type=\"tel\" placeholder=\"123-456-7890\" value={rawPhoneNumber} onChange={e => setPhoneNumber (e.target.value)} disabled={!!prompt} />\n      </div>\n      {\n        prompt &&\n        <div className=\"phone-number-input\">\n          <input ref={codeRef} autoComplete=\"one-time-code\" placeholder=\"Secret Code\" ref={codeRef} />\n        </div>\n      }\n      <div className=\"phone-number-input\">\n        { \n          !prompt &&\n          <span>\n            <button onClick={onLogInClick}>Login</button>\n            <button onClick={onRegisterClick}>Register</button>\n          </span>\n        }\n        { prompt && <><button onClick={answer}>Submit!</button></> }\n      </div>\n      <section>\n        <h3>About Us</h3>\n        <hr/>\n        <b>Why A Journal?</b>\n        <p>\n          Journaling provides anyone with a structure to\n          deeper understanding of themselves and their emotional wellbeing. Oftentimes describing a situation\n          or emotion in writing provides a sense of clarity not found in other ways. Also available to you is\n          a place to write down and sort skills you have learned.\n        </p>\n        <b>How Does It Work?</b>\n        <p>\n          To start, register an account with your phone number. You will be texted a secret code. Enter that and...\n          well that's it, you now have your very own journal!\n          To put it simply, you write details about your life in your journal. Again, but in more detail, you can\n          structure your journal in different ways. Journal entries can be formatted as \"question and answer\" or as \"freeform\n          writing\" or \"audio journaling\" (this is easily switched with one click in the settings tab). All journal entries automatically include the\n          date and time of writing and can be found listed in chronological order. You also can curate a\n          list of skills for different situations and share your journal if need be.\n        </p>\n      </section>\n      <section>\n        <h3>Terms of Service</h3>\n        <hr/>\n        <b>Privacy</b>\n        <p>\n          None of your information (journal entries, coping skills, phone number, etc) will be publicly available\n          nor will it be shared unless you explicitly share it.\n        </p>\n        <b>Sharing</b>\n        <p>\n          By nature of being a journaling application, the contained subject matter will often be sensitive\n          information. With this application, you can share your journal with anyone. However, it is recommended\n          for, and with intention of, sharing with medical professionals only. In the case of abuse of this feature deemed\n          detrimental to the health of another individual, we retain the right to terminate your account.\n        </p>\n      </section>\n    </main>\n  );\n}","const width = 750; const height = 500; const r = 175; const legendItemSize = 25;\nfunction Segment ({start, size}) {\n  return (\n    <circle fill='transparent' cx={width / 2} cy={height / 2} r={r} strokeWidth={r / 10} strokeDasharray={`${2 * Math.PI * r}`} strokeDashoffset={`${2 * Math.PI * r * (100 - (size)) / 100}`} style={{transformOrigin: 'center', transform: `rotate(${-90 + start * 360 / 100}deg)`}} />\n  )\n}\nexport default function PieChart ({data=[]}) {\n  \n  return (\n    <svg className=\"pie-chart\" viewBox={`0 0 ${width} ${height}`}>\n      <g className=\"the-pie\">\n        {\n          data.map (d => (\n            <Segment {...d} />\n          ))\n        }\n      </g>\n      <g className=\"legend\">\n        {\n          data.map ((d, i) => (\n            <text textAnchor=\"middle\" x={width / 2} y={(legendItemSize * data.length * (i - (data.length - 1) / 2) / ((data.length - 1) / 2)) + height / 2}>{d.label}</text>\n          ))\n        }\n      </g>\n    </svg>\n  )\n}","export const width = 750;\nexport const height = 500;\nexport const r = 175;\nexport const legend = 100;\nexport const padding = 35;\nexport const marginTop = 125\nexport const oneDay = 1000 * 3600 * 24;","import { useEffect, useReducer, useState } from 'react';\nimport {useApp} from '../../../AppProvider'\nimport SearchIcon from '../../../img/search.svg';\nimport { dateFromShortHand, dateShortHand } from '../../../lib/indexing';\nimport {width, height, padding, marginTop, oneDay} from './dimensions';\n\n// \nfunction keywordReducer (state, _keyword) {\n  let keyword = _keyword.toLowerCase ();\n  if (state.includes (keyword)) return state.filter (word => word !== keyword);\n  if (state.length < 4) return [...state, keyword];\n  return state;\n}\n\nexport default function WordCount () {\n  \n  // get necessary global state\n  const {journal: {entries}} = useApp ();\n  \n  // necessary state\n  const [idx, setIdx] = useState ([]);\n  const [keywords, toggleKeyword] = useReducer (keywordReducer, []);\n  const [wordCounts, setWordCounts] = useState ([]);\n  const [domain_0, setDomain0] = useState (new Date ());\n  const [domain_n, setDomainN] = useState (new Date ());\n  const [range_n, setRangeN] = useState (1);\n  \n  // get {x|y} coordinate [0,1]\n  // const xscale = date => (date.getTime () - domain_0.getTime ()) / (domain_n.getTime () - domain_0.getTime ());\n  const xinverse = scale => {\n    let offset = scale * (domain_n.getTime () - domain_0.getTime ());\n    offset = offset - (offset % oneDay);\n    return new Date (domain_0.getTime () + offset);\n  }\n  const yscale = count => count / range_n;\n\n  // calculate the word cont index and domain\n  useEffect (() => {\n    if (entries.length === 0) return;\n    let list = entries.map (obj => Object.assign (obj, {date: dateFromShortHand (obj.date)}))\n    list = list.sort ((a, b) => a.date - b.date);\n    list = list.map (idx => {\n      let text = idx.list.map (entry => (entry.entryType === 'questions' | !entry.entryType) ? entry.answers.join (' ') : entry.entryType === 'freeform' ? entry.freeform : '').join (' ').toLowerCase ()\n      return Object.assign (idx, {text});\n    });\n    setIdx (list);\n    setDomain0 (list [0].date);\n    setDomainN (list [list.length - 1].date);\n  }, [entries]);\n\n  // generate word counts to show based on keywords\n  useEffect (() => {\n    let domain = Math.floor ((domain_n.getTime () - domain_0.getTime ()) / oneDay);\n    let wcl = keywords.map (() => new Array (domain).fill (0));\n    let placeholder = 0;\n    for (let i = 0; i < domain; i++) {\n      let day = new Date (domain_0.getTime () + i * oneDay);\n      if (day < idx [placeholder].date) continue;\n      for (let j = 0; j < wcl.length; j++)\n        wcl [j][i] = idx [placeholder].text.split (keywords [j]).length - 1;\n      placeholder++;\n    }\n    let rn = Math.max (...wcl.flat ());\n    if (rn < 1) rn = 1;\n    setRangeN (rn);\n    setWordCounts (wcl);\n  }, [keywords]);\n\n  // event handlers\n  const addKeyword = e => {\n    e.preventDefault ();\n    toggleKeyword (e.target.elements.keyword.value)\n    e.target.elements.keyword.value = '';\n  }\n\n  return ((\n      <figure className=\"keywords\">\n        <figcaption>Keyword Search</figcaption>\n        <section className=\"keyword-container\">\n          <form onSubmit={addKeyword} className=\"keyword-search\">\n            <input name=\"keyword\" placeholder=\"keyword\" autoComplete=\"off\" />\n            <label><input type=\"submit\" hidden /> <img src={SearchIcon} /></label>\n          </form>\n        </section>\n        <svg className=\"keyword-chart\" viewBox={`0 0 ${width} ${height}`} key='keyword-chart'>\n          <g className=\"keyword-chart-axis\">\n            {/* axis & labels */}\n            <line x1={padding} x2={width - padding} y1={height - padding} y2={height - padding} />\n            <line x1={padding} x2={padding} y1={height - padding} y2={padding + marginTop} />\n            <text x={padding / 2} y={height - padding} textAnchor=\"middle\">0</text>\n            <text x={padding / 2} y={marginTop + padding} textAnchor=\"middle\">{range_n}</text>\n            <text x={padding * 2.5} y={height - padding / 4} textAnchor=\"middle\">{dateShortHand (domain_0)}</text>\n            <text x={width - padding * 2.5} y={height - padding / 4} textAnchor=\"middle\">{dateShortHand (domain_n)}</text>\n            {/* labels */}\n            <g className=\"keyword-chart-labels\">\n              {\n                keywords.map ((word, i) => (\n                  <text textAnchor=\"middle\" x={padding + ((i + 0.5) * width / 4)} y={marginTop} onClick={() => toggleKeyword (word)}>{word}</text>\n                ))\n              }\n            </g>\n          </g>\n          {\n            wordCounts.map ((list, i) => (\n              <g className={`keyword-trendline-${i + 1}`} key={`keyword-trendline-${keywords [i]}`}>\n                {\n                  list.map ((count, i) => i === list.length - 1 ? null :\n                    <line\n                      x1={padding + i * (width - padding * 2) / list.length}\n                      x2={padding + (i + 1) * (width - padding * 2) / list.length}\n                      y1={(height - padding) - yscale (count) * (height - marginTop - padding * 2)}\n                      y2={(height - padding) - yscale (list [i + 1]) * (height - marginTop - padding * 2)}\n                    />\n                  )\n                }\n              </g>\n            ))\n          }\n        </svg>\n      </figure>\n  ))\n}","import {memo} from 'react';\nimport {padding, width, height} from './dimensions';\n// component to represent a bar in a bar graph\nfunction _Bar ({key, time, i, hourlyMax, onClick}) {\n  // breakdown state mgmt - [ audio % , freeform % , question % ]\n  let questionsCount = time.filter (entry => (entry.entryType === 'questions' || !entry.entryType)).length;\n  let freeformCount = time.filter (entry => entry.entryType === 'freeform').length;\n  let audioCount = time.filter (entry => entry.entryType === 'audio').length;\n  let total = questionsCount + freeformCount + audioCount;\n  let breakdown = [audioCount / total, freeformCount / total, questionsCount / total];\n  // positioning calculations\n  let margin = padding * 2;\n  let contentWidth = width - 2 * margin;\n  let offset = 0.1 * contentWidth / 24;\n  const dimensions = {\n    x: margin + offset + i * contentWidth / 24,\n    width: (contentWidth / 24) - (offset / 2)\n  }\n  const y0 = (height - margin) - 0.66 * height * time.length / hourlyMax;\n  const height_total = 0.66 * height * time.length / hourlyMax;\n  let propArr = [\n    {\n      ...dimensions,\n      key: `bar-${i}-breakdown-${0}`,\n      y: y0,\n      height: breakdown.length > 0 ? (breakdown [0] * height_total) : 0,\n    },\n    {\n      ...dimensions,\n      key: `bar-${i}-breakdown-${1}`,\n      y: breakdown.length > 0 ? (y0 + breakdown [0] * height_total) : y0,\n      height: breakdown.length > 0 ? (breakdown [1] * height_total) : 0,\n    },\n    {\n      ...dimensions,\n      key: `bar-${i}-breakdown-${2}`,\n      y: breakdown.length > 0 ? (y0 + (1 - breakdown [2]) * height_total) : 0,\n      height: breakdown.length > 0 ? (breakdown [2] * height_total) : 0,\n    }\n  ]\n  propArr = propArr.map (props => (isNaN (props.height) ? {...props, height: 0} : props))\n  propArr = propArr.map (props => (isNaN (props.y) ? {...props, y: 0} : props))\n  // render\n  return (\n    <g key={key} className=\"bar-chart-bar\" onClick={onClick}>\n      <g className=\"bar-chart-bar-group\">\n        {\n          propArr.map (props => (\n            <rect {...props} />\n          ))\n        }\n      </g>\n      <text style={{transformOrigin: `${100 * (margin + (i - 0.5) * contentWidth / 24) / width}% ${100 * (height - 10) / height}%`}} className=\"bar-chart-bar-label\" textAnchor=\"center\" x={margin + (i - 0.5) * contentWidth / 24} y={height - padding}>{(i % 12) || 12}{i > 11 ? 'PM' : 'AM'}</text>\n    </g>\n  )\n}\nexport default memo(_Bar);\n","export default function NumberCounter ({number}) {\n  return (\n    <svg viewBox=\"0 0 100 100\" className=\"number-counter\">\n      <rect x={10} y={10} width={80} height={80} rx={5} />\n      <text textAnchor=\"middle\" x={50} y={65}>{number}</text>\n    </svg>\n  )\n}","import { useEffect, useState } from \"react\";\nimport { useApp } from \"../../../AppProvider\";\nimport NumberCounter from \"./Counter\";\n\nconst thisWeek = () => {\n  let end = new Date ();\n  end = new Date (end.getFullYear (), end.getMonth (), end.getDate ())\n  let start = new Date (end.getFullYear (), end.getMonth (), end.getDate () - 7);\n  return [start, end];\n}\n\nconst _inThisWeek = () => {\n  let [start, end] = thisWeek ();\n  return date => date < end && date > start;\n}\n\nexport function EntriesThisWeek () {\n  const {journal: {entryList, entries, setFilters}, router: {redirect}} = useApp ();\n  const inThisWeek = _inThisWeek ();\n  const [start] = thisWeek ();\n  const [count, setCount] = useState ('...');\n  const onClick = () => {\n    setFilters ([\n      {\n        type: 'date',\n        value: {\n          mode: 'after',\n          date: start\n        }\n      },\n    ]);\n    redirect ('/?page=journal');\n  }\n  useEffect (() => {\n    if (!entryList.length) return;\n    setCount ('' + entryList.filter (entry => inThisWeek (entry.start)).length);\n  }, [entries])\n\n  return (\n    <figure>\n      <figcaption>Entries<br/>(Past Week)</figcaption>\n      <NumberCounter number={count} />\n    </figure>\n  )\n}\n\nexport function QuestionsThisWeek () {\n  const {journal: {entryList, entries}} = useApp ();\n  const inThisWeek = _inThisWeek ();\n  const [count, setCount] = useState ('...');\n  useEffect (() => {\n    if (!entryList.length) return;\n    let list = entryList.filter (entry => inThisWeek (entry.start));\n    let c = list.reduce ((acc, val) => {\n      let add =  val.entryType === 'questions' ? val.questions.length : 0;\n      return acc + add;\n    }, 0);\n    setCount (c);\n  }, [entries])\n  return (\n    <figure>\n      <figcaption>Questions Answered<br/>(Past Week)</figcaption>\n      <NumberCounter number={count} />\n    </figure>\n  )\n}\n\nexport function TotalEntryCount () {\n  const {journal: {entryList, entries}} = useApp ();\n  const [count, setCount] = useState ('...');\n  useEffect (() => {\n    if (!entries.length) return;\n    let list = entries.map (idx => new Date (idx.list [0].start));\n    let start = new Date (Math.min (...list));\n    start = new Date (start.getFullYear (), start.getMonth (), start.getDate ());\n    let now = new Date ();\n    now = new Date (now.getFullYear (), now.getMonth (), now.getDate ());\n    let daysBetween = (now - start) / (24 * 60 * 60 * 1000);\n    let c = entryList.length / daysBetween;\n    setCount (c.toFixed (1));\n  }, [entries])\n\n  return (\n    <figure>\n      <figcaption>Entries<br/>(Per Day)</figcaption>\n      <NumberCounter number={count} />\n    </figure>\n  )\n}\n\nexport function SkillCount () {\n  const {skills: {skills}} = useApp ();\n  const [count, setCount] = useState ('...');\n  useEffect (() => {\n    if (!skills || !skills.length) return;\n    setCount (skills.reduce ((acc, val) => {\n      return acc + val.list.length;\n    }, 0));\n  }, [skills]);\n\n  return (\n    <figure>\n      <figcaption>Your Skills<br/>(All Time)</figcaption>\n      <NumberCounter number={count} />\n    </figure>\n  )\n}","import { useState, useEffect } from \"react\";\nimport { useApp } from \"../../../AppProvider\";\nimport {height, width, padding} from './dimensions'\nimport Bar from './Bar'\n\n// index a list of entries by time of day\nconst reduceByTime = (acc, entry) => {\n  acc [new Date (entry.start).getHours ()].push (entry);\n  return acc;\n}\nconst runIndexByTime = entries => entries.reduce (reduceByTime, new Array (24).fill (1).map (() => []));\n\n\nexport default function () {\n  const {journal: {entryList, setFilters}, router: {redirect}} = useApp ();\n  const [indexed, setIndexed] = useState (null);\n  const [max, setMax] = useState (null)\n\n  // goto a specific time\n  const onBarClick = time => async () => {\n    setFilters ([\n      {\n        type: 'time',\n        value: {\n          mode: 'after',\n          time: `${time % 12 || 12}:00 ${time < 12 ? 'am' : 'pm'}`\n        }\n      },\n      {\n        type: 'time',\n        value: {\n          mode: 'before',\n          time: `${(time + 1) % 12 || 12}:00 ${(time + 1) < 12 ? 'am' : 'pm'}`\n        }\n      }\n    ]);\n    redirect ('/?page=journal');\n  }\n\n  // process entry list on change\n  useEffect (() => {\n    let idx = runIndexByTime (entryList);\n    setMax (idx.reduce ((acc, val) => val.length > acc ? val.length : acc , 1) ) \n    setIndexed (idx);\n  }, [entryList]);\n\n  if (max === null || !indexed) return null;\n  return (\n    <figure className=\"time-of-day\">\n      <figcaption>Entries By Time Of Day</figcaption>\n      <svg key='time-of-day-svg' viewBox={`0 0 ${width} ${height}`}>\n        {/** axis */}\n        <line x1={2 * padding} y1={height - 2 * padding} x2={width - 2 * padding} y2={height - 2 * padding} />\n        {/* hour based bars */}\n        <Bar time={indexed [0]} i={0} hourlyMax={max} onClick={onBarClick (0)} />\n        <Bar time={indexed [1]} i={1} hourlyMax={max} onClick={onBarClick (1)} />\n        <Bar time={indexed [2]} i={2} hourlyMax={max} onClick={onBarClick (2)} />\n        <Bar time={indexed [3]} i={3} hourlyMax={max} onClick={onBarClick (3)} />\n        <Bar time={indexed [4]} i={4} hourlyMax={max} onClick={onBarClick (4)} />\n        <Bar time={indexed [5]} i={5} hourlyMax={max} onClick={onBarClick (5)} />\n        <Bar time={indexed [6]} i={6} hourlyMax={max} onClick={onBarClick (6)} />\n        <Bar time={indexed [7]} i={7} hourlyMax={max} onClick={onBarClick (7)} />\n        <Bar time={indexed [8]} i={8} hourlyMax={max} onClick={onBarClick (8)} />\n        <Bar time={indexed [9]} i={9} hourlyMax={max} onClick={onBarClick (9)} />\n        <Bar time={indexed [10]} i={10} hourlyMax={max} onClick={onBarClick (10)} />\n        <Bar time={indexed [11]} i={11} hourlyMax={max} onClick={onBarClick (11)} />\n        <Bar time={indexed [12]} i={12} hourlyMax={max} onClick={onBarClick (12)} />\n        <Bar time={indexed [13]} i={13} hourlyMax={max} onClick={onBarClick (13)} />\n        <Bar time={indexed [14]} i={14} hourlyMax={max} onClick={onBarClick (14)} />\n        <Bar time={indexed [15]} i={15} hourlyMax={max} onClick={onBarClick (15)} />\n        <Bar time={indexed [16]} i={16} hourlyMax={max} onClick={onBarClick (16)} />\n        <Bar time={indexed [17]} i={17} hourlyMax={max} onClick={onBarClick (17)} />\n        <Bar time={indexed [18]} i={18} hourlyMax={max} onClick={onBarClick (18)} />\n        <Bar time={indexed [19]} i={19} hourlyMax={max} onClick={onBarClick (19)} />\n        <Bar time={indexed [20]} i={20} hourlyMax={max} onClick={onBarClick (20)} />\n        <Bar time={indexed [21]} i={21} hourlyMax={max} onClick={onBarClick (21)} />\n        <Bar time={indexed [22]} i={22} hourlyMax={max} onClick={onBarClick (22)} />\n        <Bar time={indexed [23]} i={23} hourlyMax={max} onClick={onBarClick (23)} />\n        <g className=\"bar-chart-text\">\n          <text x={width / 9} y={height / 10}>Questions</text>\n          <text x={4 * width / 9} y={height / 10}>Freeform</text>\n          <text x={7 * width / 9} y={height / 10}>Audio</text>\n        </g>\n      </svg>\n    </figure>\n  )\n}","import { memo, useEffect, useState } from \"react\";\nimport { useApp } from \"../../../AppProvider\";\nimport { caretdown } from \"../../../img/images\";\nimport { dateShortHand } from \"../../../lib/indexing\";\nimport { height, padding, width } from \"./dimensions\";\nimport PieChart from \"./PieChart\";\n\n// helper constants\nconst contentWidth = width - 2 * padding;\nconst contentHeight = height - 2 * padding;\nlet midnight = new Date ();\nmidnight = new Date (midnight.getFullYear (), midnight.getMonth (), midnight.getDate () + 1);\nconst oneDay = 24 * 60 * 60 * 1000;\nfunction daysAfter (date) {\n  return Math.ceil ((midnight.getTime () - date.getTime ()) / oneDay);\n}\nfunction weeksAfter (date) {\n  return Math.ceil ((midnight.getTime () - date.getTime ()) / (7 * oneDay));\n}\nfunction monthsAfter (date) {\n  return 12 * (midnight.getFullYear () - date.getFullYear ()) + midnight.getMonth () - date.getMonth ();\n}\n\nconst BooleanMetrixGraph = memo (\n  function _BooleanMetrixGraph ({mezs, metric}) {\n    if (!mezs.length) return <p>No measurements yet!</p>\n    const yesCount = mezs.filter (mez => mez.measurement === 'Yes').length;\n    const noCount = mezs.filter (mez => mez.measurement === 'No').length;\n    let blankCount = 0;\n    if (metric.frequency === 'daily') {\n      blankCount = daysAfter (mezs [0].measuredAt) - yesCount - noCount;\n    }\n    if (metric.frequency === 'weekly') {\n      blankCount = weeksAfter (mezs [0].measuredAt) - yesCount - noCount;\n    }\n    if (metric.frequency === 'monthly') {\n      blankCount = monthsAfter (mezs [0].measuredAt) - yesCount - noCount;\n    }\n    let total = yesCount + noCount + blankCount;\n    const data = [\n      {\n        label: 'Yes',\n        size: 100 * yesCount / total,\n        start: 0\n      },\n      {\n        label: 'No',\n        size: 100 * noCount / total,\n        start: 100 * yesCount / total\n      }\n    ]\n    if (blankCount) data.push ({\n      label: 'Blank',\n      size: 100 * blankCount / total,\n      start: 100 -100 * blankCount / total\n    })\n    return (\n      <PieChart data={data} />\n    )\n  }\n)\nconst NumberMetrixGraph = memo (\n  function _NumberMetrixGraph ({mezs, onClick, metric}) {\n    if (!mezs.length) return <p>No measurements yet!</p>\n    const domain = [mezs [0].measuredAt, midnight];\n    const xscale = date => padding + contentWidth * (date - domain [0]) / (domain [1] - domain [0]);\n    const range = metric.range;\n    const yscale = measurement => padding + (contentHeight - contentHeight * (measurement - range [0]) / (range [1] - range [0]));\n    return (\n      <svg className=\"single-metrix-graph\" viewBox={`0 0 ${width} ${height}`}>\n        <g className=\"single-metrix-axis\">\n          <line x1={xscale (domain [0])} x2={xscale (domain [1])} y1={yscale (range [0])} y2={yscale (range [0])} />\n          <line x1={xscale (domain [0])} x2={xscale (domain [0])} y1={yscale (range [0])} y2={yscale (range [1])} />\n          <text x={xscale (domain [0]) - padding} y={yscale (range [0])}textAnchor=\"start\">{range [0]}</text>\n          <text x={xscale (domain [0]) - padding} y={yscale (range [1])}textAnchor=\"start\">{range [1]}</text>\n          <text x={xscale (domain [0]) + padding} y={yscale (range [0]) + padding} textAnchor=\"middle\">{dateShortHand (domain [0])}</text>\n          <text x={xscale (domain [1]) - padding} y={yscale (range [0]) + padding} textAnchor=\"middle\">{dateShortHand (domain [1])}</text>\n          {/* label */}\n          {\n            !!metric.unitLabel &&\n            <text style={{transform: 'rotate(-90deg) scale(0.8)', transformOrigin: `${100 * (padding / height) / 2}% ${50}%`}} x={padding / 2} y={height / 2} textAnchor=\"middle\">{metric.unitLabel}</text>\n          }\n        </g>\n        <g>\n          {\n            mezs.map (mez => (\n              <>\n                <circle style={{transformOrigin:`${100 * xscale (mez.measuredAt) / width}% ${100 * (height - padding) / height}%`}} key={`metrix-graph-circle-${mez.id}`} onClick={onClick (mez)} cx={xscale (mez.measuredAt)} cy={yscale (mez.measurement)} r={6} />\n                <text x={(xscale (mez.measuredAt) > 5 * padding) ? xscale (mez.measuredAt) - 2.25 : xscale (mez.measuredAt) + 2.25 * padding} y={(yscale (mez.measurement) < 4 * padding) ? yscale (mez.measurement) + .5 * padding : yscale (mez.measurement) - 0.5 * padding} textAnchor=\"middle\">{dateShortHand (mez.measuredAt)} - {mez.measurement}</text>\n              </>\n            ))\n          }\n        </g>\n      </svg>\n    )\n  }\n)\n\nconst Graphs = {\n  boolean: BooleanMetrixGraph,\n  number: NumberMetrixGraph\n}\n\nexport default function SingleMetrixCarousel () {\n  const {metrix: {metrix, setSingleMetrix, setSingleMeasurement, measurements}, router: {redirect}} = useApp ();\n  const [currentMetrixIndex, setCurrentMetrixIndex] = useState (null);\n  const [select, setSelect] = useState (false);\n  \n  const currentMetrix = () => metrix [currentMetrixIndex];\n  const currentMeasurements = () => measurements.filter (mez => mez.metric === metrix [currentMetrixIndex].id).sort ((a, b) => a.measuredAt - b.measuredAt);\n\n  const onClick = (mez) => () => {\n    setSingleMetrix (metrix [currentMetrixIndex]);\n    setSingleMeasurement (mez);\n    redirect ('/?page=metrix');\n  }\n\n  useEffect (() => {\n    if (metrix.length && measurements.length) {\n      setCurrentMetrixIndex (0);\n    }\n  }, [metrix, measurements])\n\n  if (currentMetrixIndex === null) return null;\n  let current = currentMetrix ();\n  let mezs = currentMeasurements ();\n  let Graph = Graphs [current.unit];\n  return (\n    <figure className=\"single-metrix-carousel\">\n      <figcaption>\n        {\n          select &&\n          <>\n            Switch to another metrix:\n            <br/>\n            <select onChange={e => {setCurrentMetrixIndex (e.target.value); setSelect (false)}}>\n              <option value={currentMetrixIndex}></option>\n              {\n                metrix.filter (m => m.id !== current.id).map (m => (\n                  <option key={`metrix-carousel-select-${m.id}`} value={metrix.indexOf (m)}>{m.prompt}</option>\n                ))\n              }\n            </select>\n          </>\n        }\n        {\n          !select &&\n          <p>\n            <span>{current.prompt}</span>\n            <span onClick={setSelect}><img style={{cursor: 'pointer'}} src={caretdown} /></span>\n          </p>\n        }\n      </figcaption>\n      <Graph onClick={onClick} metric={current} mezs={mezs} />\n    </figure>\n  )\n}","import { useEffect, useState } from 'react';\nimport { useApp } from '../../../AppProvider';\nimport PieChart from './PieChart';\nimport WordCount from './WordCount';\nimport Bar from './Bar';\nimport {width, height, padding} from './dimensions';\nimport SingleMetrix from './SingleMetrix';\nimport { EntriesThisWeek, QuestionsThisWeek, SkillCount, TotalEntryCount } from './Stats';\nimport TimeOfDayBarChart from './TimeOfDayBarChart';\nimport SingleMetrixCarousel from './MetrixCarousel';\n\n// calculate days between 2 dates\nconst oneDay = 1000 * 60 * 60 * 24\n\n// index a list of entries by time of day\nconst reduceByTime = (acc, entry) => {\n  acc [new Date (entry.start).getHours ()].push (entry);\n  return acc;\n}\nconst runIndexByTime = entries => entries.reduce (reduceByTime, new Array (24).fill (1).map (() => []));\n\n// index list of entries by entry type\nconst reduceByType = (acc, entry) => {\n  if (acc [entry.entryType]) acc [entry.entryType].push (entry);\n  else acc [entry.entryType] = [entry];\n  return acc;\n}\n// const runIndexByType = entries => entries.reduce (reduceByType, {});\nconst runIndexByType = entries => {\n  let idx = entries.reduce (reduceByType, {});\n  let labels = Object.keys (idx);\n  let data = [];\n  while (labels.length > 0) {\n    let label = labels.pop ();\n    let start = data.length === 0 ? 0 : data [0].start + data [0].size;\n    let size = 100 * idx [label].length / entries.length;\n    data.unshift ({label, start, size});\n  }\n  return data;\n}\n\nexport default function Metrics () {\n  const {journal: {entryList, setFilters}, router: {redirect}} = useApp ();\n  const [indexed, setIndexed] = useState (null);\n  const [typeIndex, setTypeIndex] = useState (null);\n  const [hourlyMax, setMax] = useState (-1);\n\n  // goto a specific time\n  const onBarClick = time => async () => {\n    setFilters ([\n      {\n        type: 'time',\n        value: {\n          mode: 'after',\n          time: `${time % 12 || 12}:00 ${time < 12 ? 'am' : 'pm'}`\n        }\n      },\n      {\n        type: 'time',\n        value: {\n          mode: 'before',\n          time: `${(time + 1) % 12 || 12}:00 ${(time + 1) < 12 ? 'am' : 'pm'}`\n        }\n      }\n    ]);\n    redirect ('/?page=journal');\n  }\n\n  // process entry list on change\n  useEffect (() => {\n    let idx = runIndexByTime (entryList);\n    setMax (idx.reduce ((acc, val) => val.length > acc ? val.length : acc , 1) ) \n    setIndexed (idx);\n    setTypeIndex (runIndexByType (entryList));\n  }, [entryList]);\n\n  if (!indexed) return null;\n  let metrics = [\n    // time of day bar chart\n    (\n      <TimeOfDayBarChart />\n    ),\n    // type of entry pie chart\n    (\n      <figure className=\"type-of-entry\">\n        <figcaption>Entries By Type</figcaption>\n        <PieChart data={typeIndex} />\n      </figure>\n    ),\n    (\n      <WordCount />\n    ),\n    (\n      <SingleMetrixCarousel />\n    )\n  ]\n  // return the dashboard\n  return (\n    <>\n      <div className=\"row two-items\">\n        {metrics [1]}\n        {metrics [0]}\n      </div>\n      <div className=\"row one-item\">\n        {metrics [3]}\n      </div>\n      <div className=\"row four-items\">\n        <QuestionsThisWeek />\n        <EntriesThisWeek />\n        <TotalEntryCount />\n        <SkillCount />\n      </div>\n      <div className=\"row one-item\">\n        {metrics [2]}\n      </div>\n    </>\n  );\n}\n","import { useApp } from \"../AppProvider\"\nimport Metrics from './components/viz/Metrics'\nimport {H1, H3} from './components/Headers'\nimport { key } from \"../img/images\";\nimport AnalogClock from './components/viz/AnalogClock'\n\n\nfunction Analytics () {\n  const {router: {page}, journal: {entryList}} = useApp ();\n\n  if (page !== 'dashboard') return null;\n  if (entryList.length < 10) return (\n    <main>\n      <H1>Dashboard</H1>\n      <H3>Unlock <span style={{display: 'inline-block', marginInline: 'var(--body-text-size)', width: 'var(--h3-font-size)'}}><img style={{width: '100%'}} src={key} /></span> the dashboard when you make 10 journal entries!</H3>\n      <H3>Only {10 - entryList.length} entries to go!</H3>\n      <AnalogClock className=\"large\" />\n      <H3>It's only a matter of time!</H3>\n    </main>\n  )\n  return (\n    <main className=\"dashboard\">\n      <H1>Dashboard</H1>\n      <Metrics />\n    </main>\n  )\n}\n\nexport default Analytics","import { useEffect, useRef, useState } from \"react\";\nimport { useApp } from \"../AppProvider\";\nimport { dateShortHand, getTime, generateDailyDateRange, generateWeeklyDateRange, generateMonthlyDateRange, isInDay, isInWeek, isInMonth } from \"../lib/indexing\";\nimport {H1} from './components/Headers';\nimport { cancel, caretdown, checkmark, pensmall } from \"../img/images\";\n\nexport default function MetrixHistory () {\n  const {auth: {user}, router: {page}, metrix: {metrix, measurements, singleMeasurement, getMeasurements, singleMetrix, setSingleMetrix, setSingleMeasurement, updateMeasurement, measureHistoric}} = useApp ();\n\n  const [singleMetrixMeasurements, setMez] = useState ([]);\n  const [instances, setInstances] = useState ([]);\n  const [selected, setSelected] = useState ([]);\n  const [allSelected, setAllSelected] = useState (false);\n  const [isSelecting, setIsSelecting] = useState (false);\n  const isSelected = ({id}) => {\n    return selected.filter (mez => mez === id).length > 0;\n  }\n  const status = ({id}) => {\n    let s = isSelected ({id}) ? ' selected' : ' ';\n    let e = editId === id ? ' editing' : '';\n    return `${s}${e}`\n  }\n  // const toggleSelected = ({id}) => () => {\n  //   if (selected.filter (mez => mez === id).length) return setSelected (selected.filter (mez => mez !== id));\n  //   setSelected ([...selected, id]);\n  // }\n  // const selectAllOnClick = () => allSelected ? setSelected ([]) : setSelected (singleMetrixMeasurements.map (mez => mez.id));\n\n  useEffect (() => {\n    if (singleMetrixMeasurements.length) setAllSelected (selected.length === singleMetrixMeasurements.length);\n  }, [selected]);\n\n  const [editId, setEditMode] = useState (singleMeasurement ? singleMeasurement.id : null);\n  const [editValue, setEditValue] = useState (singleMeasurement ? singleMeasurement.measurement : null);\n  const [editError, setEditError] = useState (null);\n  const editingRef = useRef ();\n  const startEditing = mez => {\n    setEditValue (mez.measurement);\n    setEditMode (mez.id);\n    setEditError (null);\n  }\n  const updateValue = () => {\n    let measurement = editingRef.current.innerText;\n    if (singleMetrix.unit === 'number') {\n      measurement = parseFloat (measurement);\n      if (measurement < singleMetrix.range [0] || measurement > singleMetrix.range [1]) setEditError (`Number must be between ${singleMetrix.range [0]} and ${singleMetrix.range [1]} in increments of ${singleMetrix.step}`);\n    }\n    if (singleMetrix.unit === 'boolean') {\n      if (measurement !== 'Yes' && measurement !== 'No') {\n        setEditError ('Must be Yes/No answer');\n      }\n    }\n    setEditValue (measurement);\n  }\n  const submitEdit = measuredAt => async () => {\n    if (editError) return;\n    if (editId?.startsWith ('__')) await measureHistoric (singleMetrix, editValue, measuredAt);\n    if (!(editId?.startsWith ('__'))) await updateMeasurement (editId, editValue);\n    setTimeout (getMeasurements, 500);\n    setEditError (null);\n    setEditValue (null);\n    setEditMode (null);\n  }\n  const cancelEdit = () => {\n    let mez = instances.filter (mez => mez.id === editId) [0];\n    if (editingRef.current) editingRef.current.innerText = mez.measurement;\n    setEditValue (null);\n    setEditMode (null);\n    setEditError (null);\n  }\n\n  useEffect (() => {\n    if (page === 'metrix' && editingRef.current) editingRef.current.scrollIntoView ();\n  }, [page, editingRef.current])\n\n  useEffect (() => {\n    if (singleMeasurement) startEditing (singleMeasurement);\n  }, [singleMeasurement]);\n\n  useEffect (() => {\n    if (singleMetrix && singleMetrix.id) {\n      const arr = measurements.filter (mez => mez.metric === singleMetrix.id).sort ((a, b) => b.measuredAt - a.measuredAt);\n      if (arr.length === 0) {\n        setMez (arr);\n        setInstances ([])\n        return;\n      }\n      if (singleMetrix.frequency === 'as needed') {\n        setMez (arr);\n        setInstances (arr.map (mez => ({\n          mez,\n          id: mez.id,\n          date: dateShortHand (mez.measuredAt),\n          time: getTime (mez.measuredAt),\n          measurement: mez.measurement || mez.value\n        })));\n      }\n      if (singleMetrix.frequency === 'daily') {\n        let range = generateDailyDateRange (arr [arr.length - 1].measuredAt);\n        let mezs = range.map (day => arr.find (mez => isInDay (day, mez.measuredAt)));\n        setMez (arr);\n        setInstances (mezs.map ((mez, i) =>\n          !mez ? {\n            mez: {\n              id: `__${singleMetrix.id}-${i}`,\n              measurement: '...'\n            },\n            id: `__${singleMetrix.id}-${i}`,\n            date: dateShortHand (range [i]),\n            time: '...',\n            measurement: '...',\n            dateObj: range [i]\n          } : {\n            mez,\n            id: mez.id,\n            date: dateShortHand (mez.measuredAt),\n            time: mez.isHistoric ? 'N/A' : getTime (mez.measuredAt),\n            measurement: mez.measurement || mez.value\n          }\n        ))\n      }\n      if (singleMetrix.frequency === 'weekly') {\n        let range = generateWeeklyDateRange (arr [arr.length - 1].measuredAt);\n        let mezs = range.map (day => arr.find (mez => isInWeek (day, mez.measuredAt)));\n        setMez (arr);\n        setInstances (mezs.map ((mez, i) =>\n          !mez ? {\n            mez: {\n              id: `__${singleMetrix.id}-${i}`,\n              measurement: '...'\n            },\n            id: `__${singleMetrix.id}-${i}`,\n            date: dateShortHand (range [i]),\n            time: '...',\n            measurement: '...',\n            dateObj: range [i]\n          } : {\n            mez,\n            id: mez.id,\n            date: dateShortHand (mez.measuredAt),\n            time: mez.isHistoric ? 'N/A' : getTime (mez.measuredAt),\n            measurement: mez.measurement || mez.value\n          }\n        ))\n      }\n      if (singleMetrix.frequency === 'montly') {\n        let range = generateMonthlyDateRange (arr [arr.length - 1].measuredAt);\n        let mezs = range.map (day => arr.find (mez => isInMonth (day, mez.measuredAt)));\n        setMez (arr);\n        setInstances (mezs.map ((mez, i) =>\n          !mez ? {\n            mez: {\n              id: `__${singleMetrix.id}-${i}`,\n              measurement: '...'\n            },\n            id: `__${singleMetrix.id}-${i}`,\n            date: dateShortHand (range [i]),\n            time: '...',\n            measurement: '...',\n            dateObj: range [i]\n          } : {\n            mez,\n            id: mez.id,\n            date: dateShortHand (mez.measuredAt),\n            time: mez.isHistoric ? 'N/A' : getTime (mez.measuredAt),\n            measurement: mez.measurement || mez.value\n          }\n        ))\n      }\n    }\n  }, [singleMetrix, measurements]);\n\n  if (!user || page !== 'metrix') return null;\n  if (!singleMetrix) return (\n    <main className=\"single-metrix\">\n      <header>\n        <H1>Metrix</H1>\n      </header>\n      <div className=\"single-metrix-info\">\n        <p><span>Select Metrix to Review</span></p>\n        <p>\n          <select onChange={e => setSingleMetrix (metrix.find (m => m.id === e.target.value))}>\n            <option value={singleMetrix?.id}></option>\n            {\n              metrix.filter (m => m !== singleMetrix).map (m => (\n                <option key={`metrix-history-select-${m.id}`} value={m.id}>{m.prompt}</option>\n              ))\n            }\n          </select>\n        </p>\n      </div>\n      <p className=\"text-center\"><b>Once you select a metric to review, it's history will show up here!</b></p>\n    </main>\n  )\n\n  return (\n    <main className=\"single-metrix\">\n      <header>\n        <H1 short=\"Metrix\">Metrix History</H1>\n      </header>\n      <div className=\"single-metrix-info\">\n        <p>\n          <span>{singleMetrix.prompt}{singleMetrix.unitLabel ? ` ${singleMetrix.unitLabel}` : ''}</span>\n          {/* <span><img style={{cursor: 'pointer'}} src={pensmall} /></span> */}\n        </p>\n        <p>\n          <span>Recorded {singleMetrix.frequency}</span>\n        </p>\n        {\n          isSelecting &&\n          <p>\n            <span>\n              <select onChange={e => {setSingleMetrix (metrix.find (m => m.id === e.target.value)); setIsSelecting (false)}}>\n                <option value={singleMetrix?.id}>-- select metrix --</option>\n                {\n                  metrix.filter (m => m !== singleMetrix).map (m => (\n                    <option key={`metrix-history-select-${m.id}`} value={m.id}>{m.prompt}</option>\n                  ))\n                }\n              </select>\n            </span>\n            <span onClick={() => setIsSelecting (false)}>\n              <img style={{cursor: 'pointer'}} src={cancel} />\n            </span>\n          </p>\n        }\n        {\n          !isSelecting &&\n          <p>\n            <span>Review Another Metrix</span>\n            <span onClick={() => setIsSelecting (true)}><img style={{cursor: 'pointer'}} src={caretdown} /></span>\n          </p>\n        }\n      </div>\n      {\n        instances.length === 0 &&\n        <p className=\"text-center\">No measurements yet!</p>\n      }\n      {\n        instances.length > 0 &&\n        <ul className=\"metrix-history\">\n          <li className=\"metrix-history-header\">\n            <span>Date</span>\n            <span>Time</span>\n            <span>Measurement</span>\n          </li>\n          {\n            instances.map (({mez, id, date, time, measurement, dateObj}) => (\n              <li className={`metrix-measurement ${editId === id ? 'editing' : ''}`} key={`single-metrix-measurement-${id}`}>\n                <span>{date}</span>\n                <span>{time}</span>\n                <div>\n                  <p onBlur={updateValue} {...{ref: editId === id ? editingRef : null}} contentEditable={id === editId}>{editId === id ? editValue : measurement}</p> \n                  {\n                    editId === id &&\n                    <span onClick={submitEdit (dateObj)}>\n                      <img src={checkmark} />\n                    </span>\n                  }\n                  {\n                    editError && editId === id &&\n                    <>\n                      <br />\n                      <p style={{width: '100%'}} className=\"error\">{editError}</p>\n                    </>\n                  }\n                </div>\n                <span onClick={editId === id ? cancelEdit : () => setSingleMeasurement (mez)} className=\"metrix-more\">\n                  {\n                    editId !== mez.id &&\n                    <img src={pensmall} />\n                  }\n                  {\n                    editId === mez.id &&\n                    <img src={cancel} />\n                  }\n                </span>\n              </li>\n            ))\n          }\n        </ul>\n      }\n    </main>\n  )\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAvCAYAAABzJ5OsAAAABmJLR0QAWQCqAL2tfwFCAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH5AwcFAYk70i+6QAAAhhJREFUaN7t2btrFFEUx/GPWR9NFIy2loIiaSQiPjpt1NgJGttELK0tBQUfVTor0bSi4gMRbMVOlPwBESEoKmgaFfERi53Bw7C72TG690bmwGWXO4fL93fnt7NnzmUFx6pMONbhIHZiLebwEG9z38DDeIXFyviC82jlCn4KPwLwV3yoiLhX3JmsYiqAv8dEYRkYxZMg4EFOAiYD+Dy2dshZg1u5CZisWOVajwdHVcD9lL+BqQp4OaZrCDiXGnweu/GshoCnRd4njKQELz0+UkPAWMg7kRpcTQEtfC5yzuYAXkfAhrDWmVzA+xVwOlzbmxP4UgJGsVDMzWIoN/BuAmbwLpQPe3IFL2NjRcAivuHYIIqs5YCXsX9Q4PEv/w22L3O9bXhdrPe9KNoa8Aa8AW/AG/AGvAFPDn4IP/9irbJDu333z2sVuBMKoxfYtFLA14f3xShgc85WKWMiQN8N35/XvAMD3fGqZV4Wr2EX/uAODHzHYThY5nKYryMgCTicDJC7Ktf6EZAMvJNl1BCQFDxa5lKPvE4CkoLT7gF2s0w1roTc2RRPlWqUreQ5Sx+2tfBokO2Jfi1zsUvOUNGSmC5qnQiexCqdLDNW2eEDuBo6V3F8xHXskzBuB8u0euxwCTyDo34fgiWLaJn5Hjt8A0dyAI5xvANsBB7PDRhWF59bwtyC9sHtTTzW7sxmHcPapw3jMjxt/i/jF9CzX+22W/9hAAAAAElFTkSuQmCC\"","import Write from './pages/Write'\nimport NewWrite from './pages/NewWrite'\nimport Journal from './pages/NewJournal'\nimport Settings from './pages/Settings'\nimport Skills from './pages/NewSkills'\nimport Nav from './pages/components/Nav'\nimport Auth from './pages/Auth'\nimport Dashboard from './pages/Dashboard'\nimport './App.css'\nimport MetrixHistory from './pages/MetrixHistory'\n\nfunction App() {\n  return (\n    <>\n      <Auth />\n      <Skills />\n      <NewWrite />\n      <Journal />\n      <Settings />\n      <Dashboard />\n      <MetrixHistory />\n      <Nav />\n    </>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport AppProvider from './AppProvider';\n// import {isAlive} from './lib/keepAlive';\n\nconsole.warn = () => {}\nconsole.error = () => {}\n// import reportWebVitals from './reportWebVitals';\n// let passthrough = !navigator.onLine && isAlive;\n\n// (async () => {await navigator.serviceWorker.register ('/journal/sw.js', {scope: '/journal/'});}) ()\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppProvider>\n      <App />\n    </AppProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}