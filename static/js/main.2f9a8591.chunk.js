(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{146:function(e,t){},148:function(e,t){},158:function(e,t){},160:function(e,t){},187:function(e,t){},189:function(e,t){},190:function(e,t){},195:function(e,t){},197:function(e,t){},216:function(e,t){},228:function(e,t){},231:function(e,t){},255:function(e,t,n){},256:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(131),a=n(1),s=n.n(a),i=n(3),o=n(2),u=n.n(o),l=n(132),f=n.n(l),d=n(8),h=n(4),j=n.p+"static/media/skill.23054f65.svg",p=n.p+"static/media/plus.a86e5868.svg",b=n.p+"static/media/book.65cd22a3.svg",g=n.p+"static/media/settings.d2739024.svg",O=n(258),m=n(21),x="2ac3ij97dhtkag9fljdsuo1203",v="us-east-1_tRcA2uwF6",w=null,y=new m.e({UserPoolId:v,ClientId:x}),k=null,S=null,N=null,C={get get(){return new Headers({"x-amz-access-token":S})},get post(){return new Headers({"x-amz-access-token":S,"Content-Type":"application/json"})}},T=function(e){return new Promise((function(t,n){try{w=new m.a({Username:e,ClientMetadata:{phoneNumber:e}}),k=new m.c({Username:e,Pool:y}),t()}catch(r){n(r)}}))},q=function(){return new Promise((function(e,t){try{k=y.getCurrentUser(),e()}catch(n){t(n)}}))},F=function(){return new Promise((function(e,t){try{if(!k)throw"Cognito user must be defined to get access token";k.getSession((function(n,r){if(n)return t(n);S=r.getAccessToken().getJwtToken(),N=new m.b({RefreshToken:r.getRefreshToken().getToken()}),e()}))}catch(n){t(n)}}))},P=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.signOut();case 3:t(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(s.a.mark((function e(n,r){var c,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=new m.d({Name:"phone_number",Value:t}),a=new m.d({Name:"custom:custom:id",Value:Object(O.a)()}),i=[c,a],y.signUp(t,Object(O.a)(),i,null,(function(e,t){if(e)return r(e);k=t.user,n()}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(e,t,n){return new Promise(function(){var r=Object(i.a)(s.a.mark((function r(c,a){return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,T(e);case 2:k.setAuthenticationFlowType("CUSTOM_CHALLENGE"),console.log(k,w),k.initiateAuth(w,{onSuccess:function(e){return c(e)},onFailure:function(e){return a(e)},customChallenge:function(e){var r=this;n(),t((function(e){return k.sendCustomChallengeAnswer(e,r)}))}});case 5:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())},J={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries",{method:"get",headers:C.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries",{method:"post",headers:C.post,body:JSON.stringify(e)})}}},E={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills",{method:"get",headers:C.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills",{method:"post",headers:C.get,body:JSON.stringify(e)})}}},z={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares",{method:"get",headers:C.get})}},get getById(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries/".concat(e),{method:"get",headers:C.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares",{method:"post",headers:new Headers({"x-amz-access-token":S,"Content-Type":"application/json"}),body:JSON.stringify(e)})}},get toggleFreeze(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares/".concat(e),{method:"put",headers:new Headers({"x-amz-access-token":S})})}}},R={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions",{method:"get",headers:C.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions",{method:"post",headers:new Headers({"x-amz-access-token":S,"Content-Type":"application/json"}),body:JSON.stringify(e)})}}},W={get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/audios",{method:"post",headers:new Headers({"x-amz-access-token":S,"Content-Type":"application/json"}),body:JSON.stringify(e)})}}};var M=n(10),D=["January","February","March","April","May","June","July","August","September","October","November","December"],L=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e);return"".concat(t.getMonth(),"-").concat(t.getDate(),"-").concat(t.getFullYear()).toString()},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e);return"".concat(L[t.getDay()],", ").concat(D[t.getMonth()]," ").concat(t.getDate())},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return"".concat(e.getHours()%12||12,":").concat("0".concat(e.getMinutes()).slice(-2)," ").concat(e.getHours()>11?"pm":"am")},H=function(e){var t=e.map((function(e){return Object.assign(e,{start:new Date(e.start),end:new Date(e.end)})}));return t.sort((function(e,t){return t.start-e.start})),t.reduce((function(e,t){return function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=t.filter((function(e){return e[n]===r}));if(a.length>0)return a[0].list;var s=(e={},Object(M.a)(e,n,r),Object(M.a)(e,"meta",c),Object(M.a)(e,"list",[]),e);return t.push(s),s.list}(e,"date",B(t.start),{date:U(t.start)}).push(t),e}),[])},Q=n(134),V=n.n(Q),_=null,G=window.AudioContext||window.webkitAudioContext,Z=new V.a.Mp3Encoder(1,44100,128e3),K=null,X=null,$=[],ee=[],te=!!G,ne=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.navigator.mediaDevices.getUserMedia({audio:!0});case 3:K=e.sent,t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){if(!K)throw new Error("no stream available to record");(X=new window.MediaRecorder(K)).ondataavailable=function(e){console.log($),$.push(e.data)}},ce=function(){return!!K&&!!X&&!!$},ae=function(){var e=Object(i.a)(s.a.mark((function e(){var t,n=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:300,e.abrupt("return",new Promise(function(){var e=Object(i.a)(s.a.mark((function e(n,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,_=new G,ce()){e.next=4;break}throw new Error("Environment not set up for recording");case 4:setTimeout((function(){X.start(),n()}),t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),console.log("\n    current state:\n      stream = ".concat(K,"\n      mediaRecorder = ").concat(X,"\n      chunks = ").concat($,"\n    "));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{X.stop(),setTimeout((function(){return t()}),150)}catch(r){n(r),console.log("\n    current state:\n      stream = ".concat(K,"\n      mediaRecorder = ").concat(X,"\n      chunks = ").concat($,"\n    "))}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"recording",e.abrupt("return",new Promise(function(){var e=Object(i.a)(s.a.mark((function e(r,c){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t(),e.prev=1,e.t0=_,e.next=5,$[0].arrayBuffer();case 5:e.t1=e.sent,e.t2=function(e){ee.push(Z.encodeBuffer(e.getChannelData(0).map((function(e){return 1e4*e})))),ee.push(new Int8Array(Z.flush()));var t=new File(ee,n,{type:"audio/mp3"});a(),r(t)},e.t0.decodeAudioData.call(e.t0,e.t1,e.t2),e.next=14;break;case 10:e.prev=10,e.t3=e.catch(1),a(),c(e.t3);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var oe=function(e){var t=e.onChange,n=e.freeze,c=Object(o.useState)(!1),a=Object(h.a)(c,2),u=a[0],l=a[1],f=Object(o.useState)(!1),d=Object(h.a)(f,2),j=d[0],p=d[1],b=Object(o.useState)(0),g=Object(h.a)(b,2),O=g[0],m=g[1],x=Object(o.useState)(!1),v=Object(h.a)(x,2),w=v[0],y=v[1],k=Object(o.useState)(null),S=Object(h.a)(k,2),N=S[0],C=S[1],T=Object(o.useState)("".concat(Y(),"-").concat(B())),q=Object(h.a)(T,2),F=q[0],P=q[1],A=Object(o.useState)(!1),I=Object(h.a)(A,2),J=I[0],E=I[1];Object(o.useEffect)((function(){Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:re(),l(ce());case 4:case"end":return e.stop()}}),e)})))()}),[]);var z=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!J){e.next=2;break}return e.abrupt("return",M());case 2:return e.next=4,ae();case 4:p(!0),y(window.setInterval((function(){return m((function(e){return e+1}))}),1e3));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.clearInterval(w),y(!1),p(!1),m(0),e.next=6,se();case 6:return e.next=8,ie(n,"audio-recording-".concat(Y(),"-").concat(B(),".mp3"));case 8:t=e.sent,C(t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.clearInterval(w),E(!0),X.pause();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(window.setInterval((function(){return m((function(e){return e+1}))}),1e3)),E(!1),X.resume();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){return function(){p(!1),m(0),y(!1),C(null),P(null)}};Object(o.useEffect)((function(){t&&t({file:N,title:F,reset:D})}),[N,F]);var L=Object(o.useRef)();return u?Object(r.jsxs)("div",{ref:L,className:"recorder-container grid text-center",children:[!j&&!N&&Object(r.jsx)("p",{children:'Click "Record" to speak your journal entry!'}),j&&!N&&Object(r.jsx)("div",{className:"timer",children:Object(r.jsxs)("span",{children:[Math.floor(O/60),":","00".concat(O%60).slice(-2)]})}),(!j||J)&&!N&&Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:J?M:z,children:J?"Resume":"Record"}),J&&Object(r.jsx)("button",{onClick:R,children:"Finish"})]}),j&&!J&&!N&&Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:R,children:"Stop"}),Object(r.jsx)("button",{onClick:W,children:"Pause"})]})}),N&&Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("figure",{className:"audio-recording",children:[Object(r.jsxs)("figcaption",{children:[Object(r.jsxs)("p",{children:["Title:\xa0\xa0\xa0",Object(r.jsx)("input",{className:"audio-title-input",onChange:function(e){return P(e.target.value)},defaultValue:F})]}),Object(r.jsx)("p",{className:"fake-button",children:Object(r.jsx)("a",{className:"error",onClick:D(),children:"Start Over"})})]}),Object(r.jsx)("audio",{controls:!0,src:window.URL.createObjectURL(N)})]})})]}):Object(r.jsx)("div",{className:"none"})};var ue=function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{children:e.children}),Object(r.jsx)("h4",{children:e.short?e.short:e.children})]})},le=function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:e.children}),Object(r.jsx)("h5",{children:e.short?e.short:e.children})]})},fe=function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h3",{children:e.children}),Object(r.jsx)("h6",{children:e.short?e.short:e.children})]})},de=["What have I done today?","How do I feel?","What else am I going to do?"];function he(e){var t=e.question,n=e.onToggle,c=e.getSetting;return Object(r.jsxs)("li",{className:"setting",children:[Object(r.jsx)("div",{children:t}),Object(r.jsx)("div",{children:Object(r.jsx)("span",{onClick:n("show-custom-question-".concat(t)),className:c("show-custom-question-".concat(t))?"toggle on":"toggle"})})]})}var je=function(e){var t=e.questions,n=e.display,c=e.freeze,a=e.settings,u=e.createEntry,l=a.getSetting,f=a.addSetting,j=a.toggle,p=Object(o.useState)(new Date),b=Object(h.a)(p,2),g=b[0],O=b[1],m=Object(o.useState)(!1),x=Object(h.a)(m,2),v=x[0],w=x[1],y=Object(o.useState)([]),k=Object(h.a)(y,2),S=k[0],N=k[1],C=Object(o.useState)([]),T=Object(h.a)(C,2),q=T[0],F=T[1],P=Object(o.useState)(new Function),A=Object(h.a)(P,2),I=A[0],J=A[1],E=Object(o.useState)({}),z=Object(h.a)(E,2),R=z[0],D=z[1],L=Object(o.useRef)(),B=Object(o.useRef)(),H=Object(o.useRef)(),Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n){R[e]||(n.target.innerText=t,D(Object(d.a)(Object(d.a)({},R),{},Object(M.a)({},e,!0))))}},V=function(){var e=Object(i.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("...?"!==(n=H.current.innerText)&&""!==n.trim()){e.next=3;break}return e.abrupt("return");case 3:return H.current.innerText="...?",e.next=6,t.createQuestion(n);case 6:f("show-custom-question-".concat(n),!0),w(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(s.a.mark((function e(r,c){var a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.post({filename:t});case 3:return a=e.sent,e.next=6,a.json();case 6:return i=e.sent,e.next=9,fetch(i.uploadUrl,{method:"PUT",body:n});case 9:if(e.sent.ok){e.next=12;break}throw new Error("failed to upload");case 12:r(i.id),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),c(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(i.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c(),n=l("freeform","!audio-recording")?"freeform":l("freeform","&audio-recording")?"audio":"questions",r={start:g,end:new Date,entryType:n},e.prev=3,"audio"!==r.entryType){e.next=11;break}return e.next=7,_(q,S);case 7:r.audio=e.sent,I(),e.next=12;break;case 11:"questions"===r.entryType?(r.questions=Array.from(L.current.querySelectorAll("b")).map((function(e){return e.innerText})),r.answers=Array.from(L.current.querySelectorAll("div")).map((function(e){return e.innerText}))):r.freeform=B.current.innerText;case 12:return e.next=14,u(r);case 14:O(new Date),"questions"===r.entryType&&Array.from(L.current.querySelectorAll("div")).map((function(e){return e.innerText="..."})),"freeform"===r.entryType&&(B.current.innerText="Write your entry here!"),t(),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(3),"questions"===r.entryType&&Array.from(L.current.querySelectorAll("div")).map((function(e){return e.innerText="..."})),"freeform"===r.entryType&&(B.current.innerText="Write your entry here!"),t();case 25:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(){return e.apply(this,arguments)}}();return v?Object(r.jsxs)("main",{className:n,children:[Object(r.jsx)(le,{children:"Default Questions"}),Object(r.jsx)("ul",{className:"current-question-list",children:de.map((function(e){return Object(r.jsx)("li",{className:"manage-default-question",children:e},"manage-default-questions-".concat(e))}))}),Object(r.jsx)(le,{children:"Custom Questions"}),Object(r.jsx)("ul",{className:"current-question-list",children:t.questions.map((function(e){return Object(r.jsx)(he,{question:e,onToggle:j,getSetting:l})}))}),Object(r.jsx)("h2",{children:"Add A Custom Question?"}),Object(r.jsx)("h4",{children:"Add Question"}),Object(r.jsx)("b",{ref:H,className:"add-question-input",contentEditable:!0,children:"...?"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:V,children:"Add Question"}),Object(r.jsx)("button",{onClick:function(){return w(!1)},children:"Back To Writing"})]})]}):Object(r.jsxs)("main",{className:n,children:[Object(r.jsx)(le,{children:U()}),Object(r.jsx)(fe,{children:Y(g)}),l("default-questions","|custom-questions","!freeform")&&Object(r.jsxs)("div",{ref:L,className:"questions",children:[l("default-questions")&&de.map((function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:e}),Object(r.jsx)("div",{onFocus:Q(e),contentEditable:!0,children:"..."})]})})),l("custom-questions")&&Object(r.jsxs)(r.Fragment,{children:[t.questions.filter((function(e){return l("show-custom-question-".concat(e))})).map((function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:e}),Object(r.jsx)("div",{onFocus:Q(e),contentEditable:!0,children:"..."})]})})),Object(r.jsx)("span",{className:"fake-button",onClick:function(){return w(!0)},children:"Manage Custom Question"})]})]}),l("freeform","!audio-recording")&&Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{onFocus:Q("freeform"),className:"freeform",contentEditable:!0,ref:B,children:"Write your entry here!"})}),l("freeform","&audio-recording")&&Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(oe,{freeze:c,onChange:function(e){N(e.file),F(e.title),J(e.reset)}})}),Object(r.jsx)("button",{onClick:G,children:"Complete"})]})},pe=n(14),be=n.p+"static/media/search.28b0ad10.svg";var ge=function(e){var t=e.currentValue,n=e.updateSearch,c=Object(o.useRef)(),a=function(e){e.preventDefault&&e.preventDefault(),n(c.current.value)};return Object(r.jsx)("div",{className:"grid",children:Object(r.jsxs)("form",{className:"search-bar",onSubmit:a,children:[Object(r.jsx)("input",{defaultValue:t,handleChange:function(e){n(c.current.value)},ref:c,placeholder:"Search..."}),Object(r.jsx)("img",{src:be,onClick:a}),Object(r.jsx)("input",{type:"submit",hidden:!0})]})})},Oe=function(e){var t=e.children,n=e.defferedClassName,c=e.delay,a=Object(o.useState)(!0),s=Object(h.a)(a,2),i=s[0],u=s[1];return Object(o.useEffect)((function(){setTimeout((function(){u(!1)}),c)}),[]),i?Object(r.jsx)("article",{className:n}):Object(r.jsx)(r.Fragment,{children:t})},me=function(e){var t=e.date,n=e.isOpen,c=e.open,a=e.close,s=e.count;return n?Object(r.jsxs)("header",{className:"entry-header",children:[Object(r.jsx)("span",{className:"fake-button",onClick:a,children:"close"}),Object(r.jsx)(le,{children:t})]}):Object(r.jsxs)("header",{className:"entry-header",children:[Object(r.jsx)("span",{className:"fake-button",onClick:c,children:"more"}),Object(r.jsx)(le,{children:t}),Object(r.jsx)("div",{className:"pill",children:Object(r.jsx)("span",{children:s})})]})},xe=function(e){var t=e.entries,n=e.open;return t.map((function(e){return n?Object(r.jsxs)("section",{className:"journal-entry",children:[Object(r.jsxs)(fe,{short:Y(e.start),children:[Y(e.start)," - ",Y(e.end)]}),("questions"===e.entryType||!e.entryType)&&e.questions.map((function(t,n){return Object(r.jsx)("section",{children:Object(r.jsxs)("p",{children:[Object(r.jsxs)("b",{children:[t," "]}),e.answers[n]]})})})),"freeform"===e.entryType&&Object(r.jsx)("section",{className:"journal-entry",children:Object(r.jsx)("p",{children:e.freeform})}),"audio"===e.entryType&&Object(r.jsxs)("figure",{children:[Object(r.jsx)("figcaption",{children:Object(r.jsx)("p",{children:e.audio.filename})}),Object(r.jsx)("audio",{controls:!0,src:e.audio.url})]})]},"entry-".concat(e.id)):Object(r.jsx)("div",{})}))};var ve=function(e){var t=e.display,n=e.entries,c=e.isNotMain,a=Object(o.useState)([]),s=Object(h.a)(a,2),i=s[0],u=s[1],l=Object(o.useState)(10),f=Object(h.a)(l,2),d=f[0],j=f[1],p=Object(o.useState)(!1),b=Object(h.a)(p,2),g=b[0],O=b[1],m=Object(o.useState)(""),x=Object(h.a)(m,2),v=x[0],w=x[1],y=Object(o.useState)([]),k=Object(h.a)(y,2),S=k[0],N=k[1],C=function(e){O(!0),w(e)},T=function(){O(!1),w(""),N([])},q=function(){j(10+d)};Object(o.useEffect)((function(){10!==d&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2*window.innerHeight/3;setTimeout((function(){window.scrollBy({left:0,top:e,behavior:"smooth"})}),arguments.length>1&&void 0!==arguments[1]?arguments[1]:100)}()}),[d]),Object(o.useEffect)((function(){v.length&&F(v)}),[v]);var F=function(e){setTimeout((function(){if(e===v){var t=n.reduce((function(e,t){return[].concat(Object(pe.a)(e),Object(pe.a)(t.list))}),[]),r=t.filter((function(e){return"freeform"===e.entryType})).filter((function(t){return t.freeform.toLowerCase().match(e.toLowerCase())})),c=t.filter((function(e){return"freeform"!==e.entryType})).map((function(e){return Object.assign(e,{combined:e.answers.reduce((function(e,t){return e+" "+t.toLowerCase()}),"")})})).filter((function(t){return t.combined.match(e.toLowerCase())})),a=[].concat(Object(pe.a)(c),Object(pe.a)(r));N(H(a))}}),500)},P=Object(r.jsx)(r.Fragment,{children:n.map((function(e,t){return t<d?Object(r.jsx)(Oe,{delay:85*(t%10+1),defferedClassName:"",children:Object(r.jsxs)("article",{children:[Object(r.jsx)(me,{count:e.list.length,date:e.meta.date,isOpen:-1!==i.indexOf(e.date),open:function(){u((function(t){return[].concat(Object(pe.a)(t),[e.date])}))},close:function(){u((function(t){return t.filter((function(t){return t!==e.date}))}))},index:e}),Object(r.jsx)(xe,{open:-1!==i.indexOf(e.date),entries:e.list})]},"index-".concat(e.date))}):t===d?Object(r.jsx)("div",{className:"grid",children:Object(r.jsx)("span",{className:"fake-button",onClick:q,children:"More..."})}):Object(r.jsx)("div",{className:"none"})}))});return g&&(P=Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"grid",children:Object(r.jsx)("span",{className:"fake-button",onClick:T,children:"Clear Search Results"})}),S.map((function(e,t){return Object(r.jsx)(Oe,{delay:50*t,defferedClassName:"",children:Object(r.jsxs)("article",{children:[Object(r.jsx)(me,{count:e.list.length,date:e.meta.date,isOpen:-1!==i.indexOf(e.date),open:function(){u((function(t){return[].concat(Object(pe.a)(t),[e.date])}))},close:function(){u((function(t){return t.filter((function(t){return t!==e.date}))}))},index:e}),Object(r.jsx)(xe,{open:-1!==i.indexOf(e.date),entries:e.list})]},"index-search-results-for-".concat(v,"-").concat(e.date))})}))]})),"none"===t?Object(r.jsx)("div",{}):c?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ge,{currentValue:v,updateSearch:C,cancelSearch:T}),P]}):Object(r.jsxs)("main",{className:t,children:[Object(r.jsx)(ge,{currentValue:v,updateSearch:C,cancelSearch:T}),P]})};function we(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("p",{children:"If you're having trouble thinking of some? We made a list of some sample skills!"}),Object(r.jsxs)("section",{children:[Object(r.jsx)("h3",{className:"dont-hide",style:{textDecoration:"underline"},children:"Suggestions:"}),Object(r.jsxs)("ul",{style:{margin:"2vh 0"},children:[Object(r.jsx)("li",{children:"Go for a walk"}),Object(r.jsx)("li",{children:"Focus on a small, simple task"}),Object(r.jsx)("li",{children:"Read a short, interesting article"}),Object(r.jsx)("li",{children:"Practice mindfullness"}),Object(r.jsx)("li",{children:"Listen to your own words"}),Object(r.jsx)("li",{children:"Check the facts"})]})]})]})}var ye=function(e){var t=e.display,n=e.skills,c=e.submitSkill,a=Object(o.useState)("reference"),u=Object(h.a)(a,2),l=u[0],f=u[1],d=Object(o.useRef)(),j=Object(o.useRef)(),p=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c({category:d.current.value,skill:j.current.innerText});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:f("reference");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("datalist",{id:"skills-categories",children:n.map((function(e){return Object(r.jsx)("option",{children:e.meta.category})}))}),Object(r.jsxs)("main",{className:"edit"===l?t:"none",children:[Object(r.jsx)("h2",{children:"New Skill"}),Object(r.jsxs)("div",{children:["Category: ",Object(r.jsx)("input",{list:"skills-categories",ref:d,defaultValue:"Tools For"})]}),Object(r.jsxs)("div",{children:["Skill: ",Object(r.jsx)("p",{style:{padding:7.5},ref:j,contentEditable:!0,children:"..."})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:p,children:"Add Skill"}),Object(r.jsx)("button",{onClick:function(){f("reference")},children:"Cancel"})]}),Object(r.jsx)("hr",{style:{margin:"10vh 0"}}),Object(r.jsx)(we,{})]}),Object(r.jsxs)("main",{className:"reference"===l?t:"none",children:[!n.length&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("p",{children:"You haven't added any coping skills yet, but that's ok! Click on 'Add New Skill' to start adding coping skills!"}),Object(r.jsx)("p",{children:"Having trouble thinking of some? We made a list of some sample skills!"}),Object(r.jsx)(we,{})]}),n.map((function(e){return Object(r.jsxs)("section",{children:[Object(r.jsx)(le,{children:e.meta.category}),Object(r.jsx)("ul",{children:e.list.map((function(e){return Object(r.jsx)("li",{children:e.skill})}))})]})})),Object(r.jsx)("span",{style:{marginTop:"2.5vh"},onClick:function(){f("edit")},className:"fake-button",children:"Add New Skill"}),!n.length&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("p",{children:"You haven't added any coping skills yet, but that's ok! Click on 'Add New Skill' to start adding coping skills!"}),Object(r.jsx)("p",{children:"Having trouble thinking of some? We made a list of some sample skills!"}),Object(r.jsx)(we,{})]})]})]})},ke=function(e){var t=e.replaceAll(/[^0-9]/g,"");if(10!==t.length)throw new Error("Phone number must be 10 digits, current length: "+t.length);return"+1"+t},Se={"calendar.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"pen.svg":'Icons made by <a href="https://www.flaticon.com/authors/icongeek26" title="Icongeek26">Icongeek26</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"book.svg":'Icons made by <a href="https://www.flaticon.com/authors/zlatko-najdenovski" title="Zlatko Najdenovski">Zlatko Najdenovski</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"plus.svg":'Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"list.svg":'Icons made by <a href="https://www.flaticon.com/authors/phatplus" title="phatplus">phatplus</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"skill.svg":'Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"settings.svg":'Icons made by <a href="https://www.flaticon.com/authors/srip" title="srip">srip</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"search.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/pixel-perfect" title="Pixel perfect">Pixel perfect</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>'};function Ne(e){var t=e.shareJournal,n=e.settings,c=Object(o.useRef)(),a=Object(o.useRef)(),u=Object(o.useRef)(),l=function(){var e=Object(i.a)(s.a.mark((function e(){var r,i,o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.current.value,r=ke(r),i=a.current.value,o=u.current.value,e.next=6,t(r,i,o);case 6:l=e.sent,n.addSetting("share-".concat(l.id),!0),c.current.value="",u.current.value="";case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"action",children:[Object(r.jsx)("p",{style:{textDecoration:"none"},children:"Share Your Journal With"}),Object(r.jsx)("input",{ref:u,placeholder:"James Allen"}),Object(r.jsx)("input",{type:"tel",ref:c,placeholder:"123-456-7890"}),Object(r.jsx)("p",{style:{textDecoration:"none"},children:"Your Name"}),Object(r.jsx)("input",{ref:a}),Object(r.jsx)("br",{}),Object(r.jsx)("span",{onClick:l,children:"Submit"})]})}function Ce(e){var t=e.freeze,n=e.sharedByMe,c=e.toggleSetting,a=e.getSetting,o=e.toggleFreeze,u=function(e){return function(){return Object(i.a)(s.a.mark((function n(){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t(),n.prev=1,n.next=4,o(e.id);case 4:c("share-".concat(e.id))(),r(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),r();case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))}};return Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{style:{textDecoration:"none"},children:"Who You Share Your Journal With"}),Object(r.jsx)("hr",{style:{width:"25vw"}}),0===n.length&&Object(r.jsx)("span",{style:{textDecoration:"none"},children:"You haven't shared your journal - no pressure"}),n.map((function(e){return Object(r.jsx)(Fe,{getSetting:a,title:e.shareWithName||e.shareWith,setting:"share-".concat(e.id),onToggle:u(e)})}))]})}function Te(e){var t=e.sharedWithMe,n=e.redirect,c=t.filter((function(e){return!e.frozen}));return Object(r.jsxs)("div",{className:"action",children:[Object(r.jsx)("p",{style:{textDecoration:"none"},children:"Journals Shared With You"}),Object(r.jsx)("hr",{style:{width:"25vw"}}),0===c.length&&Object(r.jsx)("span",{style:{textDecoration:"none"},children:"Nobody has shared a journal with you..."}),c.map((function(e){return Object(r.jsx)("span",{onClick:function(){n("?page=sharing&id=".concat(e.id,"&name=").concat(e.name))},children:e.name})}))]})}function qe(e){var t=e.longTitle,n=e.shortTitle,c=e.children;return Object(r.jsxs)("div",{className:"setting-group",children:[Object(r.jsx)("header",{children:Object(r.jsx)(fe,{short:n,children:t})}),c,Object(r.jsx)("div",{})]})}function Fe(e){var t=e.setting,n=e.title,c=e.onToggle,a=e.getSetting,s=e.relationships,i=void 0===s?[]:s;return i.reduce((function(e,t){if(!e)return e;if("+"!==t.charAt(0))return e;var n=t.substring(1);return a(n)}),!0)?Object(r.jsxs)("div",{className:"setting",children:[Object(r.jsx)("div",{children:n}),Object(r.jsx)("div",{children:Object(r.jsx)("span",{onClick:c.apply(null,[t].concat(Object(pe.a)(i))),className:a(t)?"toggle on":"toggle"})})]}):Object(r.jsx)("div",{className:"none"})}var Pe=function(e){var t=e.freeze,n=e.settings,c=e.swStatus,a=e.install,s=e.uninstall,i=e.display,o=e.logout,u=e.shareJournal,l=e.sharedWithMe,f=e.sharedByMe,d=e.toggleFreeze,h=e.redirect;return Object(r.jsxs)("main",{className:"settings",style:{display:i},children:[Object(r.jsxs)(qe,{longTitle:"Journal Settings",shortTitle:"Journal",children:[Object(r.jsx)(Fe,{setting:"freeform",title:"Enable Freeform",getSetting:n.getSetting,onToggle:n.toggle}),n.getSetting("audio-recording-supported")&&Object(r.jsx)(Fe,{setting:"audio-recording",title:"Enable Audio Recording",getSetting:n.getSetting,onToggle:n.toggle,relationships:["+freeform"]}),Object(r.jsx)(Fe,{setting:"default-questions",title:"Show Default Questions",getSetting:n.getSetting,onToggle:n.toggle,relationships:["|custom-questions"]}),Object(r.jsx)(Fe,{setting:"custom-questions",title:"Show Custom Questions",getSetting:n.getSetting,onToggle:n.toggle,relationships:["|default-questions"]})]}),Object(r.jsx)(Ne,{settings:n,shareJournal:u}),Object(r.jsx)(Te,{settings:n,sharedWithMe:l,redirect:h}),Object(r.jsx)(Ce,{freeze:t,getSetting:n.getSetting,toggleSetting:n.toggle,setSetting:n.set,sharedByMe:f,toggleFreeze:d}),!c&&Object(r.jsx)("div",{className:"action",children:Object(r.jsx)("span",{onClick:a,children:"Install!"})}),!!c&&Object(r.jsx)("div",{className:"action",children:Object(r.jsx)("span",{onClick:s,children:"Uninstall"})}),Object(r.jsx)("div",{className:"action",children:Object(r.jsx)("span",{onClick:o,children:"Log Out"})}),Object(r.jsxs)("section",{id:"attributions",children:[Object(r.jsx)(le,{children:"Attributions"}),Object(r.jsx)("ul",{children:Object.keys(Se).map((function(e){return Object(r.jsx)("li",{dangerouslySetInnerHTML:{__html:Se[e]}},"attribiution-".concat(e))}))})]})]})};var Ae=function(e,t,n){var r,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.filter((function(e){return e[t]===n}));if(a.length>0)return a[0].list;var s=(r={},Object(M.a)(r,t,n),Object(M.a)(r,"meta",c),Object(M.a)(r,"list",[]),r);return e.push(s),s.list};var Ie=function(e){var t=e.shareId,n=e.name,c=e.display,a=e.getShareById,u=Object(o.useState)([]),l=Object(h.a)(u,2),f=l[0],d=l[1],j=Object(o.useState)(!1),p=Object(h.a)(j,2),b=p[0],g=p[1];return Object(o.useEffect)((function(){t&&Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=d,e.next=4,a(t);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),g("We encountered an experience loading this journal. It may not longer be shared with you...");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[t]),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("main",{style:{display:c},children:[Object(r.jsxs)("h5",{children:["Shared By ",n]}),Object(r.jsx)(ve,{isNotMain:!0,display:c,entries:f}),b&&Object(r.jsx)("p",{className:"error",children:b})]})})};var Je={write:{long:function(){return"Write Your Journal Entry"},short:function(){return"Check In"}},journal:{long:function(){return"Review Your Journal Entries"},short:function(){return"Therapy Journal"}},settings:{long:function(){return"Customize Your Therapy Journal"},short:function(){return"Customize"}},skills:{long:function(){return"Coping Skills Reference Sheet"},short:function(){return"Coping Skills"}},sharing:{long:function(e){return"Therapy Journal From ".concat(e)},short:function(e){return"Therapy Journal"}}},Ee=function(e){return Je[e]},ze=window.location.href.split("?")[0];"/"===ze.charAt(ze.length-1)&&(ze=ze.substring(0,ze.length-1));var Re=ze,We={"custom-questions":!0,"default-questions":!0,freeform:!1},Me=JSON.parse(localStorage.getItem("pending-actions")||"[]"),De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};localStorage.setItem("pending-actions",[]),Me.forEach((function(t){var n=t.action,r=t.body;return e[n](r)}))};n(255);var Le=function(e){var t=e.install,n=e.uninstall,c=e.swStatus,a=e.passthrough,u=function(){var e=Object(o.useState)([]),t=Object(h.a)(e,2),n=t[0],r=t[1];return{skills:n,getSkills:function(){var e=Object(i.a)(s.a.mark((function e(){var t,n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.get();case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,c=n.reduce((function(e,t){return Ae(e,"category",t.category,{category:t.category}).push(t),e}),[]),r(c),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),submitSkill:function(e){return new Promise(function(){var t=Object(i.a)(s.a.mark((function t(n,c){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r((function(t){return Ae(t,"category",e.category,{category:e.category}).push(e),t})),t.next=4,E.post(e);case 4:n(),t.next=13;break;case 7:t.prev=7,t.t0=t.catch(0),(a=JSON.parse(localStorage.getItem("pending-actions")||"[]")).push({action:"submit-skill",body:e}),localStorage.setItem("pending-actions",JSON.stringify(a)),c(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}())}}}(),l=u.skills,f=u.getSkills,O=u.submitSkill,x=function(){var e=Object(o.useState)([]),t=Object(h.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)([]),a=Object(h.a)(c,2),u=a[0],l=a[1],f=function(){var e=Object(i.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.get();case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,r(n),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(s.a.mark((function e(c,a){var i,o,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.post(t);case 3:return i=e.sent,e.next=6,i.json();case 6:o=e.sent,r([].concat(Object(pe.a)(n),[o])),c(),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(0),(u=JSON.parse(localStorage.getItem("pending-actions")||"[]")).push({action:"create-entry",body:t}),localStorage.setItem("pending-actions",JSON.stringify(u)),a(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var e=H(n);l(e)}),[n]),{entries:u,getEntries:f,createEntry:d}}(),v=x.entries,w=x.getEntries,y=x.createEntry,C=function(){var e=Object(o.useState)([]),t=Object(h.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)([]),a=Object(h.a)(c,2),u=a[0],l=a[1],f=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.get();case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,l(c.sharedByMe),r(c.sharedWithMe),t(c),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(s.a.mark((function e(n,r){var c,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.getById(t);case 3:return c=e.sent,e.next=6,c.json();case 6:a=e.sent,i=H(a),n(i),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),r(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(s.a.mark((function e(n,r){var c,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.toggleFreeze(t);case 3:return c=e.sent,e.next=6,c.json();case 6:a=e.sent,l((function(e){return e.map((function(e){return e.id===t?a:e}))})),n(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),r(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{sharedByMe:u,sharedWithMe:n,getShareById:d,getShares:f,shareJournal:function(){var e=Object(i.a)(s.a.mark((function e(t,n,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(s.a.mark((function e(c,a){var i,o,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=10===t.length?"+1".concat(t):t,e.next=4,z.post({shareWith:i,name:n,shareWithName:r});case 4:return o=e.sent,e.next=7,o.json();case 7:u=e.sent,alert("Successfully shared your journal with ".concat(t,"!")),console.log(u),c(u),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),a(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),toggleFreeze:j}}(),T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.localStorage,n=JSON.parse(t.getItem("therapy-journal-settings")||"{}"),r=Object.assign(e,n),c=Object(o.useState)(r),a=Object(h.a)(c,2),s=a[0],i=a[1],u=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?n.reduce((function(e,t){var n=t.charAt(0),r=t.substring(1);return"!"===n?e&&!s[r]:"|"===n?e||s[r]:"&"===n?e&&s[r]:e}),s[e]):s[e]},l=function(e,t){s[e]||i(Object(d.a)(Object(d.a)({},s),{},Object(M.a)({},e,t)))},f=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),c=2;c<n;c++)r[c-2]=arguments[c];if(!r.length)return i(Object(d.a)(Object(d.a)({},s),{},Object(M.a)({},e,t)));var a=r.reduce((function(e,n){var r=n.charAt(0),c=n.substring(1);return"!"===r?Object(d.a)(Object(d.a)({},e),{},Object(M.a)({},c,!t)):"|"===r&&!1===t?Object(d.a)(Object(d.a)({},e),{},Object(M.a)({},c,!0)):e}),Object(M.a)({},e,t));i(Object(d.a)(Object(d.a)({},s),a))},j=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(t){if(!n.length)return i(Object(d.a)(Object(d.a)({},s),{},Object(M.a)({},e,!s[e])));var r=!s[e],c=n.reduce((function(e,t){var n=t.charAt(0),c=t.substring(1);return"!"===n?Object(d.a)(Object(d.a)({},e),{},Object(M.a)({},c,!r)):"|"===n&&!1===r?Object(d.a)(Object(d.a)({},e),{},Object(M.a)({},c,!0)):e}),Object(M.a)({},e,r));i(Object(d.a)(Object(d.a)({},s),c))}};return Object(o.useEffect)((function(){t.setItem("therapy-journal-settings",JSON.stringify(s))}),[s]),{getSetting:u,toggle:j,addSetting:l,set:f}}(We),W=function(){var e=Object(o.useState)([]),t=Object(h.a)(e,2),n=t[0],r=t[1];return{questions:n,getQuestions:function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(s.a.mark((function e(t,n){var c,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.get();case 3:return c=e.sent,e.next=6,c.json();case 6:a=e.sent,r(a.map((function(e){return e.body}))),t(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),n(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createQuestion:function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(s.a.mark((function e(n,c){var a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.post(t);case 3:return a=e.sent,e.next=6,a.json();case 6:i=e.sent,r((function(e){return[].concat(Object(pe.a)(e),[t])})),n(i),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),c(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}(),D=function(){f(),w(),C.getShares((function(e){e.sharedByMe.forEach((function(e){T.set("share-".concat(e.id),!e.frozen)}))})),te?T.set("audio-recording-supported",!0):(T.set("audio-recording-supported",!1),T.set("audio-recording",!1)),W.getQuestions(),De({"submit-skill":O,"create-entry":y})},L=function(e){var t=Object(o.useState)(null),n=Object(h.a)(t,2),r=n[0],c=n[1],a=Object(o.useState)(null),u=Object(h.a)(a,2),l=u[0],f=u[1],d=function(){var e=Object(i.a)(s.a.mark((function e(t,n,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(s.a.mark((function e(a,i){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(t,n,r);case 3:return console.log("custom flow complete"),e.next=6,F();case 6:c(!0),a(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("custom flow complete - on err"),i(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q();case 3:return e.next=5,F();case 5:t(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P();case 3:window.location.reload(),t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("init auth"),e.next=4,q();case 4:return e.next=6,j();case 6:return e.next=8,new Promise((function(e,t){try{if(!k)throw"Cannot refresh empty cognito user";if(!N)throw"Cannot refresh empty refresh token";k.refreshSession(N,(function(n,r){if(n)return t(n);S=r.getAccessToken().getJwtToken(),N=new m.b({RefreshToken:r.getRefreshToken().getToken()}),e()}))}catch(n){t(n)}}));case 8:c(!0),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),c(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(i.a)(s.a.mark((function e(t,n,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(s.a.mark((function e(a,i){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(t);case 3:return e.next=5,d(t,n,r);case 5:c(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),f(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){r&&e&&e()}),[r]),Object(o.useEffect)((function(){b()}),[]),{user:r,err:l,login:d,logout:p,register:g}}(D),B=L.user,U=L.login,Y=L.register,Q=L.logout;a&&D();var V=new URLSearchParams(window.location.search).get("page")||"write",_=Object(o.useState)(V),G=Object(h.a)(_,2),Z=G[0],K=G[1],X=Object(o.useState)(""),$=Object(h.a)(X,2),ee=$[0],ne=$[1];Object(o.useEffect)((function(){"sharing"===Z&&ne(new URLSearchParams(window.location.search).get("name"))}),[Z]);var re=function(e){var t=e.split("?"),n=t.length>1?new URLSearchParams("?".concat(t[1])).get("page"):"write";window.history.pushState({previous:Z,next:n},"Journal","".concat(Re).concat(e)),K(n),function(){setTimeout((function(){window.scrollBy({left:0,top:-window.scrollY,behavior:"smooth"})}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}(100)},ce=Object(o.useState)(!1),ae=Object(h.a)(ce,2),se=ae[0],ie=ae[1],oe=Object(o.useRef)(),le=Object(o.useRef)(),fe=Object(o.useState)((function(e){return console.log(e)})),de=Object(h.a)(fe,2),he=de[0],be=de[1],ge=function(e){ie(!0),be((function(){return function(){e(le.current.value)}})),le.current.focus()},Oe=Object(o.useState)(!1),me=Object(h.a)(Oe,2),xe=me[0],we=me[1],Se=Object(o.useState)(null),Ne=Object(h.a)(Se,2),Ce=Ne[0],Te=Ne[1],qe=function(){we(!0)},Fe=function(){var e=Object(i.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=oe.current.value,n=ke(t),e.next=5,Y(n,ge,qe);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Te(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Je=function(){var e=Object(i.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=oe.current.value,n=ke(t),e.next=5,U(n,ge,qe);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Te(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ze=Object(o.useState)("none"),Me=Object(h.a)(ze,2),Le=Me[0],Be=Me[1],Ue=function(){return Be("grid"),function(){Be("none")}};return B||a?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{id:"loading-animation",style:{display:Le}}),Object(r.jsx)("header",{children:Object(r.jsx)(ue,{short:Ee(Z).short(ee),children:Ee(Z).long(ee)})}),Object(r.jsx)(je,{questions:W,createEntry:y,settings:T,user:B,freeze:Ue,display:"write"===Z?"grid":"none"}),Object(r.jsx)(ve,{redirect:re,entries:v,user:B,freeze:Ue,display:"journal"===Z?"grid":"none"}),Object(r.jsx)(ye,{submitSkill:O,skills:l,user:B,display:"skills"===Z?"grid":"none"}),Object(r.jsx)(Pe,Object(d.a)(Object(d.a)({freeze:Ue,redirect:re,settings:T},C),{},{logout:Q,user:B,freeze:Ue,display:"settings"===Z?"grid":"none",install:t,swStatus:c,uninstall:n})),Object(r.jsx)(Ie,Object(d.a)(Object(d.a)({},C),{},{display:"sharing"===Z?"grid":"none",shareId:new URLSearchParams(window.location.search).get("id"),name:new URLSearchParams(window.location.search).get("name")})),Object(r.jsx)("nav",{children:Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{}),Object(r.jsxs)("li",{className:"skills"===Z?"active":"",onClick:function(){re("/?page=skills")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:j}),Object(r.jsx)("label",{children:"Skills"})]}),Object(r.jsxs)("li",{className:"write"===Z?"active":"",onClick:function(){re("/?page=write")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:p}),Object(r.jsx)("label",{children:"Write"})]}),Object(r.jsxs)("li",{className:"journal"===Z?"active":"",onClick:function(){re("/?page=journal")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:b}),Object(r.jsx)("label",{children:"Journal"})]}),Object(r.jsxs)("li",{className:"settings"===Z?"active":"",onClick:function(){re("/?page=settings")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:g}),Object(r.jsx)("label",{children:"Settings"})]}),Object(r.jsx)("li",{})]})})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{id:"loading-animation",style:{display:Le}}),Object(r.jsx)("header",{children:Object(r.jsx)(ue,{children:"Your Journal"})}),Object(r.jsxs)("main",{children:[Object(r.jsxs)("div",{className:"grid",children:[Object(r.jsx)("h3",{children:xe?"Your secret code in on the way!":"Enter your phone number:"}),Object(r.jsx)("span",{style:{display:null!==Ce?"grid":"none"},className:"error",children:null===Ce||void 0===Ce?void 0:Ce.message})]}),Object(r.jsx)("div",{className:"phone-number-input",children:Object(r.jsx)("input",{type:"tel",placeholder:"123-456-7890",ref:oe,disabled:!!se})}),se&&Object(r.jsx)("div",{className:"phone-number-input",children:Object(r.jsx)("input",{autoComplete:"one-time-code",placeholder:"Secret Code",ref:le})}),Object(r.jsxs)("div",{className:"phone-number-input",children:[!se&&Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:Je,children:"Login"}),Object(r.jsx)("button",{onClick:Fe,children:"Register"})]}),se&&Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("button",{onClick:he,children:"Submit!"})})]}),Object(r.jsxs)("section",{children:[Object(r.jsx)("h3",{children:"About Us"}),Object(r.jsx)("hr",{style:{width:"35%"}}),Object(r.jsx)("b",{children:"Why A Journal?"}),Object(r.jsx)("p",{children:"Throughout our experiences as individuals with mental illness, we have discovered the benefit of journaling. These benefits are not limited to those with mental illness, providing anyone with a deeper understanding of themselves and their emotional wellbeing. Oftentimes describing a situation or emotion in writing provides a sense of clarity not found in other ways. Also available to you is a place to write down and sort coping skills you have learned."}),Object(r.jsx)("b",{children:"How Does It Work?"}),Object(r.jsx)("p",{children:'To start, register an account with your phone number. You will be texted a secret code. Enter that and... well that\'s it, you now have your very own therapy journal! To put it simply, you write details about your life in your journal. Again, but in more detail, you can structure your journal in different ways. Journal entries can be formatted as "question and answer" or as "freeform writing" (this is easily switched with one click in the settings tab). All journal entries include the date and time of writing automatically and can be found listed in chronological order. You also can curate a list of coping skills for different situations and share your journal if need be.'})]}),Object(r.jsxs)("section",{children:[Object(r.jsx)("h3",{children:"Terms of Service"}),Object(r.jsx)("hr",{style:{width:"35%"}}),Object(r.jsx)("b",{children:"Privacy"}),Object(r.jsx)("p",{children:"None of your information (journal entries, coping skills, phone number, etc) will be publicly available nor will it be shared unless you explicitly share it."}),Object(r.jsx)("b",{children:"Sharing"}),Object(r.jsx)("p",{children:"By nature of being a Therapy Journal application, the contained subject matter will often be sensitive information. With this application, you can share your journal with anyone. However, it is recommended for, and with intention of, sharing with medical professionals only. In the case of abuse of this feature deemed detrimental to the health of another individual, we retain the right to terminate your account."})]})]})]})};console.warn=function(){},console.error=function(){};var Be=localStorage.getItem("sw-status"),Ue=!navigator.onLine&&Be;Be&&(window.addEventListener("online",(function(e){navigator.serviceWorker.startMessages({online:!0})})),window.addEventListener("offline",(function(e){navigator.serviceWorker.startMessages({online:!0})})));var Ye=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Be){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,navigator.serviceWorker.register("/journal/sw.js",{scope:"/journal/"});case 5:localStorage.setItem("sw-status","installed"),alert("Therapy Journal has installed!"),window.location.reload(),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();f.a.render(Object(r.jsx)(u.a.StrictMode,{children:Object(r.jsx)(Le,{install:Ye,uninstall:function(){localStorage.removeItem("sw-status"),navigator.serviceWorker.getRegistrations().then((function(e){var t,n=Object(c.a)(e);try{for(n.s();!(t=n.n()).done;){t.value.unregister()}}catch(r){n.e(r)}finally{n.f()}window.location.reload()}))},passthrough:Ue,swStatus:Be})}),document.getElementById("root"))}},[[256,1,2]]]);
//# sourceMappingURL=main.2f9a8591.chunk.js.map