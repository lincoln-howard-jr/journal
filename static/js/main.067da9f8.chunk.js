(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{145:function(e,t){},147:function(e,t){},157:function(e,t){},159:function(e,t){},186:function(e,t){},188:function(e,t){},189:function(e,t){},194:function(e,t){},196:function(e,t){},215:function(e,t){},227:function(e,t){},230:function(e,t){},254:function(e,t,n){},255:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n.n(c),i=n(131),s=n.n(i),o=n(2),u=n.n(o),l=n(4),j=n(10),d=n(7),f=n(3);var h=function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{className:"long",children:e.children}),Object(r.jsx)("h1",{className:"short",children:e.short?e.short:e.children})]})},b=function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{className:"long",children:e.children}),Object(r.jsx)("h2",{className:"short",children:e.short?e.short:e.children})]})},p=function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h3",{className:"long",children:e.children}),Object(r.jsx)("h3",{className:"short",children:e.short?e.short:e.children})]})},x=n(257),O=n(21),m="2ac3ij97dhtkag9fljdsuo1203",g="us-east-1_tRcA2uwF6",v=null,w=new O.e({UserPoolId:g,ClientId:m}),y=null,k=null,S=null,C={get get(){return new Headers({"x-amz-access-token":k})},get post(){return new Headers({"x-amz-access-token":k,"Content-Type":"application/json"})}},N=function(e){return new Promise((function(t,n){try{v=new O.a({Username:e,ClientMetadata:{phoneNumber:e}}),y=new O.c({Username:e,Pool:w}),t()}catch(r){n(r)}}))},M=function(){return new Promise((function(e,t){try{y=w.getCurrentUser(),e()}catch(n){t(n)}}))},F=function(){return new Promise((function(e,t){try{if(!y)throw"Cognito user must be defined to get access token";y.getSession((function(n,r){if(n)return t(n);k=r.getAccessToken().getJwtToken(),S=new O.b({RefreshToken:r.getRefreshToken().getToken()}),e()}))}catch(n){t(n)}}))},T=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.signOut();case 3:t(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){var c,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=new O.d({Name:"phone_number",Value:t}),a=new O.d({Name:"custom:custom:id",Value:Object(x.a)()}),i=[c,a],w.signUp(t,Object(x.a)(),i,null,(function(e,t){if(e)return r(e);y=t.user,n()}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(e,t,n){return new Promise(function(){var r=Object(l.a)(u.a.mark((function r(c,a){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,N(e);case 2:y.setAuthenticationFlowType("CUSTOM_CHALLENGE"),console.log(y,v),y.initiateAuth(v,{onSuccess:function(e){return c(e)},onFailure:function(e){return a(e)},customChallenge:function(e){var r=this;n(),t((function(e){return y.sendCustomChallengeAnswer(e,r)}))}});case 5:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())},P={get get(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries"+(e?"?userId="+e:""),{method:"get",headers:C.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries",{method:"post",headers:C.post,body:JSON.stringify(e)})}},get hide(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries/".concat(e),{method:"delete",headers:C.get})}}},q={get get(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills".concat(e?"?userId="+e:""),{method:"get",headers:C.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills",{method:"post",headers:C.get,body:JSON.stringify(e)})}},get del(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills/".concat(e),{method:"delete",headers:C.get})}}},I={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares",{method:"get",headers:C.get})}},get getById(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries/".concat(e),{method:"get",headers:C.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares",{method:"post",headers:new Headers({"x-amz-access-token":k,"Content-Type":"application/json"}),body:JSON.stringify(e)})}},get toggleFreeze(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares/".concat(e),{method:"put",headers:new Headers({"x-amz-access-token":k})})}}},E={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions",{method:"get",headers:C.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions",{method:"post",headers:new Headers({"x-amz-access-token":k,"Content-Type":"application/json"}),body:JSON.stringify(e)})}},get del(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions/".concat(e),{method:"DELETE",headers:new Headers({"x-amz-access-token":k})})}}},z={get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/audios",{method:"post",headers:new Headers({"x-amz-access-token":k,"Content-Type":"application/json"}),body:JSON.stringify(e)})}}},R={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/notifications",{headers:new Headers({"x-amz-access-token":k})})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/notifications",{method:"post",headers:new Headers({"x-amz-access-token":k,"Content-Type":"application/json"}),body:JSON.stringify(e)})}},get del(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/notifications/".concat(e),{method:"DELETE",headers:new Headers({"x-amz-access-token":k})})}}},J={get get(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/metrix".concat(e?"?userId="+e:""),{headers:new Headers({"x-amz-access-token":k})})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/metrix",{method:"post",headers:new Headers({"x-amz-access-token":k,"Content-Type":"application/json"}),body:JSON.stringify(e)})}},get del(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/metrix/".concat(e),{method:"DELETE",headers:new Headers({"x-amz-access-token":k})})}}},B={get get(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/measurements/".concat(e?"?userId="+e:""),{headers:new Headers({"x-amz-access-token":k})})}},get post(){return function(e,t){console.log(e,t),fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/metrix/".concat(e),{method:"post",headers:new Headers({"x-amz-access-token":k,"Content-Type":"application/json"}),body:JSON.stringify(t)})}}};JSON.parse(localStorage.getItem("keep-alive"));var H=n(9),Y=function(e,t,n){return e<=n&&e>=t},W=function(e,t){return 60*e+t},V={type:function(e){return function(t){return t.entryType===e.entryType}},date:function(e){return function(t){return"single-day"===e.mode?Y(t.start,(n=e.date,new Date(n.getFullYear(),n.getMonth(),n.getDate())),function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)}(e.date)):"after"===e.mode?new Date(t.start)>e.date:"before"===e.mode?new Date(t.end)<e.date:void 0;var n}},time:function(e){return function(t){var n=e.time.split(" "),r=Object(f.a)(n,2),c=r[0],a=r[1];console.log(c.split(":"));var i=c.split(":").map((function(e){return parseInt(e)})),s=Object(f.a)(i,2),o=s[0],u=s[1],l=o%12+("pm"===a?12:0);return console.log(e,l,u),"is-at"===e.mode?Y(W(l,u),W(t.start.getHours(),t.start.getHours()),W(t.end.getHours(),t.end.getHours())):"before"===e.mode?W(t.start.getHours(),t.start.getMinutes())<=W(l,u):"after"===e.mode?W(t.start.getHours(),t.start.getMinutes())>=W(l,u):void 0}}},L=function(e){return e.map((function(e){return V[e.type](e.value)}))},U=["January","February","March","April","May","June","July","August","September","October","November","December"],Q=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e);return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate()).toString()},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e);return"".concat(Q[t.getDay()],", ").concat(U[t.getMonth()]," ").concat(t.getDate())},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return"".concat(e.getHours()%12||12,":").concat("0".concat(e.getMinutes()).slice(-2)," ").concat(e.getHours()>11?"pm":"am")},X=function(e){if(e instanceof Date)return e;var t=e.split("-"),n=Object(f.a)(t,3),r=n[0],c=n[1],a=n[2];return r=parseInt(r),c=parseInt(c)-1,a=parseInt(a),new Date(r,c,a)},Z=function(e){var t=e.map((function(e){return Object.assign(e,{start:new Date(e.start),end:new Date(e.end)})}));return t.sort((function(e,t){return t.start-e.start})),t.reduce((function(e,t){return function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=t.filter((function(e){return e[n]===r}));if(a.length>0)return a[0].list;var i=(e={},Object(j.a)(e,n,r),Object(j.a)(e,"meta",c),Object(j.a)(e,"list",[]),e);return t.push(i),i.list}(e,"date",G(t.start),{date:K(t.start)}).push(t),e}),[])};var $=function(e,t,n){var r,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.filter((function(e){return e[t]===n}));if(a.length>0)return a[0].list;var i=(r={},Object(j.a)(r,t,n),Object(j.a)(r,"meta",c),Object(j.a)(r,"list",[]),r);return e.push(i),i.list};var ee=window.location.href.split("?")[0];"/"===ee.charAt(ee.length-1)&&(ee=ee.substring(0,ee.length-1));var te=ee;var ne,re=n(133),ce=n.n(re),ae=null,ie=window.AudioContext||window.webkitAudioContext,se=null,oe=null,ue=[],le=[],je=!!ie,de=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.navigator.mediaDevices.getUserMedia({audio:!0});case 3:se=e.sent,t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){if(!se)throw new Error("no stream available to record");(oe=new window.MediaRecorder(se)).ondataavailable=function(e){ue.push(e.data)}},he=function(){return!!se&&!!oe&&!!ue},be=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:300,e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,ae=new ie,he()){e.next=4;break}throw new Error("Environment not set up for recording");case 4:setTimeout((function(){oe.start(),n()}),t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),console.log("\n    current state:\n      stream = ".concat(se,"\n      mediaRecorder = ").concat(oe,"\n      chunks = ").concat(ue,"\n    "));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{oe.stop(),setTimeout((function(){return t()}),150)}catch(r){n(r),console.log("\n    current state:\n      stream = ".concat(se,"\n      mediaRecorder = ").concat(oe,"\n      chunks = ").concat(ue,"\n    "))}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"recording",e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(r,c){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t(),e.prev=1,e.t0=ae,e.next=5,ue[0].arrayBuffer();case 5:e.t1=e.sent,e.t2=function(e){ne=new ce.a.Mp3Encoder(e.numberOfChannels,e.sampleRate,256e3),le.push(ne.encodeBuffer(e.getChannelData(0).map((function(e){return 1e4*e})))),le.push(new Int16Array(ne.flush()));var t=new File(le,n,{type:"audio/mp3"});a(),r(t)},e.t0.decodeAudioData.call(e.t0,e.t1,e.t2),e.next=14;break;case 10:e.prev=10,e.t3=e.catch(1),a(),c(e.t3);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Oe=function(e){var t=e.split(" "),n=Object(f.a)(t,2),r=n[0],c=n[1],a=r.split(":"),i=Object(f.a)(a,2),s=i[0],o=i[1];return parseInt(s)%12*60+parseInt(o)+("pm"===c?720:0)},me=function(e,t){return Oe(e.notificationTime)-Oe(t.notificationTime)};var ge=new Date;ge=new Date(ge.getFullYear(),ge.getMonth(),ge.getDate());var ve=new Date(ge.getFullYear(),ge.getMonth(),ge.getDate()+1);var we={useAuth:function(e){var t=Object(c.useState)(null),n=Object(f.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(f.a)(i,2),o=s[0],j=s[1],d=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(c,i){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(t,n,r);case 3:return e.next=5,F();case 5:localStorage.setItem("keep-alive",!0),a(!0),c(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),i(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),h=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M();case 3:return e.next=5,F();case 5:t(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T();case 3:localStorage.setItem("keep-alive",!1),window.location.reload(),t(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M();case 3:return e.next=5,h();case 5:return e.next=7,new Promise((function(e,t){try{if(!y)throw"Cannot refresh empty cognito user";if(!S)throw"Cannot refresh empty refresh token";y.refreshSession(S,(function(n,r){if(n)return t(n);k=r.getAccessToken().getJwtToken(),S=new O.b({RefreshToken:r.getRefreshToken().getToken()}),e()}))}catch(n){t(n)}}));case 7:a(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),a(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(c,i){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(t);case 3:return e.next=5,d(t,n,r);case 5:a(!0),c(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),j(e.t0),i(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){r&&e&&e()}),[r]),Object(c.useEffect)((function(){p()}),[]),{user:r,err:o,login:d,logout:b,register:x}},useJournal:function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(0),i=Object(f.a)(a,2),s=i[0],o=i[1],j=Object(c.useState)([]),d=Object(f.a)(j,2),h=d[0],b=d[1],p=Object(c.useState)([]),x=Object(f.a)(p,2),O=x[0],m=x[1],g=Object(c.useState)(""),v=Object(f.a)(g,2),w=v[0],y=v[1],k=Object(c.useState)([]),S=Object(f.a)(k,2),C=S[0],N=S[1],M=Object(c.useState)([]),F=Object(f.a)(M,2),T=F[0],D=F[1],A=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get(t);case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,r(c),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.post(t);case 3:return e.next=5,A();case 5:n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.hide(t);case 3:return e.next=5,A();case 5:n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e){return T.includes(e)},z=function(e){b(e);var t=L(e);m(t),o(s+1)};return Object(c.useEffect)((function(){!function(){var e=O.reduce((function(e,t){return e.filter(t)}),n);if(0===w.length)return N(Z(e));var t=n.filter((function(e){return"freeform"===e.entryType})).map((function(e){return Object.assign(e,{text:e.freeform})})).filter((function(e){return e.text.match(w.toLowerCase())})),r=n.filter((function(e){return"questions"===e.entryType})).map((function(e){return Object.assign(e,{text:e.answers.join(" ").toLowerCase()})})).filter((function(e){return e.text.match(w.toLowerCase())}));e=Z([].concat(Object(H.a)(r),Object(H.a)(t))),N(e)}()}),[n,h.length,w,s]),{entries:C,entryList:n,filters:h,filterIterator:s,getEntries:A,createEntry:q,hideEntry:I,toggleStageForRemoval:function(e){E(e)&&D((function(t){return t.filter((function(t){return t.id!==e}))})),D((function(t){return[].concat(Object(H.a)(t),[e])}))},shouldRemove:E,setQuery:y,clearSearch:function(){return z([]),y(""),o(s+1),Promise.resolve()},setFilters:z}},useWriting:function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1],a=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.get();case 3:return c=e.sent,e.next=6,c.json();case 6:a=e.sent,r(a.map((function(e){return{prompt:e.body,id:"custom-question-".concat(e.id),unit:"string",frequency:"as needed"}}))),t(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),n(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,c){var a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.post(t);case 3:return a=e.sent,e.next=6,a.json();case 6:i=e.sent,r((function(e){return[].concat(Object(H.a)(e),[t])})),n(i),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),c(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.del(t);case 3:if(e.sent.ok){e.next=6;break}throw new Error("Could not delete question");case 6:return e.next=8,a();case 8:n(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),r(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{questions:n,getQuestions:a,createQuestion:i,deleteQuestion:s}},useSettings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.localStorage,n=JSON.parse(t.getItem("therapy-journal-settings")||"{}"),r=Object.assign(e,n),a=Object(c.useState)(r),i=Object(f.a)(a,2),s=i[0],o=i[1],u=Object(c.useState)(0),l=Object(f.a)(u,2),h=l[0],b=l[1],p=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?n.reduce((function(e,t){var n=t.charAt(0),r=t.substring(1);return"!"===n?e&&!s[r]:"|"===n?e||s[r]:"&"===n?e&&s[r]:e}),s[e]):s[e]},x=function(){return Object.assign({},s)},O=function(e,t){s[e]||(o(Object(d.a)(Object(d.a)({},s),{},Object(j.a)({},e,t))),b(h+1))},m=function(e){delete s[e],b(h+1)},g=function(){o({}),b(h+1)},v=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),c=2;c<n;c++)r[c-2]=arguments[c];if(!r.length)return o(Object(d.a)(Object(d.a)({},s),{},Object(j.a)({},e,t)));var a=r.reduce((function(e,n){var r=n.charAt(0),c=n.substring(1);return"!"===r?Object(d.a)(Object(d.a)({},e),{},Object(j.a)({},c,!t)):"|"===r&&!1===t?Object(d.a)(Object(d.a)({},e),{},Object(j.a)({},c,!0)):e}),Object(j.a)({},e,t));o((function(e){return Object.assign(e,a)})),b(h+1)},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.reduce((function(e,t){var n=t.key,r=t.value;return Object.assign(e,Object(j.a)({},n,r))}),{});o((function(e){return Object.assign(e,t)})),b(h+1)},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){if(!t.length)return o(Object(d.a)(Object(d.a)({},s),{},Object(j.a)({},e,!s[e])));var r=!s[e],c=t.reduce((function(e,t){var n=t.charAt(0),c=t.substring(1);return"!"===n?Object(d.a)(Object(d.a)({},e),{},Object(j.a)({},c,!r)):"|"===n&&!1===r?Object(d.a)(Object(d.a)({},e),{},Object(j.a)({},c,!0)):e}),Object(j.a)({},e,r));o(Object(d.a)(Object(d.a)({},s),c)),b(h+1)}};return Object(c.useEffect)((function(){t.setItem("therapy-journal-settings",JSON.stringify(s))}),[s]),{getSetting:p,removeSetting:m,getAll:x,toggle:y,addSetting:O,set:v,setAll:w,clearSettings:g}},useSharing:function(e){var t=Object(c.useState)([]),n=Object(f.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)([]),s=Object(f.a)(i,2),o=s[0],j=s[1],d=Object(c.useState)([]),h=Object(f.a)(d,2),b=h[0],p=h[1],x=function(){var t=Object(l.a)(u.a.mark((function t(){var n,r,c,i,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.get();case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,c=r.sharedWithMe,i=r.sharedByMe,j(i),a(c),s=i.map((function(e){return{key:"share-".concat(e.id),value:!e.frozen}})),e.setAll(s),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){var c,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.getById(t);case 3:return c=e.sent,e.next=6,c.json();case 6:a=e.sent,i=Z(a),p(i),n(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.toggleFreeze(t);case 3:return e.next=5,x();case 5:n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(c,a){var i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=10===t.length?"+1".concat(t):t,e.next=4,I.post({shareWith:i,name:n,shareWithName:r});case 4:return e.next=6,x();case 6:c(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return{sharedByMe:o,sharedWithMe:r,sharedJournal:b,getShareById:O,getShares:x,shareJournal:g,toggleFreeze:m}},useSkills:function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),i=Object(f.a)(a,2),s=i[0],o=i[1],j=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.get(t);case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,a=c.reduce((function(e,t){return $(e,"category",t.category,{category:t.category}).push(t),e}),[]),r(a),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),d=function(e){return s.includes(e)};return{skills:n,getSkills:j,submitSkill:function(e){return new Promise(function(){var t=Object(l.a)(u.a.mark((function t(n,r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q.post(e);case 3:return t.next=5,j();case 5:n(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),r(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}())},stageForRemoval:function(e){o([].concat(Object(H.a)(s),[e]))},unstage:function(e){o(s.filter((function(t){return t!==e})))},isStaged:d,removeSkill:function(e){return new Promise(function(){var t=Object(l.a)(u.a.mark((function t(n,r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,d(e)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,q.del(e);case 5:return t.next=7,j();case 7:n(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),r(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}())}}},useRouter:function(){var e=new URLSearchParams(window.location.search).get("page")||"write",t=Object(c.useState)(e),n=Object(f.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(new URLSearchParams(window.location.search)),s=Object(f.a)(i,2),o=s[0],u=s[1];return{page:r,params:o,redirect:function(e){var t=e.split("?"),n=t.length>1?new URLSearchParams("?".concat(t[1])).get("page"):"write";window.history.pushState({previous:r,next:n},"Journal","".concat(te).concat(e)),a(n),t.length>1&&u(new URLSearchParams("?".concat(t[1]))),function(){setTimeout((function(){window.scrollBy({left:0,top:-window.scrollY,behavior:"smooth"})}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}(100)}}},useAudio:function(e){var t=Object(c.useState)("not-started"),n=Object(f.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(f.a)(i,2),o=s[0],j=s[1],d=Object(c.useState)("audio-recording-".concat(_(),"-").concat(G(),".mp3")),h=Object(f.a)(d,2),b=h[0],p=h[1],x=Object(c.useState)(0),O=Object(f.a)(x,2),m=O[0],g=O[1],v=Object(c.useState)(!1),w=Object(f.a)(v,2),y=w[0],k=w[1],S=Object(c.useState)(null),C=Object(f.a)(S,2),N=C[0],M=C[1],F=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be();case 2:a("recording"),k(window.setInterval((function(){return g((function(e){return e+1}))}),1e3));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var t=Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.clearInterval(y),k(!1),g(0),t.next=5,pe();case 5:return t.next=7,xe(e,"audio-recording-".concat(_(),"-").concat(G(),".mp3"));case 7:n=t.sent,console.log(n),j(n),a("finished");case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.clearInterval(y),a("paused"),oe.pause();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(window.setInterval((function(){return g((function(e){return e+1}))}),1e3)),a("recording"),oe.resume();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{initAudio:function(){var t=Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e(),t.prev=1,t.next=4,de();case 4:fe(),M(he()),n(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),audioRecording:o,audioRecordingTitle:b,timeElapsed:m,recordingStatus:r,ready:N,startRecording:F,stopRecording:T,pauseRecording:D,resumeRecording:A,resetAudioInformation:function(){j(null),p("audio-recording-".concat(_(),"-").concat(G(),".mp3")),g(0),a("not-started"),k(!1)},setAudioRecordingTitle:p}},useNotifications:function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1],a=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.get();case 3:return c=e.sent,e.next=6,c.json();case 6:(a=e.sent).sort(me),r(a),t(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),n(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{notifications:n,getNotifications:a,createNotification:function(e){return new Promise(function(){var t=Object(l.a)(u.a.mark((function t(n,r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.post(e);case 3:return t.next=5,a();case 5:n(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),r(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}())},deleteNotification:function(e){return new Promise(function(){var t=Object(l.a)(u.a.mark((function t(n,r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.del(e);case 3:return t.next=5,a();case 5:n(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),r(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}())}}},useMetrix:function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),i=Object(f.a)(a,2),s=i[0],o=i[1],j=Object(c.useState)([]),d=Object(f.a)(j,2),h=d[0],b=d[1],p=Object(c.useState)([]),x=Object(f.a)(p,2),O=x[0],m=x[1],g=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.get(t);case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,r(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("#getMetrix",e.t0);case 13:return e.abrupt("return",Promise.resolve());case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.post(t);case 3:if(e.sent.ok){e.next=6;break}throw new Error("request not ok");case 6:return e.next=8,g();case 8:n(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("#createMetrix",e.t0),r(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.del(t);case 3:return e.next=5,g();case 5:n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.get(t);case 3:return n=e.sent,e.next=6,n.json();case 6:r=(r=e.sent).map((function(e){return Object.assign(e,{measuredAt:new Date(e.measuredAt)})})),o(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("#getMeasurements",e.t0);case 14:return e.abrupt("return",Promise.resolve());case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(h.map((function(e){return B.post(e.metricId,e.body)})));case 3:return b([]),e.next=6,y();case 6:t(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("#createMeasurements",e.t0),n(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){if(n.length&&s.length){var e=s.filter((function(e){var t;return"as needed"!==(null===(t=n.find((function(t){return t.id===e.metric})))||void 0===t?void 0:t.frequency)})).filter((function(e){return(t=e.measuredAt)>ge&&t<ve;var t})),t=n.filter((function(t){return!!e.find((function(e){return e.metric===t.id}))})).map((function(e){return e.id}));m(t)}}),[n,s]),{metrix:n,measurements:s,captured:O,getMetrix:g,createMetrix:v,deleteMetrix:w,getMeasureValue:function(e){var t,n;return null===(t=h.find((function(t){return t.metricId===(null===e||void 0===e?void 0:e.id)})))||void 0===t||null===(n=t.body)||void 0===n?void 0:n.value},getMeasurements:y,measure:function(e,t){if(n.find((function(t){return e.id===t.id}))){var r=h.slice(),c=r.findIndex((function(t){return t.metricId===e.id}));if(-1===c)return b([].concat(Object(H.a)(h),[{metricId:e.id,body:{value:t,unit:e.unit}}]));void 0===t?r.splice(c,1):r[c].body.value=t,b(r)}},createMeasurements:k,isCaptured:function(e){return O.includes(e)}}}},ye={"default-0":"...","default-1":"...","default-2":"..."},ke=[{id:"default-0",unit:"string",prompt:"What have I done today?",frequency:"as needed"},{id:"default-1",unit:"string",prompt:"How do I feel?",frequency:"as needed"},{id:"default-2",unit:"string",prompt:"What else am I going to do today?",frequency:"as needed"}],Se={"custom-questions":!0,"default-questions":!0,freeform:!1,"skill-add-mode":!1},Ce=Object(c.createContext)(),Ne=function(){return a.a.useContext(Ce)};function Me(e){var t=e.children,n={},a=Object(c.useState)(null),i=Object(f.a)(a,2),s=i[0],o=i[1];n.freeze=function(e){return o(""),function(){o(null)}};var u=Object(c.useState)(null),l=Object(f.a)(u,2),j=l[0],d=l[1];n.closeModal=function(){return d(null)},n.setModal=d;var h=Object(c.useState)(!1),b=Object(f.a)(h,2),p=b[0],x=b[1];n.viewMode={isViewOnly:p,setIsViewOnly:x},n.settings=we.useSettings(Se),n.session=we.useSettings(ye,sessionStorage),n.skills=we.useSkills(),n.journal=we.useJournal(),n.sharing=we.useSharing(n.settings),n.writing=we.useWriting(),n.metrix=we.useMetrix(),n.router=we.useRouter(),n.audio=we.useAudio(n.freeze),n.notifications=we.useNotifications(),n.viewSharedJournal=function(e){n.journal.getEntries(e),n.skills.getSkills(e),n.viewMode.setIsViewOnly(!0),n.router.redirect("/?page=journal")},n.viewMyJournal=function(){n.journal.getEntries(),n.skills.getSkills(),n.viewMode.setIsViewOnly(!1),n.router.redirect("/?page=settings")};return n.auth=we.useAuth((function(){n.metrix.getMetrix(),n.metrix.getMeasurements(),n.skills.getSkills(),n.writing.getQuestions(),n.journal.getEntries(),n.sharing.getShares((function(e){e.sharedByMe.forEach((function(e){n.settings.set("share-".concat(e.id),!e.frozen)}))})),n.notifications.getNotifications(),je?(n.settings.set("audio-recording-supported",!0),n.settings.set("audio-recording",!1)):(n.settings.set("audio-recording-supported",!1),n.settings.set("audio-recording",!1))})),Object(r.jsxs)(Ce.Provider,{value:n,children:[null!==s&&Object(r.jsx)("div",{id:"loading-animation"}),null!==j&&Object(r.jsx)("div",{id:"modal-backdrop",children:Object(r.jsx)("div",{id:"modal-content",children:j})}),t]})}var Fe=function(){var e=Ne().audio,t=e.initAudio,n=e.ready,a=e.recordingStatus,i=e.audioRecording,s=e.timeElapsed,o=e.audioRecordingTitle,u=e.startRecording,l=e.stopRecording,j=e.pauseRecording,d=e.resumeRecording,f=e.resetAudioInformation,h=e.setAudioRecordingTitle;return Object(c.useEffect)((function(){n||t()}),[]),null===n?null:"not-started"===a?Object(r.jsxs)("div",{className:"recorder-container grid text-center",children:[Object(r.jsx)("p",{children:'Click "Record" to speak your journal entry!'}),Object(r.jsx)("button",{onClick:u,children:"Record"})]}):"paused"===a?Object(r.jsxs)("div",{className:"recorder-container grid text-center",children:[Object(r.jsx)("div",{className:"timer",children:Object(r.jsxs)("span",{children:[Math.floor(s/60),":","00".concat(s%60).slice(-2)]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:d,children:"Resume"}),Object(r.jsx)("button",{onClick:l,children:"Finish"})]})]}):"recording"===a?Object(r.jsxs)("div",{className:"recorder-container grid text-center",children:[Object(r.jsx)("div",{className:"timer flashing",children:Object(r.jsxs)("span",{children:[Math.floor(s/60),":","00".concat(s%60).slice(-2)]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:l,children:"Stop"}),Object(r.jsx)("button",{onClick:j,children:"Pause"})]})]}):"finished"===a?Object(r.jsx)("div",{className:"recorder-container grid text-center",children:Object(r.jsxs)("figure",{className:"audio-recording",children:[Object(r.jsxs)("figcaption",{children:[Object(r.jsxs)("p",{children:["Title:\xa0\xa0\xa0",Object(r.jsx)("input",{className:"audio-title-input",onChange:function(e){return h(e.target.value)},value:o})]}),Object(r.jsx)("p",{className:"fake-button",children:Object(r.jsx)("a",{className:"error",onClick:f,children:"Start Over"})})]}),Object(r.jsx)("audio",{controls:!0,src:window.URL.createObjectURL(i)})]})}):Object(r.jsx)("div",{children:"Error! Error!"})};function Te(){var e=Ne(),t=e.auth.user,n=e.router.page,a=e.journal.createEntry,i=e.settings.getSetting,s=e.writing,o=s.recordingStatus,x=s.resetAudioInformation,O=e.audio,m=O.audioRecording,g=O.audioRecordingTitle,v=e.freeze,w=Object(c.useState)(new Date),y=Object(f.a)(w,2),k=y[0],S=y[1],C=Object(c.useState)({}),N=Object(f.a)(C,2),M=N[0],F=N[1],T=Object(c.useRef)(),D=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v(),e.prev=1,r={entryType:"freeform",freeform:T.current.innerText,start:k,end:new Date},e.next=5,a(r);case 5:T.current.innerText="Your entry here!",S(new Date),n(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),n();case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v(),e.prev=1,r={entryType:"audio",start:k,end:new Date},e.next=5,z.post({filename:g});case 5:return c=e.sent,e.next=8,c.json();case 8:return i=e.sent,e.next=11,fetch(i.uploadUrl,{method:"PUT",body:m});case 11:return r.audio=i.id,r.title=g,e.next=15,a(r);case 15:x(),n(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),n();case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}();return"write"===n&&t?i("freeform","!audio-recording")?Object(r.jsxs)("main",{id:"freeform-entry",children:[Object(r.jsx)(h,{short:"New Entry",children:"New Freeform Entry"}),Object(r.jsx)(b,{children:K()}),Object(r.jsx)(p,{children:_(k)}),Object(r.jsx)("div",{onFocus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n){M[e]||(n.target.innerText=t,F(Object(d.a)(Object(d.a)({},M),{},Object(j.a)({},e,!0))))}}("freeform"),ref:T,contentEditable:!0,children:"Your entry here!"}),Object(r.jsx)("button",{onClick:D,children:"Submit"})]}):i("freeform","&audio-recording")?Object(r.jsxs)("main",{id:"audio-entry",children:[Object(r.jsx)(h,{short:"New Entry",children:"New Audio Entry"}),Object(r.jsx)(b,{children:K()}),Object(r.jsx)(p,{children:_(k)}),Object(r.jsx)(Fe,{}),"finished"===o&&Object(r.jsx)("button",{onClick:A,children:"Submit"})]}):null:null}n.p;var De=400,Ae=100,Pe=25,qe={r:5};function Ie(e){var t=Object(f.a)(e.range,2),n=t[0],a=t[1],i=e.step,s=e.defaultValue,o=e.onChange,u=Object(c.useRef)(),l=Object(c.useState)(!0),j=Object(f.a)(l,2),h=j[0],b=j[1],p=Object(c.useState)(s||n),x=Object(f.a)(p,2),O=x[0],m=x[1],g=Object(c.useState)(!1),v=Object(f.a)(g,2),w=v[0],y=v[1],k=function(){var e=i%1?"".concat(i).split(".")[1].length:0,t=e?parseFloat:parseInt,r=Math.round(n+(O-n)/i)*i;return(r=t(r.toFixed(e)))<n&&(r=n),r>a&&(r=a),r},S=function(e,t){var n=t-e;return function(r){return r<e&&(r=e),r>t&&(r=t),Pe+350*(r-e)/n}}(n,a),C=function(e){if(w){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:De,r=t-e,c=n-Pe*n/De*2;return function(e){return(e-Pe)*r/c}}(n,a,u.current.clientWidth),r=e.movementX?O+e.movementX*(a-n)/(u.current.clientWidth-5*u.current.clientWidth/De*10):e.touches&&e.touches.length?t(e.touches[0].clientX):O;r<n&&(r=n),r>a&&(r=a),m(r)}};return Object(c.useEffect)((function(){h?b(!1):o&&o(k())}),[O]),Object(r.jsxs)("svg",{ref:u,onTouchMove:C,onTouchCancel:function(){return y(!1)},onMouseMove:C,onMouseLeave:function(){return y(!1)},onMouseUp:function(){return y(!1)},viewBox:"0 0 ".concat(De," ").concat(Ae),className:"component-slider-svg",children:[Object(r.jsxs)("g",{className:"slider-base",children:[Object(r.jsx)("circle",Object(d.a)({cx:S(n),cy:50},qe)),Object(r.jsx)("line",{x1:S(n)+5,x2:S(a)-5,y1:50,y2:50}),Object(r.jsx)("circle",Object(d.a)({cx:S(a),cy:50},qe)),Object(r.jsx)("text",{x:S(n),y:80,textAnchor:"left",children:n}),Object(r.jsx)("text",{x:S(a),y:80,textAnchor:"end",children:a})]}),Object(r.jsxs)("g",{className:"slider-value",children:[Object(r.jsx)("circle",{onTouchStart:function(){return y(!0)},onMouseDown:function(){return y(!0)},cx:S(O),cy:50,r:10}),Object(r.jsx)("line",{x1:S(O),x2:S(O),y1:25,y2:35}),Object(r.jsx)("text",{x:S(O),y:20,textAnchor:"middle",children:k()})]})]})}var Ee={boolean:function(e){var t=e.onChange,n=e.defaultValue;return Object(r.jsx)("div",{children:Object(r.jsxs)("select",{defaultValue:n,onChange:function(e){return t(""===e.target.value?void 0:e.target.value)},children:[Object(r.jsx)("option",{value:void 0}),Object(r.jsx)("option",{children:"Yes"}),Object(r.jsx)("option",{children:"No"})]})})},number:function(e){var t=e.onChange,n=e.defaultValue,c=e.range,a=e.step;return Object(r.jsx)("div",{children:Object(r.jsx)(Ie,{range:c,step:a,defaultValue:n,onChange:t})})},string:function(e){var t=e.onChange,n=e.autofocus,a=e.defaultValue,i=void 0===a?"...":a,s=Object(c.useRef)(),o=Object(c.useState)("..."===i),u=Object(f.a)(o,2),l=u[0],j=u[1];return Object(c.useEffect)((function(){s.current&&n&&s.current.focus()}),[s]),Object(r.jsx)("div",{ref:s,onFocus:function(){l&&(s.current.innerText="",j(!1))},contentEditable:!0,onBlur:function(e){return t(e.target.innerText)},children:i})}};var ze=n.p+"static/media/cancel.da5c4222.svg",Re=n.p+"static/media/trash.dd7f053f.svg";function Je(e){var t=e.value,n=e.onChange,c=function(){return t.split(" ")[0].split(":")[1]},a=function(){return t.split(" ")[0].split(":")[0]},i=function(){return t.split(" ")[1]};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("input",{type:"number",onChange:function(e){var t=parseInt(e.target.value);t<1||t>12||n("".concat(e.target.value,":").concat(c()," ").concat(i()))},value:a()}),":",Object(r.jsx)("input",{type:"number",onChange:function(e){var t=parseInt(e.target.value);t<0||t>59||n("".concat(a(),":").concat(("00"+e.target.value).slice(-2)," ").concat(i()))},value:c()}),Object(r.jsx)("span",{className:"fake-button",onClick:function(){return n("".concat(a(),":").concat(c()," ").concat("pm"===i()?"am":"pm"))},children:i()})]})}function Be(){var e=Ne(),t=e.auth.user,n=e.router.page,i=e.journal.createEntry,s=e.settings.getSetting,o=e.writing.questions,j=e.metrix,x=j.metrix,O=j.getMeasureValue,m=j.createMeasurements,g=j.measure,v=j.isCaptured,w=e.session,y=e.freeze,k=["default-questions","custom-questions","use-metrix"].map((function(e){return s(e)})),S=Object(c.useState)(new Date),C=Object(f.a)(S,2),N=C[0],M=C[1],F=Object(c.useState)(ke[0].id),T=Object(f.a)(F,2),D=T[0],A=T[1],P=Object(c.useState)(""),q=Object(f.a)(P,2),I=q[0],E=q[1],z=function(){var e=[];return k[0]&&(e=ke),k[1]&&(e=[].concat(Object(H.a)(e),Object(H.a)(o))),k[2]&&(e=[].concat(Object(H.a)(e),Object(H.a)(x))),e},R=function(){var e=w.getAll(),t=z(),n=Object.keys(e).filter((function(t){return void 0!==e[t]})).map((function(e){return t.find((function(t){return t.id===e}))})).filter((function(e){return e}));return n.sort((function(e,n){return t.findIndex((function(t){return t.id===e.id}))-t.findIndex((function(e){return e.id===n.id}))})),n},J=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,r,c,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y(),e.prev=1,n=z(),r=w.getAll(),c=Object.keys(r).filter((function(e){return null!==r[e]&&void 0!==r[e]})).map((function(e){return n.find((function(t){return t.id===e}))})).filter((function(e){return e})),a=c.map((function(e){return r[e.id]})),c=c.map((function(e){return e.prompt})),s={entryType:"questions",start:N,end:new Date,questions:c,answers:a},e.next=10,i(s);case 10:return e.next=12,m();case 12:w.clearSettings(),M(new Date),t(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),t();case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){A("")}),[n]),t&&"write"===n?s("freeform")?null:Object(r.jsxs)("main",{id:"question-answer-entry",children:[Object(r.jsx)(h,{short:"New Entry",children:"New Question & Answer Entry"}),Object(r.jsx)(b,{children:K()}),Object(r.jsx)(p,{children:_(N)}),Object(r.jsxs)("div",{className:"questions",children:[R().map((function(e){var t=Ee[e.unit],n={defaultValue:"string"===e.unit?w.getSetting(e.id)||"...":O(e)};return Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsxs)("span",{className:"prompt-prompt",children:[Object(r.jsxs)("b",{children:[e.prompt,e.unitLabel?" (".concat(e.unitLabel,")"):""]}),Object(r.jsx)("span",{onClick:function(){return function(e){g(e,void 0),w.removeSetting(e.id)}(e)},children:Object(r.jsx)("img",{src:Re})})]}),Object(r.jsx)(t,Object(d.a)(Object(d.a)({autofocus:D===e.id,onChange:function(t){return function(e,t){g(e,t),w.set(e.id,t)}(e,t)}},n),e)),Object(r.jsx)("hr",{className:"prompt-divider"})]},"prompt-".concat(e.unit,"-").concat(e.id))})),0!==z().filter((function(e){return R().find((function(t){return t.id===e.id}))}))&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("section",{onClick:function(){return E("selecting")},className:"add-a-section ".concat(I),children:"+"}),Object(r.jsxs)("section",{children:["selecting"===I&&Object(r.jsxs)("select",{autoFocus:!0,onChange:function(e){return e.target.value&&function(e){var t=z().find((function(t){return e===t.id}));t&&(w.set(t.id,null),A(t.id))}(e.target.value)||E("")},children:[Object(r.jsx)("option",{value:null,defaultChecked:!0}),z().filter((function(e){return!v(e)})).filter((function(e){return!R().find((function(t){return e.id===t.id}))})).map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.prompt},"option-".concat(prompt.unit,"-").concat(prompt.id))}))]}),Object(r.jsx)("span",{className:"fake-button",onClick:function(){return E("")},children:Object(r.jsx)("img",{src:ze})})]})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{onClick:J,children:"Submit"})})]})]}):null}var He=n.p+"static/media/calendar.0073112f.svg",Ye=n.p+"static/media/caret-down.bfd98d54.svg",We=[0,31,28,31,30,31,30,31,31,30,31,30,31],Ve=function(e,t){return We[e]+(t%4===0?1:0)};var Le=function(e){var t=e.value,n=e.remove,a=e.setValue,i=new Date(t.date),s=Object(c.useState)(t.mode),o=Object(f.a)(s,2),u=o[0],l=o[1],j=Object(c.useState)(i.getMonth()+1),d=Object(f.a)(j,2),h=d[0],b=d[1],p=Object(c.useState)(i.getDate()),x=Object(f.a)(p,2),O=x[0],m=x[1],g=Object(c.useState)(i.getFullYear()),v=Object(f.a)(g,2),w=v[0],y=v[1],k=Object(c.useState)(Ve(h,w)),S=Object(f.a)(k,2),C=S[0],N=S[1];return Object(c.useEffect)((function(){if(NaN!==h&&NaN!==O&&NaN!==w){var e=Ve(h,w);N(e),a(Object.assign(t,{mode:u,date:new Date(w,h-1,O,0,0,0)}))}}),[O,h,w,u]),Object(r.jsxs)("li",{className:"grid filter date-filter",children:[Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:He,alt:"Date Filter"})}),Object(r.jsx)("span",{className:t.modeFinal?"":"fake-button",onClick:function(){t.modeFinal||l("single-day"===u?"after":"after"===u?"before":"single-day")},children:Object(r.jsxs)("span",{className:"grid switch-mode",children:[Object(r.jsx)("span",{children:"single-day"===t.mode?"Day Of":"after"===t.mode?"After":"Before"}),!t.modeFinal&&Object(r.jsx)("img",{style:{display:"inline",transform:"rotate(-90deg)"},width:8,height:8,src:Ye})]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{type:"tel",min:1,max:12,defaultValue:h,onChange:function(e){return b(parseInt(e.target.value))}}),Object(r.jsx)("span",{children:"/"}),Object(r.jsx)("input",{type:"tel",min:1,max:C,defaultValue:O,onChange:function(e){return m(parseInt(e.target.value))}}),Object(r.jsx)("span",{children:"/"}),Object(r.jsx)("input",{type:"tel",min:2020,max:(new Date).getFullYear(),defaultValue:w,onChange:function(e){return y(parseInt(e.target.value))}})]}),Object(r.jsx)("span",{children:Object(r.jsx)("span",{className:"fake-button",onClick:n,children:"remove"})})]})},Ue=n.p+"static/media/stopwatch.43421b05.svg";var Qe=function(e){var t=e.value,n=e.remove,c=e.setValue;return Object(r.jsxs)("li",{className:"grid filter time-filter",children:[Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:Ue})}),Object(r.jsx)("span",{className:"fake-button",onClick:function(){var e="is-at"===t.mode?"after":"after"===t.mode?"before":"is-at";c({time:t.time,mode:e})},children:Object(r.jsxs)("span",{className:"grid switch-mode",children:[Object(r.jsx)("span",{children:"is-at"===t.mode?"Exact":"after"===t.mode?"After":"Before"}),Object(r.jsx)("img",{style:{display:"inline",transform:"rotate(-90deg)"},width:8,height:8,src:Ye})]})}),Object(r.jsx)("div",{children:Object(r.jsx)(Je,{value:t.time,onChange:function(e){return c({time:e,mode:t.mode})}})}),Object(r.jsx)("span",{children:Object(r.jsx)("span",{className:"fake-button",onClick:n,children:"remove"})})]})},Ge=n.p+"static/media/search.28b0ad10.svg",Ke=n.p+"static/media/filter.8be2c938.svg",_e={date:Le,time:Qe};function Xe(){var e=Ne().journal,t=e.query,n=e.filters,a=e.filterIterator,i=e.setQuery,s=e.setFilters,o=Object(c.useState)(!1),u=Object(f.a)(o,2),l=u[0],j=u[1],d=Object(c.useState)([]),h=Object(f.a)(d,2),b=h[0],p=h[1],x=Object(c.useState)([]),O=Object(f.a)(x,2),m=O[0],g=O[1],v=Object(c.useState)([]),w=Object(f.a)(v,2),y=(w[0],w[1]);Object(c.useEffect)((function(){p(n.filter((function(e){return"date"===e.type}))),g(n.filter((function(e){return"time"===e.type}))),y(n.filter((function(e){return"type"===e.type})))}),[a]);var k=function(e){return function(){n.splice(e,1),s(n)}},S=function(e){return function(t){n[e].value=t,s(n)}};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"grid search-container",children:[Object(r.jsxs)("form",{className:"search-bar",onSubmit:function(e){return e.preventDefault()},children:[Object(r.jsx)("input",{value:t,onChange:function(e){return i(e.target.value)},placeholder:"Search..."}),Object(r.jsx)("img",{src:Ge})]}),Object(r.jsx)("span",{onClick:function(e){return j(!l)},className:"open-filters",children:Object(r.jsx)("img",{src:Ke})})]}),l?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("ol",{className:"grid filter-list",children:n.map((function(e,t){var n=_e[e.type];return Object(r.jsx)(n,{value:e.value,remove:k(t),setValue:S(t)})}))}),0===n.length&&Object(r.jsx)("div",{className:"grid",children:"You don't have any filters, add some by clicking on the icons below!"}),Object(r.jsxs)("ul",{className:"grid add-filter-list",children:[Object(r.jsx)("li",{onClick:function(){if(0===b.length){var e=[].concat(Object(H.a)(n),[{type:"date",value:{mode:"single-day",date:new Date}}]);s(e)}else{if(1!==b.length)return;var t=n.filter((function(e){return"date"===e.type}))[0];t.value=Object.assign(t.value,{mode:"after",modeFinal:!0});var r=[].concat(Object(H.a)(n),[{type:"date",value:{mode:"before",modeFinal:!0,date:new Date}}]);s(r)}},className:b.length<2?"":"add-filter-disabled",children:Object(r.jsx)("img",{src:He,alt:"date filter"})}),Object(r.jsx)("li",{onClick:function(){if(0===m.length){var e=[].concat(Object(H.a)(n),[{type:"time",value:{mode:"is-at",time:"".concat((new Date).getHours()%12||12,":").concat(("00"+(new Date).getMinutes()).slice(-2)," ").concat((new Date).getHours<12?"am":"pm")}}]);s(e)}else{if(1!==m.length)return;m[0].value.mode="after";var t=[].concat(Object(H.a)(n),[{type:"time",value:{mode:"before",time:m[0].value.time}}]);s(t)}},className:m.length<2?"":"add-filter-disabled",children:Object(r.jsx)("img",{src:Ue,alt:"time filter"})})]}),Object(r.jsx)("hr",{})]}):Object(r.jsx)("div",{className:"none"})]})}function Ze(e){var t=e.date,n=void 0===t?new Date:t,c=2*Math.PI*(60*n.getHours()+n.getMinutes())/720,a=2*Math.PI*n.getMinutes()/60;return Object(r.jsxs)("svg",{viewBox:"0 0 50 50",className:"analog-clock",children:[Object(r.jsx)("circle",{className:"clock-outline",fill:"transparent",r:24,cx:25,cy:25}),Object(r.jsx)("g",{className:"clock-ticks",children:new Array(12).fill(1).map((function(e,t){return Object(r.jsx)("line",{x1:25+21*Math.sin(2*Math.PI*t/12),y1:25+21*Math.cos(2*Math.PI*t/12),x2:25+22*Math.sin(2*Math.PI*t/12),y2:25+22*Math.cos(2*Math.PI*t/12)})}))}),Object(r.jsx)("line",{x1:25,x2:25+12*Math.sin(c),y1:25,y2:25-12*Math.cos(c)}),Object(r.jsx)("line",{x1:25,x2:25+18*Math.sin(a),y1:25,y2:25-18*Math.cos(a)})]})}function $e(e){var t=e.entry,n=e.resolve,c=e.reject,a=Ne(),i=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.journal.hideEntry(t.id);case 3:n(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),c("Couldn't  successfully hide entry!");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"grid remove-entry-modal",children:[Object(r.jsxs)("p",{children:["Are you sure you want to hide your journal entry from ",K(t.start)," at ",_(t.start)]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:i,children:"Yes, hide it!"}),Object(r.jsx)("button",{onClick:function(){return c("Cancelled")},children:"No, don't!"})]})]})}function et(e){var t=e.idx,n=Ne(),a=n.setModal,i=n.closeModal,s=Object(c.useState)(""),o=Object(f.a)(s,2),j=o[0],d=o[1],h=function(e){return new Promise(function(){var t=Object(l.a)(u.a.mark((function t(n,c){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a(Object(r.jsx)($e,{entry:e,resolve:n,reject:c}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},x=function(e){return Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h(e);case 3:return t.prev=3,i(),t.finish(3);case 6:case"end":return t.stop()}}),t,null,[[0,,3,6]])})))};return Object(r.jsxs)("article",{className:j,children:[Object(r.jsxs)("header",{onClick:function(){d(""===j?"open":"")},children:[Object(r.jsx)(b,{short:G(t.list[0].start),children:t.meta.date}),Object(r.jsx)("ol",{children:t.list.map((function(e){return Object(r.jsx)("li",{children:Object(r.jsx)(Ze,{date:e.start})})}))})]}),t.list.map((function(e){return Object(r.jsxs)("section",{children:[Object(r.jsxs)("header",{children:[Object(r.jsx)("span",{}),Object(r.jsxs)(p,{short:_(e.start),children:[_(e.start)," - ",_(e.end)]}),Object(r.jsx)("span",{onClick:x(e),children:Object(r.jsx)("img",{src:Re})})]}),("questions"===e.entryType||!e.entryType)&&e.questions.map((function(t,n){return Object(r.jsxs)("p",{children:[Object(r.jsxs)("b",{children:[t," "]}),e.answers[n]]},"".concat(e.id,"-question-").concat(n))})),"freeform"===e.entryType&&Object(r.jsx)("p",{children:e.freeform}),"audio"===e.entryType&&Object(r.jsxs)("figure",{children:[Object(r.jsx)("figcaption",{children:Object(r.jsx)("p",{children:e.audio.title})}),Object(r.jsx)("audio",{controls:!0,src:e.audio.url})]})]})}))]})}function tt(){var e=Ne(),t=e.auth.user,n=e.router.page,c=e.journal,a=c.entries;c.clearSearch,c.hideEntry,e.freeze;return t&&"journal"===n?Object(r.jsxs)("main",{className:"view-journal",children:[Object(r.jsx)(h,{children:"Journal"}),Object(r.jsx)(Xe,{}),a.map((function(e){return Object(r.jsx)(et,{idx:e})}))]}):null}var nt=function(e){var t=e.replaceAll(/[^0-9]/g,"");if(10!==t.length)throw new Error("Phone number must be 10 digits, current length: "+t.length);return"+1"+t},rt={"minus.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/cursor-creative" title="Cursor Creative">Cursor Creative</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"calendar.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"pen.svg":'Icons made by <a href="https://www.flaticon.com/authors/icongeek26" title="Icongeek26">Icongeek26</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"book.svg":'Icons made by <a href="https://www.flaticon.com/authors/zlatko-najdenovski" title="Zlatko Najdenovski">Zlatko Najdenovski</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"plus.svg":'Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"list.svg":'Icons made by <a href="https://www.flaticon.com/authors/phatplus" title="phatplus">phatplus</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"skill.svg":'Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"settings.svg":'Icons made by <a href="https://www.flaticon.com/authors/srip" title="srip">srip</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"search.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/pixel-perfect" title="Pixel perfect">Pixel perfect</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"filter.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/kirill-kazachek" title="Kirill Kazachek">Kirill Kazachek</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"stopwatch.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/good-ware" title="Good Ware">Good Ware</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"caret-down.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/dave-gandy" title="Dave Gandy">Dave Gandy</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"trash.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/dinosoftlabs" title="DinosoftLabs">DinosoftLabs</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"cancel.svg":'<div>Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"back.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/gregor-cresnar" title="Gregor Cresnar">Gregor Cresnar</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"next.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/gregor-cresnar" title="Gregor Cresnar">Gregor Cresnar</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"happy.svg":'<div>Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"dashboard.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/pixel-perfect" title="Pixel perfect">Pixel perfect</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"left-arrow.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/pixel-perfect" title="Pixel perfect">Pixel perfect</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"more.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/kirill-kazachek" title="Kirill Kazachek">Kirill Kazachek</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"ruler.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/good-ware" title="Good Ware">Good Ware</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>'},ct=n.p+"static/media/pen.27ec406e.svg";function at(e){var t,n=e.defaultMessage,a=void 0===n?"Hey :) just a reminder to write in your journal!":n,i=Ne(),s=i.notifications,o=i.freeze,j=Object(c.useState)(null),d=Object(f.a)(j,2),h=d[0],b=d[1],p=Object(c.useState)("pm"),x=Object(f.a)(p,2),O=x[0],m=x[1],g=Object(c.useState)("12:00"),v=Object(f.a)(g,2),w=v[0],y=v[1],k=Object(c.useState)(a),S=Object(f.a)(k,2),C=S[0],N=S[1],M=Object(c.useRef)(),F=function(){b(null),m("am"),y("12:00"),N(a),I(0)},T=function(e){return function(){var t=e.notificationTime.split(" "),n=Object(f.a)(t,2),r=n[0],c=n[1];b(e.id),m(c),y(r),N(e.message),I(0)}},D=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o(),e.prev=1,O&&w){e.next=4;break}throw new Error("Cannot create notification without exact time.");case 4:return e.next=6,s.createNotification({notificationTime:"".concat(w," ").concat(O),message:M.current?M.current.innerText:C});case 6:F(),t(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t(),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),A=Object(c.useState)(0),P=Object(f.a)(A,2),q=P[0],I=P[1],E=[Object(r.jsxs)(r.Fragment,{children:[!!h&&Object(r.jsx)("p",{children:Object(r.jsx)("b",{children:C})}),!!h&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{onClick:F,children:"Exit"}),Object(r.jsx)("button",{onClick:function(){return I(q+1)},children:"Edit"}),Object(r.jsx)("button",{onClick:(t=h,Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o(),e.prev=1,e.next=4,s.deleteNotification(t);case 4:F(),n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n();case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))),children:"Delete Notification"})]}),!h&&Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("button",{onClick:function(){return I(q+1)},children:"Create Notification"})})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Select A Time:"}),Object(r.jsx)("br",{}),Object(r.jsxs)("select",{defaultValue:w,onChange:function(e){return y(e.target.value)},children:[Object(r.jsx)("option",{children:"12:00"}),Object(r.jsx)("option",{children:"12:15"}),Object(r.jsx)("option",{children:"12:30"}),Object(r.jsx)("option",{children:"12:45"}),Object(r.jsx)("option",{children:"1:00"}),Object(r.jsx)("option",{children:"1:15"}),Object(r.jsx)("option",{children:"1:30"}),Object(r.jsx)("option",{children:"1:45"}),Object(r.jsx)("option",{children:"2:00"}),Object(r.jsx)("option",{children:"2:15"}),Object(r.jsx)("option",{children:"2:30"}),Object(r.jsx)("option",{children:"2:45"}),Object(r.jsx)("option",{children:"3:00"}),Object(r.jsx)("option",{children:"3:15"}),Object(r.jsx)("option",{children:"3:30"}),Object(r.jsx)("option",{children:"3:45"}),Object(r.jsx)("option",{children:"4:00"}),Object(r.jsx)("option",{children:"4:15"}),Object(r.jsx)("option",{children:"4:30"}),Object(r.jsx)("option",{children:"4:45"}),Object(r.jsx)("option",{children:"5:00"}),Object(r.jsx)("option",{children:"5:15"}),Object(r.jsx)("option",{children:"5:30"}),Object(r.jsx)("option",{children:"5:45"}),Object(r.jsx)("option",{children:"6:00"}),Object(r.jsx)("option",{children:"6:15"}),Object(r.jsx)("option",{children:"6:30"}),Object(r.jsx)("option",{children:"6:45"}),Object(r.jsx)("option",{children:"7:00"}),Object(r.jsx)("option",{children:"7:15"}),Object(r.jsx)("option",{children:"7:30"}),Object(r.jsx)("option",{children:"7:45"}),Object(r.jsx)("option",{children:"8:00"}),Object(r.jsx)("option",{children:"8:15"}),Object(r.jsx)("option",{children:"8:30"}),Object(r.jsx)("option",{children:"8:45"}),Object(r.jsx)("option",{children:"9:00"}),Object(r.jsx)("option",{children:"9:15"}),Object(r.jsx)("option",{children:"9:30"}),Object(r.jsx)("option",{children:"9:45"}),Object(r.jsx)("option",{children:"10:00"}),Object(r.jsx)("option",{children:"10:15"}),Object(r.jsx)("option",{children:"10:30"}),Object(r.jsx)("option",{children:"10:45"}),Object(r.jsx)("option",{children:"11:00"}),Object(r.jsx)("option",{children:"11:15"}),Object(r.jsx)("option",{children:"11:30"}),Object(r.jsx)("option",{children:"11:45"})]}),Object(r.jsxs)("select",{defaultValue:O,onChange:function(e){return m(e.target.value)},children:[Object(r.jsx)("option",{children:"am"}),Object(r.jsx)("option",{children:"pm"})]}),Object(r.jsx)("br",{}),Object(r.jsx)("button",{onClick:function(){return I(q-1)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){return I(q+1)},children:"Customize Message"})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Customize Message:"}),Object(r.jsx)("p",{ref:M,contentEditable:!0,children:C}),!h&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{onClick:function(){return I(q-1)},children:"Back"}),Object(r.jsx)("button",{onClick:D,children:"Finish"})]}),!!h&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{onClick:function(){return I(q-1)},children:"Back"}),Object(r.jsx)("button",{children:"Update Notification"})]})]})];return Object(r.jsxs)(r.Fragment,{children:[s.notifications.length>0&&Object(r.jsx)("p",{children:"All you have to do is specifiy times you want to recieve reminders to enter in your journal and we will automatically send a text to you at that time each day! Click one of the times to remove that notification."}),Object(r.jsx)("div",{className:"notification-list",children:s.notifications.map((function(e){return Object(r.jsxs)("span",{className:"button-styling",onClick:T(e),children:[Object(r.jsx)("span",{children:e.notificationTime})," ",Object(r.jsx)("img",{src:ct})]})}))}),0===s.notifications.length&&Object(r.jsx)("p",{children:"You haven't created any notifications yet, and that's totally ok! Just remember we're always here if you need us!"}),Object(r.jsx)("div",{className:"notification-creator",children:E[q]})]})}n.p;var it=n.p+"static/media/book.65cd22a3.svg",st=n.p+"static/media/dashboard.4dfd917f.svg",ot=(n.p,n.p+"static/media/left-arrow.7f101ba2.svg"),ut=(n.p,n.p,n.p,n.p+"static/media/plus.a86e5868.svg"),lt=(n.p,n.p+"static/media/settings.d2739024.svg"),jt=n.p+"static/media/skill.23054f65.svg",dt={boolean:"Yes/No",number:"Number Range"},ft=function(e){return e<58&&e>47},ht=function(e){return 8===e},bt=function(e){return 37===e},pt=function(e){return 39===e},xt=function(e){return 9===e},Ot=function(e){return 190===e},mt=function(e){var t=e.value,n=e.setValue;return Object(r.jsx)("b",{onBlur:function(e){return n(parseFloat(e.target.innerText))},contentEditable:!0,onKeyDown:function(e){if(function(e){return 0===[ft,ht,bt,pt,xt,Ot].filter((function(t){return t(e.keyCode)})).length}(e))return e.preventDefault()},children:t})},gt=function(e){var t=e.value,n=e.setValue;return Object(r.jsx)("b",{onBlur:function(e){return n(e.target.innerText)},contentEditable:!0,children:t})};function vt(){var e=Ne(),t=e.writing,n=t.questions,a=t.createQuestion,i=t.deleteQuestion,s=e.settings,o=(s.toggle,s.getSetting,e.metrix),j=o.metrix,d=o.createMetrix,h=o.deleteMetrix,b=e.freeze,p=Object(c.useState)("?"),x=Object(f.a)(p,2),O=x[0],m=x[1],g=Object(c.useState)(null),v=Object(f.a)(g,2),w=v[0],y=v[1],k=Object(c.useState)(1),S=Object(f.a)(k,2),C=S[0],N=S[1],M=Object(c.useState)(10),F=Object(f.a)(M,2),T=F[0],D=F[1],A=Object(c.useState)(1),P=Object(f.a)(A,2),q=P[0],I=P[1],E=Object(c.useState)("as needed"),z=Object(f.a)(E,2),R=z[0],J=z[1],B=Object(c.useState)(null),H=Object(f.a)(B,2),Y=H[0],W=H[1],V=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,t=b(),e.next=5,a(O);case 5:m("?"),t(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t();case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,t=b(),n={prompt:O,unit:w,frequency:R},Y&&(n.unitLabel=Y),"number"===w&&(n.range=[C,T],n.step=q),e.next=8,d(n);case 8:K(0),t(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t();case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),U=Object(c.useState)(0),Q=Object(f.a)(U,2),G=Q[0],K=Q[1],_=[Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Write a Custom Prompt"}),Object(r.jsx)("div",{contentEditable:!0,className:"add-question-input",onInput:function(e){return m(e.target.innerText)},children:"?"}),Object(r.jsx)("span",{children:Object(r.jsx)("button",{onClick:function(){return K(G+1)},children:"Next"})})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Add a Metric?"}),Object(r.jsx)("p",{children:O}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return K(G-1)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){return K(G+1)},children:"Yes, Add Metric"}),Object(r.jsx)("button",{onClick:V,children:"No, Create Question"})]})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Select Metric Type"}),Object(r.jsx)("p",{children:O}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return K(G-1)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){y("number"),K(G+1)},children:"Numeric"}),Object(r.jsx)("button",{onClick:function(){y("boolean"),K(G+2)},children:"Yes/No"})]})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Numeric Metric Details"}),Object(r.jsx)("p",{children:O}),Object(r.jsxs)("p",{children:[Y?Object(r.jsxs)(r.Fragment,{children:["Measured with unit ",Object(r.jsx)(gt,{value:Y,setValue:W})," from"]}):"From"," ",Object(r.jsx)(mt,{value:C,setValue:N})," to ",Object(r.jsx)(mt,{value:T,setValue:D}),"   in intervals of ",Object(r.jsx)(mt,{value:q,setValue:I}),"."]}),Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"checkbox",defaultChecked:Y,onChange:function(e){return W(!!e.target.checked&&"...")}})," has unit label"]}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return K(G-1)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){return K(G+1)},children:"Set Frequency"})]})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Set Frequency"}),Object(r.jsx)("p",{children:O}),Object(r.jsx)("p",{children:dt[w]}),Object(r.jsxs)("p",{children:["This question should be answered ",Object(r.jsxs)("select",{onChange:function(e){return J(e.target.value)},children:[Object(r.jsx)("option",{children:"as needed"}),Object(r.jsx)("option",{children:"daily"}),Object(r.jsx)("option",{children:"weekly"}),Object(r.jsx)("option",{children:"monthly"})]}),"."]}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return K(G-2)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){return K(G+1)},children:"Review"})]})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:O}),Object(r.jsxs)("p",{children:[dt[w]," - ",R]}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return K(G-1)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){return L()},children:"Create Metric"})]})]})];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Default Questions"}),Object(r.jsx)("ul",{className:"prompt-list",children:ke.map((function(e){return Object(r.jsx)("li",{className:"manage-default-question",children:e.prompt},"manage-default-questions-".concat(e.prompt))}))}),Object(r.jsx)("b",{children:"Custom Questions"}),Object(r.jsx)("ul",{className:"prompt-list",children:n.map((function(e){return Object(r.jsxs)("li",{className:"manage-custom-question",children:[Object(r.jsx)("span",{}),Object(r.jsx)("span",{children:e.prompt}),Object(r.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return i(e.id.split("-")[2])},children:Object(r.jsx)("img",{src:Re})})]},"manage-custom-question-".concat(e.id))}))}),Object(r.jsx)("b",{children:"Metrix"}),Object(r.jsx)("ul",{className:"prompt-list",children:j.map((function(e){return Object(r.jsxs)("li",{className:"manage-custom-metrix",children:[Object(r.jsx)("span",{}),Object(r.jsx)("span",{children:e.prompt}),Object(r.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return h(e.id)},children:Object(r.jsx)("img",{src:Re})})]},"manage-custom-metrix-".concat(e.id))}))}),Object(r.jsx)("div",{children:_[G]})]})}function wt(){var e=Ne(),t=e.sharing.shareJournal,n=e.settings,a=Object(c.useRef)(),i=Object(c.useRef)(),s=Object(c.useRef)(),o=function(){var e=Object(l.a)(u.a.mark((function e(){var r,c,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.current.value,r=nt(r),c=i.current.value,o=s.current.value,e.next=6,t(r,c,o);case 6:l=e.sent,n.addSetting("share-".concat(l.id),!0),a.current.value="",s.current.value="";case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"action",children:[Object(r.jsx)("b",{style:{textDecoration:"none"},children:"Share Your Journal With"}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{ref:s,placeholder:"James Allen"}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"tel",ref:a,placeholder:"123-456-7890"}),Object(r.jsx)("br",{}),Object(r.jsx)("b",{style:{textDecoration:"none"},children:"Your Name"}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{ref:i}),Object(r.jsx)("br",{}),Object(r.jsx)("span",{onClick:o,children:"Submit"})]})}function yt(){var e=Ne(),t=e.freeze,n=e.sharing,c=n.sharedByMe,i=n.toggleFreeze,s=function(e){return Object(l.a)(u.a.mark((function n(){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t(""),n.prev=1,n.next=4,i(e.id);case 4:r(),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),r();case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))};return Object(r.jsxs)("div",{children:[Object(r.jsx)("b",{style:{textDecoration:"none"},children:"Who You Share Your Journal With"}),Object(r.jsx)("hr",{style:{width:"25vw"}}),0===c.length&&Object(r.jsx)("span",{style:{textDecoration:"none"},children:"You haven't shared your journal - no pressure"}),c.map((function(e){return Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsx)(Ct,{onToggle:s(e),title:e.shareWithName||e.shareWith,setting:"share-".concat(e.id)}),Object(r.jsx)("br",{})]},"share-".concat(e.id))}))]})}function kt(){var e=Ne(),t=e.sharing.sharedWithMe,n=e.viewSharedJournal,c=t.filter((function(e){return!e.frozen}));return 0===c.length?Object(r.jsx)("div",{className:"none"}):Object(r.jsxs)("div",{className:"action",children:[Object(r.jsx)("b",{style:{textDecoration:"none"},children:"Journals Shared With You"}),Object(r.jsx)("hr",{style:{width:"25vw"}}),c.map((function(e){return Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsx)("span",{onClick:function(){return n(e.userId)},children:e.name}),Object(r.jsx)("br",{})]},"share-".concat(e.id))}))]})}function St(e){var t=e.longTitle,n=e.shortTitle,a=e.children,i=Object(c.useState)(!1),s=Object(f.a)(i,2),o=s[0],u=s[1];return Object(r.jsxs)("div",{className:"setting-group"+(o?" open":""),children:[Object(r.jsxs)("header",{onClick:function(){return u(!o)},children:[Object(r.jsx)("span",{}),Object(r.jsx)(p,{short:n,children:t}),Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:Ye})})]}),a,Object(r.jsx)("div",{})]})}function Ct(e){var t=e.setting,n=e.title,c=e.relationships,a=void 0===c?[]:c,i=e.onToggle,s=Ne().settings,o=s.getSetting,u=s.toggle;return a.reduce((function(e,t){if(!e)return e;if("+"!==t.charAt(0))return e;var n=t.substring(1);return o(n)}),!0)?Object(r.jsxs)("div",{className:"setting",children:[Object(r.jsx)("div",{children:Object(r.jsx)("b",{children:n})}),Object(r.jsx)("div",{children:Object(r.jsx)("span",{onClick:i||u(t,a),className:o(t)?"toggle on":"toggle"})})]}):Object(r.jsx)("div",{className:"none"})}var Nt=function(){var e=Ne(),t=e.router,n=t.page,a=(t.redirect,e.settings),i=a.getSetting,s=(a.iter,e.auth),o=s.user,u=s.logout,l=Object(c.useState)("attributions"),j=Object(f.a)(l,2),d=j[0],b=j[1];return o&&"settings"===n?Object(r.jsxs)("main",{className:"settings",children:[Object(r.jsx)(h,{children:"Settings"}),Object(r.jsxs)("div",{className:"settings-container",children:[Object(r.jsxs)(St,{longTitle:"Journal Settings",shortTitle:"Journal",children:[Object(r.jsx)("p",{children:"Make journal entries the way you want to make them. These settings are specific to your device, so you can have different preferences on your phone, tablet, laptop or whatever else you use!"}),Object(r.jsx)(Ct,{setting:"freeform",title:"Enable Freeform"}),i("audio-recording-supported")&&Object(r.jsx)(Ct,{setting:"audio-recording",title:"Enable Audio Recording"}),Object(r.jsx)(Ct,{setting:"default-questions",title:"Show Default Questions"}),Object(r.jsx)(Ct,{setting:"custom-questions",title:"Show Custom Questions"}),Object(r.jsx)(Ct,{setting:"use-metrix",title:"Show Metrix"})]}),Object(r.jsx)(St,{shortTitle:"Prompts",longTitle:"Manage Prompts",children:Object(r.jsx)(vt,{})}),Object(r.jsx)(St,{longTitle:"Manage Your Notifications",shortTitle:"Notifications",children:Object(r.jsx)(at,{})}),Object(r.jsxs)(St,{shortTitle:"Sharing",longTitle:"Manage Journal Sharing",children:[Object(r.jsx)("p",{children:"View journals shared with you and who you've shared your journal with."}),Object(r.jsx)(kt,{}),Object(r.jsx)(yt,{}),Object(r.jsx)(wt,{})]}),Object(r.jsxs)(St,{shortTitle:"Misc",longTitle:"Miscellaneous",children:[Object(r.jsx)("div",{className:"action",children:window.navigator.canShare&&Object(r.jsx)("span",{onClick:function(){window.navigator.share({title:"My Journal",url:"https://lincoln-howard-jr.github.io/journal/"})},children:"Share This Application"})}),Object(r.jsx)("div",{className:"action",children:Object(r.jsx)("span",{onClick:u,children:"Log Out"})}),"attributions"===d&&Object(r.jsx)("div",{className:"action",children:Object(r.jsx)("span",{onClick:function(){return b("")},children:"Show Attributions"})}),Object(r.jsxs)("div",{className:"attributions",id:d,children:[Object(r.jsx)("div",{className:"fake-button",children:Object(r.jsx)("span",{onClick:function(){return b("attributions")},children:"Hide Attributions"})}),Object(r.jsx)("ul",{children:Object.keys(rt).map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsx)("b",{children:e}),Object(r.jsx)("br",{}),Object(r.jsx)("span",{dangerouslySetInnerHTML:{__html:rt[e]}})]},"attribiution-".concat(e))}))})]})]})]})]}):null};function Mt(){var e=Ne(),t=e.auth.user,n=e.router.page,a=e.skills,i=a.skills,s=a.submitSkill,o=e.freeze,j=Object(c.useState)(null),d=Object(f.a)(j,2),x=d[0],O=d[1],m=Object(c.useState)(null),g=Object(f.a)(m,2),v=g[0],w=g[1],y=Object(c.useRef)(),k=Object(c.useRef)(),S=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault&&t.preventDefault(),n=o(),e.prev=2,r=y.current.value,c=k.current.innerText,e.next=7,s({category:r,skill:c});case 7:y.current.value="Tools For ...",k.current.innerText="...",n(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),w("Error while submitting skill, try again in a few..."),n();case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return t?"skills"!==n?null:Object(r.jsxs)("main",{children:[Object(r.jsx)(h,{children:"Skills"}),Object(r.jsx)("p",{style:{maxWidth:"60ch",margin:"15px auto"},children:"Treat this as a reference sheet for your coping skills for a given situation. You are unique and so are the things that work for you - so add whatever you works for you!"}),Object(r.jsx)("datalist",{id:"skills-categories",children:i.map((function(e){return Object(r.jsx)("option",{children:e.meta.category})}))}),!!v&&Object(r.jsx)("p",{style:{maxWidth:"60ch",margin:"15px auto"},children:v}),Object(r.jsxs)("form",{onSubmit:S,className:"new-skill-form",children:[Object(r.jsx)(p,{children:"Add a Skill"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Category:"}),Object(r.jsx)("input",{list:"skills-categories",ref:y,defaultValue:"Tools For"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Skill:"}),Object(r.jsx)("p",{style:{padding:7.5},ref:k,contentEditable:!0,children:"..."})]}),Object(r.jsx)("button",{onClick:S,children:"Add A Coping Skill"})]}),i.map((function(e){return Object(r.jsxs)("section",{onClick:function(){return x===e.meta.category?O(null):O(e.meta.category)},className:"skill-category-container".concat(x===e.meta.category?" open":""),children:[Object(r.jsx)("header",{children:Object(r.jsx)(b,{children:e.meta.category})}),e.list.map((function(e){return Object(r.jsx)("div",{children:e.skill})}))]},"cat-".concat(e.meta.category))}))]}):null}function Ft(){var e=Ne(),t=e.auth.user,n=e.router,c=n.page,a=n.redirect,i=e.viewMode.isViewOnly,s=e.viewMyJournal;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("nav",{children:Object(r.jsxs)("ul",{children:[i&&Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("li",{className:"write"===c?"active":"",onClick:s,children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:ot}),Object(r.jsx)("label",{children:"Go Back"})]})}),Object(r.jsxs)("li",{className:"skills"===c?"active":"",onClick:function(){a("/?page=skills")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:jt}),Object(r.jsx)("label",{children:"Skills"})]}),!i&&Object(r.jsxs)("li",{className:"write"===c?"active":"",onClick:function(){a("/?page=write")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:ut}),Object(r.jsx)("label",{children:"Write"})]}),Object(r.jsxs)("li",{className:"journal"===c?"active":"",onClick:function(){a("/?page=journal")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:it}),Object(r.jsx)("label",{children:"Journal"})]}),Object(r.jsxs)("li",{className:"dashboard"===c?"active":"",onClick:function(){a("/?page=dashboard")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:st}),Object(r.jsx)("label",{children:"Dash"})]})]})}),"settings"!==c&&t&&Object(r.jsx)("div",{onClick:function(){return a("/?page=settings")},id:"settings-menu-icon",children:Object(r.jsx)("img",{src:lt,alt:""})})]})}function Tt(){var e=Ne().auth,t=e.user,n=e.login,a=e.register,i=Object(c.useState)(""),s=Object(f.a)(i,2),o=s[0],d=s[1],b=Object(c.useState)(!1),p=Object(f.a)(b,2),x=p[0],O=p[1],m=Object(c.useState)((function(e){return function(){return console.log(e)}})),g=Object(f.a)(m,2),v=g[0],w=g[1],y=Object(c.useRef)(),k=function(e){return d(function(e){var t=function(e){return e.replaceAll(/[^0-9]/g,"")}(e);return t.length>10&&(t=t.substr(0,10)),console.log(t),0===t.length?t:t.length<4?"(".concat(t):t.length<7?"(".concat(t.substr(0,3),") ").concat(t.substr(3)):"(".concat(t.substr(0,3),") ").concat(t.substr(3,3),"-").concat(t.substr(6))}(e))},S=function(e){O(!0),w((function(){return function(){e(y.current.value)}})),y.current.focus()},C=Object(c.useState)(!1),N=Object(f.a)(C,2),M=N[0],F=N[1],T=Object(c.useState)(null),D=Object(f.a)(T,2),A=D[0],P=D[1],q=function(){F(!0)},I=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=nt(o),e.next=4,a(t,S,q);case 4:P(null),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),P(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=nt(o),e.next=4,n(t,S,q);case 4:P(null),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),P(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return t?null:Object(r.jsxs)("main",{children:[Object(r.jsx)(h,{children:"Your Journal"}),Object(r.jsxs)("div",{className:"grid",children:[Object(r.jsx)("h3",{children:M?"Your secret code in on the way!":"Enter your phone number:"}),Object(r.jsx)("span",{style:{display:null!==A?"grid":"none"},className:"error",children:null===A||void 0===A?void 0:A.message})]}),Object(r.jsx)("div",{className:"phone-number-input",children:Object(r.jsx)("input",{autoComplete:"tel-local",type:"tel",placeholder:"123-456-7890",value:o,onChange:function(e){return k(e.target.value)},disabled:!!x})}),x&&Object(r.jsx)("div",{className:"phone-number-input",children:Object(r.jsx)("input",Object(j.a)({ref:y,autoComplete:"one-time-code",placeholder:"Secret Code"},"ref",y))}),Object(r.jsxs)("div",{className:"phone-number-input",children:[!x&&Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:E,children:"Login"}),Object(r.jsx)("button",{onClick:I,children:"Register"})]}),x&&Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("button",{onClick:v,children:"Submit!"})})]}),Object(r.jsxs)("section",{children:[Object(r.jsx)("h3",{children:"About Us"}),Object(r.jsx)("hr",{}),Object(r.jsx)("b",{children:"Why A Journal?"}),Object(r.jsx)("p",{children:"Journaling provides anyone with a structure to deeper understanding of themselves and their emotional wellbeing. Oftentimes describing a situation or emotion in writing provides a sense of clarity not found in other ways. Also available to you is a place to write down and sort skills you have learned."}),Object(r.jsx)("b",{children:"How Does It Work?"}),Object(r.jsx)("p",{children:'To start, register an account with your phone number. You will be texted a secret code. Enter that and... well that\'s it, you now have your very own journal! To put it simply, you write details about your life in your journal. Again, but in more detail, you can structure your journal in different ways. Journal entries can be formatted as "question and answer" or as "freeform writing" or "audio journaling" (this is easily switched with one click in the settings tab). All journal entries automatically include the date and time of writing and can be found listed in chronological order. You also can curate a list of skills for different situations and share your journal if need be.'})]}),Object(r.jsxs)("section",{children:[Object(r.jsx)("h3",{children:"Terms of Service"}),Object(r.jsx)("hr",{}),Object(r.jsx)("b",{children:"Privacy"}),Object(r.jsx)("p",{children:"None of your information (journal entries, coping skills, phone number, etc) will be publicly available nor will it be shared unless you explicitly share it."}),Object(r.jsx)("b",{children:"Sharing"}),Object(r.jsx)("p",{children:"By nature of being a journaling application, the contained subject matter will often be sensitive information. With this application, you can share your journal with anyone. However, it is recommended for, and with intention of, sharing with medical professionals only. In the case of abuse of this feature deemed detrimental to the health of another individual, we retain the right to terminate your account."})]})]})}var Dt=175;function At(e){var t=e.start,n=e.size;return Object(r.jsx)("circle",{fill:"transparent",cx:375,cy:250,r:Dt,strokeWidth:17.5,strokeDasharray:"".concat(2*Math.PI*Dt),strokeDashoffset:"".concat(2*Math.PI*Dt*(100-n)/100),style:{transformOrigin:"center",transform:"rotate(".concat(360*t/100-90,"deg)")}})}function Pt(e){var t=e.data,n=void 0===t?[]:t;return Object(r.jsxs)("svg",{className:"pie-chart",viewBox:"0 0 ".concat(750," ").concat(500),children:[Object(r.jsx)("g",{className:"the-pie",children:n.map((function(e){return Object(r.jsx)(At,Object(d.a)({},e))}))}),Object(r.jsx)("g",{className:"legend",children:n.map((function(e,t){return Object(r.jsx)("text",{textAnchor:"middle",x:375,y:100*(t-(n.length-1)/2)/((n.length-1)/2)+250,children:e.label})}))})]})}var qt=750,It=500,Et=35,zt=125,Rt=864e5;function Jt(e,t){var n=t.toLowerCase();return e.includes(n)?e.filter((function(e){return e!==n})):e.length<4?[].concat(Object(H.a)(e),[n]):e}function Bt(){var e=Ne().journal.entries,t=Object(c.useState)([]),n=Object(f.a)(t,2),a=n[0],i=n[1],s=Object(c.useReducer)(Jt,[]),o=Object(f.a)(s,2),u=o[0],l=o[1],j=Object(c.useState)([]),d=Object(f.a)(j,2),h=d[0],b=d[1],p=Object(c.useState)(new Date),x=Object(f.a)(p,2),O=x[0],m=x[1],g=Object(c.useState)(new Date),v=Object(f.a)(g,2),w=v[0],y=v[1],k=Object(c.useState)(1),S=Object(f.a)(k,2),C=S[0],N=S[1],M=function(e){return e/C};Object(c.useEffect)((function(){if(0!==e.length){var t=e.map((function(e){return Object.assign(e,{date:X(e.date)})}));t=(t=t.sort((function(e,t){return e.date-t.date}))).map((function(e){var t=e.list.map((function(e){return"questions"===e.entryType|!e.entryType?e.answers.join(" "):"freeform"===e.entryType?e.freeform:""})).join(" ").toLowerCase();return Object.assign(e,{text:t})})),i(t),m(t[0].date),y(t[t.length-1].date)}}),[e]),Object(c.useEffect)((function(){for(var e=Math.floor((w.getTime()-O.getTime())/Rt),t=u.map((function(){return new Array(e).fill(0)})),n=0,r=0;r<e;r++){if(!(new Date(O.getTime()+r*Rt)<a[n].date)){for(var c=0;c<t.length;c++)t[c][r]=a[n].text.split(u[c]).length-1;n++}}var i=Math.max.apply(Math,Object(H.a)(t.flat()));i<1&&(i=1),N(i),b(t)}),[u]);return Object(r.jsxs)("figure",{className:"keywords",children:[Object(r.jsx)("figcaption",{children:"Keyword Search"}),Object(r.jsx)("section",{className:"keyword-container",children:Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l(e.target.elements.keyword.value),e.target.elements.keyword.value=""},className:"keyword-search",children:[Object(r.jsx)("input",{name:"keyword",placeholder:"keyword",autoComplete:"off"}),Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"submit",hidden:!0})," ",Object(r.jsx)("img",{src:Ge})]})]})}),Object(r.jsxs)("svg",{className:"keyword-chart",viewBox:"0 0 ".concat(qt," ").concat(It),children:[Object(r.jsxs)("g",{className:"keyword-chart-axis",children:[Object(r.jsx)("line",{x1:Et,x2:715,y1:465,y2:465}),Object(r.jsx)("line",{x1:Et,x2:Et,y1:465,y2:160}),Object(r.jsx)("text",{x:17.5,y:465,textAnchor:"middle",children:"0"}),Object(r.jsx)("text",{x:17.5,y:160,textAnchor:"middle",children:C}),Object(r.jsx)("text",{x:87.5,y:491.25,textAnchor:"middle",children:G(O)}),Object(r.jsx)("text",{x:662.5,y:491.25,textAnchor:"middle",children:G(w)}),Object(r.jsx)("g",{className:"keyword-chart-labels",children:u.map((function(e,t){return Object(r.jsx)("text",{textAnchor:"middle",x:Et+(t+.5)*qt/4,y:zt,onClick:function(){return l(e)},children:e})}))})]}),h.map((function(e,t){return Object(r.jsx)("g",{className:"keyword-trendline-".concat(t+1),children:e.map((function(t,n){return n===e.length-1?null:Object(r.jsx)("line",{x1:Et+680*n/e.length,x2:Et+680*(n+1)/e.length,y1:465-305*M(t),y2:465-305*M(e[n+1])})}))},"keyword-trendline-".concat(u[t]))}))]},"keyword-chart")]})}function Ht(e){var t=e.key,n=e.time,c=e.i,a=e.hourlyMax,i=e.onClick,s=n.filter((function(e){return"questions"===e.entryType||!e.entryType})).length,o=n.filter((function(e){return"freeform"===e.entryType})).length,u=n.filter((function(e){return"audio"===e.entryType})).length,l=s+o+u,j=[u/l,o/l,s/l],f=610,h=61/24,b={x:70+h+c*f/24,width:24.145833333333336},p=430-330*n.length/a,x=330*n.length/a,O=[Object(d.a)(Object(d.a)({},b),{},{key:"bar-".concat(c,"-breakdown-",0),y:p,height:j.length>0?j[0]*x:0}),Object(d.a)(Object(d.a)({},b),{},{key:"bar-".concat(c,"-breakdown-",1),y:j.length>0?p+j[0]*x:p,height:j.length>0?j[1]*x:0}),Object(d.a)(Object(d.a)({},b),{},{key:"bar-".concat(c,"-breakdown-",2),y:j.length>0?p+(1-j[2])*x:0,height:j.length>0?j[2]*x:0})];return O=(O=O.map((function(e){return isNaN(e.height)?Object(d.a)(Object(d.a)({},e),{},{height:0}):e}))).map((function(e){return isNaN(e.y)?Object(d.a)(Object(d.a)({},e),{},{y:0}):e})),Object(r.jsxs)("g",{className:"bar-chart-bar",onClick:i,children:[Object(r.jsx)("g",{className:"bar-chart-bar-group",children:O.map((function(e){return Object(r.jsx)("rect",Object(d.a)({},e))}))}),Object(r.jsxs)("text",{style:{transformOrigin:"".concat(100*(70+(c-.5)*f/24)/qt,"% ").concat(98,"%")},className:"bar-chart-bar-label",textAnchor:"center",x:70+(c-.5)*f/24,y:465,children:[c%12||12,c>11?"PM":"AM"]})]},t)}var Yt=Object(c.memo)(Ht);function Wt(e){var t=e.number;return Object(r.jsxs)("svg",{viewBox:"0 0 100 100",className:"number-counter",children:[Object(r.jsx)("rect",{x:10,y:10,width:80,height:80,rx:5}),Object(r.jsx)("text",{textAnchor:"middle",x:50,y:65,children:t})]})}var Vt=function(){var e=new Date;return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),[new Date(e.getFullYear(),e.getMonth(),e.getDate()-7),e]},Lt=function(){var e=Vt(),t=Object(f.a)(e,2),n=t[0],r=t[1];return function(e){return e<r&&e>n}};function Ut(){var e=Ne(),t=e.journal,n=t.entryList,a=t.entries,i=(t.setFilters,e.router.redirect,Lt()),s=Vt(),o=(Object(f.a)(s,1)[0],Object(c.useState)("...")),u=Object(f.a)(o,2),l=u[0],j=u[1];return Object(c.useEffect)((function(){n.length&&j(""+n.filter((function(e){return i(e.start)})).length)}),[a]),Object(r.jsxs)("figure",{children:[Object(r.jsxs)("figcaption",{children:["Entries",Object(r.jsx)("br",{}),"(Past Week)"]}),Object(r.jsx)(Wt,{number:l})]})}function Qt(){var e=Ne().journal,t=e.entryList,n=e.entries,a=Lt(),i=Object(c.useState)("..."),s=Object(f.a)(i,2),o=s[0],u=s[1];return Object(c.useEffect)((function(){if(t.length){var e=t.filter((function(e){return a(e.start)})).reduce((function(e,t){return e+("questions"===t.entryType?t.questions.length:0)}),0);u(e)}}),[n]),Object(r.jsxs)("figure",{children:[Object(r.jsxs)("figcaption",{children:["Questions Answered",Object(r.jsx)("br",{}),"(Past Week)"]}),Object(r.jsx)(Wt,{number:o})]})}function Gt(){var e=Ne().journal,t=e.entryList,n=e.entries,a=Object(c.useState)("..."),i=Object(f.a)(a,2),s=i[0],o=i[1];return Object(c.useEffect)((function(){if(n.length){var e=n.map((function(e){return new Date(e.list[0].start)})),r=new Date(Math.min.apply(Math,Object(H.a)(e)));r=new Date(r.getFullYear(),r.getMonth(),r.getDate());var c=new Date,a=((c=new Date(c.getFullYear(),c.getMonth(),c.getDate()))-r)/864e5,i=t.length/a;o(i.toFixed(1))}}),[n]),Object(r.jsxs)("figure",{children:[Object(r.jsxs)("figcaption",{children:["Entries",Object(r.jsx)("br",{}),"(Per Day)"]}),Object(r.jsx)(Wt,{number:s})]})}function Kt(){var e=Ne().skills.skills,t=Object(c.useState)("..."),n=Object(f.a)(t,2),a=n[0],i=n[1];return Object(c.useEffect)((function(){e&&e.length&&i(e.reduce((function(e,t){return e+t.list.length}),0))}),[e]),Object(r.jsxs)("figure",{children:[Object(r.jsxs)("figcaption",{children:["Your Skills",Object(r.jsx)("br",{}),"(All Time)"]}),Object(r.jsx)(Wt,{number:a})]})}var _t=function(e,t){return e[new Date(t.start).getHours()].push(t),e},Xt=function(){var e=Ne(),t=e.journal,n=t.entryList,a=t.setFilters,i=e.router.redirect,s=Object(c.useState)(null),o=Object(f.a)(s,2),j=o[0],d=o[1],h=Object(c.useState)(null),b=Object(f.a)(h,2),p=b[0],x=b[1],O=function(e){return Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a([{type:"time",value:{mode:"after",time:"".concat(e%12||12,":00 ").concat(e<12?"am":"pm")}},{type:"time",value:{mode:"before",time:"".concat((e+1)%12||12,":00 ").concat(e+1<12?"am":"pm")}}]),i("/?page=journal");case 2:case"end":return t.stop()}}),t)})))};return Object(c.useEffect)((function(){var e=n.reduce(_t,new Array(24).fill(1).map((function(){return[]})));x(e.reduce((function(e,t){return t.length>e?t.length:e}),1)),d(e)}),[n]),null!==p&&j?Object(r.jsxs)("figure",{className:"time-of-day",children:[Object(r.jsx)("figcaption",{children:"Entries By Time Of Day"}),Object(r.jsxs)("svg",{viewBox:"0 0 ".concat(qt," ").concat(It),children:[Object(r.jsx)("line",{x1:70,y1:430,x2:680,y2:430}),Object(r.jsx)(Yt,{time:j[0],i:0,hourlyMax:p,onClick:O(0)}),Object(r.jsx)(Yt,{time:j[1],i:1,hourlyMax:p,onClick:O(1)}),Object(r.jsx)(Yt,{time:j[2],i:2,hourlyMax:p,onClick:O(2)}),Object(r.jsx)(Yt,{time:j[3],i:3,hourlyMax:p,onClick:O(3)}),Object(r.jsx)(Yt,{time:j[4],i:4,hourlyMax:p,onClick:O(4)}),Object(r.jsx)(Yt,{time:j[5],i:5,hourlyMax:p,onClick:O(5)}),Object(r.jsx)(Yt,{time:j[6],i:6,hourlyMax:p,onClick:O(6)}),Object(r.jsx)(Yt,{time:j[7],i:7,hourlyMax:p,onClick:O(7)}),Object(r.jsx)(Yt,{time:j[8],i:8,hourlyMax:p,onClick:O(8)}),Object(r.jsx)(Yt,{time:j[9],i:9,hourlyMax:p,onClick:O(9)}),Object(r.jsx)(Yt,{time:j[10],i:10,hourlyMax:p,onClick:O(10)}),Object(r.jsx)(Yt,{time:j[11],i:11,hourlyMax:p,onClick:O(11)}),Object(r.jsx)(Yt,{time:j[12],i:12,hourlyMax:p,onClick:O(12)}),Object(r.jsx)(Yt,{time:j[13],i:13,hourlyMax:p,onClick:O(13)}),Object(r.jsx)(Yt,{time:j[14],i:14,hourlyMax:p,onClick:O(14)}),Object(r.jsx)(Yt,{time:j[15],i:15,hourlyMax:p,onClick:O(15)}),Object(r.jsx)(Yt,{time:j[16],i:16,hourlyMax:p,onClick:O(16)}),Object(r.jsx)(Yt,{time:j[17],i:17,hourlyMax:p,onClick:O(17)}),Object(r.jsx)(Yt,{time:j[18],i:18,hourlyMax:p,onClick:O(18)}),Object(r.jsx)(Yt,{time:j[19],i:19,hourlyMax:p,onClick:O(19)}),Object(r.jsx)(Yt,{time:j[20],i:20,hourlyMax:p,onClick:O(20)}),Object(r.jsx)(Yt,{time:j[21],i:21,hourlyMax:p,onClick:O(21)}),Object(r.jsx)(Yt,{time:j[22],i:22,hourlyMax:p,onClick:O(22)}),Object(r.jsx)(Yt,{time:j[23],i:23,hourlyMax:p,onClick:O(23)}),Object(r.jsxs)("g",{className:"bar-chart-text",children:[Object(r.jsx)("text",{x:83.33333333333333,y:50,children:"Questions"}),Object(r.jsx)("text",{x:3e3/9,y:50,children:"Freeform"}),Object(r.jsx)("text",{x:5250/9,y:50,children:"Audio"})]})]},"time-of-day-svg")]}):null};function Zt(){var e=Ne().metrix,t=e.metrix,n=e.measurements,a=Object(c.useState)(null),i=Object(f.a)(a,2),s=i[0],o=i[1],u=Object(c.useState)(null),l=Object(f.a)(u,2),j=l[0],d=l[1],h=Object(c.useState)(null),b=Object(f.a)(h,2),p=b[0],x=b[1],O=function(){return s[j]},m=function(){return n.filter((function(e){return e.metric===s[j].id})).sort((function(e,t){return e.measuredAt-t.measuredAt}))};if(Object(c.useEffect)((function(){t&&n&&o(t.filter((function(e){return"number"===e.unit})).filter((function(e){return n.filter((function(t){return t.metric===e.id})).length>1})))}),[t,n]),Object(c.useEffect)((function(){s&&s.length&&d(0)}),[s]),Object(c.useEffect)((function(){if(null!==j){var e=m();x([e[0].measuredAt,e[e.length-1].measuredAt])}}),[j]),!s||null===j||!p)return null;var g=O(),v=m(),w=function(){var e=Object(f.a)(p,2),t=e[0],n=e[1];return function(e){return Et+680*(e-t)/(n-t)}}(),y=function(){var e=Object(f.a)(O().range,2),t=e[0],n=e[1];return function(e){return Et+(430-430*(e-t)/(n-t))}}();return Object(r.jsxs)("figure",{className:"single-metrix-carousel",children:[Object(r.jsx)("figcaption",{children:Object(r.jsx)("span",{children:g.prompt})}),Object(r.jsxs)("svg",{className:"single-metrix-graph",viewBox:"0 0 ".concat(qt," ").concat(It),children:[Object(r.jsxs)("g",{className:"single-metrix-axis",children:[Object(r.jsx)("line",{x1:w(p[0]),x2:w(p[1]),y1:y(g.range[0]),y2:y(g.range[0])}),Object(r.jsx)("line",{x1:w(p[0]),x2:w(p[0]),y1:y(g.range[0]),y2:y(g.range[1])}),Object(r.jsx)("text",{x:w(p[0])-Et,y:y(g.range[0]),textAnchor:"start",children:g.range[0]}),Object(r.jsx)("text",{x:w(p[0])-Et,y:y(g.range[1]),textAnchor:"start",children:g.range[1]}),Object(r.jsx)("text",{x:w(p[0])+Et,y:y(g.range[0])+Et,textAnchor:"middle",children:G(p[0])}),Object(r.jsx)("text",{x:w(p[1])-Et,y:y(g.range[0])+Et,textAnchor:"middle",children:G(p[1])})]}),Object(r.jsx)("g",{children:v.map((function(e){return Object(r.jsx)("circle",{cx:w(e.measuredAt),cy:y(e.value),r:3})}))})]})]})}var $t=function(e,t){return e[new Date(t.start).getHours()].push(t),e},en=function(e,t){return e[t.entryType]?e[t.entryType].push(t):e[t.entryType]=[t],e};function tn(){var e=Ne(),t=e.journal,n=t.entryList,a=(t.setFilters,e.router.redirect,Object(c.useState)(null)),i=Object(f.a)(a,2),s=i[0],o=i[1],u=Object(c.useState)(null),l=Object(f.a)(u,2),j=l[0],d=l[1],h=Object(c.useState)(-1),b=Object(f.a)(h,2),p=(b[0],b[1]);if(Object(c.useEffect)((function(){var e=n.reduce($t,new Array(24).fill(1).map((function(){return[]})));p(e.reduce((function(e,t){return t.length>e?t.length:e}),1)),o(e),d(function(e){for(var t=e.reduce(en,{}),n=Object.keys(t),r=[];n.length>0;){var c=n.pop(),a=0===r.length?0:r[0].start+r[0].size,i=100*t[c].length/e.length;r.unshift({label:c,start:a,size:i})}return r}(n))}),[n]),!s)return null;var x=[Object(r.jsx)(Xt,{}),Object(r.jsxs)("figure",{className:"type-of-entry",children:[Object(r.jsx)("figcaption",{children:"Entries By Type"}),Object(r.jsx)(Pt,{data:j})]}),Object(r.jsx)(Bt,{}),Object(r.jsx)(Zt,{})];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"row four-items",children:[Object(r.jsx)(Qt,{}),Object(r.jsx)(Ut,{}),Object(r.jsx)(Gt,{}),Object(r.jsx)(Kt,{})]}),Object(r.jsxs)("div",{className:"row two-items",children:[x[1],x[0]]}),Object(r.jsx)("div",{className:"row one-item",children:x[3]}),Object(r.jsx)("div",{className:"row one-item",children:x[2]})]})}var nn=function(){return"dashboard"!==Ne().router.page?null:Object(r.jsxs)("main",{className:"dashboard",children:[Object(r.jsx)(h,{children:"Dashboard"}),Object(r.jsx)(tn,{})]})};n(254);var rn=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Tt,{}),Object(r.jsx)(Mt,{}),Object(r.jsx)(Te,{}),Object(r.jsx)(Be,{}),Object(r.jsx)(tt,{}),Object(r.jsx)(Nt,{}),Object(r.jsx)(nn,{}),Object(r.jsx)(Ft,{})]})};console.warn=function(){},console.error=function(){},s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(Me,{children:Object(r.jsx)(rn,{})})}),document.getElementById("root"))}},[[255,1,2]]]);
//# sourceMappingURL=main.067da9f8.chunk.js.map