(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{129:function(e,t){},131:function(e,t){},141:function(e,t){},143:function(e,t){},170:function(e,t){},172:function(e,t){},173:function(e,t){},178:function(e,t){},180:function(e,t){},199:function(e,t){},211:function(e,t){},214:function(e,t){},218:function(e,t,n){},219:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(3),a=n.n(c),s=n(6),i=n(5),o=n.n(i),u=n(115),l=n.n(u),f=n(8),h=n.p+"static/media/skill.23054f65.svg",d=n.p+"static/media/plus.a86e5868.svg",p=n.p+"static/media/book.65cd22a3.svg",j=n.p+"static/media/settings.d2739024.svg",b=n(221),w=n(17),m="2ac3ij97dhtkag9fljdsuo1203",x="us-east-1_tRcA2uwF6",O=null,g=new w.e({UserPoolId:x,ClientId:m}),v=null,k=null,y=null,S=function(e){return new Promise((function(t,n){try{O=new w.a({Username:e,ClientMetadata:{phoneNumber:e}}),v=new w.c({Username:e,Pool:g}),t()}catch(r){n(r)}}))},C=function(){return new Promise((function(e,t){try{v=g.getCurrentUser(),e()}catch(n){t(n)}}))},F=function(){return new Promise((function(e,t){try{if(!v)throw"Cognito user must be defined to get access token";v.getSession((function(n,r){if(n)return t(n);k=r.getAccessToken().getJwtToken(),y=new w.b({RefreshToken:r.getRefreshToken().getToken()}),console.log("access token retrieved"),e()}))}catch(n){t(n)}}))},T=function(){var e=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.signOut();case 3:t(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(a.a.mark((function e(n,r){var c,s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=new w.d({Name:"phone_number",Value:t}),s=new w.d({Name:"custom:custom:id",Value:Object(b.a)()}),i=[c,s],g.signUp(t,Object(b.a)(),i,null,(function(e,t){if(e)return r(e);v=t.user,F().then((function(e){return n()})).err((function(e){return r(e)}))}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(e,t){return new Promise(function(){var n=Object(s.a)(a.a.mark((function n(r,c){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,S(e);case 2:v.setAuthenticationFlowType("CUSTOM_CHALLENGE"),console.log(v,O),v.initiateAuth(O,{onSuccess:function(e){return r(e)},onFailure:function(e){return c(e)},customChallenge:function(e){var n=this;t((function(e){return v.sendCustomChallengeAnswer(e,n)}))}});case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())},N={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries",{method:"get",headers:new Headers({"x-amz-access-token":k})})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries",{method:"post",headers:new Headers({"x-amz-access-token":k,"Content-Type":"application/json"}),body:JSON.stringify(e)})}}},D={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills",{method:"get",headers:new Headers({"x-amz-access-token":k})})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills",{method:"post",headers:new Headers({"x-amz-access-token":k,"Content-Type":"application/json"}),body:JSON.stringify(e)})}}};var P=["January","February","March","April","May","June","July","August","September","October","November","December"],J=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return"".concat(J[e.getDay()],", ").concat(P[e.getMonth()]," ").concat(e.getDate())},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return"".concat(e.getHours()%12||12,":").concat("0".concat(e.getMinutes()).slice(-2)," ").concat(e.getHours()>11?"pm":"am")};var z=function(e){var t=e.display,n=Object(i.useState)(new Date),c=Object(f.a)(n,2),o=c[0],u=c[1],l=Object(i.useRef)(),h=function(){var e=Object(s.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(l.current.querySelectorAll("b")).map((function(e){return e.innerText})),n=Array.from(l.current.querySelectorAll("div")).map((function(e){return e.innerText})),r=new Date,e.next=5,N.post({questions:t,answers:n,start:o,end:r});case 5:Array.from(l.current.querySelectorAll("div")).map((function(e){return e.innerText="..."})),u(new Date);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("main",{style:{display:t},children:[Object(r.jsx)("h2",{children:M()}),Object(r.jsx)("h3",{children:q(o)}),Object(r.jsxs)("div",{ref:l,className:"questions",children:[Object(r.jsx)("b",{children:"What have I done today?"}),Object(r.jsx)("div",{contentEditable:!0,children:"..."}),Object(r.jsx)("b",{children:"How do I feel?"}),Object(r.jsx)("div",{contentEditable:!0,children:"..."}),Object(r.jsx)("b",{children:"What else am I going to do?"}),Object(r.jsx)("div",{contentEditable:!0,children:"..."})]}),Object(r.jsx)("button",{onClick:h,children:"Complete"})]})},E=n(117),H=n(16),R=["January","February","March","April","May","June","July","August","September","October","November","December"],U=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return"".concat(e.getMonth(),"-").concat(e.getDate(),"-").concat(e.getFullYear()).toString()},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return"".concat(U[e.getDay()],", ").concat(R[e.getMonth()]," ").concat(e.getDate())},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return"".concat(e.getHours()%12||12,":").concat("0".concat(e.getMinutes()).slice(-2)," ").concat(e.getHours()>11?"pm":"am")},_=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=t.filter((function(e){return e[n]===r}));if(a.length>0)return a[0].list;var s=(e={},Object(H.a)(e,n,r),Object(H.a)(e,"meta",c),Object(H.a)(e,"list",[]),e);return t.push(s),s.list},G=function(e){var t=e.date,n=e.isOpen,c=e.open,a=e.close;return n?Object(r.jsxs)("header",{className:"entry-header",children:[Object(r.jsx)("span",{onClick:a,children:"x"}),Object(r.jsx)("h2",{children:t})]}):Object(r.jsxs)("header",{className:"entry-header",children:[Object(r.jsx)("span",{onClick:c,children:"more"}),Object(r.jsx)("h2",{children:t})]})},Z=function(e){var t=e.entries,n=e.open;return t.map((function(e){return n?Object(r.jsxs)("section",{children:[Object(r.jsx)("h3",{children:V(e.start)}),e.questions.map((function(t,n){return Object(r.jsx)("section",{children:Object(r.jsxs)("p",{children:[Object(r.jsxs)("b",{children:[t," "]}),e.answers[n]]})})}))]},"entry-".concat(e.id)):Object(r.jsx)("div",{})}))};var B=function(e){var t=e.display,n=Object(i.useState)([]),c=Object(f.a)(n,2),o=c[0],u=c[1],l=Object(i.useState)([]),h=Object(f.a)(l,2),d=h[0],p=h[1],j=function(){var e=Object(s.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.get();case 3:return t=e.sent,e.next=6,t.json();case 6:(n=(n=e.sent).map((function(e){return Object.assign(e,{start:new Date(e.start),end:new Date(e.end)})}))).sort((function(e,t){return t.start-e.start})),r=n.reduce((function(e,t){return _(e,"date",W(t.start),{date:L(t.start)}).push(t),e}),[]),u(r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),alert(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){j()}),[]),Object(r.jsx)("main",{style:{display:t},children:o.map((function(e){return Object(r.jsxs)("article",{children:[Object(r.jsx)(G,{date:e.meta.date,isOpen:-1!==d.indexOf(e.date),open:function(){p((function(t){return[].concat(Object(E.a)(t),[e.date])}))},close:function(){p((function(t){return t.filter((function(t){return t!==e.date}))}))},index:e}),Object(r.jsx)(Z,{open:-1!==d.indexOf(e.date),entries:e.list})]},"index-".concat(e.date))}))})},Y=n.p+"static/media/pen.27ec406e.svg";var K=function(e){var t=e.display,n=Object(i.useState)([]),c=Object(f.a)(n,2),o=c[0],u=(c[1],Object(i.useState)("reference")),l=Object(f.a)(u,2),h=l[0],d=l[1],p=Object(i.useRef)(),j=Object(i.useRef)(),b=function(){var e=Object(s.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(p,j),t={category:p.current.value,skill:j.current.innerText},e.next=4,D.post(t);case 4:d("reference");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("main",{style:{display:"edit"===h?t:"none"},children:[Object(r.jsx)("h2",{children:"New Skill"}),Object(r.jsxs)("div",{children:["Category: ",Object(r.jsx)("input",{ref:p,defaultValue:"Tools For ..."})]}),Object(r.jsxs)("div",{children:["Skill: ",Object(r.jsx)("p",{style:{padding:7.5},ref:j,contentEditable:!0,children:"..."})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:b,children:"Add Skill"}),Object(r.jsx)("button",{onClick:function(){d("reference")},children:"Cancel"})]})]}),Object(r.jsxs)("main",{style:{display:"reference"===h?t:"none"},children:[Object(r.jsx)("span",{onClick:function(){d("edit")},style:{height:64,display:"grid",alignItems:"center",justifyContent:"center"},children:Object(r.jsx)("img",{src:Y,width:24,height:24})}),o.map((function(e){return Object(r.jsxs)("section",{children:[Object(r.jsx)("h2",{children:e.meta.category}),Object(r.jsx)("ul",{children:e.list.map((function(e){return Object(r.jsx)("li",{children:e.skill})}))})]})}))]})]})},Q=(n(218),{"calendar.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"pen.svg":'Icons made by <a href="https://www.flaticon.com/authors/icongeek26" title="Icongeek26">Icongeek26</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"book.svg":'Icons made by <a href="https://www.flaticon.com/authors/zlatko-najdenovski" title="Zlatko Najdenovski">Zlatko Najdenovski</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"plus.svg":'Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"list.svg":'Icons made by <a href="https://www.flaticon.com/authors/phatplus" title="phatplus">phatplus</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"skill.svg":'Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"settings.svg":'Icons made by <a href="https://www.flaticon.com/authors/srip" title="srip">srip</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>'}),X={write:"Check In",journal:"Therapy Journal",settings:"Customize",skills:"Coping Skills"};var $=function(e){var t=e.install,n=e.swStatus,c=function(e){var t=Object(i.useState)(null),n=Object(f.a)(t,2),r=n[0],c=n[1],o=Object(i.useState)(null),u=Object(f.a)(o,2),l=u[0],h=u[1],d=function(){var e=Object(s.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(a.a.mark((function e(r,c){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(t,n);case 3:return console.log("custom flow complete"),e.next=6,F();case 6:r(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("custom flow complete"),c(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C();case 3:return e.next=5,F();case 5:t(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T();case 3:window.location.reload(),t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("init auth"),e.next=4,C();case 4:return e.next=6,p();case 6:return e.next=8,new Promise((function(e,t){try{if(!v)throw"Cannot refresh empty cognito user";if(!y)throw"Cannot refresh empty refresh token";v.refreshSession(y,(function(n,r){if(n)return t(n);k=r.getAccessToken().getJwtToken(),y=new w.b({RefreshToken:r.getRefreshToken().getToken()}),e()}))}catch(n){t(n)}}));case 8:c(!0),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),c(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(a.a.mark((function e(n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),h(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){r&&e&&e()}),[r]),Object(i.useEffect)((function(){b()}),[]),{user:r,err:l,login:d,logout:j,register:m}}(),o=c.user,u=(c.me,c.err,c.login),l=(c.logout,c.updateMe,c.register,Object(i.useState)("write")),b=Object(f.a)(l,2),m=b[0],x=b[1],O=Object(i.useState)(!1),g=Object(f.a)(O,2),S=g[0],N=g[1],D=Object(i.useRef)(),P=Object(i.useRef)(),J=Object(i.useState)((function(e){return console.log(e)})),M=Object(f.a)(J,2),q=M[0],E=M[1],H=function(e){N(!0),E((function(){return function(){console.log("answering!"),e(P.current.value)}}))};return o?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("header",{children:[Object(r.jsx)("h1",{children:X[m]}),!n&&Object(r.jsx)("button",{onClick:t,children:"Install!"})]}),Object(r.jsx)(z,{display:"write"===m?"grid":"none"}),Object(r.jsx)(B,{display:"journal"===m?"grid":"none"}),Object(r.jsx)(K,{display:"skills"===m?"grid":"none"}),Object(r.jsx)("nav",{children:Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{}),Object(r.jsxs)("li",{className:"calendar"===m?"active":"",onClick:function(){x("skills")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:h}),Object(r.jsx)("label",{children:"Skills"})]}),Object(r.jsxs)("li",{className:"write"===m?"active":"",onClick:function(){x("write")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:d}),Object(r.jsx)("label",{children:"Write"})]}),Object(r.jsxs)("li",{className:"journal"===m?"active":"",onClick:function(){x("journal")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:p}),Object(r.jsx)("label",{children:"Journal"})]}),Object(r.jsxs)("li",{className:"settings"===m?"active":"",onClick:function(){x("settings")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:j}),Object(r.jsx)("label",{children:"Settings"})]}),Object(r.jsx)("li",{})]})}),Object(r.jsxs)("div",{id:"attributions",children:[Object(r.jsx)("h2",{children:"Attributions"}),Object(r.jsx)("ul",{children:Object.keys(Q).map((function(e){return Object(r.jsxs)("li",{children:[e," - ",Q[e]]},"attribiution-".concat(e))}))})]})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("header",{children:Object(r.jsx)("h1",{children:"Therapy Journal"})}),Object(r.jsxs)("main",{children:[Object(r.jsx)("h2",{children:"can i get ur number?"}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"tel",ref:D})}),Object(r.jsxs)("div",{children:[!S&&Object(r.jsx)("button",{onClick:function(){var e=D.current.value,t="+1".concat(e.replaceAll("-",""));u(t,H)},children:"Get Login Code"}),S&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("input",{autoComplete:"one-time-code",ref:P}),Object(r.jsx)("button",{onClick:q,children:"Submit!"})]})]})]})]})},ee=localStorage.getItem("sw-status"),te=function(){var e=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!ee){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,navigator.serviceWorker.register(window.location.href+"/sw.js");case 5:localStorage.setItem("sw-status","installed"),alert("Therapy Journal has installed!"),window.location.reload(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();l.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)($,{install:te,swStatus:ee})}),document.getElementById("root"))}},[[219,1,2]]]);
//# sourceMappingURL=main.b80cbd94.chunk.js.map