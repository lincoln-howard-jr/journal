(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{145:function(e,t){},147:function(e,t){},157:function(e,t){},159:function(e,t){},186:function(e,t){},188:function(e,t){},189:function(e,t){},194:function(e,t){},196:function(e,t){},215:function(e,t){},227:function(e,t){},230:function(e,t){},254:function(e,t,n){},255:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n.n(c),i=n(131),s=n.n(i),o=n(2),u=n.n(o),l=n(4),d=n(10),j=n(7),f=n(3);var h=function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{className:"long",children:e.children}),Object(r.jsx)("h1",{className:"short",children:e.short?e.short:e.children})]})},b=function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{className:"long",children:e.children}),Object(r.jsx)("h2",{className:"short",children:e.short?e.short:e.children})]})},p=function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h3",{className:"long",children:e.children}),Object(r.jsx)("h3",{className:"short",children:e.short?e.short:e.children})]})},m=n(8),x=n(257),O=n(21),g="2ac3ij97dhtkag9fljdsuo1203",v="us-east-1_tRcA2uwF6",w=null,y=new O.e({UserPoolId:v,ClientId:g}),k=null,S=null,C=null,N={get get(){return new Headers({"x-amz-access-token":S})},get post(){return new Headers({"x-amz-access-token":S,"Content-Type":"application/json"})}},M=function(e){return new Promise((function(t,n){try{w=new O.a({Username:e,ClientMetadata:{phoneNumber:e}}),k=new O.c({Username:e,Pool:y}),t()}catch(r){console.log(r),n(r)}}))},A=function(){return new Promise((function(e,t){try{k=y.getCurrentUser(),e()}catch(n){t(n)}}))},F=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.signOut();case 3:t(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){var c,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=new O.d({Name:"phone_number",Value:t}),a=new O.d({Name:"custom:custom:id",Value:Object(x.a)()}),i=[c,a],y.signUp(t,Object(x.a)(),i,null,(function(e,t){if(e)return r(e);k=t.user,n()}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e,t,n,r,c){return new Promise(function(){var a=Object(l.a)(u.a.mark((function a(i,s){var o;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,M(e);case 3:a.next=8;break;case 5:return a.prev=5,a.t0=a.catch(0),a.abrupt("return",s(a.t0));case 8:o=function(){console.log("unfreeze")},k.setAuthenticationFlowType("CUSTOM_CHALLENGE"),k.initiateAuth(w,{onSuccess:function(e){console.log("success"),r(e),o()},onerror:function(e){console.log("failure"),s(e),o()},onError:function(e){console.log("failure"),s(e),o()},onFailure:function(e){console.log("failure"),s(e),o()},customChallenge:function(e){var r=this;n(),t((function(e){o=c(),k.sendCustomChallengeAnswer(e,r)})),i()}});case 11:case"end":return a.stop()}}),a,null,[[0,5]])})));return function(e,t){return a.apply(this,arguments)}}())},P={get get(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries"+(e?"?userId="+e:""),{method:"get",headers:N.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries",{method:"post",headers:N.post,body:JSON.stringify(e)})}},get hide(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries/".concat(e),{method:"delete",headers:N.get})}}},q={get get(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills".concat(e?"?userId="+e:""),{method:"get",headers:N.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills",{method:"post",headers:N.get,body:JSON.stringify(e)})}},get del(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills/".concat(e),{method:"delete",headers:N.get})}}},I={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares",{method:"get",headers:N.get})}},get getById(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries/".concat(e),{method:"get",headers:N.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares",{method:"post",headers:new Headers({"x-amz-access-token":S,"Content-Type":"application/json"}),body:JSON.stringify(e)})}},get toggleFreeze(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares/".concat(e),{method:"put",headers:new Headers({"x-amz-access-token":S})})}},get scope(){return function(e,t){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares/".concat(e),{method:"PATCH",headers:new Headers({"x-amz-access-token":S}),body:JSON.stringify({shareScope:t})})}},get del(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares/".concat(e),{method:"delete",headers:new Headers({"x-amz-access-token":S})})}}},z={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions",{method:"get",headers:N.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions",{method:"post",headers:new Headers({"x-amz-access-token":S,"Content-Type":"application/json"}),body:JSON.stringify(e)})}},get del(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions/".concat(e),{method:"DELETE",headers:new Headers({"x-amz-access-token":S})})}}},E={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/notifications",{headers:new Headers({"x-amz-access-token":S})})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/notifications",{method:"post",headers:new Headers({"x-amz-access-token":S,"Content-Type":"application/json"}),body:JSON.stringify(e)})}},get del(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/notifications/".concat(e),{method:"DELETE",headers:new Headers({"x-amz-access-token":S})})}}},R={get get(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/metrix".concat(e?"?userId="+e:""),{headers:new Headers({"x-amz-access-token":S})})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/metrix",{method:"post",headers:new Headers({"x-amz-access-token":S,"Content-Type":"application/json"}),body:JSON.stringify(e)})}},get del(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/metrix/".concat(e),{method:"DELETE",headers:new Headers({"x-amz-access-token":S})})}}},Y={get get(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/measurements/".concat(e?"?userId="+e:""),{headers:new Headers({"x-amz-access-token":S})})}},get post(){return function(e,t){fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/metrix/".concat(e),{method:"post",headers:new Headers({"x-amz-access-token":S,"Content-Type":"application/json"}),body:JSON.stringify(t)})}},get put(){return function(e,t){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/measurements/".concat(e),{method:"put",headers:new Headers({"x-amz-access-token":S,"Content-Type":"application/json"}),body:JSON.stringify({value:t})})}}};var J=function(e,t,n){return e<=n&&e>=t},L=function(e,t){return 60*e+t},W={type:function(e){return function(t){return t.entryType===e.entryType}},date:function(e){return function(t){return"single-day"===e.mode?J(t.start,(n=e.date,new Date(n.getFullYear(),n.getMonth(),n.getDate())),function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)}(e.date)):"after"===e.mode?new Date(t.start)>e.date:"before"===e.mode?new Date(t.end)<e.date:void 0;var n}},time:function(e){return function(t){var n=e.time.split(" "),r=Object(f.a)(n,2),c=r[0],a=r[1];console.log(c.split(":"));var i=c.split(":").map((function(e){return parseInt(e)})),s=Object(f.a)(i,2),o=s[0],u=s[1],l=o%12+("pm"===a?12:0);return console.log(e,l,u),"is-at"===e.mode?J(L(l,u),L(t.start.getHours(),t.start.getHours()),L(t.end.getHours(),t.end.getHours())):"before"===e.mode?L(t.start.getHours(),t.start.getMinutes())<=L(l,u):"after"===e.mode?L(t.start.getHours(),t.start.getMinutes())>=L(l,u):void 0}}},H=function(e){return e.map((function(e){return W[e.type](e.value)}))},B=["January","February","March","April","May","June","July","August","September","October","November","December"],V=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e);return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate()).toString()},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e);return"".concat(V[t.getDay()],", ").concat(B[t.getMonth()]," ").concat(t.getDate())},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return"".concat(e.getHours()%12||12,":").concat("0".concat(e.getMinutes()).slice(-2)," ").concat(e.getHours()>11?"pm":"am")},_=function(e){if(e instanceof Date)return e;var t=e.split("-"),n=Object(f.a)(t,3),r=n[0],c=n[1],a=n[2];return r=parseInt(r),c=parseInt(c)-1,a=parseInt(a),new Date(r,c,a)},K=function(e){var t=e.map((function(e){return Object.assign(e,{start:new Date(e.start),end:new Date(e.end)})}));return t.sort((function(e,t){return t.start-e.start})),t.reduce((function(e,t){return function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=t.filter((function(e){return e[n]===r}));if(a.length>0)return a[0].list;var i=(e={},Object(d.a)(e,n,r),Object(d.a)(e,"meta",c),Object(d.a)(e,"list",[]),e);return t.push(i),i.list}(e,"date",Q(t.start),{date:U(t.start)}).push(t),e}),[])},X=864e5;var Z=function(e,t,n){var r,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.filter((function(e){return e[t]===n}));if(a.length>0)return a[0].list;var i=(r={},Object(d.a)(r,t,n),Object(d.a)(r,"meta",c),Object(d.a)(r,"list",[]),r);return e.push(i),i.list};var $=window.location.href.split("?")[0];"/"===$.charAt($.length-1)&&($=$.substring(0,$.length-1));var ee=$;var te,ne=n(133),re=n.n(ne),ce=null,ae=window.AudioContext||window.webkitAudioContext,ie=null,se=null,oe=[],ue=[],le=!!ae,de=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.navigator.mediaDevices.getUserMedia({audio:!0});case 3:ie=e.sent,t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(){if(!ie)throw new Error("no stream available to record");(se=new window.MediaRecorder(ie)).ondataavailable=function(e){oe.push(e.data)}},fe=function(){return!!ie&&!!se&&!!oe},he=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:300,e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,ce=new ae,fe()){e.next=4;break}throw new Error("Environment not set up for recording");case 4:setTimeout((function(){se.start(),n()}),t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),console.log("\n    current state:\n      stream = ".concat(ie,"\n      mediaRecorder = ").concat(se,"\n      chunks = ").concat(oe,"\n    "));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{se.stop(),setTimeout((function(){return t()}),150)}catch(r){n(r),console.log("\n    current state:\n      stream = ".concat(ie,"\n      mediaRecorder = ").concat(se,"\n      chunks = ").concat(oe,"\n    "))}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"recording",e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(r,c){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t(),e.prev=1,e.t0=ce,e.next=5,oe[0].arrayBuffer();case 5:e.t1=e.sent,e.t2=function(e){te=new re.a.Mp3Encoder(e.numberOfChannels,e.sampleRate,256e3),ue.push(te.encodeBuffer(e.getChannelData(0).map((function(e){return 1e4*e})))),ue.push(new Int16Array(te.flush()));var t=new File(ue,n,{type:"audio/mp3"});a(),r(t)},e.t0.decodeAudioData.call(e.t0,e.t1,e.t2),e.next=14;break;case 10:e.prev=10,e.t3=e.catch(1),a(),c(e.t3);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var me=function(e){var t=e.split(" "),n=Object(f.a)(t,2),r=n[0],c=n[1],a=r.split(":"),i=Object(f.a)(a,2),s=i[0],o=i[1];return parseInt(s)%12*60+parseInt(o)+("pm"===c?720:0)},xe=function(e,t){return me(e.notificationTime)-me(t.notificationTime)};var Oe={"default-0":"...","default-1":"...","default-2":"..."},ge=[{id:"default-5",unit:"number",range:[1,10],step:1,prompt:"How would I rate how I feel right now?",frequency:"as needed",isDefault:!0},{id:"default-6",unit:"number",range:[0,16],step:.25,prompt:"How much sleep did I get last night?",frequency:"daily",unitLabel:"hours",isDefault:!0},{id:"default-7",unit:"boolean",prompt:"Did I accomplish my goals this week?",frequency:"weekly",isDefault:!0}],ve=[].concat([{id:"default-0",unit:"string",prompt:"What have I done today?",frequency:"as needed"},{id:"default-1",unit:"string",prompt:"How do I feel?",frequency:"as needed"},{id:"default-2",unit:"string",prompt:"What else am I going to do today?",frequency:"as needed"},{id:"default-4",unit:"string",prompt:"What are my goals this week?",frequency:"as needed"}],ge),we=new Date;we=new Date(we.getFullYear(),we.getMonth(),we.getDate());var ye=new Date(we.getFullYear(),we.getMonth(),we.getDate()+1),ke=new Date;ke=new Date(ke.getFullYear(),ke.getMonth(),ke.getDate()-ke.getDay());var Se=new Date;Se=new Date(ke.getFullYear(),ke.getMonth(),0);var Ce={useAuth:function(e,t){var n=Object(c.useState)(null),r=Object(f.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(null),o=Object(f.a)(s,2),d=o[0],j=o[1],h=function(){var t=Object(l.a)(u.a.mark((function t(n,r,c){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(l.a)(u.a.mark((function t(a,i){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e(),t.prev=1,t.next=4,T(n,r,c,m,e);case 4:a(),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),i(t.t0),j(t.t0);case 11:return t.prev=11,s(),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,7,11,14]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),b=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A();case 3:return e.next=5,new Promise((function(e,t){try{if(!k)throw"Cognito user must be defined to get access token";k.getSession((function(n,r){if(n)return t(n);S=r.getAccessToken().getJwtToken(),C=new O.b({RefreshToken:r.getRefreshToken().getToken()}),e()}))}catch(n){t(n)}}));case 5:t(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(l.a)(u.a.mark((function t(n,r){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e(),t.prev=1,t.next=4,F();case 4:window.location.reload(),n(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r(t.t0);case 11:return t.prev=11,c(),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A();case 3:return e.next=5,b();case 5:return e.next=7,new Promise((function(e,t){try{if(!k)throw"Cannot refresh empty cognito user";if(!C)throw"Cannot refresh empty refresh token";k.refreshSession(C,(function(n,r){if(n)return t(n);S=r.getAccessToken().getJwtToken(),C=new O.b({RefreshToken:r.getRefreshToken().getToken()}),e()}))}catch(n){t(n)}}));case 7:i(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),i(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var t=Object(l.a)(u.a.mark((function t(n,r,c){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(l.a)(u.a.mark((function t(a,i){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e(),t.prev=1,t.next=4,D(n);case 4:return t.next=6,T(n,r,c,m,e);case 6:a(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),j(t.t0),i(t.t0);case 13:return t.prev=13,s(),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,9,13,16]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){a&&t&&t()}),[a]),Object(c.useEffect)((function(){m()}),[]),{user:a,err:d,login:h,logout:p,register:x}},useJournal:function(e){var t=Object(c.useState)([]),n=Object(f.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(0),s=Object(f.a)(i,2),o=s[0],d=s[1],j=Object(c.useState)([]),h=Object(f.a)(j,2),b=h[0],p=h[1],x=Object(c.useState)([]),O=Object(f.a)(x,2),g=O[0],v=O[1],w=Object(c.useState)(""),y=Object(f.a)(w,2),k=y[0],S=y[1],C=Object(c.useState)([]),N=Object(f.a)(C,2),M=N[0],A=N[1],F=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get(t);case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,n.ok&&a(r),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(l.a)(u.a.mark((function t(r,c){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e(),t.prev=1,t.next=4,P.post(n);case 4:return t.next=6,F();case 6:r(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),c(t.t0);case 12:return t.prev=12,a(),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),T=function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(l.a)(u.a.mark((function t(r,c){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e(),t.prev=1,t.next=4,P.hide(n);case 4:return t.next=6,F();case 6:r(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),c(t.t0);case 12:return t.prev=12,a(),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=function(e){p(e);var t=H(e);v(t),d(o+1)};return Object(c.useEffect)((function(){!function(){var e=g.reduce((function(e,t){return e.filter(t)}),r);if(0===k.length)return A(K(e));var t=r.filter((function(e){return"freeform"===e.entryType})).map((function(e){return Object.assign(e,{text:e.freeform})})).filter((function(e){return e.text.match(k.toLowerCase())})),n=r.filter((function(e){return"questions"===e.entryType})).map((function(e){return Object.assign(e,{text:e.answers.join(" ").toLowerCase()})})).filter((function(e){return e.text.match(k.toLowerCase())}));e=K([].concat(Object(m.a)(n),Object(m.a)(t))),A(e)}()}),[r,b.length,k,o]),{entries:M,entryList:r,filters:b,filterIterator:o,getEntries:F,createEntry:D,hideEntry:T,setQuery:S,clearSearch:function(){return q([]),S(""),d(o+1),Promise.resolve()},setFilters:q}},useWriting:function(e){var t=Object(c.useState)([]),n=Object(f.a)(t,2),r=n[0],a=n[1],i=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.get();case 3:return r=e.sent,e.next=6,r.json();case 6:c=e.sent,a(c.map((function(e){return{prompt:e.body,id:"custom-question-".concat(e.id),unit:"string",frequency:"as needed"}}))),t(c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),n(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(l.a)(u.a.mark((function t(r,c){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e(),t.prev=1,t.next=4,z.post(n);case 4:return t.next=6,i();case 6:r(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),c(t.t0);case 12:return t.prev=12,a(),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(l.a)(u.a.mark((function t(r,c){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e(),t.prev=1,t.next=4,z.del(n);case 4:if(t.sent.ok){t.next=7;break}throw new Error("Could not delete question");case 7:return t.next=9,i();case 9:r(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),c(t.t0);case 15:return t.prev=15,a(),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,12,15,18]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{questions:r,getQuestions:i,createQuestion:s,deleteQuestion:o}},useSettings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.localStorage,n=JSON.parse(t.getItem("therapy-journal-settings")||"{}"),r=Object.assign(e,n),a=Object(c.useState)(r),i=Object(f.a)(a,2),s=i[0],o=i[1],u=Object(c.useState)(0),l=Object(f.a)(u,2),h=l[0],b=l[1],p=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?n.reduce((function(e,t){var n=t.charAt(0),r=t.substring(1);return"!"===n?e&&!s[r]:"|"===n?e||s[r]:"&"===n?e&&s[r]:e}),s[e]):s[e]},m=function(){return Object.assign({},s)},x=function(e,t){s[e]||(o(Object(j.a)(Object(j.a)({},s),{},Object(d.a)({},e,t))),b(h+1))},O=function(e){delete s[e],b(h+1)},g=function(){o({}),b(h+1)},v=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),c=2;c<n;c++)r[c-2]=arguments[c];if(!r.length)return o(Object(j.a)(Object(j.a)({},s),{},Object(d.a)({},e,t)));var a=r.reduce((function(e,n){var r=n.charAt(0),c=n.substring(1);return"!"===r?Object(j.a)(Object(j.a)({},e),{},Object(d.a)({},c,!t)):"|"===r&&!1===t?Object(j.a)(Object(j.a)({},e),{},Object(d.a)({},c,!0)):e}),Object(d.a)({},e,t));o((function(e){return Object.assign(e,a)})),b(h+1)},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.reduce((function(e,t){var n=t.key,r=t.value;return Object.assign(e,Object(d.a)({},n,r))}),{});o((function(e){return Object.assign(e,t)})),b(h+1)},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){if(!t.length)return o(Object(j.a)(Object(j.a)({},s),{},Object(d.a)({},e,!s[e])));var r=!s[e],c=t.reduce((function(e,t){var n=t.charAt(0),c=t.substring(1);return"!"===n?Object(j.a)(Object(j.a)({},e),{},Object(d.a)({},c,!r)):"|"===n&&!1===r?Object(j.a)(Object(j.a)({},e),{},Object(d.a)({},c,!0)):e}),Object(d.a)({},e,r));o(Object(j.a)(Object(j.a)({},s),c)),b(h+1)}};return Object(c.useEffect)((function(){t.setItem("therapy-journal-settings",JSON.stringify(s))}),[s]),{getSetting:p,removeSetting:O,getAll:m,toggle:y,addSetting:x,set:v,setAll:w,clearSettings:g}},useSharing:function(e,t){var n=Object(c.useState)([]),r=Object(f.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)([]),o=Object(f.a)(s,2),d=o[0],j=o[1],h=Object(c.useState)([]),b=Object(f.a)(h,2),p=b[0],x=b[1],O=function(){var e=Object(l.a)(u.a.mark((function e(){var n,r,c,a,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.get();case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,c=r.sharedWithMe,a=r.sharedByMe,j(a),i(c),s=a.map((function(e){return{key:"share-".concat(e.id,"-frozen"),value:!e.frozen}})),o=a.reduce((function(e,t){var n=t.shareScope||[];return[].concat(Object(m.a)(e),Object(m.a)(["skills","journal","metrix"].map((function(e){return{key:"share-".concat(t.id,"-scope-").concat(e),value:-1!==n.indexOf(e)}}))))}),[]),s=[].concat(Object(m.a)(s),Object(m.a)(o)),t.setAll(s),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(n,r){var c,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.getById(t);case 3:return c=e.sent,e.next=6,c.json();case 6:a=e.sent,i=K(a),x(i),n(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(l.a)(u.a.mark((function t(r,c){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e(),t.prev=1,t.next=4,I.toggleFreeze(n);case 4:return t.next=6,O();case 6:r(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),c(t.t0);case 12:return t.prev=12,a(),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=Object(l.a)(u.a.mark((function t(n,r,c){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(l.a)(u.a.mark((function t(a,i){var s,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e(),t.prev=1,o=10===n.length?"+1".concat(n):n,t.next=5,I.post({shareWith:o,name:r,shareWithName:c});case 5:return t.next=7,O();case 7:a(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),i(t.t0);case 13:return t.prev=13,s(),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();return{sharedByMe:d,sharedWithMe:a,sharedJournal:p,getShareById:g,getShares:O,shareJournal:w,toggleFreeze:v,updateShareScope:function(t,n){return new Promise(function(){var r=Object(l.a)(u.a.mark((function r(c,a){var i;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=e(),r.prev=1,r.next=4,I.scope(t,n);case 4:return r.next=6,O();case 6:return r.prev=6,i(),r.finish(6);case 9:case"end":return r.stop()}}),r,null,[[1,,6,9]])})));return function(e,t){return r.apply(this,arguments)}}())},deleteShare:function(t){return new Promise(function(){var n=Object(l.a)(u.a.mark((function n(r,c){var a;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e(),n.prev=1,n.next=4,I.del(t);case 4:return n.next=6,O();case 6:return n.prev=6,a(),n.finish(6);case 9:case"end":return n.stop()}}),n,null,[[1,,6,9]])})));return function(e,t){return n.apply(this,arguments)}}())}}},useSkills:function(e){var t=Object(c.useState)([]),n=Object(f.a)(t,2),r=n[0],a=n[1],i=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.get(t);case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,c=r.reduce((function(e,t){return Z(e,"category",t.category,{category:t.category}).push(t),e}),[]),a(c),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return{skills:r,getSkills:i,submitSkill:function(t){return new Promise(function(){var n=Object(l.a)(u.a.mark((function n(r,c){var a;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e(),n.prev=1,n.next=4,q.post(t);case 4:return n.next=6,i();case 6:r(),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),c(n.t0);case 12:return n.prev=12,a(),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[1,9,12,15]])})));return function(e,t){return n.apply(this,arguments)}}())},removeSkill:function(t){return new Promise(function(){var n=Object(l.a)(u.a.mark((function n(r,c){var a;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e(),n.prev=1,n.next=4,q.del(t);case 4:return n.next=6,i();case 6:r(),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),c(n.t0);case 12:return n.prev=12,a(),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[1,9,12,15]])})));return function(e,t){return n.apply(this,arguments)}}())}}},useRouter:function(){var e=new URLSearchParams(window.location.search).get("page")||"write",t=Object(c.useState)(e),n=Object(f.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(new URLSearchParams(window.location.search)),s=Object(f.a)(i,2),o=s[0],u=s[1];return{page:r,params:o,redirect:function(e){var t=e.split("?"),n=t.length>1?new URLSearchParams("?".concat(t[1])).get("page"):"write";window.history.pushState({previous:r,next:n},"Journal","".concat(ee).concat(e)),a(n),t.length>1&&u(new URLSearchParams("?".concat(t[1])))}}},useAudio:function(e){var t=Object(c.useState)("not-started"),n=Object(f.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(f.a)(i,2),o=s[0],d=s[1],j=Object(c.useState)("audio-recording-".concat(G(),"-").concat(Q(),".mp3")),h=Object(f.a)(j,2),b=h[0],p=h[1],m=Object(c.useState)(0),x=Object(f.a)(m,2),O=x[0],g=x[1],v=Object(c.useState)(!1),w=Object(f.a)(v,2),y=w[0],k=w[1],S=Object(c.useState)(null),C=Object(f.a)(S,2),N=C[0],M=C[1],A=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he();case 2:a("recording"),k(window.setInterval((function(){return g((function(e){return e+1}))}),1e3));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var t=Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.clearInterval(y),k(!1),g(0),t.next=5,be();case 5:return t.next=7,pe(e,"audio-recording-".concat(G(),"-").concat(Q(),".mp3"));case 7:n=t.sent,console.log(n),d(n),a("finished");case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.clearInterval(y),a("paused"),se.pause();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(window.setInterval((function(){return g((function(e){return e+1}))}),1e3)),a("recording"),se.resume();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{initAudio:function(){var t=Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e(),t.prev=1,t.next=4,de();case 4:je(),M(fe()),n(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),audioRecording:o,audioRecordingTitle:b,timeElapsed:O,recordingStatus:r,ready:N,startRecording:A,stopRecording:F,pauseRecording:D,resumeRecording:T,resetAudioInformation:function(){d(null),p("audio-recording-".concat(G(),"-").concat(Q(),".mp3")),g(0),a("not-started"),k(!1)},setAudioRecordingTitle:p}},useNotifications:function(e){var t=Object(c.useState)([]),n=Object(f.a)(t,2),r=n[0],a=n[1],i=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.get();case 3:return r=e.sent,e.next=6,r.json();case 6:(c=e.sent).sort(xe),a(c),t(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),n(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{notifications:r,getNotifications:i,createNotification:function(t){return new Promise(function(){var n=Object(l.a)(u.a.mark((function n(r,c){var a;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e(),n.prev=1,n.next=4,E.post(t);case 4:return n.next=6,i();case 6:r(),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),c(n.t0);case 12:return n.prev=12,a(),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[1,9,12,15]])})));return function(e,t){return n.apply(this,arguments)}}())},deleteNotification:function(t){return new Promise(function(){var n=Object(l.a)(u.a.mark((function n(r,c){var a;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e(),n.prev=1,n.next=4,E.del(t);case 4:return n.next=6,i();case 6:r(),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),c(n.t0);case 12:return n.prev=12,a(),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[1,9,12,15]])})));return function(e,t){return n.apply(this,arguments)}}())}}},useMetrix:function(e){var t=Object(c.useState)(ge),n=Object(f.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)([]),s=Object(f.a)(i,2),o=s[0],d=s[1],j=Object(c.useState)([]),h=Object(f.a)(j,2),b=h[0],p=h[1],x=Object(c.useState)([]),O=Object(f.a)(x,2),g=O[0],v=O[1],w=Object(c.useState)(null),y=Object(f.a)(w,2),k=y[0],S=y[1],C=Object(c.useState)(null),N=Object(f.a)(C,2),M=N[0],A=N[1],F=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.get(t);case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,a([].concat(Object(m.a)(ge),Object(m.a)(r))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("#getMetrix",e.t0);case 13:return e.abrupt("return",Promise.resolve());case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(l.a)(u.a.mark((function t(r,c){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e(),t.prev=1,t.next=4,R.post(n);case 4:if(t.sent.ok){t.next=7;break}throw new Error("request not ok");case 7:return t.next=9,F();case 9:r(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),console.log("#createMetrix",t.t0),c(t.t0);case 16:return t.prev=16,a(),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[1,12,16,19]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),T=function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(l.a)(u.a.mark((function t(r,c){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e(),t.prev=1,t.next=4,R.del(n);case 4:return t.next=6,F();case 6:r(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),c(t.t0);case 12:return t.prev=12,a(),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.get(t);case 3:return n=e.sent,e.next=6,n.json();case 6:r=(r=e.sent).map((function(e){return Object.assign(e,{measurement:e.measurement||e.value,measuredAt:new Date(e.measuredAt)})})),d(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("#getMeasurements",e.t0);case 14:return e.abrupt("return",Promise.resolve());case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var t=Object(l.a)(u.a.mark((function t(n,r,c){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e(),t.prev=1,t.next=4,Y.post(n.id,{measurement:r,measuredAt:c,unit:n.unit});case 4:return t.prev=4,a(),t.finish(4);case 7:case"end":return t.stop()}}),t,null,[[1,,4,7]])})));return function(e,n,r){return t.apply(this,arguments)}}(),I=function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(l.a)(u.a.mark((function t(n,r){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e(),t.prev=1,t.next=4,Promise.all(b.map((function(e){return Y.post(e.metricId,e.body)})));case 4:return p([]),t.next=7,P();case 7:n(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log("#createMeasurements",t.t0),r(t.t0);case 14:return t.prev=14,c(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,10,14,17]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),z=function(){var t=Object(l.a)(u.a.mark((function t(n,r){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e(),t.prev=1,t.next=4,Y.put(n,r);case 4:return t.prev=4,c(),t.finish(4);case 7:case"end":return t.stop()}}),t,null,[[1,,4,7]])})));return function(e,n){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){if(r.length&&o.length){var e=o.filter((function(e){var t;return"daily"===(null===(t=r.find((function(t){return t.id===e.metric})))||void 0===t?void 0:t.frequency)})).filter((function(e){return(t=e.measuredAt)>we&&t<ye;var t})),t=o.filter((function(e){var t;return"weekly"===(null===(t=r.find((function(t){return t.id===e.metric})))||void 0===t?void 0:t.frequency)})).filter((function(e){return e.measuredAt>ke})),n=o.filter((function(e){var t;return"monthly"===(null===(t=r.find((function(t){return t.id===e.metric})))||void 0===t?void 0:t.frequency)})).filter((function(e){return e.measuredAt>Se})),c=[].concat(Object(m.a)(r.filter((function(t){return!!e.find((function(e){return e.metric===t.id}))})).map((function(e){return e.id}))),Object(m.a)(r.filter((function(e){return!!t.find((function(t){return t.metric===e.id}))})).map((function(e){return e.id}))),Object(m.a)(r.filter((function(e){return!!n.find((function(t){return t.metric===e.id}))})).map((function(e){return e.id}))));v(c)}}),[r,o]),{metrix:r,singleMetrix:k,singleMeasurement:M,measurements:o,captured:g,getMetrix:F,setSingleMetrix:S,setSingleMeasurement:A,createMetrix:D,updateMeasurement:z,deleteMetrix:T,getMeasureValue:function(e){var t,n;return null===(t=b.find((function(t){return t.metricId===(null===e||void 0===e?void 0:e.id)})))||void 0===t||null===(n=t.body)||void 0===n?void 0:n.measurement},getMeasurements:P,measure:function(e,t){if([].concat(Object(m.a)(r),Object(m.a)(ge)).find((function(t){return e.id===t.id}))){var n=b.slice(),c=n.findIndex((function(t){return t.metricId===e.id}));if(-1===c)return p([].concat(Object(m.a)(b),[{metricId:e.id,body:{measurement:t,unit:e.unit}}]));void 0===t?n.splice(c,1):n[c].body.measurement=t,p(n)}},createMeasurements:I,measureHistoric:q,isCaptured:function(e){return g.includes(e)}}}},Ne={"custom-questions":!0,"default-questions":!0,"custom-metrix":!0,freeform:!1,"starred-string-default-0":!0,"starred-string-default-1":!0,"starred-string-default-2":!0},Me=Object(c.createContext)(),Ae=function(){return a.a.useContext(Me)};function Fe(e){var t=e.children,n={},a=Object(c.useState)(null),i=Object(f.a)(a,2),s=i[0],o=i[1];n.freeze=function(e){return o(""),function(){o(null)}};var u=Object(c.useState)(null),l=Object(f.a)(u,2),d=l[0],j=l[1];n.closeModal=function(){return j(null)},n.setModal=j;var h=Object(c.useState)(!1),b=Object(f.a)(h,2),p=b[0],x=b[1],O=Object(c.useState)([]),g=Object(f.a)(O,2),v=g[0],w=g[1];n.viewMode={isViewOnly:p,setIsViewOnly:x,scope:v},n.settings=Ce.useSettings(Ne),n.session=Ce.useSettings(Oe,sessionStorage),n.skills=Ce.useSkills(n.freeze),n.journal=Ce.useJournal(n.freeze),n.writing=Ce.useWriting(n.freeze),n.metrix=Ce.useMetrix(n.freeze),n.router=Ce.useRouter(n.freeze),n.audio=Ce.useAudio(n.freeze),n.sharing=Ce.useSharing(n.freeze,n.settings),n.notifications=Ce.useNotifications(n.freeze),n.viewSharedJournal=function(e,t){var r=t.shareScope?Object(m.a)(t.shareScope):["skills","journal","metrix"];r.indexOf("journal")>=0&&r.indexOf("metrix")>=0&&r.push("dashboard"),w(r),r&&"-1"===r.indexOf("journal")||n.journal.getEntries(e),(r||"-1"!==r.indexOf("skills"))&&n.skills.getSkills(e),(r||"-1"!==r.indexOf("metrix"))&&(n.metrix.getMetrix(e),n.metrix.getMeasurements(e)),n.viewMode.setIsViewOnly(!0),n.router.redirect("/?page=".concat(r.indexOf("journal")>-1?"journal":r[0]))},n.viewMyJournal=function(){n.journal.getEntries(),n.skills.getSkills(),n.metrix.getMetrix(),n.metrix.getMeasurements(),n.viewMode.setIsViewOnly(!1),n.router.redirect("/?page=settings")};return n.auth=Ce.useAuth(n.freeze,(function(){n.metrix.getMetrix(),n.metrix.getMeasurements(),n.skills.getSkills(),n.writing.getQuestions(),n.journal.getEntries(),n.sharing.getShares((function(e){e.sharedByMe.forEach((function(e){n.settings.set("share-".concat(e.id),!e.frozen)}))})),n.notifications.getNotifications(),le?(n.settings.set("audio-recording-supported",!0),n.settings.set("audio-recording",!1)):(n.settings.set("audio-recording-supported",!1),n.settings.set("audio-recording",!1))})),Object(r.jsxs)(Me.Provider,{value:n,children:[null!==s&&Object(r.jsx)("div",{id:"loading-animation"}),null!==d&&Object(r.jsx)("div",{id:"modal-backdrop",children:Object(r.jsx)("div",{id:"modal-content",children:d})}),t]})}var De=function(){var e=Ae().audio,t=e.initAudio,n=e.ready,a=e.recordingStatus,i=e.audioRecording,s=e.timeElapsed,o=e.audioRecordingTitle,u=e.startRecording,l=e.stopRecording,d=e.pauseRecording,j=e.resumeRecording,f=e.resetAudioInformation,h=e.setAudioRecordingTitle;return Object(c.useEffect)((function(){n||t()}),[]),null===n?null:"not-started"===a?Object(r.jsxs)("div",{className:"recorder-container grid text-center",children:[Object(r.jsx)("p",{children:'Click "Record" to speak your journal entry!'}),Object(r.jsx)("button",{onClick:u,children:"Record"})]}):"paused"===a?Object(r.jsxs)("div",{className:"recorder-container grid text-center",children:[Object(r.jsx)("div",{className:"timer",children:Object(r.jsxs)("span",{children:[Math.floor(s/60),":","00".concat(s%60).slice(-2)]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:j,children:"Resume"}),Object(r.jsx)("button",{onClick:l,children:"Finish"})]})]}):"recording"===a?Object(r.jsxs)("div",{className:"recorder-container grid text-center",children:[Object(r.jsx)("div",{className:"timer flashing",children:Object(r.jsxs)("span",{children:[Math.floor(s/60),":","00".concat(s%60).slice(-2)]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:l,children:"Stop"}),Object(r.jsx)("button",{onClick:d,children:"Pause"})]})]}):"finished"===a?Object(r.jsx)("div",{className:"recorder-container grid text-center",children:Object(r.jsxs)("figure",{className:"audio-recording",children:[Object(r.jsxs)("figcaption",{children:[Object(r.jsxs)("p",{children:["Title:\xa0\xa0\xa0",Object(r.jsx)("input",{className:"audio-title-input",onChange:function(e){return h(e.target.value)},value:o})]}),Object(r.jsx)("p",{className:"fake-button",children:Object(r.jsx)("a",{className:"error",onClick:f,children:"Start Over"})})]}),Object(r.jsx)("audio",{controls:!0,src:window.URL.createObjectURL(i)})]})}):Object(r.jsx)("div",{children:"Error! Error!"})};n.p;var Te=n.p+"static/media/book.65cd22a3.svg",Pe=n.p+"static/media/calendar.0073112f.svg",qe=n.p+"static/media/cancel.da5c4222.svg",Ie=n.p+"static/media/caret-down.bfd98d54.svg",ze=n.p+"static/media/dashboard.4dfd917f.svg",Ee=n.p+"static/media/filter.8be2c938.svg",Re=(n.p,n.p+"static/media/left-arrow.7f101ba2.svg"),Ye=(n.p,n.p,n.p,n.p,n.p+"static/media/plus.a86e5868.svg"),Je=n.p+"static/media/ruler.7e9ac949.svg",Le=n.p+"static/media/search.28b0ad10.svg",We=n.p+"static/media/settings.d2739024.svg",He=n.p+"static/media/skill.23054f65.svg",Be=n.p+"static/media/stopwatch.43421b05.svg",Ve=n.p+"static/media/trash.dd7f053f.svg",Qe=n.p+"static/media/checkmark.1d073034.svg",Ue=n.p+"static/media/key.4617432b.svg",Ge=n.p+"static/media/star.dd913ac2.svg",_e=n.p+"static/media/star filled.c07a5d2e.svg",Ke=n.p+"static/media/Journal Logo.72f55eff.PNG",Xe=400,Ze=100,$e={r:5},et=function(e,t,n){var r=t-e,c=25*n/Xe,a=n-2*c;return function(i){return i<e&&(i=e),i>t&&(i=t),c+a*(i-e)/r*Xe/n}},tt=function(e,t,n){var r=n/Xe,c=350*r,a=t-e;return function(e){return(e-25*r)*a/c}};function nt(e){var t,n=Object(f.a)(e.range,2),a=n[0],i=n[1],s=e.step,o=e.defaultValue,u=e.onChange,l=Object(c.useRef)(),d=Object(c.useState)(o||a),h=Object(f.a)(d,2),b=h[0],p=h[1],m=Object(c.useState)(!1),x=Object(f.a)(m,2),O=x[0],g=x[1],v=function(){var e=s%1?"".concat(s).split(".")[1].length:0,t=e?parseFloat:parseInt,n=Math.round(a+(b-a)/s)*s;return(n=t(n.toFixed(e)))<a&&(n=a),n>i&&(n=i),n},w=Object(c.useState)(Xe),y=Object(f.a)(w,2),k=y[0],S=y[1],C=Object(c.useState)((function(){return tt(a,i,k)})),N=Object(f.a)(C,2),M=N[0],A=N[1],F=Object(c.useState)((function(){return et(a,i,k)})),D=Object(f.a)(F,2),T=D[0],P=D[1];function q(e){if(O){var t=e.movementX?b+e.movementX*(i-a)/(k-5*k/Xe*10):e.touches&&e.touches.length?M(e.touches[0].clientX):b;t<a&&(t=a),t>i&&(t=i),p(t)}}return Object(c.useEffect)((function(){var e;(null===(e=l.current)||void 0===e?void 0:e.clientWidth)&&S(l.current.clientWidth)}),[null===(t=l.current)||void 0===t?void 0:t.clientWidth]),Object(c.useEffect)((function(){k&&(A((function(){return tt(a,i,k)})),P((function(){return et(a,i,k)})))}),[k]),Object(c.useEffect)((function(){u&&u(v())}),[b]),Object(r.jsxs)("svg",{ref:l,onTouchStart:function(){return g(!0)},onMouseDown:function(){return g(!0)},onTouchMove:q,onTouchCancel:function(){return g(!1)},onMouseMove:q,onMouseLeave:function(){return g(!1)},onMouseUp:function(){return g(!1)},viewBox:"0 0 ".concat(Xe," ").concat(Ze),className:"component-slider-svg",children:[Object(r.jsxs)("g",{className:"slider-base",children:[Object(r.jsx)("circle",Object(j.a)({cx:T(a),cy:50},$e)),Object(r.jsx)("line",{x1:T(a)+5,x2:T(i)-5,y1:50,y2:50}),Object(r.jsx)("circle",Object(j.a)({cx:T(i),cy:50},$e)),Object(r.jsx)("text",{x:T(a),y:80,textAnchor:"left",children:a}),Object(r.jsx)("text",{x:T(i),y:80,textAnchor:"end",children:i})]}),Object(r.jsxs)("g",{className:"slider-value",children:[Object(r.jsx)("circle",{onTouchStart:function(){return g(!0)},onMouseDown:function(){return g(!0)},cx:T(b),cy:50,r:10}),Object(r.jsx)("line",{x1:T(b),x2:T(b),y1:25,y2:35}),Object(r.jsx)("text",{x:T(b),y:20,textAnchor:"middle",children:v()})]})]})}var rt={boolean:function(e){var t=e.onChange,n=e.defaultValue;return Object(r.jsx)("div",{children:Object(r.jsxs)("select",{defaultValue:n,onChange:function(e){return t(""===e.target.value?void 0:e.target.value)},children:[Object(r.jsx)("option",{value:void 0}),Object(r.jsx)("option",{children:"Yes"}),Object(r.jsx)("option",{children:"No"})]})})},number:function(e){var t=e.onChange,n=e.defaultValue,c=e.range,a=e.step;return Object(r.jsx)("div",{children:Object(r.jsx)(nt,{range:c,step:a,defaultValue:n,onChange:t})})},string:function(e){var t=e.onChange,n=e.autofocus,a=e.defaultValue,i=void 0===a?"...":a,s=Object(c.useRef)(),o=Object(c.useState)("..."===i),u=Object(f.a)(o,2),l=u[0],d=u[1];return Object(c.useEffect)((function(){s.current&&n&&s.current.focus()}),[s]),Object(r.jsx)("div",{ref:s,onFocus:function(){l&&(s.current.innerText="",d(!1))},contentEditable:!0,onBlur:function(e){return t(e.target.innerText)},children:i})},freeform:function(e){var t=e.onChange,n=e.autofocus,a=e.defaultValue,i=void 0===a?"...":a,s=(e.remove,Object(c.useRef)()),o=Object(c.useState)("..."===i),u=Object(f.a)(o,2),l=u[0],d=u[1];return Object(c.useEffect)((function(){s.current&&n&&s.current.focus()}),[s]),Object(r.jsx)("div",{className:"freeform-entry",ref:s,onFocus:function(){l&&(s.current.innerText="",d(!1))},contentEditable:!0,onBlur:function(e){return t(e.target.innerText)},children:i})},audio:function(e){return e.onChange,Object(r.jsx)(De,{})}};var ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return setTimeout((function(){window.scrollBy({left:0,top:-window.scrollY,behavior:"smooth"})}),e)},at={boolean:"(metric) ",number:"(metric) ",string:"",freeform:"[freeform]",audio:"[audio]"},it={id:"freeform",unit:"freeform",frequency:"as needed",prompt:""};function st(){var e=Ae(),t=e.auth.user,n=e.router.page,i=e.journal.createEntry,s=e.settings.getSetting,o=e.writing.questions,d=e.metrix,x=d.metrix,O=d.createMeasurements,g=d.measure,v=d.isCaptured,w=e.session,y=e.freeze,k=["default-questions","custom-questions","use-metrix","freeform"].map((function(e){return s(e)})),S=Object(c.useState)(new Date),C=Object(f.a)(S,2),N=C[0],M=C[1],A=Object(c.useState)(""),F=Object(f.a)(A,2),D=F[0],T=F[1],P=Object(c.useState)(""),q=Object(f.a)(P,2),I=q[0],z=q[1],E=function(){var e=[];return k[3]&&(e=[].concat(Object(m.a)(e),[it])),k[0]&&(e=[].concat(Object(m.a)(e),Object(m.a)(ve.filter((function(e){return!v(e.id)}))))),k[1]&&(e=[].concat(Object(m.a)(e),Object(m.a)(o))),k[2]&&(e=[].concat(Object(m.a)(e),Object(m.a)(x.filter((function(e){return!ge.find((function(t){return t.id===e.id}))})).filter((function(e){return!v(e.id)}))))),e};Object(c.useEffect)((function(){w.clearSettings();var e=E().filter((function(e){return s("starred-".concat(e.unit,"-").concat(e.id))})).map((function(e){var t=null;return"string"===e.unit&&(t="..."),"number"===e.unit&&(t=e.range[0]),g(e,t),{key:e.id,value:t}}));w.setAll(e)}),[x,o]);var R=function(){var e=w.getAll(),t=E(),n=Object.keys(e).filter((function(t){return void 0!==e[t]})).map((function(e){return t.find((function(t){return t.id===e}))})).filter((function(e){return e}));return n.sort((function(e,n){return t.findIndex((function(t){return t.id===e.id}))-t.findIndex((function(e){return e.id===n.id}))})),n},Y=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,r,c,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y(),e.prev=1,n=E(),r=w.getAll(),c=Object.keys(r).filter((function(e){return null!==r[e]&&void 0!==r[e]})).map((function(e){return n.find((function(t){return t.id===e}))})).filter((function(e){return e})),a=c.map((function(e){return r[e.id]})),c=c.map((function(e){return"".concat(e.prompt).concat(e.unitLabel?" (".concat(e.unitLabel,")"):"")})),s={entryType:"questions",start:N,end:new Date,questions:c,answers:a},e.next=10,i(s);case 10:return e.next=12,O();case 12:w.clearSettings(),M(new Date),t(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),t();case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){"write"===n&&(T(""),ct())}),[n]),t&&"write"===n?Object(r.jsxs)("main",{id:"question-answer-entry",children:[Object(r.jsx)(h,{short:"New Entry",children:"New Question & Answer Entry"}),Object(r.jsx)(b,{children:U()}),Object(r.jsx)(p,{children:G(N)}),Object(r.jsxs)("div",{className:"questions",children:[R().map((function(e){var t=rt[e.unit],n={defaultValue:w.getSetting(e.id)};return Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsxs)("span",{className:"prompt-prompt ".concat(e.unit),children:[Object(r.jsxs)("b",{children:[e.prompt,e.unitLabel?" (".concat(e.unitLabel,")"):""]}),Object(r.jsx)("span",{onClick:function(){return function(e){console.log("remove prompt id=".concat(e.id)),g(e,void 0),w.removeSetting(e.id)}(e)},children:Object(r.jsx)("img",{src:Ve})})]}),Object(r.jsx)(t,Object(j.a)(Object(j.a)({autofocus:D===e.id,onChange:function(t){return function(e,t){g(e,t),w.set(e.id,t)}(e,t)}},n),e)),Object(r.jsx)("hr",{className:"prompt-divider"})]},"prompt-".concat(e.unit,"-").concat(e.id))})),0!==E().filter((function(e){return R().find((function(t){return t.id===e.id}))}))&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("section",{onClick:function(){return z("selecting")},className:"add-a-section ".concat(I),children:"+"}),Object(r.jsxs)("section",{children:["selecting"===I&&Object(r.jsxs)("select",{autoFocus:!0,onChange:function(e){return e.target.value&&function(e){var t=E().find((function(t){return e===t.id})),n=null;"string"===t.unit&&(n="..."),"number"===t.unit&&(n=t.range[0]),t&&(w.set(t.id,n),g(t,n),T(t.id))}(e.target.value)||z("")},children:[Object(r.jsx)("option",{value:null,defaultChecked:!0}),E().filter((function(e){return!R().find((function(t){return e.id===t.id}))})).map((function(e){return Object(r.jsxs)("option",{value:e.id,children:[at[e.unit],e.prompt]},"option-".concat(prompt.unit,"-").concat(prompt.id))}))]}),Object(r.jsx)("span",{className:"fake-button",onClick:function(){return z("")},children:Object(r.jsx)("img",{src:qe})})]})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{onClick:Y,children:"Submit"})})]})]}):null}var ot=[0,31,28,31,30,31,30,31,31,30,31,30,31],ut=function(e,t){return ot[e]+(t%4===0?1:0)};function lt(e){var t=e.value,n=e.onChange,c=function(){return t.split(" ")[0].split(":")[1]},a=function(){return t.split(" ")[0].split(":")[0]},i=function(){return t.split(" ")[1]};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("input",{type:"number",onChange:function(e){var t=parseInt(e.target.value);t<1||t>12||n("".concat(e.target.value,":").concat(c()," ").concat(i()))},value:a()}),":",Object(r.jsx)("input",{type:"number",onChange:function(e){var t=parseInt(e.target.value);t<0||t>59||n("".concat(a(),":").concat(("00"+e.target.value).slice(-2)," ").concat(i()))},value:c()}),Object(r.jsx)("span",{className:"fake-button",onClick:function(){return n("".concat(a(),":").concat(c()," ").concat("pm"===i()?"am":"pm"))},children:i()})]})}var dt={date:function(e){var t=e.value,n=e.remove,a=e.setValue,i=new Date(t.date),s=Object(c.useState)(t.mode),o=Object(f.a)(s,2),u=o[0],l=o[1],d=Object(c.useState)(i.getMonth()+1),j=Object(f.a)(d,2),h=j[0],b=j[1],p=Object(c.useState)(i.getDate()),m=Object(f.a)(p,2),x=m[0],O=m[1],g=Object(c.useState)(i.getFullYear()),v=Object(f.a)(g,2),w=v[0],y=v[1],k=Object(c.useState)(ut(h,w)),S=Object(f.a)(k,2),C=S[0],N=S[1];return Object(c.useEffect)((function(){if(NaN!==h&&NaN!==x&&NaN!==w){var e=ut(h,w);N(e),a(Object.assign(t,{mode:u,date:new Date(w,h-1,x,0,0,0)}))}}),[x,h,w,u]),Object(r.jsxs)("li",{className:"grid filter date-filter",children:[Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:Pe,alt:"Date Filter"})}),Object(r.jsx)("span",{className:t.modeFinal?"":"fake-button",onClick:function(){t.modeFinal||l("single-day"===u?"after":"after"===u?"before":"single-day")},children:Object(r.jsxs)("span",{className:"grid switch-mode",children:[Object(r.jsx)("span",{children:"single-day"===t.mode?"Day Of":"after"===t.mode?"After":"Before"}),!t.modeFinal&&Object(r.jsx)("img",{style:{display:"inline",transform:"rotate(-90deg)"},width:8,height:8,src:Ie})]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{type:"tel",min:1,max:12,defaultValue:h,onChange:function(e){return b(parseInt(e.target.value))}}),Object(r.jsx)("span",{children:"/"}),Object(r.jsx)("input",{type:"tel",min:1,max:C,defaultValue:x,onChange:function(e){return O(parseInt(e.target.value))}}),Object(r.jsx)("span",{children:"/"}),Object(r.jsx)("input",{type:"tel",min:2020,max:(new Date).getFullYear(),defaultValue:w,onChange:function(e){return y(parseInt(e.target.value))}})]}),Object(r.jsx)("span",{children:Object(r.jsx)("span",{className:"fake-button",onClick:n,children:"remove"})})]})},time:function(e){var t=e.value,n=e.remove,c=e.setValue;return Object(r.jsxs)("li",{className:"grid filter time-filter",children:[Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:Be})}),Object(r.jsx)("span",{className:"fake-button",onClick:function(){var e="is-at"===t.mode?"after":"after"===t.mode?"before":"is-at";c({time:t.time,mode:e})},children:Object(r.jsxs)("span",{className:"grid switch-mode",children:[Object(r.jsx)("span",{children:"is-at"===t.mode?"Exact":"after"===t.mode?"After":"Before"}),Object(r.jsx)("img",{style:{display:"inline",transform:"rotate(-90deg)"},width:8,height:8,src:Ie})]})}),Object(r.jsx)("div",{children:Object(r.jsx)(lt,{value:t.time,onChange:function(e){return c({time:e,mode:t.mode})}})}),Object(r.jsx)("span",{children:Object(r.jsx)("span",{className:"fake-button",onClick:n,children:"remove"})})]})}};function jt(){var e=Ae(),t=e.journal,n=t.query,a=t.filters,i=t.filterIterator,s=t.setQuery,o=t.setFilters,u=e.router.redirect,l=e.viewMode.isViewOnly,d=Object(c.useState)(!1),j=Object(f.a)(d,2),h=j[0],b=j[1],p=Object(c.useState)([]),x=Object(f.a)(p,2),O=x[0],g=x[1],v=Object(c.useState)([]),w=Object(f.a)(v,2),y=w[0],k=w[1],S=Object(c.useState)([]),C=Object(f.a)(S,2),N=(C[0],C[1]);Object(c.useEffect)((function(){g(a.filter((function(e){return"date"===e.type}))),k(a.filter((function(e){return"time"===e.type}))),N(a.filter((function(e){return"type"===e.type})))}),[i]);var M=function(e){return function(){a.splice(e,1),o(a)}},A=function(e){return function(t){a[e].value=t,o(a)}};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"grid search-container",children:[l&&Object(r.jsx)("span",{}),!l&&Object(r.jsx)("span",{onClick:function(){return u("/?page=write")},children:Object(r.jsx)("img",{src:Ye})}),Object(r.jsxs)("form",{className:"search-bar",onSubmit:function(e){return e.preventDefault()},children:[Object(r.jsx)("input",{value:n,onChange:function(e){return s(e.target.value)},placeholder:"Search..."}),Object(r.jsx)("img",{src:Le})]}),Object(r.jsx)("span",{onClick:function(e){return b(!h)},className:"open-filters",children:Object(r.jsx)("img",{src:Ee})})]}),h?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("ol",{className:"grid filter-list",children:a.map((function(e,t){var n=dt[e.type];return Object(r.jsx)(n,{value:e.value,remove:M(t),setValue:A(t)})}))}),0===a.length&&Object(r.jsx)("div",{className:"grid",children:"You don't have any filters, add some by clicking on the icons below!"}),Object(r.jsxs)("ul",{className:"grid add-filter-list",children:[Object(r.jsx)("li",{onClick:function(){if(0===O.length){var e=[].concat(Object(m.a)(a),[{type:"date",value:{mode:"single-day",date:new Date}}]);o(e)}else{if(1!==O.length)return;var t=a.filter((function(e){return"date"===e.type}))[0];t.value=Object.assign(t.value,{mode:"after",modeFinal:!0});var n=[].concat(Object(m.a)(a),[{type:"date",value:{mode:"before",modeFinal:!0,date:new Date}}]);o(n)}},className:O.length<2?"":"add-filter-disabled",children:Object(r.jsx)("img",{src:Pe,alt:"date filter"})}),Object(r.jsx)("li",{onClick:function(){if(0===y.length){var e=[].concat(Object(m.a)(a),[{type:"time",value:{mode:"is-at",time:"".concat((new Date).getHours()%12||12,":").concat(("00"+(new Date).getMinutes()).slice(-2)," ").concat((new Date).getHours<12?"am":"pm")}}]);o(e)}else{if(1!==y.length)return;y[0].value.mode="after";var t=[].concat(Object(m.a)(a),[{type:"time",value:{mode:"before",time:y[0].value.time}}]);o(t)}},className:y.length<2?"":"add-filter-disabled",children:Object(r.jsx)("img",{src:Be,alt:"time filter"})})]}),Object(r.jsx)("hr",{})]}):Object(r.jsx)("div",{className:"none"})]})}function ft(e){var t=e.date,n=void 0===t?new Date:t,c=e.className,a=void 0===c?"":c,i=2*Math.PI*(60*n.getHours()+n.getMinutes())/720,s=2*Math.PI*n.getMinutes()/60;return Object(r.jsxs)("svg",{viewBox:"0 0 100 100",className:"analog-clock "+a,children:[Object(r.jsx)("circle",{className:"clock-outline",fill:"transparent",r:48,cx:50,cy:50}),Object(r.jsx)("g",{className:"clock-ticks",children:new Array(12).fill(1).map((function(e,t){return Object(r.jsx)("line",{x1:50+42*Math.sin(2*Math.PI*t/12),y1:50+42*Math.cos(2*Math.PI*t/12),x2:50+44*Math.sin(2*Math.PI*t/12),y2:50+44*Math.cos(2*Math.PI*t/12)})}))}),Object(r.jsx)("line",{x1:50,x2:50+24*Math.sin(i),y1:50,y2:50-24*Math.cos(i)}),Object(r.jsx)("line",{x1:50,x2:50+36*Math.sin(s),y1:50,y2:50-36*Math.cos(s)})]})}function ht(e){var t=e.entry,n=e.resolve,c=e.reject,a=Ae(),i=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.journal.hideEntry(t.id);case 3:n(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),c("Couldn't  successfully hide entry!");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"grid remove-entry-modal",children:[Object(r.jsxs)("p",{children:["Are you sure you want to hide your journal entry from ",U(t.start)," at ",G(t.start)]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:i,children:"Yes, hide it!"}),Object(r.jsx)("button",{onClick:function(){return c("Cancelled")},children:"No, don't!"})]})]})}function bt(e){var t=e.idx,n=Ae(),a=n.setModal,i=n.closeModal,s=Object(c.useState)(""),o=Object(f.a)(s,2),d=o[0],j=o[1],h=function(e){return new Promise(function(){var t=Object(l.a)(u.a.mark((function t(n,c){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a(Object(r.jsx)(ht,{entry:e,resolve:n,reject:c}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},m=function(e){return Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h(e);case 3:return t.prev=3,i(),t.finish(3);case 6:case"end":return t.stop()}}),t,null,[[0,,3,6]])})))};return Object(r.jsxs)("article",{className:d,children:[Object(r.jsxs)("header",{onClick:function(){j(""===d?"open":"")},children:[Object(r.jsx)(b,{short:Q(t.list[0].start),children:t.meta.date}),Object(r.jsx)("ol",{children:t.list.map((function(e){return Object(r.jsx)("li",{children:Object(r.jsx)(ft,{date:e.start})})}))})]}),t.list.map((function(e){return Object(r.jsxs)("section",{children:[Object(r.jsxs)("header",{children:[Object(r.jsx)("span",{}),Object(r.jsxs)(p,{short:G(e.start),children:[G(e.start)," - ",G(e.end)]}),Object(r.jsx)("span",{onClick:m(e),children:Object(r.jsx)("img",{src:Ve})})]}),("questions"===e.entryType||!e.entryType)&&e.questions.map((function(t,n){return Object(r.jsxs)("p",{children:[Object(r.jsx)("b",{children:t}),Object(r.jsx)("br",{}),e.answers[n]]},"".concat(e.id,"-question-").concat(n))})),"freeform"===e.entryType&&Object(r.jsx)("p",{children:e.freeform}),"audio"===e.entryType&&Object(r.jsxs)("figure",{children:[Object(r.jsx)("figcaption",{children:Object(r.jsx)("p",{children:e.audio.title})}),Object(r.jsx)("audio",{controls:!0,src:e.audio.url})]})]})}))]})}function pt(){var e=Ae(),t=e.auth.user,n=e.router.page,a=e.journal,i=a.entries,s=a.clearSearch,o=e.viewMode,u=o.isViewOnly,l=o.scope;return Object(c.useEffect)((function(){"journal"!==n?s():ct()}),[n]),u&&-1===l.indexOf("journal")?null:t&&"journal"===n?Object(r.jsxs)("main",{className:"view-journal",children:[Object(r.jsx)(h,{children:"Journal"}),Object(r.jsx)(jt,{}),i.map((function(e){return Object(r.jsx)(bt,{idx:e})}))]}):null}var mt={"minus.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/cursor-creative" title="Cursor Creative">Cursor Creative</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"calendar.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"pen.svg":'Icons made by <a href="https://www.flaticon.com/authors/icongeek26" title="Icongeek26">Icongeek26</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"book.svg":'Icons made by <a href="https://www.flaticon.com/authors/zlatko-najdenovski" title="Zlatko Najdenovski">Zlatko Najdenovski</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"plus.svg":'Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"list.svg":'Icons made by <a href="https://www.flaticon.com/authors/phatplus" title="phatplus">phatplus</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"skill.svg":'Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"settings.svg":'Icons made by <a href="https://www.flaticon.com/authors/srip" title="srip">srip</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"search.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/pixel-perfect" title="Pixel perfect">Pixel perfect</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"filter.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/kirill-kazachek" title="Kirill Kazachek">Kirill Kazachek</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"stopwatch.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/good-ware" title="Good Ware">Good Ware</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"caret-down.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/dave-gandy" title="Dave Gandy">Dave Gandy</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"trash.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/dinosoftlabs" title="DinosoftLabs">DinosoftLabs</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"cancel.svg":'<div>Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"back.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/gregor-cresnar" title="Gregor Cresnar">Gregor Cresnar</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"next.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/gregor-cresnar" title="Gregor Cresnar">Gregor Cresnar</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"happy.svg":'<div>Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"dashboard.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/pixel-perfect" title="Pixel perfect">Pixel perfect</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"left-arrow.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/pixel-perfect" title="Pixel perfect">Pixel perfect</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"more.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/kirill-kazachek" title="Kirill Kazachek">Kirill Kazachek</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"ruler.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/good-ware" title="Good Ware">Good Ware</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"checkmark.svg":'<div>Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"key.svg":'<div>Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"star.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/pixel-perfect" title="Pixel perfect">Pixel perfect</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"star filled.svg":'<div>Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>'},xt={boolean:"Yes/No",number:"Number Range"},Ot=function(e){return new RegExp(/[0-9]/,"g").test(e)},gt=function(e){return"Backspace"===e},vt=function(e){return"Left"===e||"ArrowLeft"===e},wt=function(e){return"Right"===e||"ArrowRight"===e},yt=function(e){return"."===e},kt=function(e){var t=e.value,n=e.setValue,c=e.placeholder;return Object(r.jsx)("span",{className:"inline-input",children:Object(r.jsx)("input",{placeholder:c,type:"number",defaultValue:t,onBlur:function(e){return function(e){return 0===[Ot,gt,vt,wt,yt].filter((function(t){return t(e.key)})).length}(e)?e.target.value.length?void n(parseFloat(e.target.value)):n(0):e.preventDefault()}})})},St=function(e){var t=e.value,n=e.setValue,c=e.placeholder;return Object(r.jsx)("span",{className:"inline-input",children:Object(r.jsx)("input",{placeholder:c,onChange:function(e){return n(e.target.value)},value:t})})};function Ct(e){var t=e.prompt,n=e.resolve,c=e.reject,a=Ae(),i=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"string"!==t.unit){e.next=6;break}return e.next=4,a.writing.deleteQuestion(t.id.split("-")[2]);case 4:e.next=8;break;case 6:return e.next=8,a.metrix.deleteMetrix(t.id);case 8:n(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),c("Couldn't  successfully hide entry!");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"grid remove-entry-modal",children:[Object(r.jsxs)("p",{children:["Are you sure you want to remove the custom prompt -",Object(r.jsxs)("b",{children:[" ",t.prompt," "]}),"-","string"!==t.unit&&" and all measurements made from this metrix ","from your Journal?"]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:i,children:"Yes, delete it!"}),Object(r.jsx)("button",{onClick:function(){return c("Cancelled")},children:"No, don't!"})]})]})}function Nt(e){var t=e.open,n=Ae(),a=n.writing,i=a.questions,s=a.createQuestion,o=(a.deleteQuestion,n.settings),d=o.toggle,j=o.getSetting,h=n.metrix,b=h.metrix,p=h.createMetrix,x=n.freeze,O=n.setModal,g=n.closeModal,v=Object(c.useState)("?"),w=Object(f.a)(v,2),y=w[0],k=w[1],S=Object(c.useState)(null),C=Object(f.a)(S,2),N=C[0],M=C[1],A=Object(c.useState)(""),F=Object(f.a)(A,2),D=F[0],T=F[1],P=Object(c.useState)(""),q=Object(f.a)(P,2),I=q[0],z=q[1],E=Object(c.useState)(""),R=Object(f.a)(E,2),Y=R[0],J=R[1],L=Object(c.useState)("as needed"),W=Object(f.a)(L,2),H=W[0],B=W[1],V=Object(c.useState)(null),Q=Object(f.a)(V,2),U=Q[0],G=Q[1],_=Object(c.useState)(""),K=Object(f.a)(_,2),X=K[0],Z=K[1],$=function(e){return new Promise(function(){var t=Object(l.a)(u.a.mark((function t(n,c){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:O(Object(r.jsx)(Ct,{prompt:e,resolve:n,reject:c}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},ee=function(e){return Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$(e);case 3:return t.prev=3,g(),t.finish(3);case 6:case"end":return t.stop()}}),t,null,[[0,,3,6]])})))},te=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,s(y);case 4:k("?"),ie(0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t();case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,t=x(),n={prompt:y,unit:N,frequency:H},U&&(n.unitLabel=U),"number"===N&&(n.range=[D,I],n.step=Y),e.next=8,p(n);case 8:ie(0),k("?"),M(null),T(""),z(""),J(""),B("as needed"),G(""),t(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),t();case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(){return e.apply(this,arguments)}}(),re=Object(c.useState)(0),ce=Object(f.a)(re,2),ae=ce[0],ie=ce[1];Object(c.useEffect)((function(){Z("")}),[ae]);var se=[Object(r.jsx)("button",{onClick:function(){return ie(ae+1)},children:"Create a Custom Prompt"}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Write a Custom Prompt"}),Object(r.jsx)("div",{contentEditable:!0,className:"add-question-input",onInput:function(e){return k(e.target.innerText)},children:"?"}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return ie(ae-1)},children:"Cancel"}),Object(r.jsx)("button",{onClick:function(){return ie(ae+1)},children:"Next"})]})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Add a Metric?"}),Object(r.jsx)("p",{children:y}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return ie(ae-1)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){return ie(ae+1)},children:"Add Metric"}),Object(r.jsx)("button",{onClick:te,children:"Create Prompt"})]})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Select Metric Type"}),Object(r.jsx)("p",{children:y}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return ie(ae-1)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){M("number"),ie(ae+1)},children:"Numeric"}),Object(r.jsx)("button",{onClick:function(){M("boolean"),ie(ae+2)},children:"Yes/No"})]})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Numeric Metric Details"}),Object(r.jsx)("p",{children:y}),X&&X.length>0&&Object(r.jsx)("p",{className:"error",children:X}),Object(r.jsxs)("p",{children:[null!==U?Object(r.jsxs)(r.Fragment,{children:["Measured with unit ",Object(r.jsx)(St,{placeholder:"unit label",value:U,setValue:G})," from"]}):"From"," ",Object(r.jsx)(kt,{placeholder:"min",value:D,setValue:T})," to ",Object(r.jsx)(kt,{placeholder:"max",value:I,setValue:z}),"   in intervals of ",Object(r.jsx)(kt,{placeholder:"step",value:Y,setValue:J}),"."]}),Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"checkbox",defaultChecked:U,onChange:function(e){return G(e.target.checked?"":null)}})," has unit label"]}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return ie(ae-1)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){(function(){var e=[];return"number"!==typeof D&&e.push("min value must be a number"),"number"!==typeof I&&e.push("max value must be a number"),D>=I&&e.push("max value must be greater than min value"),("number"!==typeof Y||Y<=0)&&e.push("step interval must be a positive number"),e.length&&Z("Error: "+e.join(", ")),0===e.length})()&&ie(ae+1)},children:"Set Frequency"})]})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Set Frequency"}),Object(r.jsx)("p",{children:y}),Object(r.jsx)("p",{children:xt[N]}),Object(r.jsxs)("p",{children:["This question should be answered ",Object(r.jsxs)("select",{onChange:function(e){return B(e.target.value)},children:[Object(r.jsx)("option",{children:"as needed"}),Object(r.jsx)("option",{children:"daily"}),Object(r.jsx)("option",{children:"weekly"}),Object(r.jsx)("option",{children:"monthly"})]}),"."]}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return ie(ae-1)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){return ie(ae+1)},children:"Review"})]})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:y}),Object(r.jsxs)("p",{children:[xt[N]," - ",H]}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return ie(ae-1)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){return ne()},children:"Create Metric"})]})]})];return t?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Default Prompts"}),Object(r.jsx)("ul",{className:"prompt-list",children:ve.map((function(e){return Object(r.jsxs)("li",{className:"manage-custom-question ".concat(j("starred-".concat(e.unit,"-").concat(e.id))?"starred":""),children:[Object(r.jsx)("span",{onClick:d("starred-".concat(e.unit,"-").concat(e.id)),style:{cursor:"pointer"},children:Object(r.jsx)("img",{src:j("starred-".concat(e.unit,"-").concat(e.id))?_e:Ge})}),Object(r.jsx)("span",{children:e.prompt})]},"manage-default-questions-".concat(e.prompt))}))}),Object(r.jsx)("b",{children:"Custom Prompts"}),Object(r.jsx)("ul",{className:"prompt-list",children:[].concat(Object(m.a)(i),Object(m.a)(b.filter((function(e){return!e.isDefault})))).map((function(e){return Object(r.jsxs)("li",{className:"manage-custom-question ".concat(j("starred-".concat(e.unit,"-").concat(e.id))?"starred":""),children:[Object(r.jsx)("span",{onClick:d("starred-".concat(e.unit,"-").concat(e.id)),style:{cursor:"pointer"},children:Object(r.jsx)("img",{src:j("starred-".concat(e.unit,"-").concat(e.id))?_e:Ge})}),Object(r.jsx)("span",{children:e.prompt}),Object(r.jsx)("span",{style:{cursor:"pointer"},onClick:ee(e),children:Object(r.jsx)("img",{src:Ve})})]},"manage-custom-question-".concat(e.id))}))}),Object(r.jsx)("div",{children:se[ae]})]}):null}var Mt=function(e){return e.replaceAll(/[^0-9]/g,"")},At=function(e){var t=e.replaceAll(/[^0-9]/g,"");if(10!==t.length)throw new Error("Phone number must be 10 digits, current length: "+t.length);return"+1"+t};function Ft(){var e=Ae().sharing.shareJournal,t=Object(c.useState)(""),n=Object(f.a)(t,2),a=n[0],i=n[1],s=function(e){return i(function(e){var t=Mt(e);return t.length>10&&(t=t.substr(0,10)),0===t.length?t:t.length<4?"(".concat(t):t.length<7?"(".concat(t.substr(0,3),") ").concat(t.substr(3)):"(".concat(t.substr(0,3),") ").concat(t.substr(3,3),"-").concat(t.substr(6))}(e))},o=Object(c.useRef)(),d=Object(c.useRef)(),j=function(){var t=Object(l.a)(u.a.mark((function t(){var n,r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=At(n=a),r=o.current.value,c=d.current.value,t.next=6,e(n,r,c);case 6:i(""),d.current.value="";case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"action",children:[Object(r.jsx)("b",{style:{textDecoration:"none"},children:"Share Your Journal With"}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{ref:d,placeholder:"James Allen"}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"tel",placeholder:"123-456-7890",value:a,onChange:function(e){return s(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)("b",{style:{textDecoration:"none"},children:"Your Name"}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{ref:o}),Object(r.jsx)("br",{}),Object(r.jsx)("button",{onClick:j,children:"Share Your Journal"})]})}function Dt(){var e=Ae(),t=e.settings.getSetting,n=e.sharing,c=n.sharedByMe,i=n.toggleFreeze,s=n.updateShareScope,o=n.deleteShare,u=function(e){return function(){i(e.id)}},l=function(e,t){return function(){e.shareScope&&-1!==e.shareScope.indexOf(t)?s(e.id,e.shareScope.filter((function(e){return e!==t}))):s(e.id,[].concat(Object(m.a)(e.shareScope||[]),[t]))}};return Object(r.jsxs)("div",{children:[Object(r.jsx)("b",{style:{textDecoration:"none"},children:"Who You Share Your Journal With"}),Object(r.jsx)("hr",{}),0===c.length&&Object(r.jsx)("span",{style:{textDecoration:"none"},children:"You haven't shared your journal - no pressure"}),c.map((function(e){return Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(b,{children:[e.shareWithName||e.shareWith,Object(r.jsx)("span",{style:{marginLeft:"8px"},onClick:function(){return o(e.id)},children:Object(r.jsx)("img",{src:Ve,style:{width:16,cursor:"pointer"}})})]}),t("share-".concat(e.id,"-frozen"))&&["skills","journal","metrix"].map((function(t){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(qt,{onToggle:l(e,t),title:"Share ".concat(t),setting:"share-".concat(e.id,"-scope-").concat(t)}),Object(r.jsx)("br",{})]})})),Object(r.jsx)(qt,{onToggle:u(e),title:"Active",setting:"share-".concat(e.id,"-frozen")})]}),Object(r.jsx)("br",{})]},"share-".concat(e.id))}))]})}function Tt(){var e=Ae(),t=e.sharing.sharedWithMe,n=e.viewSharedJournal,c=t.filter((function(e){return!e.frozen}));return 0===c.length?Object(r.jsx)("div",{className:"none"}):Object(r.jsxs)("div",{className:"action",children:[Object(r.jsx)("b",{style:{textDecoration:"none"},children:"Journals Shared With You"}),Object(r.jsx)("hr",{style:{width:"25vw"}}),c.map((function(e){return Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsx)("span",{onClick:function(){return n(e.userId,e)},children:e.name}),Object(r.jsx)("br",{})]},"share-".concat(e.id))}))]})}function Pt(e){var t=e.longTitle,n=e.shortTitle,i=e.children,s=Object(c.useState)(!1),o=Object(f.a)(s,2),u=o[0],l=o[1];return Object(r.jsxs)("div",{className:"setting-group"+(u?" open":""),children:[Object(r.jsxs)("header",{onClick:function(){return l(!u)},children:[Object(r.jsx)("span",{}),Object(r.jsx)(p,{short:n,children:t}),Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:Ie})})]}),c.Children.map(i,(function(e){return e&&Object(r.jsx)(r.Fragment,{children:a.a.cloneElement(e,{open:u})})})),Object(r.jsx)("div",{})]})}function qt(e){var t=e.setting,n=e.title,c=e.relationships,a=void 0===c?[]:c,i=e.onToggle,s=Ae().settings,o=s.getSetting,u=s.toggle;return a.reduce((function(e,t){if(!e)return e;if("+"!==t.charAt(0))return e;var n=t.substring(1);return o(n)}),!0)?Object(r.jsxs)("div",{className:"setting",children:[Object(r.jsx)("div",{children:Object(r.jsx)("b",{children:n})}),Object(r.jsx)("div",{children:Object(r.jsx)("span",{onClick:i||u(t,a),className:o(t)?"toggle on":"toggle"})})]}):Object(r.jsx)("div",{className:"none"})}var It=function(){var e=Ae(),t=e.router.page,n=(e.settings.getSetting,e.auth),a=n.user,i=n.logout,s=Object(c.useState)("attributions"),o=Object(f.a)(s,2),u=o[0],l=o[1];return a&&"settings"===t?Object(r.jsxs)("main",{className:"settings",children:[Object(r.jsx)(h,{children:"Settings"}),Object(r.jsxs)("div",{className:"settings-container",children:[Object(r.jsxs)(Pt,{longTitle:"Journal Settings",shortTitle:"Journal",children:[Object(r.jsx)("p",{children:"Make journal entries the way you want to make them. These settings are specific to your device, so you can have different preferences on your phone, tablet, laptop or whatever else you use!"}),Object(r.jsx)(qt,{setting:"freeform",title:"Enable Freeform"}),!1,Object(r.jsx)(qt,{setting:"default-questions",title:"Show Default Questions"}),Object(r.jsx)(qt,{setting:"custom-questions",title:"Show Custom Questions"}),Object(r.jsx)(qt,{setting:"use-metrix",title:"Show Custom Metrix"})]}),Object(r.jsx)(Pt,{shortTitle:"Prompts",longTitle:"Manage Prompts",children:Object(r.jsx)(Nt,{})}),Object(r.jsxs)(Pt,{shortTitle:"Sharing",longTitle:"Manage Journal Sharing",children:[Object(r.jsx)("p",{children:"View journals shared with you and manage who you shared your journal with. You can always disable someone from seeing your journal once you share it with them."}),Object(r.jsx)(Tt,{}),Object(r.jsx)(Dt,{}),Object(r.jsx)(Ft,{})]}),Object(r.jsxs)(Pt,{shortTitle:"Misc",longTitle:"Miscellaneous",children:[Object(r.jsx)("div",{className:"action",children:window.navigator.canShare&&Object(r.jsx)("span",{onClick:function(){window.navigator.share({title:"My Journal",url:"https://lincoln-howard-jr.github.io/journal/"})},children:"Share This Application"})}),Object(r.jsx)("div",{className:"action",children:Object(r.jsx)("span",{onClick:i,children:"Log Out"})}),"attributions"===u&&Object(r.jsx)("div",{className:"action",children:Object(r.jsx)("span",{onClick:function(){return l("")},children:"Show Attributions"})}),Object(r.jsxs)("div",{className:"attributions",id:u,children:[Object(r.jsx)("div",{className:"fake-button",children:Object(r.jsx)("span",{onClick:function(){return l("attributions")},children:"Hide Attributions"})}),Object(r.jsx)("ul",{children:Object.keys(mt).map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsx)("b",{children:e}),Object(r.jsx)("br",{}),Object(r.jsx)("span",{dangerouslySetInnerHTML:{__html:mt[e]}})]},"attribiution-".concat(e))}))})]})]})]})]}):null};function zt(){var e=Ae(),t=e.auth.user,n=e.router.page,a=e.skills,i=a.skills,s=a.submitSkill,o=a.removeSkill,d=e.viewMode,j=d.isViewOnly,m=d.scope,x=Object(c.useState)(null),O=Object(f.a)(x,2),g=O[0],v=O[1],w=Object(c.useState)(null),y=Object(f.a)(w,2),k=y[0],S=y[1],C=Object(c.useRef)(),N=Object(c.useRef)(),M=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault&&t.preventDefault(),e.prev=1,n=C.current.value,r=N.current.innerText,e.next=6,s({category:n,skill:r});case 6:C.current.value="Tools For ...",N.current.innerText="...",e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),S("Error while submitting skill, try again in a few...");case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){"skills"===n&&ct()}),[n]),t?j&&-1===m.indexOf("skills")||"skills"!==n?null:Object(r.jsxs)("main",{children:[Object(r.jsx)(h,{children:"Skills"}),Object(r.jsx)("p",{style:{maxWidth:"60ch",margin:"15px auto"},children:"Treat this as a reference sheet for your coping skills for a given situation. You are unique and so are the things that work for you - so add whatever you works for you!"}),Object(r.jsx)("datalist",{id:"skills-categories",children:i.map((function(e){return Object(r.jsx)("option",{children:e.meta.category})}))}),!!k&&Object(r.jsx)("p",{style:{maxWidth:"60ch",margin:"15px auto"},children:k}),Object(r.jsxs)("form",{onSubmit:M,className:"new-skill-form",children:[Object(r.jsx)(p,{children:"Add a Skill"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Category:"}),Object(r.jsx)("input",{list:"skills-categories",ref:C,defaultValue:"Tools For"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Skill:"}),Object(r.jsx)("p",{style:{padding:7.5},ref:N,contentEditable:!0,children:"..."})]}),Object(r.jsx)("button",{onClick:M,children:"Add Skill"})]}),i.map((function(e){return Object(r.jsxs)("section",{className:"skill-category-container".concat(g===e.meta.category?" open":""),children:[Object(r.jsx)("header",{style:{cursor:"pointer"},onClick:function(){return g===e.meta.category?v(null):v(e.meta.category)},children:Object(r.jsx)(b,{children:e.meta.category})}),e.list.map((function(t){return Object(r.jsxs)("div",{className:"single-skill",children:[Object(r.jsx)("span",{children:t.skill}),g===e.meta.category&&!j&&Object(r.jsx)("span",{onClick:function(){return o(t.id)},children:Object(r.jsx)("img",{src:Ve})})]})}))]},"cat-".concat(e.meta.category))}))]}):null}var Et={skills:He,journal:Te,metrix:Je,dashboard:ze},Rt={skills:"Skills",journal:"Journal",metrix:"Metrix",dashboard:"Dash"};function Yt(){var e=Ae(),t=e.auth.user,n=e.router,c=n.page,a=n.redirect,i=e.viewMode,s=i.isViewOnly,o=i.scope,u=e.viewMyJournal;return s?Object(r.jsx)("nav",{className:"view-only count-".concat(1+o.length),children:Object(r.jsxs)("ul",{children:[Object(r.jsxs)("li",{onClick:u,children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:Re}),Object(r.jsx)("label",{children:"Go Back"})]}),o.map((function(e){return Object(r.jsxs)("li",{className:c===e?"active":"",onClick:function(){return a("/?page=".concat(e))},children:[Object(r.jsx)("img",{src:Et[e]}),Object(r.jsx)("label",{children:Rt[e]})]})}))]})}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("nav",{children:Object(r.jsxs)("ul",{children:[Object(r.jsxs)("li",{className:"skills"===c?"active":"",onClick:function(){a("/?page=skills")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:He}),Object(r.jsx)("label",{children:"Skills"})]}),Object(r.jsxs)("li",{className:"journal"===c?"active":"",onClick:function(){a("/?page=journal")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:Te}),Object(r.jsx)("label",{children:"Journal"})]}),Object(r.jsxs)("li",{className:"write"===c?"active":"",onClick:function(){a("/?page=write")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:Ye}),Object(r.jsx)("label",{children:"Write"})]}),Object(r.jsxs)("li",{className:"metrix"===c?"active":"",onClick:function(){a("/?page=metrix")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:Je}),Object(r.jsx)("label",{children:"Metrix"})]}),Object(r.jsxs)("li",{className:"dashboard"===c?"active":"",onClick:function(){a("/?page=dashboard")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:ze}),Object(r.jsx)("label",{children:"Dash"})]})]})}),"settings"!==c&&t&&Object(r.jsx)("div",{onClick:function(){return a("/?page=settings")},id:"settings-menu-icon",children:Object(r.jsx)("img",{src:We,alt:""})})]})}function Jt(){var e=Ae().auth,t=e.user,n=e.login,a=e.register,i=e.err,s=Object(c.useState)(""),o=Object(f.a)(s,2),j=o[0],b=o[1],m=Object(c.useState)(!1),x=Object(f.a)(m,2),O=x[0],g=x[1],v=Object(c.useState)((function(e){return function(){return console.log(e)}})),w=Object(f.a)(v,2),y=w[0],k=w[1],S=Object(c.useRef)(),C=function(e){return b(function(e){var t=Mt(e);return t.length>10&&(t=t.substr(0,10)),0===t.length?t:t.length<4?"(".concat(t):t.length<7?"(".concat(t.substr(0,3),") ").concat(t.substr(3)):"(".concat(t.substr(0,3),") ").concat(t.substr(3,3),"-").concat(t.substr(6))}(e))},N=function(e){g(!0),k((function(){return function(){e(S.current.value)}})),S.current.focus()},M=Object(c.useState)(!1),A=Object(f.a)(M,2),F=A[0],D=A[1],T=Object(c.useState)(null),P=Object(f.a)(T,2),q=P[0],I=P[1],z=function(){D(!0)},E=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=At(j),I(null),e.next=5,a(t,N,z);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),I(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=At(j),I(null),e.next=5,n(t,N,z);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),I(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return t?null:Object(r.jsxs)("main",{children:[Object(r.jsx)(h,{children:"Your Journal"}),Object(r.jsxs)("div",{className:"phone-number-input",children:[Object(r.jsx)(p,{children:F?"Your secret code in on the way!":"Enter your phone number:"}),Object(r.jsx)("span",{style:{display:null!==q?"grid":"none"},className:"error",children:null===q||void 0===q?void 0:q.message}),Object(r.jsx)("span",{style:{display:null!==i?"grid":"none"},className:"error",children:null===i||void 0===i?void 0:i.message}),Object(r.jsx)("input",{autoComplete:"tel-local",type:"tel",placeholder:"123-456-7890",value:j,onChange:function(e){return C(e.target.value)},disabled:!!O}),O&&Object(r.jsx)("div",{className:"phone-number-input",children:Object(r.jsx)("input",Object(d.a)({ref:S,autoComplete:"one-time-code",placeholder:"Secret Code"},"ref",S))}),Object(r.jsxs)("div",{className:"phone-number-input",children:[!O&&Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:R,children:"Login"}),Object(r.jsx)("button",{onClick:E,children:"Register"})]}),O&&Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("button",{onClick:y,children:"Submit!"})})]})]}),Object(r.jsx)("div",{className:"grid",children:Object(r.jsx)("img",{src:Ke,style:{width:"min(35vw, 150px)"}})}),Object(r.jsxs)("section",{children:[Object(r.jsx)("h3",{children:"About Us"}),Object(r.jsx)("hr",{}),Object(r.jsx)("b",{children:"Why A Journal?"}),Object(r.jsx)("p",{children:"Journaling provides anyone with a structure to deeper understand themselves and their emotional wellbeing. Oftentimes describing a situation or emotion in writing provides a sense of clarity not found in other ways. Also available to you is a place to write down skills you have learned along the way."}),Object(r.jsx)("b",{children:"How Does It Work?"}),Object(r.jsx)("p",{children:'To start, register an account with your phone number. You will be texted a secret code. Enter that and... well that\'s it, you now have your very own journal! To put it simply, you write details about your life in your journal. Again, but in more detail, you can structure your journal in different ways. Journal entries are formatted as "question and answer". All journal entries automatically include the date and time of writing and can be found listed in chronological order.'})]}),Object(r.jsxs)("section",{children:[Object(r.jsx)("h3",{children:"Terms of Service"}),Object(r.jsx)("hr",{}),Object(r.jsx)("b",{children:"Privacy"}),Object(r.jsx)("p",{children:"None of your information (journal entries, metrics, skills, phone number, etc) will be publicly available nor will it be shared unless you explicitly share it."}),Object(r.jsx)("b",{children:"Sharing"}),Object(r.jsx)("p",{children:"By nature of being a journaling application, the contained subject matter will often be sensitive information. With this application, you can share your journal with anyone. However, it is recommended for, and with intention of, sharing with medical professionals only. In the case of abuse of this feature deemed detrimental to the health of another individual, we retain the right to terminate your account."})]})]})}var Lt=175;function Wt(e){var t=e.start,n=e.size;return Object(r.jsx)("circle",{fill:"transparent",cx:375,cy:250,r:Lt,strokeWidth:17.5,strokeDasharray:"".concat(2*Math.PI*Lt),strokeDashoffset:"".concat(2*Math.PI*Lt*(100-n)/100),style:{transformOrigin:"center",transform:"rotate(".concat(360*t/100-90,"deg)")}})}function Ht(e){var t=e.data,n=void 0===t?[]:t;return Object(r.jsxs)("svg",{className:"pie-chart",viewBox:"0 0 ".concat(750," ").concat(500),children:[Object(r.jsx)("g",{className:"the-pie",children:n.map((function(e){return Object(r.jsx)(Wt,Object(j.a)({},e))}))}),Object(r.jsx)("g",{className:"legend",children:n.map((function(e,t){return Object(r.jsx)("text",{textAnchor:"middle",x:375,y:25*n.length*(t-(n.length-1)/2)/((n.length-1)/2)+250,children:e.label})}))})]})}var Bt=750,Vt=500,Qt=35,Ut=125,Gt=864e5;function _t(e,t){var n=t.toLowerCase();return e.includes(n)?e.filter((function(e){return e!==n})):e.length<4?[].concat(Object(m.a)(e),[n]):e}function Kt(){var e=Ae().journal.entries,t=Object(c.useState)([]),n=Object(f.a)(t,2),a=n[0],i=n[1],s=Object(c.useReducer)(_t,[]),o=Object(f.a)(s,2),u=o[0],l=o[1],d=Object(c.useState)([]),j=Object(f.a)(d,2),h=j[0],b=j[1],p=Object(c.useState)(new Date),x=Object(f.a)(p,2),O=x[0],g=x[1],v=Object(c.useState)(new Date),w=Object(f.a)(v,2),y=w[0],k=w[1],S=Object(c.useState)(1),C=Object(f.a)(S,2),N=C[0],M=C[1],A=function(e){return e/N};Object(c.useEffect)((function(){if(0!==e.length){var t=e.map((function(e){return Object.assign(e,{date:_(e.date)})}));t=(t=t.sort((function(e,t){return e.date-t.date}))).map((function(e){var t=e.list.map((function(e){return"questions"===e.entryType|!e.entryType?e.answers.join(" "):"freeform"===e.entryType?e.freeform:""})).join(" ").toLowerCase();return Object.assign(e,{text:t})})),i(t),g(t[0].date),k(t[t.length-1].date)}}),[e]),Object(c.useEffect)((function(){for(var e=Math.floor((y.getTime()-O.getTime())/Gt),t=u.map((function(){return new Array(e).fill(0)})),n=0,r=0;r<e;r++){if(!(new Date(O.getTime()+r*Gt)<a[n].date)){for(var c=0;c<t.length;c++)t[c][r]=a[n].text.split(u[c]).length-1;n++}}var i=Math.max.apply(Math,Object(m.a)(t.flat()));i<1&&(i=1),M(i),b(t)}),[u]);return Object(r.jsxs)("figure",{className:"keywords",children:[Object(r.jsx)("figcaption",{children:"Keyword Search"}),Object(r.jsx)("section",{className:"keyword-container",children:Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==e.target.elements.keyword.value.trim()&&(l(e.target.elements.keyword.value),e.target.elements.keyword.value="")},className:"keyword-search",children:[Object(r.jsx)("input",{name:"keyword",placeholder:"keyword",autoComplete:"off"}),Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"submit",hidden:!0})," ",Object(r.jsx)("img",{src:Le})]})]})}),Object(r.jsxs)("svg",{className:"keyword-chart",viewBox:"0 0 ".concat(Bt," ").concat(Vt),children:[Object(r.jsxs)("g",{className:"keyword-chart-axis",children:[Object(r.jsx)("line",{x1:Qt,x2:715,y1:465,y2:465}),Object(r.jsx)("line",{x1:Qt,x2:Qt,y1:465,y2:160}),Object(r.jsx)("text",{x:17.5,y:465,textAnchor:"middle",children:"0"}),Object(r.jsx)("text",{x:17.5,y:160,textAnchor:"middle",children:N}),Object(r.jsx)("text",{x:87.5,y:491.25,textAnchor:"middle",children:Q(O)}),Object(r.jsx)("text",{x:662.5,y:491.25,textAnchor:"middle",children:Q(y)}),Object(r.jsx)("g",{className:"keyword-chart-labels",children:u.map((function(e,t){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("rect",{x:Qt+t*Bt/4,width:187.5,y:95,height:50,fill:"transparent",stroke:"transparent",onClick:function(){return l(e)}}),Object(r.jsx)("text",{textAnchor:"middle",x:Qt+(t+.5)*Bt/4,y:Ut,onClick:function(){return l(e)},children:e})]})}))})]}),h.map((function(e,t){return Object(r.jsx)("g",{className:"keyword-trendline-".concat(t+1),children:e.map((function(t,n){return n===e.length-1?null:Object(r.jsx)("line",{x1:Qt+680*n/e.length,x2:Qt+680*(n+1)/e.length,y1:465-305*A(t),y2:465-305*A(e[n+1])})}))},"keyword-trendline-".concat(u[t]))}))]},"keyword-chart")]})}function Xt(e){var t=e.number;return Object(r.jsxs)("svg",{viewBox:"0 0 100 100",className:"number-counter",children:[Object(r.jsx)("rect",{x:10,y:10,width:80,height:80,rx:5}),Object(r.jsx)("text",{textAnchor:"middle",x:50,y:65,children:t})]})}var Zt=function(){var e=new Date;return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),[new Date(e.getFullYear(),e.getMonth(),e.getDate()-7),e]},$t=function(){var e=Zt(),t=Object(f.a)(e,2),n=t[0],r=t[1];return function(e){return e<r&&e>n}};function en(){var e=Ae(),t=e.journal,n=t.entryList,a=t.entries,i=(t.setFilters,e.router.redirect,$t()),s=Zt(),o=(Object(f.a)(s,1)[0],Object(c.useState)("...")),u=Object(f.a)(o,2),l=u[0],d=u[1];return Object(c.useEffect)((function(){n.length&&d(""+n.filter((function(e){return i(e.start)})).length)}),[a]),Object(r.jsxs)("figure",{children:[Object(r.jsxs)("figcaption",{children:["Entries",Object(r.jsx)("br",{}),"(Past Week)"]}),Object(r.jsx)(Xt,{number:l})]})}function tn(){var e=Ae().journal,t=e.entryList,n=e.entries,a=$t(),i=Object(c.useState)("..."),s=Object(f.a)(i,2),o=s[0],u=s[1];return Object(c.useEffect)((function(){if(t.length){var e=t.filter((function(e){return a(e.start)})).reduce((function(e,t){return e+("questions"===t.entryType?t.questions.length:0)}),0);u(e)}}),[n]),Object(r.jsxs)("figure",{children:[Object(r.jsxs)("figcaption",{children:["Questions Answered",Object(r.jsx)("br",{}),"(Past Week)"]}),Object(r.jsx)(Xt,{number:o})]})}function nn(){var e=Ae().journal,t=e.entryList,n=e.entries,a=Object(c.useState)("..."),i=Object(f.a)(a,2),s=i[0],o=i[1];return Object(c.useEffect)((function(){if(n.length){var e=n.map((function(e){return new Date(e.list[0].start)})),r=new Date(Math.min.apply(Math,Object(m.a)(e)));r=new Date(r.getFullYear(),r.getMonth(),r.getDate());var c=new Date,a=((c=new Date(c.getFullYear(),c.getMonth(),c.getDate()))-r)/864e5,i=t.length/a;o(i.toFixed(1))}}),[n]),Object(r.jsxs)("figure",{children:[Object(r.jsxs)("figcaption",{children:["Entries",Object(r.jsx)("br",{}),"(Per Day)"]}),Object(r.jsx)(Xt,{number:s})]})}function rn(){var e=Ae().skills.skills,t=Object(c.useState)("..."),n=Object(f.a)(t,2),a=n[0],i=n[1];return Object(c.useEffect)((function(){e&&e.length&&i(e.reduce((function(e,t){return e+t.list.length}),0))}),[e]),Object(r.jsxs)("figure",{children:[Object(r.jsxs)("figcaption",{children:["Your Skills",Object(r.jsx)("br",{}),"(All Time)"]}),Object(r.jsx)(Xt,{number:a})]})}function cn(e){var t=e.key,n=e.time,c=e.i,a=e.hourlyMax,i=e.onClick,s=n.filter((function(e){return"questions"===e.entryType||!e.entryType})).length,o=n.filter((function(e){return"freeform"===e.entryType})).length,u=n.filter((function(e){return"audio"===e.entryType})).length,l=s+o+u,d=[u/l,o/l,s/l],f=610,h=61/24,b={x:70+h+c*f/24,width:24.145833333333336},p=430-330*n.length/a,m=330*n.length/a,x=[Object(j.a)(Object(j.a)({},b),{},{key:"bar-".concat(c,"-breakdown-",0),y:p,height:d.length>0?d[0]*m:0}),Object(j.a)(Object(j.a)({},b),{},{key:"bar-".concat(c,"-breakdown-",1),y:d.length>0?p+d[0]*m:p,height:d.length>0?d[1]*m:0}),Object(j.a)(Object(j.a)({},b),{},{key:"bar-".concat(c,"-breakdown-",2),y:d.length>0?p+(1-d[2])*m:0,height:d.length>0?d[2]*m:0})];return x=(x=x.map((function(e){return isNaN(e.height)?Object(j.a)(Object(j.a)({},e),{},{height:0}):e}))).map((function(e){return isNaN(e.y)?Object(j.a)(Object(j.a)({},e),{},{y:0}):e})),Object(r.jsxs)("g",{className:"bar-chart-bar",onClick:i,children:[Object(r.jsx)("g",{className:"bar-chart-bar-group",children:x.map((function(e){return Object(r.jsx)("rect",Object(j.a)({},e))}))}),Object(r.jsxs)("text",{style:{transformOrigin:"".concat(100*(70+(c-.5)*f/24)/Bt,"% ").concat(98,"%")},className:"bar-chart-bar-label",textAnchor:"center",x:70+(c-.5)*f/24,y:465,children:[c%12||12,c>11?"PM":"AM"]})]},t)}var an=Object(c.memo)(cn),sn=function(e,t){return e[new Date(t.start).getHours()].push(t),e},on=function(){var e=Ae(),t=e.journal,n=t.entryList,a=t.setFilters,i=e.router.redirect,s=Object(c.useState)(null),o=Object(f.a)(s,2),d=o[0],j=o[1],h=Object(c.useState)(null),b=Object(f.a)(h,2),p=b[0],m=b[1],x=function(e){return Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a([{type:"time",value:{mode:"after",time:"".concat(e%12||12,":00 ").concat(e<12?"am":"pm")}},{type:"time",value:{mode:"before",time:"".concat((e+1)%12||12,":00 ").concat(e+1<12?"am":"pm")}}]),i("/?page=journal");case 2:case"end":return t.stop()}}),t)})))};return Object(c.useEffect)((function(){var e=n.reduce(sn,new Array(24).fill(1).map((function(){return[]})));m(e.reduce((function(e,t){return t.length>e?t.length:e}),1)),j(e)}),[n]),null!==p&&d?Object(r.jsxs)("figure",{className:"time-of-day",children:[Object(r.jsx)("figcaption",{children:"Entries By Time Of Day"}),Object(r.jsxs)("svg",{viewBox:"0 0 ".concat(Bt," ").concat(Vt),children:[Object(r.jsx)("line",{x1:70,y1:430,x2:680,y2:430}),Object(r.jsx)(an,{time:d[0],i:0,hourlyMax:p,onClick:x(0)}),Object(r.jsx)(an,{time:d[1],i:1,hourlyMax:p,onClick:x(1)}),Object(r.jsx)(an,{time:d[2],i:2,hourlyMax:p,onClick:x(2)}),Object(r.jsx)(an,{time:d[3],i:3,hourlyMax:p,onClick:x(3)}),Object(r.jsx)(an,{time:d[4],i:4,hourlyMax:p,onClick:x(4)}),Object(r.jsx)(an,{time:d[5],i:5,hourlyMax:p,onClick:x(5)}),Object(r.jsx)(an,{time:d[6],i:6,hourlyMax:p,onClick:x(6)}),Object(r.jsx)(an,{time:d[7],i:7,hourlyMax:p,onClick:x(7)}),Object(r.jsx)(an,{time:d[8],i:8,hourlyMax:p,onClick:x(8)}),Object(r.jsx)(an,{time:d[9],i:9,hourlyMax:p,onClick:x(9)}),Object(r.jsx)(an,{time:d[10],i:10,hourlyMax:p,onClick:x(10)}),Object(r.jsx)(an,{time:d[11],i:11,hourlyMax:p,onClick:x(11)}),Object(r.jsx)(an,{time:d[12],i:12,hourlyMax:p,onClick:x(12)}),Object(r.jsx)(an,{time:d[13],i:13,hourlyMax:p,onClick:x(13)}),Object(r.jsx)(an,{time:d[14],i:14,hourlyMax:p,onClick:x(14)}),Object(r.jsx)(an,{time:d[15],i:15,hourlyMax:p,onClick:x(15)}),Object(r.jsx)(an,{time:d[16],i:16,hourlyMax:p,onClick:x(16)}),Object(r.jsx)(an,{time:d[17],i:17,hourlyMax:p,onClick:x(17)}),Object(r.jsx)(an,{time:d[18],i:18,hourlyMax:p,onClick:x(18)}),Object(r.jsx)(an,{time:d[19],i:19,hourlyMax:p,onClick:x(19)}),Object(r.jsx)(an,{time:d[20],i:20,hourlyMax:p,onClick:x(20)}),Object(r.jsx)(an,{time:d[21],i:21,hourlyMax:p,onClick:x(21)}),Object(r.jsx)(an,{time:d[22],i:22,hourlyMax:p,onClick:x(22)}),Object(r.jsx)(an,{time:d[23],i:23,hourlyMax:p,onClick:x(23)}),Object(r.jsxs)("g",{className:"bar-chart-text",children:[Object(r.jsx)("text",{x:83.33333333333333,y:50,children:"Questions"}),Object(r.jsx)("text",{x:3e3/9,y:50,children:"Freeform"}),Object(r.jsx)("text",{x:5250/9,y:50,children:"Audio"})]})]},"time-of-day-svg")]}):null},un=new Date;un=new Date(un.getFullYear(),un.getMonth(),un.getDate()+1);var ln=864e5;var dn={boolean:Object(c.memo)((function(e){var t=e.mezs,n=e.metric;if(!t.length)return Object(r.jsx)("p",{children:"No measurements yet!"});var c,a=t.filter((function(e){return"Yes"===e.measurement})).length,i=t.filter((function(e){return"No"===e.measurement})).length,s=0;"daily"===n.frequency&&(c=t[0].measuredAt,s=Math.ceil((un.getTime()-c.getTime())/ln)-a-i),"weekly"===n.frequency&&(s=function(e){return Math.ceil((un.getTime()-e.getTime())/6048e5)}(t[0].measuredAt)-a-i),"monthly"===n.frequency&&(s=function(e){return 12*(un.getFullYear()-e.getFullYear())+un.getMonth()-e.getMonth()}(t[0].measuredAt)-a-i);var o=a+i+s,u=[{label:"Yes",size:100*a/o,start:0},{label:"No",size:100*i/o,start:100*a/o}];return s&&u.push({label:"Blank",size:100*s/o,start:100-100*s/o}),Object(r.jsx)(Ht,{data:u})})),number:Object(c.memo)((function(e){var t=e.mezs,n=e.onClick,c=e.metric;if(!t.length)return Object(r.jsx)("p",{children:"No measurements yet!"});var a=[t[0].measuredAt,un],i=function(e){return Qt+680*(e-a[0])/(a[1]-a[0])},s=c.range,o=function(e){return Qt+(430-430*(e-s[0])/(s[1]-s[0]))};return Object(r.jsxs)("svg",{className:"single-metrix-graph",viewBox:"0 0 ".concat(Bt," ").concat(Vt),children:[Object(r.jsxs)("g",{className:"single-metrix-axis",children:[Object(r.jsx)("line",{x1:i(a[0]),x2:i(a[1]),y1:o(s[0]),y2:o(s[0])}),Object(r.jsx)("line",{x1:i(a[0]),x2:i(a[0]),y1:o(s[0]),y2:o(s[1])}),Object(r.jsx)("text",{x:i(a[0])-Qt,y:o(s[0]),textAnchor:"start",children:s[0]}),Object(r.jsx)("text",{x:i(a[0])-Qt,y:o(s[1]),textAnchor:"start",children:s[1]}),Object(r.jsx)("text",{x:i(a[0])+Qt,y:o(s[0])+Qt,textAnchor:"middle",children:Q(a[0])}),Object(r.jsx)("text",{x:i(a[1])-Qt,y:o(s[0])+Qt,textAnchor:"middle",children:Q(a[1])}),!!c.unitLabel&&Object(r.jsx)("text",{style:{transform:"rotate(-90deg) scale(0.8)",transformOrigin:"".concat(100*.07/2,"% ",50,"%")},x:17.5,y:250,textAnchor:"middle",children:c.unitLabel})]}),Object(r.jsx)("g",{children:t.map((function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("circle",{style:{transformOrigin:"".concat(100*i(e.measuredAt)/Bt,"% ").concat(93,"%")},onClick:n(e),cx:i(e.measuredAt),cy:o(e.measurement),r:6},"metrix-graph-circle-".concat(e.id)),Object(r.jsxs)("text",{x:i(e.measuredAt)>175?i(e.measuredAt)-2.25:i(e.measuredAt)+78.75,y:o(e.measurement)<140?o(e.measurement)+17.5:o(e.measurement)-17.5,textAnchor:"middle",children:[Q(e.measuredAt)," - ",e.measurement]})]})}))})]})}))};function jn(){var e=Ae(),t=e.metrix,n=t.metrix,a=t.setSingleMetrix,i=t.setSingleMeasurement,s=t.measurements,o=e.router.redirect,u=Object(c.useState)(null),l=Object(f.a)(u,2),d=l[0],j=l[1],h=Object(c.useState)(!1),b=Object(f.a)(h,2),p=b[0],m=b[1];if(Object(c.useEffect)((function(){n.length&&s.length&&j(0)}),[n,s]),null===d)return null;var x=n[d],O=s.filter((function(e){return e.metric===n[d].id})).sort((function(e,t){return e.measuredAt-t.measuredAt})),g=dn[x.unit];return Object(r.jsxs)("figure",{className:"single-metrix-carousel",children:[Object(r.jsxs)("figcaption",{children:[p&&Object(r.jsxs)(r.Fragment,{children:["Switch to another metrix:",Object(r.jsx)("br",{}),Object(r.jsxs)("select",{onChange:function(e){j(e.target.value),m(!1)},children:[Object(r.jsx)("option",{value:d}),n.filter((function(e){return e.id!==x.id})).map((function(e){return Object(r.jsx)("option",{value:n.indexOf(e),children:e.prompt},"metrix-carousel-select-".concat(e.id))}))]})]}),!p&&Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{children:x.prompt}),Object(r.jsx)("span",{onClick:m,children:Object(r.jsx)("img",{style:{cursor:"pointer"},src:Ie})})]})]}),Object(r.jsx)(g,{onClick:function(e){return function(){a(n[d]),i(e),o("/?page=metrix")}},metric:x,mezs:O})]})}var fn=function(e,t){return e[t.entryType]?e[t.entryType].push(t):e[t.entryType]=[t],e};function hn(){var e=Ae().journal.entryList,t=Object(c.useState)(null),n=Object(f.a)(t,2),a=n[0],i=n[1];if(Object(c.useEffect)((function(){i(function(e){for(var t=e.reduce(fn,{}),n=Object.keys(t),r=[];n.length>0;){var c=n.pop(),a=0===r.length?0:r[0].start+r[0].size,i=100*t[c].length/e.length;r.unshift({label:c,start:a,size:i})}return r}(e))}),[e]),!a)return null;var s=[Object(r.jsx)(on,{}),Object(r.jsxs)("figure",{className:"type-of-entry",children:[Object(r.jsx)("figcaption",{children:"Entries By Type"}),Object(r.jsx)(Ht,{data:a})]}),Object(r.jsx)(Kt,{}),Object(r.jsx)(jn,{})];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"row two-items",children:[s[1],s[0]]}),Object(r.jsx)("div",{className:"row one-item",children:s[3]}),Object(r.jsxs)("div",{className:"row four-items",children:[Object(r.jsx)(tn,{}),Object(r.jsx)(en,{}),Object(r.jsx)(nn,{}),Object(r.jsx)(rn,{})]}),Object(r.jsx)("div",{className:"row one-item",children:s[2]})]})}var bn=function(){var e=Ae(),t=e.auth.user,n=e.router.page,c=e.journal.entryList,a=e.viewMode,i=a.isViewOnly,s=a.scope;return t?i&&-1===s.indexOf("dashboard")||"dashboard"!==n?null:c.length<10?Object(r.jsxs)("main",{children:[Object(r.jsx)(h,{children:"Dashboard"}),Object(r.jsxs)(p,{children:["Unlock ",Object(r.jsx)("span",{style:{display:"inline-block",marginInline:"var(--body-text-size)",width:"var(--h3-font-size)"},children:Object(r.jsx)("img",{style:{width:"100%"},src:Ue})})," the dashboard when you make 10 journal entries!"]}),Object(r.jsxs)(p,{children:["Only ",10-c.length," entries to go!"]}),Object(r.jsx)(ft,{className:"large"}),Object(r.jsx)(p,{children:"It's only a matter of time!"})]}):Object(r.jsxs)("main",{className:"dashboard",children:[Object(r.jsx)(h,{children:"Dashboard"}),Object(r.jsx)(hn,{})]}):null};n(254);function pn(){var e=Ae(),t=e.auth.user,n=e.router.page,a=e.metrix,i=a.metrix,s=a.measurements,o=a.singleMeasurement,d=a.getMeasurements,b=a.singleMetrix,p=a.setSingleMetrix,m=a.setSingleMeasurement,x=a.updateMeasurement,O=a.measureHistoric,g=Object(c.useState)([]),v=Object(f.a)(g,2),w=v[0],y=v[1],k=Object(c.useState)([]),S=Object(f.a)(k,2),C=S[0],N=S[1],M=Object(c.useState)([]),A=Object(f.a)(M,2),F=A[0],D=(A[1],Object(c.useState)(!1)),T=Object(f.a)(D,2),P=(T[0],T[1]),q=Object(c.useState)(!1),I=Object(f.a)(q,2),z=I[0],E=I[1];Object(c.useEffect)((function(){w.length&&P(F.length===w.length)}),[F]);var R=Object(c.useState)(o?o.id:null),Y=Object(f.a)(R,2),J=Y[0],L=Y[1],W=Object(c.useState)(o?o.measurement:null),H=Object(f.a)(W,2),B=H[0],V=H[1],U=Object(c.useState)(null),_=Object(f.a)(U,2),K=_[0],Z=_[1],$=Object(c.useRef)(),ee=function(){var e=$.current.innerText;"number"===b.unit&&((e=parseFloat(e))<b.range[0]||e>b.range[1])&&Z("Number must be between ".concat(b.range[0]," and ").concat(b.range[1]," in increments of ").concat(b.step)),"boolean"===b.unit&&"Yes"!==e&&"No"!==e&&Z("Must be Yes/No answer"),V(e)},te=function(){var e=C.filter((function(e){return e.id===J}))[0];$.current&&($.current.innerText=e.measurement),V(null),L(null),Z(null)};return Object(c.useEffect)((function(){var e;o&&(V((e=o).measurement),L(e.id),Z(null))}),[o]),Object(c.useEffect)((function(){if(b&&b.id){var e=s.filter((function(e){return e.metric===b.id})).sort((function(e,t){return t.measuredAt-e.measuredAt}));if(0===e.length)return y(e),void N([]);if("as needed"===b.frequency&&(y(e),N(e.map((function(e){return{mez:e,id:e.id,date:Q(e.measuredAt),time:G(e.measuredAt),measurement:e.measurement||e.value}})))),"daily"===b.frequency){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=new Date(e);n=new Date(n.getFullYear(),n.getMonth(),n.getDate());for(var r=new Date(t.getFullYear(),t.getMonth(),t.getDate()),c=[];n<=r;)c.splice(0,0,n),n=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1);return c}(e[e.length-1].measuredAt),n=t.map((function(t){return e.find((function(e){return n=t,(r=e.measuredAt)>=n&&r.getTime()-n.getTime()<X;var n,r}))}));y(e),N(n.map((function(e,n){return e?{mez:e,id:e.id,date:Q(e.measuredAt),time:e.isHistoric?"N/A":G(e.measuredAt),measurement:e.measurement||e.value}:{mez:{id:"__".concat(b.id,"-").concat(n),measurement:""},id:"__".concat(b.id,"-").concat(n),date:Q(t[n]),time:"...",measurement:"",dateObj:t[n]}})))}if("weekly"===b.frequency){var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=new Date(e);n=new Date(n.getFullYear(),n.getMonth(),n.getDate()-n.getDay());for(var r=new Date(t.getFullYear(),t.getMonth(),t.getDate()),c=[];n<=r;)c.splice(0,0,n),n=new Date(n.getFullYear(),n.getMonth(),n.getDate()+7);return c}(e[e.length-1].measuredAt),c=r.map((function(t){return e.find((function(e){return n=t,(r=e.measuredAt)>=n&&r.getTime()-n.getTime()<6048e5;var n,r}))}));y(e),N(c.map((function(e,t){return e?{mez:e,id:e.id,date:Q(e.measuredAt),time:e.isHistoric?"N/A":G(e.measuredAt),measurement:e.measurement||e.value}:{mez:{id:"__".concat(b.id,"-").concat(t),measurement:""},id:"__".concat(b.id,"-").concat(t),date:Q(r[t]),time:"...",measurement:"",dateObj:r[t]}})))}if("montly"===b.frequency){var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=new Date(e);n=new Date(n.getFullYear(),n.getMonth(),0);for(var r=new Date(t.getFullYear(),t.getMonth(),t.getDate()),c=[];n<=r;)c.splice(0,0,n),n=new Date(n.getFullYear(),n.getMonth()+1,0);return c}(e[e.length-1].measuredAt),i=a.map((function(t){return e.find((function(e){return n=t,(r=e.measuredAt).getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth();var n,r}))}));y(e),N(i.map((function(e,t){return e?{mez:e,id:e.id,date:Q(e.measuredAt),time:e.isHistoric?"N/A":G(e.measuredAt),measurement:e.measurement||e.value}:{mez:{id:"__".concat(b.id,"-").concat(t),measurement:""},id:"__".concat(b.id,"-").concat(t),date:Q(a[t]),time:"...",measurement:"",dateObj:a[t]}})))}}}),[b,s]),t&&"metrix"===n?b?Object(r.jsxs)("main",{className:"single-metrix",children:[Object(r.jsx)("header",{children:Object(r.jsx)(h,{short:"Metrix",children:"Metrix History"})}),Object(r.jsxs)("div",{className:"single-metrix-info",children:[Object(r.jsx)("p",{children:Object(r.jsxs)("span",{children:[b.prompt,b.unitLabel?" ".concat(b.unitLabel):""]})}),Object(r.jsx)("p",{children:Object(r.jsxs)("span",{children:["Recorded ",b.frequency]})}),z&&Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{children:Object(r.jsxs)("select",{onChange:function(e){p(i.find((function(t){return t.id===e.target.value}))),E(!1)},children:[Object(r.jsx)("option",{value:null===b||void 0===b?void 0:b.id,children:"-- select metrix --"}),i.filter((function(e){return e!==b})).map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.prompt},"metrix-history-select-".concat(e.id))}))]})}),Object(r.jsx)("span",{onClick:function(){return E(!1)},children:Object(r.jsx)("img",{style:{cursor:"pointer"},src:qe})})]}),!z&&Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{children:"Review Another Metrix"}),Object(r.jsx)("span",{onClick:function(){return E(!0)},children:Object(r.jsx)("img",{style:{cursor:"pointer"},src:Ie})})]})]}),0===C.length&&Object(r.jsx)("p",{className:"text-center",children:"No measurements yet!"}),C.length>0&&Object(r.jsxs)("ul",{className:"metrix-history",children:[Object(r.jsxs)("li",{className:"metrix-history-header",children:[Object(r.jsx)("span",{children:"Date"}),Object(r.jsx)("span",{children:"Time"}),Object(r.jsx)("span",{children:"Measurement"})]}),C.map((function(e){var t,n=e.mez,c=e.id,a=e.date,i=e.time,s=e.measurement,o=e.dateObj;return Object(r.jsxs)("li",{className:"metrix-measurement ".concat(J===c?"editing":""),children:[Object(r.jsx)("span",{children:a}),Object(r.jsx)("span",{children:i}),Object(r.jsxs)("div",{children:[Object(r.jsx)("p",Object(j.a)(Object(j.a)({onBlur:ee},{ref:J===c?$:null}),{},{contentEditable:c===J,children:J===c?B:s})),J===c&&Object(r.jsx)("span",{onClick:(t=o,Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!K){e.next=2;break}return e.abrupt("return");case 2:if(!(null===J||void 0===J?void 0:J.startsWith("__"))){e.next=5;break}return e.next=5,O(b,B,t);case 5:if(null===J||void 0===J?void 0:J.startsWith("__")){e.next=8;break}return e.next=8,x(J,B);case 8:setTimeout(d,500),Z(null),V(null),L(null);case 12:case"end":return e.stop()}}),e)})))),children:Object(r.jsx)("img",{src:Qe})}),K&&J===c&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("br",{}),Object(r.jsx)("p",{style:{width:"100%"},className:"error",children:K})]})]}),Object(r.jsxs)("span",{onClick:J===c?te:function(){return m(n)},className:"metrix-more",children:[J!==n.id&&Object(r.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAvCAYAAABzJ5OsAAAABmJLR0QAWQCqAL2tfwFCAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH5AwcFAYk70i+6QAAAhhJREFUaN7t2btrFFEUx/GPWR9NFIy2loIiaSQiPjpt1NgJGttELK0tBQUfVTor0bSi4gMRbMVOlPwBESEoKmgaFfERi53Bw7C72TG690bmwGWXO4fL93fnt7NnzmUFx6pMONbhIHZiLebwEG9z38DDeIXFyviC82jlCn4KPwLwV3yoiLhX3JmsYiqAv8dEYRkYxZMg4EFOAiYD+Dy2dshZg1u5CZisWOVajwdHVcD9lL+BqQp4OaZrCDiXGnweu/GshoCnRd4njKQELz0+UkPAWMg7kRpcTQEtfC5yzuYAXkfAhrDWmVzA+xVwOlzbmxP4UgJGsVDMzWIoN/BuAmbwLpQPe3IFL2NjRcAivuHYIIqs5YCXsX9Q4PEv/w22L3O9bXhdrPe9KNoa8Aa8AW/AG/AGvAFPDn4IP/9irbJDu333z2sVuBMKoxfYtFLA14f3xShgc85WKWMiQN8N35/XvAMD3fGqZV4Wr2EX/uAODHzHYThY5nKYryMgCTicDJC7Ktf6EZAMvJNl1BCQFDxa5lKPvE4CkoLT7gF2s0w1roTc2RRPlWqUreQ5Sx+2tfBokO2Jfi1zsUvOUNGSmC5qnQiexCqdLDNW2eEDuBo6V3F8xHXskzBuB8u0euxwCTyDo34fgiWLaJn5Hjt8A0dyAI5xvANsBB7PDRhWF59bwtyC9sHtTTzW7sxmHcPapw3jMjxt/i/jF9CzX+22W/9hAAAAAElFTkSuQmCC"}),J===n.id&&Object(r.jsx)("img",{src:qe})]})]},"single-metrix-measurement-".concat(c))}))]})]}):Object(r.jsxs)("main",{className:"single-metrix",children:[Object(r.jsx)("header",{children:Object(r.jsx)(h,{children:"Metrix"})}),Object(r.jsxs)("div",{className:"single-metrix-info",children:[Object(r.jsx)("p",{children:Object(r.jsx)("span",{children:"Select Metrix to Review"})}),Object(r.jsx)("p",{children:Object(r.jsxs)("select",{onChange:function(e){return p(i.find((function(t){return t.id===e.target.value})))},children:[Object(r.jsx)("option",{value:null===b||void 0===b?void 0:b.id}),i.filter((function(e){return e!==b})).map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.prompt},"metrix-history-select-".concat(e.id))}))]})})]}),Object(r.jsx)("p",{className:"text-center",children:Object(r.jsx)("b",{children:"Once you select a metric to review, it's history will show up here!"})})]}):null}var mn=function(){var e=Ae(),t=e.router.params,n=e.sharing.sharedWithMe,r=e.viewSharedJournal;return Object(c.useEffect)((function(){if(console.log(t,n),n&&n.length&&t.get("share")){var e=t.get("share"),c=n.find((function(t){return t.id===e}));c&&r(c.userId,c)}}),[t,n]),null};var xn=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Jt,{}),Object(r.jsx)(zt,{}),Object(r.jsx)(st,{}),Object(r.jsx)(pt,{}),Object(r.jsx)(It,{}),Object(r.jsx)(bn,{}),Object(r.jsx)(pn,{}),Object(r.jsx)(Yt,{}),Object(r.jsx)(mn,{})]})};console.warn=function(){},console.error=function(){},s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(Fe,{children:Object(r.jsx)(xn,{})})}),document.getElementById("root"))}},[[255,1,2]]]);
//# sourceMappingURL=main.de28905c.chunk.js.map