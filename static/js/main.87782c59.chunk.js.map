{"version":3,"sources":["img/skill.svg","img/plus.svg","img/book.svg","img/settings.svg","auth.js","lib/indexing.js","lib/webaudio.js","pages/components/AudioRecorder.js","pages/components/Headers.js","pages/components/H1.js","pages/components/H2.js","pages/components/H3.js","pages/Write.js","img/search.svg","img/filter.svg","pages/components/Search.js","pages/components/Deferred.js","img/calendar.svg","img/caret-down.svg","pages/components/DateFilter.js","img/stopwatch.svg","pages/components/TimeFilter.js","pages/components/Filters.js","lib/filters.js","pages/Journal.js","lib/scrolling.js","pages/Skills.js","lib/sanitizePhoneNumber.js","pages/Settings.js","hooks/useSettings.js","hooks/useSkills.js","pages/SharedWithMe.js","lib/titles.js","lib/base.js","lib/defaultSettings.js","lib/pendingActions.js","App.js","hooks/useJournal.js","hooks/useSharing.js","hooks/useQuestions.js","hooks/useAuth.js","index.js"],"names":["poolDetails","authDetails","Pool","AmazonCognitoIdentity","UserPoolId","ClientId","cognitoUser","accessToken","refreshToken","headers","get","Headers","login","Username","Promise","resolve","reject","ClientMetadata","phoneNumber","e","getCurrentUser","retrieveAccessToken","getSession","session","getAccessToken","getJwtToken","RefreshToken","getRefreshToken","getToken","signOut","a","register","attributePhoneNumber","Name","Value","customAttributeId","id","attributeList","signUp","err","result","user","customFlow","cb","onCodeSent","setAuthenticationFlowType","console","log","initiateAuth","onSuccess","r","onFailure","customChallenge","challengeParameters","answer","sendCustomChallengeAnswer","entries","fetch","method","body","post","JSON","stringify","skills","shares","questions","audios","months","days","dateShortHand","_d","Date","d","getMonth","getDate","getFullYear","toString","printDate","getDay","getTime","getHours","getMinutes","slice","runIndexEntries","arr","map","el","Object","assign","start","end","sort","b","reduce","acc","val","indexedArr","key","value","meta","found","filter","length","list","index","push","findIndex","date","audioCtx","AudioContext","window","webkitAudioContext","encoder","lame","Mp3Encoder","stream","mediaRecorder","chunks","mp3data","hasBrowserSupport","getUserMedia","navigator","mediaDevices","audio","createMediaRecorder","Error","MediaRecorder","ondataavailable","evt","data","isReadyForRecording","offset","setTimeout","stop","extract","freeze","title","unfreeze","arrayBuffer","decoded","encodeBuffer","getChannelData","Int8Array","flush","file","File","type","decodeAudioData","AudioRecorder","onChange","useState","ready","setReady","recording","setRecording","timeElapsed","setTimeElapsed","timer","setTimer","setFile","setTitle","isPaused","setIsPaused","useEffect","WebAudio","startRecording","resume","setInterval","time","stopRecording","clearInterval","blob","pause","reset","recorderRef","useRef","ref","className","Math","floor","onClick","target","defaultValue","controls","src","URL","createObjectURL","H1","props","children","short","H2","H3","defaultQuestions","CustomQuestionSetting","question","onToggle","getSetting","Write","display","settings","createEntry","addSetting","toggle","setStart","newQuestionDialog","setNewQuestionDialog","recordingFile","recordingTitle","setRecordingTitle","Function","resetAudios","setReset","focusList","setFocusList","qaRef","ffRef","addQuestionRef","onFirstFocus","text","innerText","addQuestion","q","current","trim","createQuestion","uploadFile","filename","audioApi","fileUploadResponse","json","fileUpload","uploadUrl","ok","complete","entryType","Array","from","querySelectorAll","answers","freeform","contentEditable","onFocus","onBlur","set","state","Search","updateSearch","openFilter","onClear","undefined","query","_setQuery","onSubmit","preventDefault","placeholder","SearchIcon","FilterSVG","defferedClassName","delay","deferring","setDeferring","maxDaysIn","mm","yyyy","DateFilter","remove","setValue","mode","setMode","setMonth","dd","setDate","setYear","maxDays","setMaxDays","NaN","max","CalendarSVG","alt","style","transform","width","height","CaretSVG","min","parseInt","TimeFilter","filterTypes","minutes","_setMinutes","displayMinutes","setDisplayMinutes","hours","_setHours","displayHours","setDisplayHours","setHours","hrs","StopwatchSVG","mins","setMinutes","Filters","open","filters","setFilters","dateFilters","timeFilters","splice","setFilterValue","Filter","newFilters","fil","isInRange","is","after","before","toMinutes","entry","ceil","constructFilterList","_f","EntryHeader","isOpen","close","count","EntryContents","i","url","Journal","isNotMain","setOpen","showCount","setShowCount","isSearching","setIsSearching","setQuery","searchResults","setSearchResults","searchOnClear","setOnClear","filterDialog","setFilterDialog","filterIteration","setFilterIteration","iterate","_setFilter","cancelSearch","updateCount","top","innerHeight","scrollBy","left","behavior","runScroll","runQuery","all","freeformMatch","values","toLowerCase","match","qaMatch","qa","combined","allMatch","Deferred","indexOf","SkillSuggestions","textDecoration","margin","Skills","submitSkill","catRef","sklRef","onSubmitSkill","category","skill","padding","marginTop","sanitizePhoneNumber","number","reduced","replaceAll","attributions","ShareJourunal","shareJournal","numRef","nameRef","swnRef","phone","name","shareWithName","share","SharedByMe","sharedByMe","toggleSetting","toggleFreeze","Setting","shareWith","setting","SharedWithMe","sharedWithMe","redirect","frozen","SettingGroup","longTitle","shortTitle","relationships","charAt","affector","substring","apply","Settings","swStatus","install","uninstall","logout","setSetting","keys","k","dangerouslySetInnerHTML","__html","useSettings","defaultSettings","storage","localStorage","storedSettings","parse","getItem","currentSettings","setSettings","relation","affected","initial","changes","to","setItem","shareId","getShareById","journal","setJournal","error","setErr","titles","write","long","sharing","page","path","location","href","split","pending","handlePending","actions","forEach","action","App","passthrough","setSkills","getSkills","api","req","indexed","skls","useSkills","entryList","setEntryList","setEntries","getEntries","dict","useJournal","setSharedWithMe","setSharedByMe","getShares","getById","updated","sbm","alert","useSharing","sessionStorage","setQuestions","getQuestions","qs","nq","useQuestions","onAuth","onSessionActive","setUser","retrieveSession","reload","init","refreshSession","_register","useAuth","initialPage","URLSearchParams","search","setPage","pageData","setPageData","nextPage","history","pushState","previous","next","base","scrollY","scrollToTop","prompt","setPrompt","codeRef","v","setAnswer","promptForCode","_answer","focus","codeSent","setCodeSent","onAuthError","setAuthError","onRegisterClick","raw","onLogInClick","loadingAnimation","setLoadingAnimation","NavSkills","NavPlus","NavBook","NavSettings","message","disabled","autoComplete","warn","onLine","addEventListener","serviceWorker","startMessages","online","scope","ReactDOM","render","StrictMode","removeItem","getRegistrations","then","registrations","unregister","document","getElementById"],"mappings":"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","file":"static/js/main.87782c59.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/skill.23054f65.svg\";","export default __webpack_public_path__ + \"static/media/plus.a86e5868.svg\";","export default __webpack_public_path__ + \"static/media/book.65cd22a3.svg\";","export default __webpack_public_path__ + \"static/media/settings.d2739024.svg\";","import {v4 as id} from 'uuid';\nimport * as AmazonCognitoIdentity from 'amazon-cognito-identity-js';\n\nconst poolDetails = {\n  AppClientId: '2ac3ij97dhtkag9fljdsuo1203',\n  IdentityPool:\t'us-east-1:de5287fc-3a2d-4cad-a685-b9d5bfe936e6',\n  PoolArm: 'arn:aws:cognito-idp:us-east-1:842200175734:userpool/us-east-1_tRcA2uwF6',\n  PoolId:\t'us-east-1_tRcA2uwF6'\n}\n\nlet authDetails = null;\nlet Pool = new AmazonCognitoIdentity.CognitoUserPool ({UserPoolId: poolDetails.PoolId, ClientId: poolDetails.AppClientId});\nlet cognitoUser = null;\nlet accessToken = null;\nlet refreshToken = null;\nlet headers = {\n  get get () {\n    return new Headers ({\n      'x-amz-access-token': accessToken\n    });\n  },\n  get post () {\n    return new Headers ({\n      'x-amz-access-token': accessToken,\n      'Content-Type': 'application/json'\n    });\n  }\n}\nexport const login = (Username) => new Promise ((resolve, reject) => {\n  try {\n    authDetails = new AmazonCognitoIdentity.AuthenticationDetails ({Username, ClientMetadata: {phoneNumber: Username}});\n    cognitoUser = new AmazonCognitoIdentity.CognitoUser ({Username, Pool});\n    resolve ();\n  } catch (e) {\n    reject (e);\n  }\n});\n\nexport const getCurrentUser = () => new Promise ((resolve, reject) => {\n  try {\n    cognitoUser = Pool.getCurrentUser ();\n    resolve ();\n  } catch (e) {\n    reject (e);\n  }\n});\n\nexport const retrieveAccessToken = () => new Promise ((resolve, reject) => {\n  try {\n    if (!cognitoUser) throw 'Cognito user must be defined to get access token';\n    cognitoUser.getSession ((e, session) => {\n      if (e) return reject (e);\n      accessToken = session.getAccessToken ().getJwtToken ();\n      refreshToken = new AmazonCognitoIdentity.CognitoRefreshToken ({RefreshToken: session.getRefreshToken ().getToken ()});\n      resolve ();\n    });\n  } catch (e) {\n    reject (e);\n  }\n});\n\nexport const refreshSession = () => new Promise ((resolve, reject) => {\n  try {\n    if (!cognitoUser) throw 'Cannot refresh empty cognito user';\n    if (!refreshToken) throw 'Cannot refresh empty refresh token';\n    cognitoUser.refreshSession (refreshToken, (err, session) => {\n      if (err) return reject (err);\n      accessToken = session.getAccessToken ().getJwtToken ();\n      refreshToken = new AmazonCognitoIdentity.CognitoRefreshToken ({RefreshToken: session.getRefreshToken ().getToken ()});\n      resolve ();\n    });\n  } catch (e) {\n    reject (e);\n  }\n});\n\nexport const signOut = async () => new Promise (async (resolve, reject) => {\n  try {\n    await cognitoUser.signOut();\n    resolve ();\n  } catch (e) {\n    reject (e);\n  }\n});\n\nexport const register = async (phoneNumber) => new Promise (async (resolve, reject) => {\n  const attributePhoneNumber = new AmazonCognitoIdentity.CognitoUserAttribute ({Name: 'phone_number', Value: phoneNumber});\n  const customAttributeId = new AmazonCognitoIdentity.CognitoUserAttribute ({Name: 'custom:custom:id', Value: id ()})\n  const attributeList = [attributePhoneNumber, customAttributeId];\n  Pool.signUp (phoneNumber, id (), attributeList, null, (err, result) => {\n    if (err) return reject (err);\n    cognitoUser = result.user;\n    resolve ();\n  })\n});\n\nexport const customFlow = (phoneNumber, cb, onCodeSent) => new Promise (async (resolve, reject) => {\n  await login (phoneNumber);\n  cognitoUser.setAuthenticationFlowType ('CUSTOM_CHALLENGE');\n  console.log (cognitoUser, authDetails);\n  cognitoUser.initiateAuth (authDetails, {\n    onSuccess: r => resolve (r),\n    onFailure: e => reject (e),\n    customChallenge: function (challengeParameters) {\n      onCodeSent ();\n      cb (answer => cognitoUser.sendCustomChallengeAnswer (answer, this))\n    }\n  });\n});\n\nexport const entries = {\n  get get () {\n    return () => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries', {\n      method: 'get',\n      headers: headers.get\n    });\n  },\n  get post () {\n    return body => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries', {\n      method: 'post',\n      headers: headers.post,\n      body: JSON.stringify (body)\n    });\n  }\n}\nexport const skills = {\n  get get () {\n    return () => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills', {\n      method: 'get',\n      headers: headers.get\n    });\n  },\n  get post () {\n    return body => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills', {\n      method: 'post',\n      headers: headers.get,\n      body: JSON.stringify (body)\n    });\n  }\n}\n\nexport const shares = {\n  get get () {\n    return () => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares', {\n      method: 'get',\n      headers: headers.get\n    });\n  },\n  get getById () {\n    return id => fetch (`https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries/${id}`, {\n      method: 'get',\n      headers: headers.get\n    });\n  },\n  get post () {\n    return body => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares', {\n      method: 'post',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken,\n        'Content-Type': 'application/json'\n      }),\n      body: JSON.stringify (body)\n    });\n  },\n  get toggleFreeze () {\n    return id => fetch (`https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares/${id}`, {\n      method: 'put',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken\n      })\n    });\n  }\n}\n\nexport const questions = {\n  get get () {\n    return () => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions', {\n      method: 'get',\n      headers: headers.get\n    });\n  },\n  get post () {\n    return body => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions', {\n      method: 'post',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken,\n        'Content-Type': 'application/json'\n      }),\n      body: JSON.stringify (body)\n    });\n  }\n}\nexport const audios = {\n  get post () {\n    return body => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/audios', {\n      method: 'post',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken,\n        'Content-Type': 'application/json'\n      }),\n      body: JSON.stringify (body)\n    })\n  }\n}","export const months = [\n  'January',\n  'February',\n  'March',\n  'April',\n  'May',\n  'June',\n  'July',\n  'August',\n  'September',\n  'October',\n  'November',\n  'December'\n]\nexport const days = [\n  \"Sunday\",\n  'Monday',\n  'Tuesday',\n  'Wednesday',\n  'Thursday',\n  'Friday',\n  'Saturday'\n]\n\nexport const dateShortHand = (_d=new Date ()) => {\n  let d = new Date (_d);\n  return `${d.getMonth ()}-${d.getDate ()}-${d.getFullYear ()}`.toString ();\n}\nexport const printDate = (_d=new Date ()) => {\n  let d = new Date (_d);\n  return  `${days [d.getDay ()]}, ${months [d.getMonth ()]} ${d.getDate ()}`;\n}\nexport const getTime = (d=new Date ()) => {  \n  return `${(d.getHours () % 12 || 12)}:${`0${d.getMinutes ()}`.slice(-2)} ${d.getHours () > 11 ? 'pm' : 'am'}`;\n}\n\nexport const findIndex = (indexedArr=[], key, value, meta={}) => {\n  let found = indexedArr.filter (el => el [key] === value)\n  if (found.length > 0) return found [0].list;\n  let index = {[key]: value, meta, list: []};\n  indexedArr.push (index);\n  return index.list;\n}\n\n\nexport const runIndexEntries = (entries) => {\n  let arr = entries.map (el => Object.assign (el, {start: new Date (el.start), end: new Date (el.end)}));\n  arr.sort ((a, b) => b.start - a.start);\n  return arr.reduce ((acc, val) => {\n    findIndex (acc, 'date', dateShortHand (val.start), {date: printDate (val.start)}).push (val);\n    return acc;\n  }, []);\n}\n","import lame from 'lamejs';\n\nlet audioCtx = null;\nlet AudioContext = (window.AudioContext || window.webkitAudioContext);\nconst encoder = new lame.Mp3Encoder (1, 44100, 128000);\n\n\nlet stream = null;\nlet mediaRecorder = null;\nlet chunks = [];\nlet mp3data = [];\n\nexport const hasBrowserSupport = !!AudioContext;\n\nexport const getUserMedia = async () => new Promise (async (resolve, reject) => {\n  try {\n    stream = await window.navigator.mediaDevices.getUserMedia ({audio: true});\n    resolve ();\n  } catch (e) {\n    reject (e)\n  }\n});\nexport const createMediaRecorder = () => {\n  if (!stream) throw new Error ('no stream available to record');\n  mediaRecorder = new window.MediaRecorder (stream);\n  mediaRecorder.ondataavailable = evt => {\n    console.log (chunks);\n    chunks.push (evt.data);\n  }\n}\nexport const isReadyForRecording = () => {\n  return (!!stream && !!mediaRecorder && !!chunks);\n}\nexport const getRecorderState = () => mediaRecorder?.state;\nexport const start = async (offset=300) => new Promise (async (resolve, reject) => {\n  try {\n    audioCtx = new AudioContext ();\n    // ensure environment ready for recording\n    if (!isReadyForRecording ()) throw new Error ('Environment not set up for recording');\n    setTimeout (() => {\n      mediaRecorder.start ();\n      resolve ();\n    }, offset);\n  } catch (e) {\n    console.log (e);\n    console.log (`\n    current state:\n      stream = ${stream}\n      mediaRecorder = ${mediaRecorder}\n      chunks = ${chunks}\n    `);\n  }\n})\nexport const stop = async () => new Promise (async (resolve, reject) => {\n  try {\n    mediaRecorder.stop ();\n    setTimeout (() => resolve (), 150);\n  } catch (e) {\n    reject (e);\n    console.log (`\n    current state:\n      stream = ${stream}\n      mediaRecorder = ${mediaRecorder}\n      chunks = ${chunks}\n    `);\n  }\n});\nexport const pause = () => {\n  mediaRecorder.pause ();\n}\nexport const resume = () => {\n  mediaRecorder.resume ();\n}\nexport const extract = async (freeze, title='recording') => new Promise (async (resolve, reject) => {\n  let unfreeze = freeze ();\n  try {\n    audioCtx.decodeAudioData (await chunks [0].arrayBuffer (), decoded => {\n      mp3data.push (encoder.encodeBuffer (decoded.getChannelData (0).map (data => data * 10000)));\n      mp3data.push (new Int8Array (encoder.flush ()));\n      let file = new File (mp3data, title, {type: 'audio/mp3'});\n      unfreeze ();\n      chunks = [];\n      resolve (file);\n    });\n  } catch (e) {\n    unfreeze ();\n    reject (e);\n  }\n});","import { useEffect, useRef, useState } from 'react';\nimport {getTime, dateShortHand} from '../../lib/indexing';\nimport * as WebAudio from '../../lib/webaudio';\n\nfunction AudioRecorder ({onChange, freeze}) {\n  const [ready, setReady] = useState (false);\n  const [recording, setRecording] = useState (false);\n  const [timeElapsed, setTimeElapsed] = useState (0);\n  const [timer, setTimer] = useState (false);\n  const [file, setFile] = useState (null)\n  const [title, setTitle] = useState (`${getTime ()}-${dateShortHand ()}`);\n  const [isPaused, setIsPaused] = useState (false);\n  useEffect (() => {\n    (async () => {\n      await WebAudio.getUserMedia ()\n      WebAudio.createMediaRecorder ();\n      setReady (WebAudio.isReadyForRecording ());\n    }) ();\n  }, []);\n  const startRecording = async () => {\n    if (isPaused) return resume ();\n    await WebAudio.start ();\n    setRecording (true);\n    setTimer (window.setInterval (() => setTimeElapsed (time => time + 1), 1000));\n  }\n  const stopRecording = async () => {\n    window.clearInterval (timer);\n    setTimer (false);\n    setRecording (false);\n    setTimeElapsed (0);\n    await WebAudio.stop ();\n    let blob = await WebAudio.extract (freeze, `audio-recording-${getTime ()}-${dateShortHand ()}.mp3`);\n    setFile (blob);\n  }\n  const pause = async () => {\n    window.clearInterval (timer);\n    setIsPaused (true);\n    WebAudio.pause ();\n  }\n  const resume = async () => {\n    setTimer (window.setInterval (() => setTimeElapsed (time => time + 1), 1000));\n    setIsPaused (false);\n    WebAudio.resume ();\n  }\n  const reset = () => () => {\n    setRecording (false);\n    setTimeElapsed (0);\n    setTimer (false);\n    setFile (null);\n    setTitle (null);\n  }\n\n  useEffect (() => {\n    if (onChange) onChange ({file, title, reset});\n  }, [file, title]);\n\n  const recorderRef = useRef ();\n\n  if (!ready) return (\n    <div className=\"none\" />\n  )\n  return (\n    <div ref={recorderRef} className=\"recorder-container grid text-center\">\n      {\n        (!recording && !file) &&\n        <p>Click \"Record\" to speak your journal entry!</p>\n      }\n      {\n        (recording && !file) &&\n        <div className=\"timer\"><span>{Math.floor (timeElapsed / 60)}:{`00${timeElapsed % 60}`.slice (-2)}</span></div>}\n      {\n        ((!recording || isPaused) && !file) &&\n        <div>\n          <button onClick={isPaused ? resume : startRecording}>{isPaused ? 'Resume' : 'Record'}</button>\n          {\n            isPaused &&\n            <button onClick={stopRecording}>Finish</button>\n          }\n        </div>\n      }\n      {\n        ((recording && !isPaused) && !file)&&\n        <>\n          <div>\n            <button onClick={stopRecording}>Stop</button>\n            <button onClick={pause}>Pause</button>\n          </div>\n        </>\n      }\n      {\n        file &&\n        <>\n          <figure className=\"audio-recording\">\n            <figcaption>\n              <p>\n                Title:&nbsp;&nbsp;&nbsp;\n                <input className=\"audio-title-input\" onChange={e => setTitle (e.target.value)} defaultValue={title} />\n              </p>\n              <p className=\"fake-button\"><a className=\"error\" onClick={reset ()}>Start Over</a></p>\n            </figcaption>\n            <audio controls src={window.URL.createObjectURL (file)} />\n          </figure>\n        </>\n      }\n    </div>  \n  )\n}\n\nexport default AudioRecorder","import h1 from './H1';\nimport h2 from './H2';\nimport h3 from './H3';\n\nexport const H1 = h1\nexport const H2 = h2\nexport const H3 = h3","export default function H1 (props) {\n  return (\n    <>\n      <h1>{props.children}</h1>\n      <h4>{!!props.short ? props.short : props.children}</h4>\n    </>\n  )\n}","export default function H2 (props) {\n  return (\n    <>\n      <h2>{props.children}</h2>\n      <h5>{!!props.short ? props.short : props.children}</h5>\n    </>\n  )\n}","export default function H1 (props) {\n  return (\n    <>\n      <h3>{props.children}</h3>\n      <h6>{!!props.short ? props.short : props.children}</h6>\n    </>\n  )\n}","import { useRef, useState } from \"react\"\nimport AudioRecorder from \"./components/AudioRecorder\";\nimport {H2, H3} from './components/Headers';\nimport { audios as audioApi } from \"../auth\";\nimport {printDate, getTime} from '../lib/indexing';\n\nlet defaultQuestions = [\n  'What have I done today?',\n  'How do I feel?',\n  'What else am I going to do?'\n];\n\nfunction CustomQuestionSetting ({question, onToggle, getSetting}) {\n  return (\n    <li className=\"setting\">\n      <div>{question}</div>\n      <div><span onClick={onToggle (`show-custom-question-${question}`)} className={getSetting (`show-custom-question-${question}`) ? 'toggle on' : 'toggle'} /></div>\n    </li>\n  )\n}\n\nfunction Write ({session, questions, display, freeze, settings, createEntry}) {\n  // hooks\n  const {getSetting, addSetting, toggle} = settings;\n  // necessary state for Write\n  const [start, setStart] = useState (new Date ());\n  const [newQuestionDialog, setNewQuestionDialog] = useState (false); // whether or not to show the new question dialog\n  const [recordingFile, setRecording] = useState ([]); // the file the user created\n  const [recordingTitle, setRecordingTitle] = useState ([]); // the user set title of the recording passed up from AudioRecorder\n  const [resetAudios, setReset] = useState (new Function ()); // function passed up from AudioRecorder \n  const [focusList, setFocusList] = useState ({});\n  // refs\n  const qaRef = useRef (); // question container\n  const ffRef = useRef (); // freeform editor \n  const addQuestionRef = useRef (); // question input\n  // methods\n\n  // clear content on first focus\n  const onFirstFocus = (key, text='') => e => {\n    if (focusList [key]) return;\n    e.target.innerText = text;\n    setFocusList ({\n      ...focusList,\n      [key]: true\n    })\n  }\n\n  // create question from current state\n  const addQuestion = async () => {\n    let q = addQuestionRef.current.innerText;\n    if (q === '...?' || q.trim () === '') return;\n    addQuestionRef.current.innerText = '...?';\n    await questions.createQuestion (q);\n    addSetting (`show-custom-question-${q}`, true);\n    setNewQuestionDialog (false);\n  }\n\n  // update state when the audio recorder changes\n  const onAudioRecorderChange = state => {\n    setRecording (state.file);\n    setRecordingTitle (state.title);\n    setReset (state.reset);\n  }\n  \n  // upload a file\n  const uploadFile = async (filename, file) => new Promise (async (resolve, reject) => {\n    try {\n      let fileUploadResponse = await audioApi.post ({filename});\n      let fileUpload = await fileUploadResponse.json ();\n      let response = await fetch (fileUpload.uploadUrl, {\n        method: 'PUT',\n        body: file\n      });\n      if (!response.ok) throw new Error ('failed to upload')\n      resolve (fileUpload.id);\n    } catch (e) {\n      reject (e);\n    }\n  })\n  \n  // call onclick of complete\n  const complete = async () => {\n    let unfreeze = freeze ();\n    let entryType = getSetting ('freeform', '!audio-recording') ? 'freeform' : getSetting ('freeform', '&audio-recording') ? 'audio' : 'questions';\n    let body = {start, end: new Date (), entryType};\n    try {\n      if (body.entryType === 'audio') {\n        body.audio = await uploadFile (recordingTitle, recordingFile);\n        resetAudios ();\n      } else if (body.entryType === 'questions') {\n        body.questions = Array.from (qaRef.current.querySelectorAll ('b')).map (el => el.innerText);\n        body.answers = Array.from (qaRef.current.querySelectorAll ('div')).map (el => el.innerText);\n      } else {\n        body.freeform = ffRef.current.innerText;\n      }\n      await createEntry (body);\n      setStart (new Date ());\n      if (body.entryType === 'questions') Array.from (qaRef.current.querySelectorAll ('div')).map (el => el.innerText = '...');\n      if (body.entryType === 'freeform') ffRef.current.innerText = 'Write your entry here!';\n      unfreeze ();\n    } catch (e) {\n      if (body.entryType === 'questions') Array.from (qaRef.current.querySelectorAll ('div')).map (el => el.innerText = '...');\n      if (body.entryType === 'freeform') ffRef.current.innerText = 'Write your entry here!';\n      unfreeze ();\n    }\n  }\n  // rendering\n  // Add A Question\n  if (newQuestionDialog) return (\n    <main className={display}>\n      <H2>Default Questions</H2>\n      <ul className=\"current-question-list\">\n        {\n          defaultQuestions.map (q => <li className=\"manage-default-question\" key={`manage-default-questions-${q}`}>{q}</li>)\n        }\n      </ul>\n      <H2>Custom Questions</H2>\n      <ul className=\"current-question-list\">\n        {\n          questions.questions.map (q => (<CustomQuestionSetting question={q} onToggle={toggle} getSetting={getSetting} />))\n        }\n      </ul>\n      <h2>Add A Custom Question?</h2>\n      <h4>Add Question</h4>\n      <p ref={addQuestionRef} className=\"add-question-input\" contentEditable>...?</p>\n      <div>\n        <button onClick={addQuestion}>Add Question</button>\n        <button onClick={() => setNewQuestionDialog (false)}>Back To Writing</button>\n      </div>\n    </main>\n  )\n  // otherwise the default writing editor\n  return (\n    <main className={display}>\n      <H2>{printDate ()}</H2>\n      <H3>{getTime (start)}</H3>\n      {\n        getSetting ('default-questions', '|custom-questions', '!freeform') &&\n        <div ref={qaRef} className=\"questions\">\n          {\n            getSetting ('default-questions') && defaultQuestions.map (question => (\n              <>\n                <b>{question}</b>\n                <div onFocus={onFirstFocus (question)} contentEditable onBlur={e => {\n                  session.set (question, e.target.innerText);\n                }}>{session.getSetting (question) || '...'}</div>\n              </>\n            ))\n          }\n          {\n            getSetting ('custom-questions') && (\n              <>\n                {\n                  questions.questions.filter (q => getSetting (`show-custom-question-${q}`)).map (question => (\n                    <>\n                      <b>{question}</b>\n                      <div onFocus={onFirstFocus (question)} contentEditable onBlur={e => {\n                  session.set (question, e.target.innerText);\n                }}>{session.getSetting (question) || '...'}</div>\n                    </>\n                  ))\n                }\n                <span className=\"fake-button\" onClick={() => setNewQuestionDialog (true)}>\n                  Manage Custom Question\n                </span>\n              </>\n            )\n          }\n        </div>\n      }\n      {\n        getSetting ('freeform', '!audio-recording') &&\n        <>\n          <div onFocus={onFirstFocus ('freeform')} className=\"freeform\" contentEditable ref={ffRef} onBlur={e => {\n                  session.set ('freeform', e.target.innerText);\n                }}>{session.getSetting ('freeform') || 'Write your entry here!'}</div>\n        </>\n      }\n      {\n        getSetting ('freeform', '&audio-recording') &&\n        <>\n          <AudioRecorder freeze={freeze} onChange={onAudioRecorderChange} />\n        </>\n      }\n      <button onClick={complete}>Complete</button>\n    </main>\n  )\n}\n\nexport default Write","export default __webpack_public_path__ + \"static/media/search.28b0ad10.svg\";","export default __webpack_public_path__ + \"static/media/filter.8be2c938.svg\";","import { useEffect, useRef, useState } from 'react';\nimport SearchIcon from '../../img/search.svg';\nimport FilterSVG from '../../img/filter.svg';\n\nfunction Search ({updateSearch, openFilter, onClear}) {\n  const [query, _setQuery] = useState (undefined);\n  const setQuery = e => {\n    let q = e.target.value;\n    _setQuery (q);\n  }\n  const handleSubmit = e => {\n    if (e.preventDefault) e.preventDefault ();\n  }\n  useEffect (() => {\n    onClear (() => () => {\n      _setQuery ('');\n    });\n  }, [])\n  useEffect (() => {\n    if (query) updateSearch (query);\n  }, [query]);\n  return (\n    <div className=\"grid search-container\">\n      <form className=\"search-bar\" onSubmit={handleSubmit}>\n        <input value={query} onChange={setQuery} placeholder=\"Search...\" />\n        <img src={SearchIcon} />\n      </form>\n      <span onClick={openFilter} className=\"open-filters\">\n        <img src={FilterSVG} />\n      </span>\n    </div>\n  )\n}\n\nexport default Search\n","import { useEffect, useState } from \"react\"\n\nexport default function ({children, defferedClassName, delay}) {\n  const [deferring, setDeferring] = useState (true);\n  useEffect (() => {\n    setTimeout (() => {\n      setDeferring (false);\n    }, delay);\n  }, []);\n  return deferring ? <article className={defferedClassName} /> : (\n    <>\n      {children}\n    </>\n  );\n}","export default __webpack_public_path__ + \"static/media/calendar.0073112f.svg\";","export default __webpack_public_path__ + \"static/media/caret-down.bfd98d54.svg\";","import React, { useEffect, useState } from 'react'\nimport CalendarSVG from '../../img/calendar.svg'\nimport CaretSVG from '../../img/caret-down.svg'\n\nconst days = [\n  0,\n  31,\n  28,\n  31,\n  30,\n  31,\n  30,\n  31,\n  31,\n  30,\n  31,\n  30,\n  31\n]\n\nconst maxDaysIn = (mm, yyyy) => days [mm] + (yyyy % 4 === 0 ? 1 : 0);\n\nfunction DateFilter ({value, remove, setValue}) {\n  let d = new Date (value.date);\n  const [mode, setMode] = useState (value.mode);\n  const [mm, setMonth] = useState (d.getMonth () + 1);\n  const [dd, setDate] = useState (d.getDate ());\n  const [yyyy, setYear] = useState (d.getFullYear ());\n  const [maxDays, setMaxDays] = useState (maxDaysIn (mm, yyyy));\n  const cycleMode = () => {\n    setMode (\n      mode === 'single-day' ? 'after' :\n      mode === 'after' ? 'before' : 'single-day'\n    )\n  }\n  useEffect (() => {\n    if (mm === NaN || dd === NaN || yyyy === NaN) return;\n    let max = maxDaysIn (mm, yyyy);\n    setMaxDays (max);\n    setValue ({\n      mode,\n      date: new Date (yyyy, mm - 1, dd, 0, 0, 0)\n    });\n  }, [dd, mm, yyyy, mode]);\n  return (\n    <li className=\"grid filter date-filter\">\n      <span>\n        <img src={CalendarSVG} alt=\"Date Filter\" />\n      </span>\n      <span className=\"fake-button\" onClick={cycleMode}>\n        <span className=\"grid switch-mode\">\n          <span>\n            {\n              value.mode === 'single-day' ? 'Day Of' :\n              value.mode === 'after' ? 'After' : 'Before'\n            }\n          </span>\n          <img style={{display: 'inline', transform: 'rotate(-90deg)'}} width={8} height={8} src={CaretSVG} />\n        </span>\n      </span>\n      <div>\n        <input type=\"tel\" min={1} max={12} defaultValue={mm} onChange={e=>setMonth (parseInt (e.target.value))} />\n        <span>/</span>\n        <input type=\"tel\" min={1} max={maxDays} defaultValue={dd} onChange={e=>setDate (parseInt (e.target.value))} />\n        <span>/</span>\n        <input type=\"tel\" min={2020} max={new Date ().getFullYear ()} defaultValue={yyyy} onChange={e=>setYear (parseInt (e.target.value))}/>\n      </div>\n      <span onClick={remove} className=\"fake-button\">\n        remove\n      </span>\n    </li>\n  )\n}\n\nexport default DateFilter\n","export default __webpack_public_path__ + \"static/media/stopwatch.43421b05.svg\";","import {useState, useEffect} from 'react'\nimport StopwatchSVG from '../../img/stopwatch.svg';\nimport CaretSVG from '../../img/caret-down.svg'\n\nfunction TimeFilter ({value, remove, setValue}) {\n  const [mode, setMode] = useState (value.mode);\n  const [minutes, _setMinutes] = useState (value.minutes);\n  const [displayMinutes, setDisplayMinutes] = useState (`00${value.minutes}`.slice (-2))\n  const [hours, _setHours] = useState (value.hours);\n  const [displayHours, setDisplayHours] = useState (value.hours % 12 || 12);\n  const ampm = () => setHours (hours + 12);\n  const setMinutes = e => {\n    let mins = typeof e === 'object' ? parseInt (e.target.value) : e;\n    if (!mins) return setDisplayMinutes ('');\n    if (mins >= 60) return _setMinutes (mins % 60);\n    if (mins < 0) return _setMinutes (mins + 60);\n    _setMinutes (mins);\n  }\n  const setHours = e => {\n    let hrs = typeof e === 'object' ? parseInt (e.target.value) : e;\n    if (!hrs) return setDisplayHours ('');\n    if (hrs > 24) return _setHours (hrs % 24);\n    if (hrs < 0) return _setHours (24 + hrs);\n    _setHours (hrs);\n  }\n  const cycleMode = () => {\n    setMode (\n      mode === 'is-at' ? 'after' :\n      mode === 'after' ? 'before' : 'is-at'\n    )\n  }\n  useEffect (() => {\n    setDisplayHours (hours % 12 || 12);\n    setDisplayMinutes (`00${minutes}`.slice (-2))\n    setValue ({\n      mode,\n      minutes,\n      hours\n    });\n  }, [minutes, hours, mode]);\n  return (\n    <li className=\"grid filter time-filter\">\n      <span>\n        <img src={StopwatchSVG} />\n      </span>\n      <span className=\"fake-button\" onClick={cycleMode}>\n        <span className=\"grid switch-mode\">\n          <span>{value.mode === 'is-at' ? 'Exact' : value.mode === 'after' ? 'After' : 'Before'}</span>\n          <img style={{display: 'inline', transform: 'rotate(-90deg)'}} width={8} height={8} src={CaretSVG} />\n        </span>\n      </span>\n      <div>\n        <input type=\"tel\" value={displayHours} onChange={setHours} />\n        <span>:</span>\n        <input type=\"tel\" value={displayMinutes} onChange={e=>setMinutes (parseInt (e.target.value))} />\n        <span className=\"fake-button\" onClick={ampm}>{hours < 12 ? 'am' : 'pm'}</span>\n      </div>\n      <span onClick={remove} className=\"fake-button\">\n        remove\n      </span>\n    </li>\n  )\n}\n\nexport default TimeFilter\n","import DateFilter from './DateFilter';\nimport TimeFilter from './TimeFilter';\nimport CalendarSVG from '../../img/calendar.svg';\nimport StopwatchSVG from '../../img/stopwatch.svg';\n\nconst filterTypes = {\n  'date': DateFilter,\n  'time': TimeFilter\n}\n\n\nfunction Filters ({open, filters, setFilters}) {\n  filters.sort ((a, b) => a.type < b.type);\n  const dateFilters = filters.filter (filter => filter.type === 'date');\n  const timeFilters = filters.filter (filter => filter.type === 'time');\n  const addDateFilter = () => {\n    if (dateFilters.length === 0) {\n      let newFilters = [...filters, {type: 'date', value: {mode: 'single-day', date: new Date ()}}]\n      setFilters (newFilters);\n    } else if (dateFilters.length === 1) {\n      filters.filter (fil => fil.type === 'date') [0].value.mode = 'after';\n      let newFilters = [...filters, {type: 'date', value: {mode: 'before', date: new Date ()}}];\n      setFilters (newFilters)\n    } else {\n      return;\n    }\n  }\n  const addTimeFilter = () => {\n    if (timeFilters.length === 0) {\n      let newFilters = [...filters, {\n        type: 'time',\n        value: {\n          mode: 'is-at',\n          minutes: new Date ().getMinutes (),\n          hours: new Date ().getHours ()\n        }\n      }]\n      setFilters (newFilters);\n    } else if (timeFilters.length === 1) {\n      timeFilters [0].value.mode = 'after';\n      let newFilters = [...filters, {\n        type: 'time',\n        value: {\n          mode: 'before',\n          minutes: new Date ().getMinutes (),\n          hours: new Date ().getHours ()\n        }\n      }]\n      setFilters (newFilters);\n    } else {\n      return;\n    }\n  }\n  const remove = index => () => {\n    filters.splice (index, 1);\n    setFilters (filters);\n  }\n  const setFilterValue = index => value => {\n    filters [index].value = value;\n    setFilters (filters);\n  }\n  return open ? (\n    <>\n      <ol className=\"grid filter-list\">\n        {\n          filters.map ((filter, index) => {\n            let Filter = filterTypes [filter.type];\n            return (\n              <Filter value={filter.value} remove={remove (index)} setValue={setFilterValue (index)} />\n            );\n          })\n        }\n      </ol>\n      {\n        (filters.length === 0) &&\n        <div className=\"grid\">\n          You don't have any filters, add some by clicking on the icons below!\n        </div>\n      }\n      <ul className=\"grid add-filter-list\">\n        {\n          dateFilters.length < 2 &&\n          <li onClick={addDateFilter}>\n            <img src={CalendarSVG} alt=\"date filter\" />\n          </li>\n        }\n        {\n          timeFilters.length < 2 &&\n          <li onClick={addTimeFilter}>\n            <img src={StopwatchSVG} alt=\"time filter\" />\n          </li>\n        }\n      </ul>\n      <hr />\n    </>\n  ) : (\n    <div className=\"none\" />\n  )\n}\n\nexport default Filters","const floor = date => {\n  return new Date (date.getFullYear (), date.getMonth (), date.getDate ())\n}\nconst ceil = date => {\n  return new Date (date.getFullYear (), date.getMonth (), date.getDate () + 1)\n}\nconst isInRange = (is, after, before) => {\n  return is <= before && is >= after;\n}\nconst toMinutes = ({hours, minutes}) => {\n  return hours * 60 + minutes;\n}\n\n// single-day | inclusive after | inclusive before\nconst constructDateFilter = value => entry => {\n  if (value.mode === 'single-day') {\n    return isInRange (entry.start, floor (value.date), ceil (value.date));\n  } else if (value.mode === 'after') {\n    return new Date (entry.start) > value.date;\n  } else if (value.mode === 'before') {\n    return new Date (entry.end) < value.date;\n  }\n}\n\nconst constructTimeFilter = value => entry => {\n  if (value.mode === 'is-at') {\n    return isInRange (toMinutes (value), toMinutes ({hours: entry.start.getHours (), minutes: entry.start.getHours ()}), toMinutes ({hours: entry.end.getHours (), minutes: entry.end.getHours ()}));\n  } else if (value.mode === 'before') {\n    return toMinutes ({hours: entry.start.getHours (), minutes: entry.start.getMinutes ()}) <= toMinutes (value);\n  } else if (value.mode === 'after') {\n    return toMinutes ({hours: entry.start.getHours (), minutes: entry.start.getMinutes ()}) >= toMinutes (value);\n  }\n}\n\nconst filterTypes = {\n  'date': constructDateFilter,\n  'time': constructTimeFilter\n}\n\nconst constructFilterList = filters => {\n  let _f = filters.map (filter => filterTypes [filter.type] (filter.value))\n  console.log (_f);\n  return _f;\n}\n\nexport default constructFilterList","import { useEffect, useState } from 'react'\nimport {H2, H3} from './components/Headers'\nimport Search from './components/Search';\nimport Deferred from './components/Deferred';\nimport Filters from './components/Filters';\nimport {runIndexEntries, getTime} from '../lib/indexing';\nimport {runScroll} from '../lib/scrolling';\nimport constructFilterList from '../lib/filters';\n\nconst defaultShowCount = 10;\n\nconst EntryHeader = ({date, isOpen, open, close, count}) => {\n  return isOpen ? (\n    <header className=\"entry-header\">\n      <span className=\"fake-button\" onClick={close}>close</span>\n      <H2>{date}</H2>\n    </header>\n  ) : (\n    <header className=\"entry-header\">\n      <span className=\"fake-button\" onClick={open}>more</span>\n      <H2>{date}</H2>\n      <div className=\"pill\">\n        <span>{count}</span>\n      </div>\n    </header>\n  )\n}\n\nconst EntryContents = ({entries, open}) => entries.map (entry => {\n  return open ? (\n    <section className=\"journal-entry\" key={`entry-${entry.id}`}>\n      <H3 short={getTime (entry.start)}>\n        {getTime (entry.start)} - {getTime (entry.end)}\n      </H3>\n      {\n        (entry.entryType === 'questions' || !entry.entryType) &&\n        entry.questions.map ((q, i) => (\n          <section>\n            <p>\n              <b>{q} </b>\n              {entry.answers [i]}\n            </p>\n          </section>\n        ))\n      }\n      {\n        entry.entryType === 'freeform' &&\n        <section className=\"journal-entry\">\n          <p>{entry.freeform}</p>\n        </section>\n      }\n      {\n        entry.entryType === 'audio' &&\n          <figure>\n            <figcaption><p>{entry.audio.filename}</p></figcaption>\n            <audio controls src={entry.audio.url} />\n          </figure>\n      }\n    </section>\n  ) : (<div></div>)\n})\n\nfunction Journal({display, entries, isNotMain}) {\n  const [open, setOpen] = useState ([]);\n  const [showCount, setShowCount] = useState (defaultShowCount);\n  const [isSearching, setIsSearching] = useState (false);\n  const [query, setQuery] = useState ('');\n  const [searchResults, setSearchResults] = useState ([]);\n  const [searchOnClear, setOnClear] = useState (()=>{});\n  const [filterDialog, setFilterDialog] = useState (false);\n  const [filterIteration, setFilterIteration] = useState (0);\n  const iterate = a => setFilterIteration (filterIteration + 1);\n  const [filters, _setFilter] = useState ([]);\n  const setFilters = newFilters => {\n    if (!isSearching) setIsSearching (true);\n    _setFilter (newFilters);\n    iterate ();\n  }\n  const updateSearch = q => {\n    setIsSearching (true);\n    setQuery (q);\n  }\n  const cancelSearch = () => {\n    setIsSearching (false);\n    if (searchOnClear) searchOnClear ();\n    setSearchResults ([]);\n  }\n  const updateCount = () => {\n    setShowCount (defaultShowCount + showCount);\n  };\n  useEffect (() => {\n    if (showCount !== defaultShowCount) runScroll ();\n  }, [showCount]);\n  useEffect (() => {\n    if (query.length || filterIteration > 0) runQuery (query);\n  }, [query, filterIteration]);\n  const runQuery = (q) => {\n    // delay query until we know user isn't typing\n    setTimeout (() => {\n      // user was typing\n      if (q !== query) return;\n      let all = entries.reduce ((acc, val) => {\n        return [...acc, ...val.list];\n      }, []);\n      all = constructFilterList (Object.values (filters)).reduce ((acc, val) => {\n        return acc.filter (val);\n      }, all);\n      let freeformMatch = all.filter (entry => entry.entryType === 'freeform').filter (entry => entry.freeform.toLowerCase ().match (query.toLowerCase ()));\n      let qaMatch = all.filter (entry => entry.entryType === 'questions').map (qa => {\n        return Object.assign (qa, {combined: qa.answers.reduce ((acc, val) => {\n          return acc + ' ' + val.toLowerCase ();\n        }, '')});\n      }).filter (qa => qa.combined.match (query.toLowerCase ()));\n      let allMatch = [...qaMatch, ...freeformMatch];\n      setSearchResults (runIndexEntries (allMatch));\n    }, 500);\n  }\n  // what to render in the body\n  let body = (\n    <>\n      {entries.map ((index, i) => i < showCount ? (\n        <Deferred delay={(i % 10) * 85} defferedClassName={''}>\n          <article key={`index-${index.date}`}>\n            <EntryHeader count={index.list.length} date={index.meta.date} isOpen={open.indexOf (index.date) !== -1} open={() => {setOpen (open => [...open, index.date])}} close={() => {\n              setOpen (open => open.filter (d => d !== index.date))\n            }} index={index} />\n            <EntryContents open={open.indexOf (index.date) !== -1} entries={index.list} />\n          </article>\n        </Deferred>\n        ) : i === showCount ? (<div className=\"grid\"><span className=\"fake-button\" onClick={updateCount}>More...</span></div>) : (<div className=\"none\"/>))\n      }\n    </>\n  );\n  // render if searching\n  if (isSearching && searchResults.length > 0) body = (\n    <>\n      <div className=\"grid\">\n        <span className=\"fake-button\" onClick={cancelSearch}>Clear Search Results</span>\n      </div>\n      {\n        searchResults.map ((index, i) => (\n          <Deferred delay={i * 50} defferedClassName=\"\">\n            <article key={`index-search-results-for-${query}-${index.date}`}>\n              <EntryHeader count={index.list.length} date={index.meta.date} isOpen={open.indexOf (index.date) !== -1} open={() => {setOpen (open => [...open, index.date])}} close={() => {\n                setOpen (open => open.filter (d => d !== index.date))\n              }} index={index} />\n              <EntryContents open={open.indexOf (index.date) !== -1} entries={index.list} />\n            </article>\n          </Deferred>\n        ))\n      }\n    </>\n  );\n  if (isSearching && searchResults.length === 0) body = (\n    <div className=\"grid\">\n      <span className=\"fake-button\" onClick={cancelSearch}>Clear Search Results</span>\n      <H3>Hmmmm, nothing there!</H3>\n    </div>\n  );\n  return display ==='none' ? (<div/>) : isNotMain ? (\n    <>\n      <Search onClear={setOnClear} updateSearch={updateSearch} openFilter={()=>setFilterDialog (!filterDialog)} />\n      <Filters iterate={iterate} open={filterDialog} setFilters={setFilters} filters={filters} />\n      {body}\n    </>\n  )\n  :\n  (\n    <main className={display}>\n      <Search onClear={setOnClear} updateSearch={updateSearch} openFilter={()=>setFilterDialog (!filterDialog)} />\n      <Filters iterate={iterate} open={filterDialog} setFilters={setFilters} filters={filters} />\n      {body}\n    </main>\n  )\n}\n\nexport default Journal\n","export const scrollToTop = (offset=0) => setTimeout (() => {\n  window.scrollBy ({\n    left: 0,\n    top: -window.scrollY,\n    behavior: 'smooth'\n  })\n}, offset);\n\nexport const runScroll = (top=2 * window.innerHeight / 3, offset=100) => setTimeout (() => {\n  window.scrollBy ({\n    left: 0,\n    top: top,\n    behavior: 'smooth'\n  })\n}, offset);","import React, { useEffect, useRef, useState } from 'react'\nimport { H2 } from './components/Headers';\n\nfunction SkillSuggestions () {\n  return (\n    <>\n      <p>If you're having trouble thinking of some? We made a list of some sample skills!</p>\n      <section>\n        <h3 className=\"dont-hide\" style={{textDecoration: 'underline'}}>Suggestions:</h3>\n        <ul style={{margin: '2vh 0'}}>\n          <li>Go for a walk</li>\n          <li>Focus on a small, simple task</li>\n          <li>Read a short, interesting article</li>\n          <li>Practice mindfullness</li>\n          <li>Listen to your own words</li>\n          <li>Check the facts</li>\n        </ul>\n      </section>\n    </>\n  )\n}\n\nfunction Skills ({display, skills, submitSkill}) {\n  const [mode, setMode] = useState ('reference');\n  const catRef = useRef ();\n  const sklRef = useRef ();\n  const openEditor = () => {\n    setMode ('edit');\n  }\n  const onSubmitSkill = async () => {\n    try {\n      await submitSkill ({category: catRef.current.value, skill: sklRef.current.innerText})\n    } catch (e) {\n\n    }\n    setMode ('reference');\n  }\n  return (\n    <>\n      <datalist id=\"skills-categories\">\n        {\n          skills.map (category => (\n            <option>{category.meta.category}</option>\n          ))\n        }\n      </datalist>\n      <main className={mode === 'edit' ? display : 'none'}>\n        <h2>New Skill</h2>\n        <div>Category: <input list=\"skills-categories\" ref={catRef} defaultValue=\"Tools For\"/></div>\n        <div>Skill: <p style={{padding: 7.5}} ref={sklRef} contentEditable>...</p></div>\n        <div>\n          <button onClick={onSubmitSkill}>Add Skill</button>\n          <button onClick={()=>{setMode ('reference')}}>Cancel</button>\n        </div>\n        <hr style={{margin: '10vh 0'}} />\n        <SkillSuggestions />\n      </main>\n      <main className={mode === 'reference' ? display : 'none'}>\n        {\n          !skills.length && (\n            <>\n              <p>\n                You haven't added any coping skills yet, but that's ok! Click on 'Add New Skill' to start\n                adding coping skills!\n              </p>\n              <p>Having trouble thinking of some? We made a list of some sample skills!</p>\n              <SkillSuggestions />\n            </>\n          )\n        }\n        {\n          skills.map (category => (\n            <section>\n              <H2>{category.meta.category}</H2>\n              <ul>\n                {\n                  category.list.map (skill => (\n                    <li>{skill.skill}</li>\n                  ))\n                }\n              </ul>\n            </section>\n          ))\n        }\n        <span style={{marginTop: '2.5vh'}} onClick={openEditor} className=\"fake-button\">Add New Skill</span>\n        {\n          !skills.length && (\n            <>\n              <p>\n                You haven't added any coping skills yet, but that's ok! Click on 'Add New Skill' to start\n                adding coping skills!\n              </p>\n              <p>Having trouble thinking of some? We made a list of some sample skills!</p>\n              <SkillSuggestions />\n            </>\n          )\n        }\n      </main>\n    </>\n  )\n}\n\nexport default Skills","\nconst sanitizePhoneNumber = number => {\n  let reduced = number.replaceAll (/[^0-9]/g, '');\n  if (reduced.length !== 10) throw new Error ('Phone number must be 10 digits, current length: ' + reduced.length);\n  return '+1' + reduced;\n}\n\nexport default sanitizePhoneNumber","import { useEffect, useRef } from \"react\";\nimport sanitizePhoneNumber from '../lib/sanitizePhoneNumber'\nimport {H2, H3} from \"./components/Headers\";\n\nconst attributions = {\n  'calendar.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/freepik\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'pen.svg': 'Icons made by <a href=\"https://www.flaticon.com/authors/icongeek26\" title=\"Icongeek26\">Icongeek26</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\"> www.flaticon.com</a>',\n  'book.svg': 'Icons made by <a href=\"https://www.flaticon.com/authors/zlatko-najdenovski\" title=\"Zlatko Najdenovski\">Zlatko Najdenovski</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\"> www.flaticon.com</a>',\n  'plus.svg': 'Icons made by <a href=\"https://www.flaticon.com/authors/freepik\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\"> www.flaticon.com</a>',\n  'list.svg': 'Icons made by <a href=\"https://www.flaticon.com/authors/phatplus\" title=\"phatplus\">phatplus</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\"> www.flaticon.com</a>',\n  'skill.svg': 'Icons made by <a href=\"https://www.flaticon.com/authors/freepik\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\"> www.flaticon.com</a>',\n  'settings.svg': 'Icons made by <a href=\"https://www.flaticon.com/authors/srip\" title=\"srip\">srip</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\"> www.flaticon.com</a>',\n  'search.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/pixel-perfect\" title=\"Pixel perfect\">Pixel perfect</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'filter.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/kirill-kazachek\" title=\"Kirill Kazachek\">Kirill Kazachek</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'stopwatch.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/good-ware\" title=\"Good Ware\">Good Ware</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'caret-down.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/dave-gandy\" title=\"Dave Gandy\">Dave Gandy</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>'\n}\n\nfunction ShareJourunal ({shareJournal, settings}) {\n  const numRef = useRef ();\n  const nameRef = useRef ();\n  const swnRef = useRef ();\n  const onClick = async () => {\n    let phone = numRef.current.value;\n    phone = sanitizePhoneNumber (phone);\n    let name = nameRef.current.value;\n    let shareWithName = swnRef.current.value;\n    let share = await shareJournal (phone, name, shareWithName);\n    settings.addSetting (`share-${share.id}`, true);\n    numRef.current.value = '';\n    swnRef.current.value = '';\n  }\n  return (\n    <div className=\"action\">\n      <p style={{textDecoration: 'none'}}>Share Your Journal With</p>\n      <input ref={swnRef} placeholder=\"James Allen\" />\n      <input type=\"tel\" ref={numRef} placeholder=\"123-456-7890\" />\n      <p style={{textDecoration: 'none'}}>Your Name</p>\n      <input ref={nameRef} />\n      <br />\n      <span onClick={onClick}>Submit</span>\n    </div>\n  )\n}\n\nfunction SharedByMe ({freeze, sharedByMe, toggleSetting, getSetting, toggleFreeze}) {\n  const onToggle = (share) => () => async () => {\n    let unfreeze = freeze ();\n    try {\n      await toggleFreeze (share.id);\n      toggleSetting (`share-${share.id}`) ();\n      unfreeze ();\n    } catch (e) {\n      unfreeze ();\n    }\n  }\n  return (\n    <div>\n      <p style={{textDecoration: 'none'}}>Who You Share Your Journal With</p>\n      <hr style={{width: '25vw'}}/>\n      {\n        sharedByMe.length === 0 &&\n        <span style={{textDecoration: 'none'}}>You haven't shared your journal - no pressure</span>\n      }\n      {\n        sharedByMe.map (share => (\n          <Setting getSetting={getSetting} title={share.shareWithName || share.shareWith} setting={`share-${share.id}`} onToggle={onToggle (share)} />\n        ))\n      }\n    </div>\n  );\n}\n\nfunction SharedWithMe ({sharedWithMe, redirect}) {\n  let shares = sharedWithMe.filter (share => !share.frozen);\n  if (shares.length === 0) return (<div className=\"none\" />)\n  return (\n    <div className=\"action\">\n      <p style={{textDecoration: 'none'}}>Journals Shared With You</p>\n      <hr style={{width: '25vw'}}/>\n      {\n        shares.map (share => (\n          <span onClick={() => {redirect (`?page=sharing&id=${share.id}&name=${share.name}`)}}>{share.name}</span>\n        ))\n      }\n    </div>\n  )\n}\n\nfunction SettingGroup ({longTitle, shortTitle, children}) {\n  return (\n    <div className=\"setting-group\">\n      <header>\n        <H3 short={shortTitle}>{longTitle}</H3>\n      </header>\n      {children}\n      <div></div>\n    </div>\n  )\n}\n\nfunction Setting ({setting, title, onToggle, getSetting, relationships=[]}) {\n  let show = relationships.reduce ((acc, val) => {\n    if (!acc) return acc;\n    let relation = val.charAt (0);\n    if (relation !== '+') return acc;\n    let affector = val.substring (1);\n    return getSetting (affector);\n  }, true);\n  if (!show) return (\n    <div className=\"none\" />\n  )\n  return (\n    <div className=\"setting\">\n      <div>{title}</div>\n      <div><span onClick={onToggle.apply (null, [setting, ...relationships])} className={getSetting (setting) ? 'toggle on' : 'toggle'} /></div>\n    </div>\n  )\n}\n\nfunction Settings({freeze, settings, swStatus, install, uninstall, display, logout, shareJournal, sharedWithMe, sharedByMe, toggleFreeze, redirect}) {\n  return (\n    <main className=\"settings\" style={{display}}>\n      <SettingGroup longTitle={'Journal Settings'} shortTitle={'Journal'}>\n        <Setting setting=\"freeform\" title=\"Enable Freeform\" getSetting={settings.getSetting} onToggle={settings.toggle} />\n        {\n          settings.getSetting ('audio-recording-supported') &&\n          <Setting setting=\"audio-recording\" title=\"Enable Audio Recording\" getSetting={settings.getSetting} onToggle={settings.toggle} relationships={['+freeform']} />\n        }\n        <Setting setting=\"default-questions\" title=\"Show Default Questions\" getSetting={settings.getSetting} onToggle={settings.toggle} relationships={['|custom-questions']} />\n        <Setting setting=\"custom-questions\" title=\"Show Custom Questions\" getSetting={settings.getSetting} onToggle={settings.toggle} relationships={['|default-questions']} />\n      </SettingGroup>\n      <ShareJourunal settings={settings} shareJournal={shareJournal} />\n      <SharedWithMe settings={settings} sharedWithMe={sharedWithMe} redirect={redirect} />\n      <SharedByMe freeze={freeze} getSetting={settings.getSetting} toggleSetting={settings.toggle} setSetting={settings.set} sharedByMe={sharedByMe} toggleFreeze={toggleFreeze} />\n      {\n        !swStatus && \n        <div className=\"action\">\n          <span onClick={install}>Install!</span>\n        </div>\n      }\n      {\n        !!swStatus &&\n        <div className=\"action\">\n          <span onClick={uninstall}>Uninstall</span>\n        </div>\n      }\n      <div className=\"action\">\n        <span onClick={logout}>Log Out</span>\n      </div>\n      <section id=\"attributions\">\n        <H2>Attributions</H2>\n        <ul>\n          {Object.keys (attributions).map (k => (\n            <li key={`attribiution-${k}`} dangerouslySetInnerHTML={{__html: attributions [k]}}></li>\n          ))}\n        </ul>\n      </section>\n    </main>\n  )\n}\n\nexport default Settings\n","import {useState, useEffect} from 'react';\n\n// Relationship API:\n//   |setting - this or setting must be true\n//   !setting - must be inverse of setting\n//   &setting - must also be true\n//   +setting - if setting is true, show this\n\nexport default function useSettings (defaultSettings={}, storage=window.localStorage) {\n  const storedSettings = JSON.parse (storage.getItem ('therapy-journal-settings') || '{}');\n  const currentSettings = Object.assign (defaultSettings, storedSettings);\n  const [settings, setSettings] = useState (currentSettings);\n  const getSetting = (setting, ...relationships) => {\n    if (!relationships.length) return settings [setting];\n    return relationships.reduce ((acc, val) => {\n      let relation = val.charAt (0);\n      let affected = val.substring (1);\n      if (relation === '!') return acc && !settings [affected];\n      if (relation === '|') return acc || settings [affected];\n      if (relation === '&') return acc && settings [affected];\n      return acc;\n    }, settings [setting]);\n  }\n  const addSetting = (setting, initial) => {\n    if (settings [setting]) return;\n    setSettings ({...settings, [setting]: initial});\n  }\n  const set = (setting, value, ...relationships) => {\n    if (!relationships.length) return setSettings ({...settings, [setting]: value});\n    let changes = relationships.reduce ((acc, val) => {\n      let relation = val.charAt (0);\n      let affected = val.substring (1);\n      if (relation === '!') return {\n        ...acc,\n        [affected]: !value\n      };\n      if (relation === '|' && value === false) return {\n        ...acc,\n        [affected]: true\n      };\n      return acc;\n    }, {[setting]: value});\n    setSettings ({...settings, ...changes});\n  }\n  const toggle = (setting, ...relationships) => e => {\n    if (!relationships.length)  return setSettings ({...settings, [setting]: !settings[setting]})\n    let to = !settings [setting];\n    let changes = relationships.reduce ((acc, val) => {\n      let relation = val.charAt (0);\n      let affected = val.substring (1);\n      if (relation === '!') return {\n        ...acc,\n        [affected]: !to\n      };\n      if (relation === '|' && to === false) return {\n        ...acc,\n        [affected]: true\n      };\n      return acc;\n    }, {[setting]: to});\n    setSettings ({...settings, ...changes});\n  }\n  useEffect (() => {\n    storage.setItem ('therapy-journal-settings', JSON.stringify (settings));\n  }, [settings]);\n\n  return {getSetting, toggle, addSetting, set}\n}","import {useState} from 'react';\nimport {skills as api} from '../auth';\n\nconst findIndex = (indexedArr, key, value, meta={}) => {\n  let found = indexedArr.filter (el => el [key] === value)\n  if (found.length > 0) return found [0].list;\n  let index = {[key]: value, meta, list: []};\n  indexedArr.push (index);\n  return index.list;\n}\n\nexport default function useSkills () {\n\n  const [skills, setSkills] = useState ([]);\n  const getSkills = async () => {\n    try {\n      let req = await api.get ();\n      let data = await req.json ();\n      let indexed = data.reduce ((acc, val) => {\n        findIndex (acc, 'category', val.category, {category: val.category}).push (val);\n        return acc;\n      }, []);\n      setSkills (indexed);\n    } catch (e) {\n    }\n  }\n  const submitSkill = (body) => new Promise (async (resolve, reject) => {\n    try {\n      setSkills (skls => {\n        let idx = findIndex (skls, 'category', body.category, {category: body.category});\n        idx.push (body);\n        return skls;\n      })\n      await api.post (body);\n      resolve ();\n    } catch (e) {\n      let pending = JSON.parse (localStorage.getItem ('pending-actions') || '[]');\n      pending.push ({\n        action: 'submit-skill',\n        body\n      });\n      localStorage.setItem ('pending-actions', JSON.stringify (pending));\n      reject (e);\n    }\n  })\n\n  return {skills, getSkills, submitSkill}\n\n}","import { useEffect, useState } from \"react\";\nimport Journal from \"./Journal\";\n\nfunction SharedWithMe ({shareId, name, display, getShareById}) {\n  const [journal, setJournal] = useState ([]);\n  const [error, setErr] = useState (false);\n  useEffect (() => {\n    if (!shareId) return;\n    (async () => {\n      try {\n        setJournal (await getShareById (shareId));\n      } catch (e) {\n        setErr ('We encountered an experience loading this journal. It may not longer be shared with you...');\n      }\n    }) ();\n  }, [shareId]);\n  return (\n    <>\n      <main style={{display}}>\n        <h5>Shared By {name}</h5>\n        <Journal isNotMain display={display} entries={journal} />\n        {\n          error &&\n          <p className=\"error\">{error}</p>\n        }\n      </main>\n    </>\n  )\n}\n\nexport default SharedWithMe ","const titles = {\n  write: {\n    long: () => 'Write Your Journal Entry',\n    short: () => 'Check In'\n  },\n  journal: {\n    long: () => 'Review Your Journal Entries',\n    short: () => 'Therapy Journal'\n  },\n  settings: {\n    long: () => 'Customize Your Therapy Journal',\n    short: () => 'Customize'\n  },\n  skills: {\n    long: () => 'Coping Skills Reference Sheet',\n    short: () => 'Coping Skills'\n  },\n  sharing: {\n    long: name => `Therapy Journal From ${name}`,\n    short: name => `Therapy Journal`\n  }\n}\nexport default (page) => {\n  return titles [page]\n}","let path = window.location.href.split ('?') [0];\nif (path.charAt (path.length - 1) === '/') path = path.substring (0, path.length - 1);\nexport default path;","export default {\n  'custom-questions': true,\n  'default-questions': true,\n  freeform: false\n}\n","\n// pending actions\nlet pending = JSON.parse (localStorage.getItem ('pending-actions') || '[]');\nconst handlePending = (actions={}) => {\n  localStorage.setItem ('pending-actions', []);\n  pending.forEach (({action, body}) => actions [action] (body));\n}\n\nexport default handlePending","import NavSkills from './img/skill.svg'\nimport NavPlus from './img/plus.svg'\nimport NavBook from './img/book.svg'\nimport NavSettings from './img/settings.svg'\nimport { useState, useRef, useEffect } from 'react'\nimport useAuth from './hooks/useAuth';\nimport Write from './pages/Write'\nimport Journal from './pages/Journal'\nimport Skills from './pages/Skills'\nimport Settings from './pages/Settings'\nimport { H1 } from './pages/components/Headers'\nimport useSettings from './hooks/useSettings';\nimport useSkills from './hooks/useSkills';\nimport useJournal from './hooks/useJournal';\nimport SharedWithMe from './pages/SharedWithMe'\nimport useSharing from './hooks/useSharing'\nimport useQuestions from './hooks/useQuestions'\nimport titles from './lib/titles'\nimport base from './lib/base'\nimport sanitizePhoneNumber from './lib/sanitizePhoneNumber'\nimport defaultSettings from './lib/defaultSettings';\nimport handlePending from './lib/pendingActions'\nimport './App.css';\nimport { scrollToTop } from './lib/scrolling'\nimport { hasBrowserSupport } from './lib/webaudio'\n\nfunction App({install, uninstall, swStatus, passthrough}) {\n  // api\n  const {skills, getSkills, submitSkill} = useSkills ();\n  const {entries, getEntries, createEntry} = useJournal ();\n  const sharing = useSharing ();\n  const settings = useSettings (defaultSettings);\n  const session = useSettings ({}, sessionStorage);\n  const questions = useQuestions ();\n  // initialize after session is activated\n  const onAuth = () => {\n    getSkills ();\n    getEntries ();\n    sharing.getShares (({sharedByMe}) => {\n      sharedByMe.forEach (share => {\n        settings.set (`share-${share.id}`, !share.frozen);\n      });\n    });\n    if (!hasBrowserSupport) {\n      settings.set ('audio-recording-supported', false);\n      settings.set ('audio-recording', false);\n    } else {\n      settings.set ('audio-recording-supported', true);\n    }\n    questions.getQuestions ();\n    handlePending ({'submit-skill': submitSkill, 'create-entry': createEntry});\n  }\n  const {user, login, register, logout} = useAuth (onAuth);\n  if (passthrough) onAuth ();\n  // router section\n  let initialPage = new URLSearchParams (window.location.search).get ('page') || 'write';\n  const [page, setPage] = useState (initialPage);\n  const [pageData, setPageData] = useState ('');\n  useEffect (() => {\n    if (page === 'sharing') setPageData (new URLSearchParams (window.location.search).get ('name'));\n  }, [page]);\n  const redirect = (url) => {\n    let arr = url.split ('?');\n    let nextPage = arr.length > 1 ? new URLSearchParams (`?${arr [1]}`).get ('page') : 'write';\n    window.history.pushState ({previous: page, next: nextPage}, 'Journal', `${base}${url}`)\n    setPage (nextPage);\n    scrollToTop (100);\n  }\n  // auth flow\n  const [prompt, setPrompt] = useState (false);\n  const numRef = useRef ();\n  const codeRef = useRef ();\n  const [answer, setAnswer] = useState (v => console.log (v));\n  const promptForCode = _answer => {\n    setPrompt (true);\n    setAnswer (() => () => {_answer (codeRef.current.value)});\n    codeRef.current.focus ();\n  }\n  const [codeSent, setCodeSent] = useState (false);\n  const [onAuthError, setAuthError] = useState (null);\n  const onCodeSent = () => {\n    setCodeSent (true);\n  }\n  const onRegisterClick = async () => {\n    try {\n      let raw = numRef.current.value;\n      let phoneNumber = sanitizePhoneNumber (raw);\n      await register (phoneNumber, promptForCode, onCodeSent);\n    } catch (e) {\n      setAuthError (e);\n    }\n  }\n  const onLogInClick = async () => {\n    try {\n      let raw = numRef.current.value;\n      let phoneNumber = sanitizePhoneNumber (raw);\n      await login (phoneNumber, promptForCode, onCodeSent);\n    } catch (e) {\n      setAuthError (e);\n    }\n  }\n  // loading animation\n  const [loadingAnimation, setLoadingAnimation] = useState ('none');\n  const freeze = () => {\n    setLoadingAnimation ('grid');\n    return function unfreeze () {setLoadingAnimation ('none')}\n  }\n  // not logged in\n  if (!user && !passthrough) return (\n    <>\n      <div id=\"loading-animation\" style={{display: loadingAnimation}}></div>\n      <header>\n        <H1>Your Journal</H1>\n      </header>\n      <main>\n        <div className=\"grid\">\n          <h3>{codeSent ? 'Your secret code in on the way!' : 'Enter your phone number:'}</h3>\n          <span style={{display: (onAuthError !== null ? 'grid' : 'none')}} className=\"error\">{onAuthError?.message}</span>\n        </div>\n        <div className=\"phone-number-input\">\n          <input type=\"tel\" placeholder=\"123-456-7890\" ref={numRef} disabled={!!prompt} />\n        </div>\n        {\n          prompt &&\n          <div className=\"phone-number-input\">\n            <input autoComplete=\"one-time-code\" placeholder=\"Secret Code\" ref={codeRef} />\n          </div>\n        }\n        <div className=\"phone-number-input\">\n          { \n            !prompt &&\n            <span>\n              <button onClick={onLogInClick}>Login</button>\n              <button onClick={onRegisterClick}>Register</button>\n            </span>\n          }\n          { prompt && <><button onClick={answer}>Submit!</button></> }\n        </div>\n        <section>\n          <h3>About Us</h3>\n          <hr style={{width: '35%'}}/>\n          <b>Why A Journal?</b>\n          <p>\n            Journaling provides anyone with a structure to\n            deeper understanding of themselves and their emotional wellbeing. Oftentimes describing a situation\n            or emotion in writing provides a sense of clarity not found in other ways. Also available to you is\n            a place to write down and sort skills you have learned.\n          </p>\n          <b>How Does It Work?</b>\n          <p>\n            To start, register an account with your phone number. You will be texted a secret code. Enter that and...\n            well that's it, you now have your very own journal!\n            To put it simply, you write details about your life in your journal. Again, but in more detail, you can\n            structure your journal in different ways. Journal entries can be formatted as \"question and answer\" or as \"freeform\n            writing\" or \"audio journaling\" (this is easily switched with one click in the settings tab). All journal entries automatically include the\n            date and time of writing and can be found listed in chronological order. You also can curate a\n            list of skills for different situations and share your journal if need be.\n          </p>\n        </section>\n        <section>\n          <h3>Terms of Service</h3>\n          <hr style={{width: '35%'}}/>\n          <b>Privacy</b>\n          <p>\n            None of your information (journal entries, coping skills, phone number, etc) will be publicly available\n            nor will it be shared unless you explicitly share it.\n          </p>\n          <b>Sharing</b>\n          <p>\n            By nature of being a journaling application, the contained subject matter will often be sensitive\n            information. With this application, you can share your journal with anyone. However, it is recommended\n            for, and with intention of, sharing with medical professionals only. In the case of abuse of this feature deemed\n            detrimental to the health of another individual, we retain the right to terminate your account.\n          </p>\n        </section>\n      </main>\n    </>\n  );\n  return (\n    <>\n      <div id=\"loading-animation\" style={{display: loadingAnimation}}></div>\n      <header>\n        <H1 short={titles (page).short (pageData)}>{titles (page).long (pageData)}</H1>\n      </header>\n      <Write session={session} questions={questions} createEntry={createEntry} settings={settings} user={user} freeze={freeze} display={page === 'write' ? 'grid' : 'none'} />\n      <Journal redirect={redirect} entries={entries} user={user} freeze={freeze} display={page === 'journal' ? 'grid' : 'none'} />\n      <Skills submitSkill={submitSkill} skills={skills} user={user} display={page === 'skills' ? 'grid' : 'none'} />\n      <Settings freeze={freeze} redirect={redirect} settings={settings} {...sharing} logout={logout} user={user} freeze={freeze} display={page === 'settings' ? 'grid' : 'none'} install={install} swStatus={swStatus} uninstall={uninstall} />\n      <SharedWithMe {...sharing} display={page === 'sharing' ? 'grid' : 'none'} shareId={new URLSearchParams (window.location.search).get ('id')} name={new URLSearchParams (window.location.search).get ('name')}/>\n      <nav>\n        <ul>\n          <li></li>\n          <li className={page === 'skills' ? 'active' : ''} onClick={() => {redirect (`/?page=skills`)}}>\n            <img alt=\"\" width=\"32\" height=\"32\" src={NavSkills} />\n            <label>Skills</label>\n          </li>\n          <li className={page === 'write' ? 'active' : ''} onClick={() => {redirect (`/?page=write`)}}>\n            <img alt=\"\" width=\"32\" height=\"32\" src={NavPlus} />\n            <label>Write</label>\n          </li>\n          <li className={page === 'journal' ? 'active' : ''} onClick={() => {redirect (`/?page=journal`)}}>\n            <img alt=\"\" width=\"32\" height=\"32\" src={NavBook} />\n            <label>Journal</label>\n          </li>\n          <li className={page === 'settings' ? 'active' : ''} onClick={() => {redirect (`/?page=settings`)}}>\n            <img alt=\"\" width=\"32\" height=\"32\" src={NavSettings} />\n            <label>Settings</label>\n          </li>\n          <li></li>\n        </ul>\n      </nav>\n    </>\n  );\n}\n\nexport default App;","import {useEffect, useState} from 'react';\nimport {entries as api} from '../auth';\nimport {runIndexEntries} from '../lib/indexing';\n\nexport default function useJournal () {\n\n  const [entryList, setEntryList] = useState ([]); \n  const [entries, setEntries] = useState ([]);\n  const getEntries = async () => {\n    try {\n      let req = await api.get ();\n      let arr = await req.json ();\n      setEntryList (arr);\n    } catch (e) {\n    }\n  }\n  const createEntry = async body => new Promise (async (resolve, reject) => {\n    try {\n      let req = await api.post (body);\n      let entry = await req.json ();\n      setEntryList ([...entryList, entry]);\n      resolve ();\n    } catch (e) {\n      let pending = JSON.parse (localStorage.getItem ('pending-actions') || '[]');\n      pending.push ({\n        action: 'create-entry',\n        body\n      });\n      localStorage.setItem ('pending-actions', JSON.stringify (pending));\n      reject (e);\n    }\n  })\n\n  useEffect (() => {\n    let dict = runIndexEntries (entryList);\n    setEntries (dict);\n  }, [entryList]);\n\n  return {entries, getEntries, createEntry};\n\n}","import {useState} from 'react';\nimport {shares as api} from '../auth';\nimport {runIndexEntries} from '../lib/indexing';\n\nexport default function useSharing () {\n\n  const [sharedWithMe, setSharedWithMe] = useState ([]);\n  const [sharedByMe, setSharedByMe] = useState ([]);\n  const getShares = async cb => {\n    try {\n      let req = await api.get ();\n      let dict = await req.json ();\n      setSharedByMe (dict.sharedByMe);\n      setSharedWithMe (dict.sharedWithMe);\n      cb (dict);\n    } catch (e) {\n    }\n  }\n  const getShareById = async id => new Promise (async (resolve, reject) => {\n    try {\n      let req = await api.getById (id);\n      let arr = await req.json ();\n      let dict = runIndexEntries (arr);\n      resolve (dict);\n    } catch (e) {\n      reject (e);\n    }\n  })\n\n  const toggleFreeze = async id => new Promise (async (resolve, reject) => {\n    try {\n      let req = await api.toggleFreeze (id);\n      let updated = await req.json ();\n      setSharedByMe (sbm => sbm.map (share => share.id === id ? updated : share))\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  });\n\n  const shareJournal = async (phone, name, shareWithName) => new Promise (async (resolve, reject) => {\n    try {\n      let shareWith = (phone.length === 10) ? `+1${phone}` : phone;\n      let req = await api.post ({shareWith, name, shareWithName});\n      let share = await req.json ();\n      alert (`Successfully shared your journal with ${phone}!`);\n      console.log (share);\n      resolve (share);\n    } catch (e) {\n      reject (e);\n    }\n  })\n\n  return {sharedByMe, sharedWithMe, getShareById, getShares, shareJournal, toggleFreeze};\n\n}","import { useState } from \"react\";\nimport {questions as api} from '../auth';\n\nexport default function useQuestions () {\n\n  const [questions, setQuestions] = useState ([]);\n  \n  const getQuestions = async () => new Promise (async (resolve, reject) => {\n    try {\n      let req = await api.get ();\n      let qs = await req.json ();\n      setQuestions (qs.map (q => q.body));\n      resolve (qs);\n    } catch (e) {\n      reject (e);\n    }\n  });\n\n  const createQuestion = async q => new Promise (async (resolve, reject) => {\n    try {\n      let req = await api.post (q);\n      let nq = await req.json ();\n      setQuestions (questions => [...questions, q]);\n      resolve (nq);\n    } catch (e) {\n      reject (e);\n    }\n  });\n\n  return {questions, getQuestions, createQuestion};\n\n}","import {useState, useEffect} from 'react';\nimport {login as _login, register as _register, getCurrentUser, retrieveAccessToken, refreshSession, signOut, customFlow} from '../auth';\n\nexport default function useAuth (onSessionActive) {\n  // data\n  const [user, setUser] = useState (null);\n  const [err, setErr] = useState (null);\n\n  // login method - gets jwt from cognito and accuires barista session from api\n  const login = async (Username, cb, onCodeSent) => {\n    return new Promise (async (resolve, reject) => {\n      try {\n        await customFlow (Username, cb, onCodeSent);\n        console.log ('custom flow complete');\n        await retrieveAccessToken ();\n        setUser (true);\n        resolve ();\n      } catch (e) {\n        console.log ('custom flow complete - on err');\n        reject (e);\n      }\n    })\n  }\n\n  // retrieve locally stored user\n  const retrieveSession = async () => new Promise (async (resolve, reject) => {\n    try {\n      await getCurrentUser ();\n      await retrieveAccessToken ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  });\n\n  // logout logs out locally\n  const logout = async () => new Promise (async (resolve, reject) => {\n    try {\n      await signOut ();\n      window.location.reload ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  })\n  \n  // init\n  const init = async () => {\n    try {\n      console.log ('init auth')\n      await getCurrentUser ();\n      await retrieveSession ();\n      await refreshSession ();\n      setUser (true);\n    } catch (e) {\n      console.log (e);\n      setUser (false);\n    }\n  }\n\n  const register = async (phoneNumber, cb, onCodeSent) => new Promise (async (resolve, reject) => {\n    try {\n      await _register (phoneNumber);\n      await login (phoneNumber, cb, onCodeSent);\n      setUser (true);\n    } catch (e) {\n      setErr (e);\n    }\n  });\n\n  useEffect (() => {\n    if (user && onSessionActive) onSessionActive ();\n  }, [user]);\n\n  useEffect (() => {\n    init ();\n  }, []);\n\n  return {user, err, login, logout, register};\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nconsole.warn = () => {}\nconsole.error = () => {}\n// import reportWebVitals from './reportWebVitals';\nconst swStatus = localStorage.getItem ('sw-status');\nlet passthrough = !navigator.onLine && swStatus;\nif (swStatus) {\n  window.addEventListener ('online', e => {\n    navigator.serviceWorker.startMessages ({online: true});\n  });\n  window.addEventListener ('offline', e => {\n    navigator.serviceWorker.startMessages ({online: true});\n  });\n}\nconst install = async () => {\n  try {\n    if (swStatus) return;\n    await navigator.serviceWorker.register ('/journal/sw.js', {scope: '/journal/'});\n    localStorage.setItem ('sw-status', 'installed')\n    alert ('Therapy Journal has installed!');\n    window.location.reload ();\n  } catch (e) {\n  }\n}\n\nconst uninstall = () => {\n  localStorage.removeItem ('sw-status')\n  navigator.serviceWorker.getRegistrations().then(function(registrations) {\n    for(let registration of registrations) {\n      registration.unregister ()\n    }\n    window.location.reload ();\n  })\n\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <App install={install} uninstall={uninstall} passthrough={passthrough} swStatus={swStatus} />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}