(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{217:function(e,t){},219:function(e,t){},229:function(e,t){},231:function(e,t){},258:function(e,t){},260:function(e,t){},261:function(e,t){},266:function(e,t){},268:function(e,t){},287:function(e,t){},299:function(e,t){},302:function(e,t){},326:function(e,t,n){},327:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(2),a=n.n(c),i=n(146),s=n.n(i),o=n(9),u=n(8),l=n(1),j=n.n(l),d=n(4),f=n(3),h=n(329),b=n(21),p="2ac3ij97dhtkag9fljdsuo1203",O="us-east-1_tRcA2uwF6",x=null,m=new b.e({UserPoolId:O,ClientId:p}),g=null,v=null,w=null,y={get get(){return new Headers({"x-amz-access-token":v})},get post(){return new Headers({"x-amz-access-token":v,"Content-Type":"application/json"})}},k=function(e){return new Promise((function(t,n){try{x=new b.a({Username:e,ClientMetadata:{phoneNumber:e}}),g=new b.c({Username:e,Pool:m}),t()}catch(r){n(r)}}))},S=function(){return new Promise((function(e,t){try{g=m.getCurrentUser(),e()}catch(n){t(n)}}))},N=function(){return new Promise((function(e,t){try{if(!g)throw"Cognito user must be defined to get access token";g.getSession((function(n,r){if(n)return t(n);v=r.getAccessToken().getJwtToken(),w=new b.b({RefreshToken:r.getRefreshToken().getToken()}),e()}))}catch(n){t(n)}}))},C=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.signOut();case 3:t(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(n,r){var c,a,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=new b.d({Name:"phone_number",Value:t}),a=new b.d({Name:"custom:custom:id",Value:Object(h.a)()}),i=[c,a],m.signUp(t,Object(h.a)(),i,null,(function(e,t){if(e)return r(e);g=t.user,n()}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e,t,n){return new Promise(function(){var r=Object(d.a)(j.a.mark((function r(c,a){return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,k(e);case 2:g.setAuthenticationFlowType("CUSTOM_CHALLENGE"),console.log(g,x),g.initiateAuth(x,{onSuccess:function(e){return c(e)},onFailure:function(e){return a(e)},customChallenge:function(e){var r=this;n(),t((function(e){return g.sendCustomChallengeAnswer(e,r)}))}});case 5:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())},M={get get(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries"+(e?"?userId="+e:""),{method:"get",headers:y.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries",{method:"post",headers:y.post,body:JSON.stringify(e)})}},get hide(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries/".concat(e),{method:"delete",headers:y.get})}}},A={get get(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills".concat(e?"?userId="+e:""),{method:"get",headers:y.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills",{method:"post",headers:y.get,body:JSON.stringify(e)})}},get del(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills/".concat(e),{method:"delete",headers:y.get})}}},q={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares",{method:"get",headers:y.get})}},get getById(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries/".concat(e),{method:"get",headers:y.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares",{method:"post",headers:new Headers({"x-amz-access-token":v,"Content-Type":"application/json"}),body:JSON.stringify(e)})}},get toggleFreeze(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares/".concat(e),{method:"put",headers:new Headers({"x-amz-access-token":v})})}}},I={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions",{method:"get",headers:y.get})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions",{method:"post",headers:new Headers({"x-amz-access-token":v,"Content-Type":"application/json"}),body:JSON.stringify(e)})}}},D={get get(){return function(){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/notifications",{headers:new Headers({"x-amz-access-token":v})})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/notifications",{method:"post",headers:new Headers({"x-amz-access-token":v,"Content-Type":"application/json"}),body:JSON.stringify(e)})}},get del(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/notifications/".concat(e),{method:"DELETE",headers:new Headers({"x-amz-access-token":v})})}}},P={get get(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/metrix".concat(e?"?userId="+e:""),{headers:new Headers({"x-amz-access-token":v})})}},get post(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/metrix",{method:"post",headers:new Headers({"x-amz-access-token":v,"Content-Type":"application/json"}),body:JSON.stringify(e)})}}},E={get get(){return function(e){return fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/measurements/".concat(e?"?userId="+e:""),{headers:new Headers({"x-amz-access-token":v})})}},get post(){return function(e,t){console.log(e,t),fetch("https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/metrix/".concat(e),{method:"post",headers:new Headers({"x-amz-access-token":v,"Content-Type":"application/json"}),body:JSON.stringify(t)})}}};JSON.parse(localStorage.getItem("keep-alive"));var z=function(e,t,n){return e<=n&&e>=t},R=function(e){return 60*e.hours+e.minutes},J={type:function(e){return function(t){return t.entryType===e.entryType}},date:function(e){return function(t){return"single-day"===e.mode?z(t.start,(n=e.date,new Date(n.getFullYear(),n.getMonth(),n.getDate())),function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)}(e.date)):"after"===e.mode?new Date(t.start)>e.date:"before"===e.mode?new Date(t.end)<e.date:void 0;var n}},time:function(e){return function(t){return"is-at"===e.mode?z(R(e),R({hours:t.start.getHours(),minutes:t.start.getHours()}),R({hours:t.end.getHours(),minutes:t.end.getHours()})):"before"===e.mode?R({hours:t.start.getHours(),minutes:t.start.getMinutes()})<=R(e):"after"===e.mode?R({hours:t.start.getHours(),minutes:t.start.getMinutes()})>=R(e):void 0}}},H=function(e){return e.map((function(e){return J[e.type](e.value)}))},W=n(10),B=["January","February","March","April","May","June","July","August","September","October","November","December"],V=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e);return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate()).toString()},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e);return"".concat(V[t.getDay()],", ").concat(B[t.getMonth()]," ").concat(t.getDate())},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return"".concat(e.getHours()%12||12,":").concat("0".concat(e.getMinutes()).slice(-2)," ").concat(e.getHours()>11?"pm":"am")},G=function(e){if(e instanceof Date)return e;var t=e.split("-"),n=Object(f.a)(t,3),r=n[0],c=n[1],a=n[2];return r=parseInt(r),c=parseInt(c)-1,a=parseInt(a),new Date(r,c,a)},Q=function(e){var t=e.map((function(e){return Object.assign(e,{start:new Date(e.start),end:new Date(e.end)})}));return t.sort((function(e,t){return t.start-e.start})),t.reduce((function(e,t){return function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=t.filter((function(e){return e[n]===r}));if(a.length>0)return a[0].list;var i=(e={},Object(W.a)(e,n,r),Object(W.a)(e,"meta",c),Object(W.a)(e,"list",[]),e);return t.push(i),i.list}(e,"date",Y(t.start),{date:L(t.start)}).push(t),e}),[])};var K=function(e,t,n){var r,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.filter((function(e){return e[t]===n}));if(a.length>0)return a[0].list;var i=(r={},Object(W.a)(r,t,n),Object(W.a)(r,"meta",c),Object(W.a)(r,"list",[]),r);return e.push(i),i.list};var X=window.location.href.split("?")[0];"/"===X.charAt(X.length-1)&&(X=X.substring(0,X.length-1));var _=X;var Z,$=n(148),ee=n.n($),te=null,ne=window.AudioContext||window.webkitAudioContext,re=null,ce=null,ae=[],ie=[],se=!!ne,oe=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.navigator.mediaDevices.getUserMedia({audio:!0});case 3:re=e.sent,t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){if(!re)throw new Error("no stream available to record");(ce=new window.MediaRecorder(re)).ondataavailable=function(e){ae.push(e.data)}},le=function(){return!!re&&!!ce&&!!ae},je=function(){var e=Object(d.a)(j.a.mark((function e(){var t,n=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:300,e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(n,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,te=new ne,le()){e.next=4;break}throw new Error("Environment not set up for recording");case 4:setTimeout((function(){ce.start(),n()}),t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),console.log("\n    current state:\n      stream = ".concat(re,"\n      mediaRecorder = ").concat(ce,"\n      chunks = ").concat(ae,"\n    "));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{ce.stop(),setTimeout((function(){return t()}),150)}catch(r){n(r),console.log("\n    current state:\n      stream = ".concat(re,"\n      mediaRecorder = ").concat(ce,"\n      chunks = ").concat(ae,"\n    "))}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,r=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"recording",e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(r,c){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t(),e.prev=1,e.t0=te,e.next=5,ae[0].arrayBuffer();case 5:e.t1=e.sent,e.t2=function(e){Z=new ee.a.Mp3Encoder(e.numberOfChannels,e.sampleRate,256e3),ie.push(Z.encodeBuffer(e.getChannelData(0).map((function(e){return 1e4*e})))),ie.push(new Int16Array(Z.flush()));var t=new File(ie,n,{type:"audio/mp3"});a(),r(t)},e.t0.decodeAudioData.call(e.t0,e.t1,e.t2),e.next=14;break;case 10:e.prev=10,e.t3=e.catch(1),a(),c(e.t3);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var he=function(e){var t=e.split(" "),n=Object(f.a)(t,2),r=n[0],c=n[1],a=r.split(":"),i=Object(f.a)(a,2),s=i[0],o=i[1];return parseInt(s)%12*60+parseInt(o)+("pm"===c?720:0)},be=function(e,t){return he(e.notificationTime)-he(t.notificationTime)};var pe=new Date;pe=new Date(pe.getFullYear(),pe.getMonth(),pe.getDate());var Oe=new Date(pe.getFullYear(),pe.getMonth(),pe.getDate()+1);var xe={useAuth:function(e){var t=Object(c.useState)(null),n=Object(f.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(f.a)(i,2),o=s[0],u=s[1],l=function(){var e=Object(d.a)(j.a.mark((function e(t,n,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(c,i){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t,n,r);case 3:return console.log("custom flow complete"),e.next=6,N();case 6:localStorage.setItem("keep-alive",!0),a(!0),c(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("custom flow complete - on err"),i(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),h=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S();case 3:return e.next=5,N();case 5:t(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C();case 3:localStorage.setItem("keep-alive",!1),window.location.reload(),t(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("init auth"),e.next=4,S();case 4:return e.next=6,h();case 6:return e.next=8,new Promise((function(e,t){try{if(!g)throw"Cannot refresh empty cognito user";if(!w)throw"Cannot refresh empty refresh token";g.refreshSession(w,(function(n,r){if(n)return t(n);v=r.getAccessToken().getJwtToken(),w=new b.b({RefreshToken:r.getRefreshToken().getToken()}),e()}))}catch(n){t(n)}}));case 8:a(!0),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),a(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(j.a.mark((function e(t,n,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(c,i){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T(t);case 3:return e.next=5,l(t,n,r);case 5:a(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),u(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){r&&e&&e()}),[r]),Object(c.useEffect)((function(){O()}),[]),{user:r,err:o,login:l,logout:p,register:x}},useJournal:function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(0),i=Object(f.a)(a,2),s=i[0],u=i[1],l=Object(c.useState)([]),h=Object(f.a)(l,2),b=h[0],p=h[1],O=Object(c.useState)([]),x=Object(f.a)(O,2),m=x[0],g=x[1],v=Object(c.useState)(""),w=Object(f.a)(v,2),y=w[0],k=w[1],S=Object(c.useState)([]),N=Object(f.a)(S,2),C=N[0],T=N[1],F=Object(c.useState)([]),A=Object(f.a)(F,2),q=A[0],I=A[1],D=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.get(t);case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,r(c),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(n,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.post(t);case 3:return e.next=5,D();case 5:n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(n,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.hide(t);case 3:return e.next=5,D();case 5:n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){return q.includes(e)},R=function(e){p(e);var t=H(e);g(t),u(s+1)};return Object(c.useEffect)((function(){!function(){var e=m.reduce((function(e,t){return e.filter(t)}),n);if(0===y.length)return T(Q(e));var t=n.filter((function(e){return"freeform"===e.entryType})).map((function(e){return Object.assign(e,{text:e.freeform})})).filter((function(e){return e.text.match(y.toLowerCase())})),r=n.filter((function(e){return"questions"===e.entryType})).map((function(e){return Object.assign(e,{text:e.answers.join(" ").toLowerCase()})})).filter((function(e){return e.text.match(y.toLowerCase())}));e=Q([].concat(Object(o.a)(r),Object(o.a)(t))),T(e)}()}),[n,b.length,y,s]),{entries:C,entryList:n,filters:b,filterIterator:s,getEntries:D,createEntry:P,hideEntry:E,toggleStageForRemoval:function(e){z(e)&&I((function(t){return t.filter((function(t){return t.id!==e}))})),I((function(t){return[].concat(Object(o.a)(t),[e])}))},shouldRemove:z,setQuery:k,clearSearch:function(){return R([]),k(""),u(s+1),Promise.resolve()},setFilters:R}},useWriting:function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1];return{questions:n,getQuestions:function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(t,n){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.get();case 3:return c=e.sent,e.next=6,c.json();case 6:a=e.sent,r(a.map((function(e){return e.body}))),t(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),n(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createQuestion:function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(n,c){var a,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.post(t);case 3:return a=e.sent,e.next=6,a.json();case 6:i=e.sent,r((function(e){return[].concat(Object(o.a)(e),[t])})),n(i),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),c(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},useSettings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.localStorage,n=JSON.parse(t.getItem("therapy-journal-settings")||"{}"),r=Object.assign(e,n),a=Object(c.useState)(r),i=Object(f.a)(a,2),s=i[0],o=i[1],l=Object(c.useState)(0),j=Object(f.a)(l,2),d=j[0],h=j[1],b=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?n.reduce((function(e,t){var n=t.charAt(0),r=t.substring(1);return"!"===n?e&&!s[r]:"|"===n?e||s[r]:"&"===n?e&&s[r]:e}),s[e]):s[e]},p=function(){return Object.assign({},s)},O=function(e,t){s[e]||(o(Object(u.a)(Object(u.a)({},s),{},Object(W.a)({},e,t))),h(d+1))},x=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),c=2;c<n;c++)r[c-2]=arguments[c];if(!r.length)return o(Object(u.a)(Object(u.a)({},s),{},Object(W.a)({},e,t)));var a=r.reduce((function(e,n){var r=n.charAt(0),c=n.substring(1);return"!"===r?Object(u.a)(Object(u.a)({},e),{},Object(W.a)({},c,!t)):"|"===r&&!1===t?Object(u.a)(Object(u.a)({},e),{},Object(W.a)({},c,!0)):e}),Object(W.a)({},e,t));o((function(e){return Object.assign(e,a)})),h(d+1)},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.reduce((function(e,t){var n=t.key,r=t.value;return Object.assign(e,Object(W.a)({},n,r))}),{});o((function(e){return Object.assign(e,t)})),h(d+1)},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){if(!t.length)return o(Object(u.a)(Object(u.a)({},s),{},Object(W.a)({},e,!s[e])));var r=!s[e],c=t.reduce((function(e,t){var n=t.charAt(0),c=t.substring(1);return"!"===n?Object(u.a)(Object(u.a)({},e),{},Object(W.a)({},c,!r)):"|"===n&&!1===r?Object(u.a)(Object(u.a)({},e),{},Object(W.a)({},c,!0)):e}),Object(W.a)({},e,r));o(Object(u.a)(Object(u.a)({},s),c)),h(d+1)}};return Object(c.useEffect)((function(){t.setItem("therapy-journal-settings",JSON.stringify(s))}),[s]),{getSetting:b,getAll:p,toggle:g,addSetting:O,set:x,setAll:m}},useSharing:function(e){var t=Object(c.useState)([]),n=Object(f.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)([]),s=Object(f.a)(i,2),o=s[0],u=s[1],l=Object(c.useState)([]),h=Object(f.a)(l,2),b=h[0],p=h[1],O=function(){var t=Object(d.a)(j.a.mark((function t(){var n,r,c,i,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q.get();case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,c=r.sharedWithMe,i=r.sharedByMe,u(i),a(c),s=i.map((function(e){return{key:"share-".concat(e.id),value:!e.frozen}})),e.setAll(s),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(n,r){var c,a,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.getById(t);case 3:return c=e.sent,e.next=6,c.json();case 6:a=e.sent,i=Q(a),p(i),n(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(n,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.toggleFreeze(t);case 3:return e.next=5,O();case 5:n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(j.a.mark((function e(t,n,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(c,a){var i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=10===t.length?"+1".concat(t):t,e.next=4,q.post({shareWith:i,name:n,shareWithName:r});case 4:return e.next=6,O();case 6:c(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return{sharedByMe:o,sharedWithMe:r,sharedJournal:b,getShareById:x,getShares:O,shareJournal:g,toggleFreeze:m}},useSkills:function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),i=Object(f.a)(a,2),s=i[0],u=i[1],l=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.get(t);case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,a=c.reduce((function(e,t){return K(e,"category",t.category,{category:t.category}).push(t),e}),[]),r(a),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),h=function(e){return s.includes(e)};return{skills:n,getSkills:l,submitSkill:function(e){return new Promise(function(){var t=Object(d.a)(j.a.mark((function t(n,c){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r((function(t){return K(t,"category",e.category,{category:e.category}).push(e),t})),t.next=4,A.post(e);case 4:n(),t.next=13;break;case 7:t.prev=7,t.t0=t.catch(0),(a=JSON.parse(localStorage.getItem("pending-actions")||"[]")).push({action:"submit-skill",body:e}),localStorage.setItem("pending-actions",JSON.stringify(a)),c(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}())},stageForRemoval:function(e){u([].concat(Object(o.a)(s),[e]))},unstage:function(e){u(s.filter((function(t){return t!==e})))},isStaged:h,removeSkill:function(e){return new Promise(function(){var t=Object(d.a)(j.a.mark((function t(n,r){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,h(e)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,A.del(e);case 5:return t.next=7,l();case 7:n(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),r(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}())}}},useRouter:function(){var e=new URLSearchParams(window.location.search).get("page")||"write",t=Object(c.useState)(e),n=Object(f.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(new URLSearchParams(window.location.search)),s=Object(f.a)(i,2),o=s[0],u=s[1];return{page:r,params:o,redirect:function(e){var t=e.split("?"),n=t.length>1?new URLSearchParams("?".concat(t[1])).get("page"):"write";window.history.pushState({previous:r,next:n},"Journal","".concat(_).concat(e)),a(n),t.length>1&&u(new URLSearchParams("?".concat(t[1]))),function(){setTimeout((function(){window.scrollBy({left:0,top:-window.scrollY,behavior:"smooth"})}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}(100)}}},useAudio:function(e){var t=Object(c.useState)("not-started"),n=Object(f.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(f.a)(i,2),o=s[0],u=s[1],l=Object(c.useState)("audio-recording-".concat(U(),"-").concat(Y(),".mp3")),h=Object(f.a)(l,2),b=h[0],p=h[1],O=Object(c.useState)(0),x=Object(f.a)(O,2),m=x[0],g=x[1],v=Object(c.useState)(!1),w=Object(f.a)(v,2),y=w[0],k=w[1],S=Object(c.useState)(null),N=Object(f.a)(S,2),C=N[0],T=N[1],F=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je();case 2:a("recording"),k(window.setInterval((function(){return g((function(e){return e+1}))}),1e3));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var t=Object(d.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.clearInterval(y),k(!1),g(0),t.next=5,de();case 5:return t.next=7,fe(e,"audio-recording-".concat(U(),"-").concat(Y(),".mp3"));case 7:n=t.sent,console.log(n),u(n),a("finished");case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),A=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.clearInterval(y),a("paused"),ce.pause();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(window.setInterval((function(){return g((function(e){return e+1}))}),1e3)),a("recording"),ce.resume();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{initAudio:function(){var t=Object(d.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e(),t.prev=1,t.next=4,oe();case 4:ue(),T(le()),n(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),audioRecording:o,audioRecordingTitle:b,timeElapsed:m,recordingStatus:r,ready:C,startRecording:F,stopRecording:M,pauseRecording:A,resumeRecording:q,resetAudioInformation:function(){u(null),p("audio-recording-".concat(U(),"-").concat(Y(),".mp3")),g(0),a("not-started"),k(!1)},setAudioRecordingTitle:p}},useNotifications:function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1],a=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(t,n){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.get();case 3:return c=e.sent,e.next=6,c.json();case 6:(a=e.sent).sort(be),r(a),t(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),n(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{notifications:n,getNotifications:a,createNotification:function(e){return new Promise(function(){var t=Object(d.a)(j.a.mark((function t(n,r){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.post(e);case 3:return t.next=5,a();case 5:n(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),r(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}())},deleteNotification:function(e){return new Promise(function(){var t=Object(d.a)(j.a.mark((function t(n,r){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.del(e);case 3:return t.next=5,a();case 5:n(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),r(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}())}}},useMetrix:function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),i=Object(f.a)(a,2),s=i[0],u=i[1],l=Object(c.useState)([]),h=Object(f.a)(l,2),b=h[0],p=h[1],O=Object(c.useState)([]),x=Object(f.a)(O,2),m=x[0],g=x[1],v=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get(t);case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,r(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("#getMetrix",e.t0);case 13:return e.abrupt("return",Promise.resolve());case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(n,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.post(t);case 3:if(e.sent.ok){e.next=6;break}throw new Error("request not ok");case 6:return e.next=8,v();case 8:n(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("#createMetrix",e.t0),r(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.get(t);case 3:return n=e.sent,e.next=6,n.json();case 6:r=(r=e.sent).map((function(e){return Object.assign(e,{measuredAt:new Date(e.measuredAt)})})),u(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("#getMeasurements",e.t0);case 14:return e.abrupt("return",Promise.resolve());case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(b.map((function(e){return E.post(e.metricId,e.body)})));case 3:return p([]),e.next=6,y();case 6:t(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("#createMeasurements",e.t0),n(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){if(n.length&&s.length){var e=s.filter((function(e){return"as needed"!==n.find((function(t){return t.id===e.metric})).frequency})).filter((function(e){return(t=e.measuredAt)>pe&&t<Oe;var t})),t=n.filter((function(t){return!!e.find((function(e){return e.metric===t.id}))})).map((function(e){return e.id}));g(t)}}),[n,s]),{metrix:n,measurements:s,captured:m,getMetrix:v,createMetrix:w,getMeasurements:y,measure:function(e,t){if(n.find((function(t){return e.id===t.id}))){var r=b.slice(),c=r.findIndex((function(t){return t.metricId===e.id}));if(-1===c)return p([].concat(Object(o.a)(b),[{metricId:e.id,body:{value:t,unit:e.unit}}]));void 0===t?r.splice(c,1):r[c].body.value=t,p(r)}},createMeasurements:k,isCaptured:function(e){return m.includes(e)}}}},me={"custom-questions":!0,"default-questions":!0,freeform:!1,"skill-add-mode":!1},ge=Object(c.createContext)(),ve=function(){return a.a.useContext(ge)};function we(e){var t=e.children,n={},a=Object(c.useState)(null),i=Object(f.a)(a,2),s=i[0],o=i[1];n.freeze=function(e){return o(""),function(){o(null)}};var u=Object(c.useState)(null),l=Object(f.a)(u,2),j=l[0],d=l[1];n.closeModal=function(){return d(null)},n.setModal=d;var h=Object(c.useState)(!1),b=Object(f.a)(h,2),p=b[0],O=b[1];n.viewMode={isViewOnly:p,setIsViewOnly:O},n.settings=xe.useSettings(me),n.session=xe.useSettings({},sessionStorage),n.skills=xe.useSkills(),n.journal=xe.useJournal(),n.sharing=xe.useSharing(n.settings),n.writing=xe.useWriting(),n.metrix=xe.useMetrix(),n.router=xe.useRouter(),n.audio=xe.useAudio(n.freeze),n.notifications=xe.useNotifications(),n.viewSharedJournal=function(e){n.journal.getEntries(e),n.skills.getSkills(e),n.viewMode.setIsViewOnly(!0),n.router.redirect("/?page=journal")},n.viewMyJournal=function(){n.journal.getEntries(),n.skills.getSkills(),n.viewMode.setIsViewOnly(!1),n.router.redirect("/?page=settings")};return n.auth=xe.useAuth((function(){n.metrix.getMetrix(),n.metrix.getMeasurements(),n.skills.getSkills(),n.writing.getQuestions(),n.journal.getEntries(),n.sharing.getShares((function(e){e.sharedByMe.forEach((function(e){n.settings.set("share-".concat(e.id),!e.frozen)}))})),n.notifications.getNotifications(),se?(n.settings.set("audio-recording-supported",!0),n.settings.set("audio-recording",!1)):(n.settings.set("audio-recording-supported",!1),n.settings.set("audio-recording",!1))})),Object(r.jsxs)(ge.Provider,{value:n,children:[null!==s&&Object(r.jsx)("div",{id:"loading-animation"}),null!==j&&Object(r.jsx)("div",{id:"modal-backdrop",children:Object(r.jsx)("div",{id:"modal-content",children:j})}),t]})}n.p;var ye=400,ke=100,Se=25,Ne={r:5};function Ce(e){var t=Object(f.a)(e.range,2),n=t[0],a=t[1],i=e.step,s=e.defaultValue,o=e.onChange,l=Object(c.useRef)(),j=Object(c.useState)(s||n),d=Object(f.a)(j,2),h=d[0],b=d[1],p=Object(c.useState)(!1),O=Object(f.a)(p,2),x=O[0],m=O[1],g=function(){var e=Math.round(n+(h-n)/i)*i;return e<n&&(e=n),e>a&&(e=a),e},v=function(e,t){var n=t-e;return function(r){return r<e&&(r=e),r>t&&(r=t),Se+350*(r-e)/n}}(n,a),w=function(e){if(x){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ye,r=t-e,c=n-Se*n/ye*2;return function(e){return(e-Se)*r/c}}(n,a,l.current.clientWidth),r=e.movementX?h+e.movementX*(a-n)/(l.current.clientWidth-5*l.current.clientWidth/ye*10):e.touches&&e.touches.length?t(e.touches[0].clientX):h;r<n&&(r=n),r>a&&(r=a),b(r)}};return Object(c.useEffect)((function(){o&&o(g())}),[h]),Object(r.jsxs)("svg",{ref:l,onTouchMove:w,onTouchCancel:function(){return m(!1)},onMouseMove:w,onMouseLeave:function(){return m(!1)},onMouseUp:function(){return m(!1)},viewBox:"0 0 ".concat(ye," ").concat(ke),className:"component-slider-svg",children:[Object(r.jsxs)("g",{className:"slider-base",children:[Object(r.jsx)("circle",Object(u.a)({cx:v(n),cy:50},Ne)),Object(r.jsx)("line",{x1:v(n)+5,x2:v(a)-5,y1:50,y2:50}),Object(r.jsx)("circle",Object(u.a)({cx:v(a),cy:50},Ne)),Object(r.jsx)("text",{x:v(n),y:80,textAnchor:"left",children:n}),Object(r.jsx)("text",{x:v(a),y:80,textAnchor:"end",children:a})]}),Object(r.jsxs)("g",{className:"slider-value",children:[Object(r.jsx)("circle",{onTouchStart:function(){return m(!0)},onMouseDown:function(){return m(!0)},cx:v(h),cy:50,r:10}),Object(r.jsx)("line",{x1:v(h),x2:v(h),y1:25,y2:35}),Object(r.jsx)("text",{x:v(h),y:20,textAnchor:"middle",children:g()})]})]})}var Te={boolean:function(e){var t=e.onChange,n=e.defaultValue;return Object(r.jsx)("div",{children:Object(r.jsxs)("select",{defaultValue:n,onChange:function(e){return t(""===e.target.value?void 0:e.target.value)},children:[Object(r.jsx)("option",{value:void 0}),Object(r.jsx)("option",{children:"Yes"}),Object(r.jsx)("option",{children:"No"})]})})},number:function(e){var t=e.onChange,n=e.defaultValue,c=e.range,a=e.step;return Object(r.jsx)("div",{children:Object(r.jsx)(Ce,{range:c,step:a,defaultValue:n,onChange:t})})},string:function(e){var t=e.onChange,n=e.defaultValue,c=void 0===n?"...":n;return Object(r.jsx)("div",{contentEditable:!0,onBlur:function(e){return t(e.target.innerText)},children:c})}};var Fe=function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{className:"long",children:e.children}),Object(r.jsx)("h1",{className:"short",children:e.short?e.short:e.children})]})},Me=function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{className:"long",children:e.children}),Object(r.jsx)("h2",{className:"short",children:e.short?e.short:e.children})]})},Ae=function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h3",{className:"long",children:e.children}),Object(r.jsx)("h3",{className:"short",children:e.short?e.short:e.children})]})},qe=n.p+"static/media/cancel.da5c4222.svg",Ie=n.p+"static/media/trash.dd7f053f.svg",De=[{id:"default-0",unit:"string",prompt:"What have I done today?",frequency:"as needed"},{id:"default-1",unit:"string",prompt:"How do I feel?",frequency:"as needed"},{id:"default-2",unit:"string",prompt:"What else am I going to do today?",frequency:"as needed"}];function Pe(){var e=ve(),t=e.auth.user,n=e.router,a=n.page,i=(n.redirect,e.journal.createEntry),s=e.settings,l=(s.getSetting,s.toggle,s.set,e.writing),h=(l.questions,l.recordingStatus,l.resetAudioInformation,e.audio),b=(h.audioRecording,h.audioRecordingTitle,e.metrix),p=b.metrix,O=b.createMeasurements,x=b.measure,m=b.isCaptured,g=e.session,v=e.freeze,w=Object(c.useState)(new Date),y=Object(f.a)(w,2),k=y[0],S=(y[1],Object(c.useState)(De)),N=Object(f.a)(S,2),C=N[0],T=N[1],F=Object(c.useState)(""),M=Object(f.a)(F,2),A=M[0],q=M[1],I=function(){var e=Object(d.a)(j.a.mark((function e(){var t,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v(),e.prev=1,n=g.getAll(),r={entryType:"questions",start:k,end:new Date,questions:Object.keys(n),answers:Object.values(n)},e.next=6,i(r);case 6:return e.next=8,O();case 8:t(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t();case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){var e=g.getAll(),t=Object.keys(e).map((function(e){var t=De.find((function(t){return t.prompt===e}));return console.log(t),t||p.find((function(t){return t.prompt===e}))})).filter((function(e){return e}));T(t)}),[p]),t&&"write"===a?Object(r.jsxs)("main",{id:"question-answer-entry",children:[Object(r.jsx)(Fe,{short:"New Entry",children:"New Question & Answer Entry"}),Object(r.jsx)(Me,{children:L()}),Object(r.jsx)(Ae,{children:U(k)}),Object(r.jsxs)("div",{className:"questions",children:[C.map((function(e){var t=Te[e.unit];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("span",{className:"prompt-prompt",children:[Object(r.jsx)("b",{children:e.prompt}),Object(r.jsx)("span",{onClick:function(){return function(e){T(C.filter((function(t){return t.id!==e.id}))),x(e,void 0),g.set(e.prompt,void 0)}(e)},children:Object(r.jsx)("img",{src:Ie})})]}),Object(r.jsx)(t,Object(u.a)({onChange:function(t){return function(e,t){x(e,t),g.set(e.prompt,t)}(e,t)},defaultValue:g.getSetting(e.prompt)},e)),Object(r.jsx)("hr",{className:"prompt-divider"})]})})),0!==[].concat(Object(o.a)(p),De).filter((function(e){return C.find((function(t){return t.id===e.id}))}))&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("section",{onClick:function(){return q("selecting")},className:"add-a-section ".concat(A),children:"+"}),Object(r.jsxs)("section",{children:["selecting"===A&&Object(r.jsxs)("select",{autoFocus:!0,onChange:function(e){return e.target.value&&T([].concat(Object(o.a)(C),[[].concat(Object(o.a)(p),De).find((function(t){return e.target.value===t.id}))]))||q("")},children:[Object(r.jsx)("option",{value:null,defaultChecked:!0}),[].concat(Object(o.a)(p),De).filter((function(e){return!m(e)})).filter((function(e){return!C.find((function(t){return e.id===t.id}))})).map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.prompt})}))]}),Object(r.jsx)("span",{className:"fake-button",onClick:function(){return q("")},children:Object(r.jsx)("img",{src:qe})})]})]})]}),Object(r.jsx)("button",{onClick:I,children:"Submit"})]}):null}var Ee=function(e){e.key;var t=e.children,n=e.defferedClassName,a=e.delay,i=Object(c.useState)(!0),s=Object(f.a)(i,2),o=s[0],u=s[1];return Object(c.useEffect)((function(){setTimeout((function(){u(!1)}),a)}),[]),o?Object(r.jsx)("article",{className:n}):Object(r.jsx)(r.Fragment,{children:t})},ze=n.p+"static/media/minus.88ead845.svg",Re=n.p+"static/media/calendar.0073112f.svg",Je=n.p+"static/media/caret-down.bfd98d54.svg",He=[0,31,28,31,30,31,30,31,31,30,31,30,31],We=function(e,t){return He[e]+(t%4===0?1:0)};var Be=function(e){var t=e.value,n=e.remove,a=e.setValue,i=new Date(t.date),s=Object(c.useState)(t.mode),o=Object(f.a)(s,2),u=o[0],l=o[1],j=Object(c.useState)(i.getMonth()+1),d=Object(f.a)(j,2),h=d[0],b=d[1],p=Object(c.useState)(i.getDate()),O=Object(f.a)(p,2),x=O[0],m=O[1],g=Object(c.useState)(i.getFullYear()),v=Object(f.a)(g,2),w=v[0],y=v[1],k=Object(c.useState)(We(h,w)),S=Object(f.a)(k,2),N=S[0],C=S[1];return Object(c.useEffect)((function(){if(NaN!==h&&NaN!==x&&NaN!==w){var e=We(h,w);C(e),a(Object.assign(t,{mode:u,date:new Date(w,h-1,x,0,0,0)}))}}),[x,h,w,u]),Object(r.jsxs)("li",{className:"grid filter date-filter",children:[Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:Re,alt:"Date Filter"})}),Object(r.jsx)("span",{className:t.modeFinal?"":"fake-button",onClick:function(){t.modeFinal||l("single-day"===u?"after":"after"===u?"before":"single-day")},children:Object(r.jsxs)("span",{className:"grid switch-mode",children:[Object(r.jsx)("span",{children:"single-day"===t.mode?"Day Of":"after"===t.mode?"After":"Before"}),!t.modeFinal&&Object(r.jsx)("img",{style:{display:"inline",transform:"rotate(-90deg)"},width:8,height:8,src:Je})]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{type:"tel",min:1,max:12,defaultValue:h,onChange:function(e){return b(parseInt(e.target.value))}}),Object(r.jsx)("span",{children:"/"}),Object(r.jsx)("input",{type:"tel",min:1,max:N,defaultValue:x,onChange:function(e){return m(parseInt(e.target.value))}}),Object(r.jsx)("span",{children:"/"}),Object(r.jsx)("input",{type:"tel",min:2020,max:(new Date).getFullYear(),defaultValue:w,onChange:function(e){return y(parseInt(e.target.value))}})]}),Object(r.jsx)("span",{children:Object(r.jsx)("span",{className:"fake-button",onClick:n,children:"remove"})})]})},Ve=n.p+"static/media/stopwatch.43421b05.svg";var Ye=function(e){var t=e.value,n=e.remove,a=e.setValue,i=Object(c.useState)(t.mode),s=Object(f.a)(i,2),o=s[0],u=s[1],l=Object(c.useState)(t.minutes),j=Object(f.a)(l,2),d=j[0],h=j[1],b=Object(c.useState)("00".concat(t.minutes).slice(-2)),p=Object(f.a)(b,2),O=p[0],x=p[1],m=Object(c.useState)(t.hours),g=Object(f.a)(m,2),v=g[0],w=g[1],y=Object(c.useState)(t.hours%12||12),k=Object(f.a)(y,2),S=k[0],N=k[1],C=function(e){var t="object"===typeof e?parseInt(e.target.value):e;return t?t>24?w(t%24):t<0?w(24+t):void w(t):N("")};return Object(c.useEffect)((function(){N(v%12||12),x("00".concat(d).slice(-2)),a({mode:o,minutes:d,hours:v})}),[d,v,o]),Object(r.jsxs)("li",{className:"grid filter time-filter",children:[Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:Ve})}),Object(r.jsx)("span",{className:"fake-button",onClick:function(){u("is-at"===o?"after":"after"===o?"before":"is-at")},children:Object(r.jsxs)("span",{className:"grid switch-mode",children:[Object(r.jsx)("span",{children:"is-at"===t.mode?"Exact":"after"===t.mode?"After":"Before"}),Object(r.jsx)("img",{style:{display:"inline",transform:"rotate(-90deg)"},width:8,height:8,src:Je})]})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{type:"tel",value:S,onChange:C}),Object(r.jsx)("span",{children:":"}),Object(r.jsx)("input",{type:"tel",value:O,onChange:function(e){return function(e){var t="object"===typeof e?parseInt(e.target.value):e;return t?t>=60?h(t%60):t<0?h(t+60):void h(t):x("")}(parseInt(e.target.value))}}),Object(r.jsx)("span",{className:"fake-button",onClick:function(){return C(v+12)},children:v<12?"am":"pm"})]}),Object(r.jsx)("span",{children:Object(r.jsx)("span",{className:"fake-button",onClick:n,children:"remove"})})]})},Le=n.p+"static/media/search.28b0ad10.svg",Ue=n.p+"static/media/filter.8be2c938.svg",Ge={date:Be,time:Ye};function Qe(){var e=ve().journal,t=e.query,n=e.filters,a=e.filterIterator,i=e.setQuery,s=e.setFilters,u=Object(c.useState)(!1),l=Object(f.a)(u,2),j=l[0],d=l[1],h=Object(c.useState)([]),b=Object(f.a)(h,2),p=b[0],O=b[1],x=Object(c.useState)([]),m=Object(f.a)(x,2),g=m[0],v=m[1],w=Object(c.useState)([]),y=Object(f.a)(w,2),k=(y[0],y[1]);Object(c.useEffect)((function(){O(n.filter((function(e){return"date"===e.type}))),v(n.filter((function(e){return"time"===e.type}))),k(n.filter((function(e){return"type"===e.type})))}),[a]);var S=function(e){return function(){n.splice(e,1),s(n)}},N=function(e){return function(t){n[e].value=t,s(n)}};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"grid search-container",children:[Object(r.jsxs)("form",{className:"search-bar",onSubmit:function(e){return e.preventDefault()},children:[Object(r.jsx)("input",{value:t,onChange:function(e){return i(e.target.value)},placeholder:"Search..."}),Object(r.jsx)("img",{src:Le})]}),Object(r.jsx)("span",{onClick:function(e){return d(!j)},className:"open-filters",children:Object(r.jsx)("img",{src:Ue})})]}),j?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("ol",{className:"grid filter-list",children:n.map((function(e,t){var n=Ge[e.type];return Object(r.jsx)(n,{value:e.value,remove:S(t),setValue:N(t)})}))}),0===n.length&&Object(r.jsx)("div",{className:"grid",children:"You don't have any filters, add some by clicking on the icons below!"}),Object(r.jsxs)("ul",{className:"grid add-filter-list",children:[Object(r.jsx)("li",{onClick:function(){if(0===p.length){var e=[].concat(Object(o.a)(n),[{type:"date",value:{mode:"single-day",date:new Date}}]);s(e)}else{if(1!==p.length)return;var t=n.filter((function(e){return"date"===e.type}))[0];t.value=Object.assign(t.value,{mode:"after",modeFinal:!0});var r=[].concat(Object(o.a)(n),[{type:"date",value:{mode:"before",modeFinal:!0,date:new Date}}]);s(r)}},className:p.length<2?"":"add-filter-disabled",children:Object(r.jsx)("img",{src:Re,alt:"date filter"})}),Object(r.jsx)("li",{onClick:function(){if(0===g.length){var e=[].concat(Object(o.a)(n),[{type:"time",value:{mode:"is-at",minutes:(new Date).getMinutes(),hours:(new Date).getHours()}}]);s(e)}else{if(1!==g.length)return;g[0].value.mode="after";var t=[].concat(Object(o.a)(n),[{type:"time",value:{mode:"before",minutes:(new Date).getMinutes(),hours:(new Date).getHours()}}]);s(t)}},className:g.length<2?"":"add-filter-disabled",children:Object(r.jsx)("img",{src:Ve,alt:"time filter"})})]}),Object(r.jsx)("hr",{})]}):Object(r.jsx)("div",{className:"none"})]})}function Ke(e){var t=e.entry,n=e.resolve,c=e.reject,a=e.hideEntry,i=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a(t.id);case 3:n(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),c("Couldn't  successfully hide entry!");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"grid remove-entry-modal",children:[Object(r.jsxs)("p",{children:["Are you sure you want to hide your journal entry from ",L(t.start)," at ",U(t.start)]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:i,children:"Yes, hide it!"}),Object(r.jsx)("button",{onClick:function(){return c("Cancelled")},children:"No, don't!"})]})]})}function Xe(e){var t=e.date,n=e.isOpen,c=e.open,a=e.close,i=e.count;return n?Object(r.jsxs)("header",{className:"entry-header",onClick:a,children:[Object(r.jsx)("span",{className:"fake-button"}),Object(r.jsx)(Me,{children:t})]}):Object(r.jsxs)("header",{className:"entry-header",onClick:c,children:[Object(r.jsx)("span",{className:"fake-button"}),Object(r.jsx)(Me,{children:t}),Object(r.jsx)("div",{className:"pill",children:Object(r.jsx)("span",{children:i})})]})}var _e=function(e){var t=e.entries,n=e.open,c=(e.shouldRemove,e.isNotMain,ve()),a=c.journal.hideEntry,i=c.setModal,s=c.closeModal,o=c.viewMode.isViewOnly;return Object(r.jsx)(r.Fragment,{children:t.map((function(e){var t=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(n,c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(Object(r.jsx)(Ke,{entry:t,resolve:n,reject:c,hideEntry:a}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?Object(r.jsxs)("section",{className:"journal-entry",children:[Object(r.jsxs)("header",{children:[Object(r.jsx)("span",{}),Object(r.jsxs)(Ae,{short:U(e.start),children:[U(e.start)," - ",U(e.end)]}),!o&&Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:Ie,onClick:function(e){return Object(d.a)(j.a.mark((function n(){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t(e);case 3:s(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),s();case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))}(e)})})]}),("questions"===e.entryType||!e.entryType)&&e.questions.map((function(t,n){return Object(r.jsx)("section",{children:Object(r.jsxs)("p",{children:[Object(r.jsxs)("b",{children:[t," "]}),e.answers[n]]})},"".concat(e.id,"-question-").concat(n))})),"freeform"===e.entryType&&Object(r.jsx)("section",{className:"journal-entry",children:Object(r.jsx)("p",{children:e.freeform})}),"audio"===e.entryType&&Object(r.jsxs)("figure",{children:[Object(r.jsx)("figcaption",{children:Object(r.jsx)("p",{children:e.audio.title})}),Object(r.jsx)("audio",{controls:!0,src:e.audio.url})]})]},"entry-".concat(e.id)):null}))})};var Ze=function(){var e=ve(),t=e.router.page,n=e.journal,a=n.entries,i=n.clearSearch,s=n.hideEntry,l=e.freeze,h=Object(c.useState)([]),b=Object(f.a)(h,2),p=b[0],O=b[1],x=Object(c.useState)(10),m=Object(f.a)(x,2),g=m[0],v=m[1],w=Object(c.useState)([]),y=Object(f.a)(w,2),k=y[0],S=y[1],N=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(d.a)(j.a.mark((function e(n,r){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=l(),e.prev=1,k.includes(t)){e.next=4;break}return e.abrupt("return",r(new Error("have not staged skill[".concat(t,"] for removal, cannot remove"))));case 4:return e.next=6,s(t);case 6:S((function(e){return e.filter((function(e){return e!==t}))})),c(),n(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),c(),r(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C={startRemoving:function(e){if(k.includes(e))return N(e);S((function(t){return[].concat(Object(o.a)(t),[e])}))},cancelRemove:function(e){S((function(t){return t.filter((function(t){return t!==e}))}))},shouldRemove:function(e){return k.includes(e)},remove:N};Object(c.useEffect)((function(){"journal"!==t&&i()}),[t]);var T=Object(r.jsxs)(r.Fragment,{children:[a.filter((function(e,t){return t<g})).map((function(e,t){return Object(r.jsx)(Ee,{delay:50*t,defferedClassName:"",children:Object(r.jsx)("div",{className:"article-wrapper"+(p.includes(e.date)?" open":""),children:Object(r.jsxs)("article",{children:[Object(r.jsx)(Xe,{count:e.list.length,date:e.meta.date,isOpen:-1!==p.indexOf(e.date),open:function(){O((function(t){return[].concat(Object(o.a)(t),[e.date])}))},close:function(){O((function(t){return t.filter((function(t){return t!==e.date}))}))},index:e}),Object(r.jsx)(_e,Object(u.a)({open:-1!==p.indexOf(e.date),entries:e.list},C))]},"index-search-results-".concat(e.date))})},"deffered-index-search-results-".concat(e.date))})),g<a.length&&Object(r.jsx)("div",{className:"grid",children:Object(r.jsx)("span",{onClick:function(){!function(){arguments.length>0&&void 0!==arguments[0]||window.innerHeight,setTimeout((function(){window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}),arguments.length>1&&void 0!==arguments[1]?arguments[1]:100)}(),v(10+g)},className:"fake-button",children:"Show More"})})]});return 0===a.length&&(T=Object(r.jsxs)("div",{className:"grid",children:[Object(r.jsx)("span",{className:"fake-button",onClick:i,children:"Clear Search Results"}),Object(r.jsx)(Ae,{children:"Hmmmm, nothing there!"})]})),"journal"!==t?null:Object(r.jsxs)("main",{children:[Object(r.jsx)(Fe,{children:"Journal"}),Object(r.jsx)(Qe,{}),T]})},$e=function(e){var t=e.replaceAll(/[^0-9]/g,"");if(10!==t.length)throw new Error("Phone number must be 10 digits, current length: "+t.length);return"+1"+t},et={"minus.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/cursor-creative" title="Cursor Creative">Cursor Creative</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"calendar.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"pen.svg":'Icons made by <a href="https://www.flaticon.com/authors/icongeek26" title="Icongeek26">Icongeek26</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"book.svg":'Icons made by <a href="https://www.flaticon.com/authors/zlatko-najdenovski" title="Zlatko Najdenovski">Zlatko Najdenovski</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"plus.svg":'Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"list.svg":'Icons made by <a href="https://www.flaticon.com/authors/phatplus" title="phatplus">phatplus</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"skill.svg":'Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"settings.svg":'Icons made by <a href="https://www.flaticon.com/authors/srip" title="srip">srip</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a>',"search.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/pixel-perfect" title="Pixel perfect">Pixel perfect</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"filter.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/kirill-kazachek" title="Kirill Kazachek">Kirill Kazachek</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"stopwatch.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/good-ware" title="Good Ware">Good Ware</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"caret-down.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/dave-gandy" title="Dave Gandy">Dave Gandy</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"trash.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/dinosoftlabs" title="DinosoftLabs">DinosoftLabs</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"cancel.svg":'<div>Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"back.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/gregor-cresnar" title="Gregor Cresnar">Gregor Cresnar</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"next.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/gregor-cresnar" title="Gregor Cresnar">Gregor Cresnar</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"happy.svg":'<div>Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"dashboard.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/pixel-perfect" title="Pixel perfect">Pixel perfect</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"left-arrow.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/pixel-perfect" title="Pixel perfect">Pixel perfect</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"more.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/kirill-kazachek" title="Kirill Kazachek">Kirill Kazachek</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>',"ruler.svg":'<div>Icons made by <a href="https://www.flaticon.com/authors/good-ware" title="Good Ware">Good Ware</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>'},tt=n.p+"static/media/pen.27ec406e.svg";function nt(e){var t,n=e.defaultMessage,a=void 0===n?"Hey :) just a reminder to write in your journal! Here's a link - https://lincoln-howard-jr.github.io/journal/?page=write":n,i=ve(),s=i.notifications,o=i.freeze,u=Object(c.useState)(null),l=Object(f.a)(u,2),h=l[0],b=l[1],p=Object(c.useState)("pm"),O=Object(f.a)(p,2),x=O[0],m=O[1],g=Object(c.useState)("12:00"),v=Object(f.a)(g,2),w=v[0],y=v[1],k=Object(c.useState)(a),S=Object(f.a)(k,2),N=S[0],C=S[1],T=Object(c.useRef)(),F=function(){b(null),m("am"),y("12:00"),C(a),P(0)},M=function(e){return function(){var t=e.notificationTime.split(" "),n=Object(f.a)(t,2),r=n[0],c=n[1];b(e.id),m(c),y(r),C(e.message),P(0)}},A=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o(),e.prev=1,x&&w){e.next=4;break}throw new Error("Cannot create notification without exact time.");case 4:return e.next=6,s.createNotification({notificationTime:"".concat(w," ").concat(x),message:T.current?T.current.innerText:N});case 6:F(),t(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t(),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),q=Object(c.useState)(0),I=Object(f.a)(q,2),D=I[0],P=I[1],E=[Object(r.jsxs)(r.Fragment,{children:[!!h&&Object(r.jsx)("p",{children:Object(r.jsx)("b",{children:N})}),!!h&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{onClick:F,children:"Exit"}),Object(r.jsx)("button",{onClick:function(){return P(D+1)},children:"Edit"}),Object(r.jsx)("button",{onClick:(t=h,Object(d.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o(),e.prev=1,e.next=4,s.deleteNotification(t);case 4:F(),n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n();case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))),children:"Delete Notification"})]}),!h&&Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("button",{onClick:function(){return P(D+1)},children:"Create Notification"})})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Select A Time:"}),Object(r.jsx)("br",{}),Object(r.jsxs)("select",{defaultValue:w,onChange:function(e){return y(e.target.value)},children:[Object(r.jsx)("option",{children:"12:00"}),Object(r.jsx)("option",{children:"12:15"}),Object(r.jsx)("option",{children:"12:30"}),Object(r.jsx)("option",{children:"12:45"}),Object(r.jsx)("option",{children:"1:00"}),Object(r.jsx)("option",{children:"1:15"}),Object(r.jsx)("option",{children:"1:30"}),Object(r.jsx)("option",{children:"1:45"}),Object(r.jsx)("option",{children:"2:00"}),Object(r.jsx)("option",{children:"2:15"}),Object(r.jsx)("option",{children:"2:30"}),Object(r.jsx)("option",{children:"2:45"}),Object(r.jsx)("option",{children:"3:00"}),Object(r.jsx)("option",{children:"3:15"}),Object(r.jsx)("option",{children:"3:30"}),Object(r.jsx)("option",{children:"3:45"}),Object(r.jsx)("option",{children:"4:00"}),Object(r.jsx)("option",{children:"4:15"}),Object(r.jsx)("option",{children:"4:30"}),Object(r.jsx)("option",{children:"4:45"}),Object(r.jsx)("option",{children:"5:00"}),Object(r.jsx)("option",{children:"5:15"}),Object(r.jsx)("option",{children:"5:30"}),Object(r.jsx)("option",{children:"5:45"}),Object(r.jsx)("option",{children:"6:00"}),Object(r.jsx)("option",{children:"6:15"}),Object(r.jsx)("option",{children:"6:30"}),Object(r.jsx)("option",{children:"6:45"}),Object(r.jsx)("option",{children:"7:00"}),Object(r.jsx)("option",{children:"7:15"}),Object(r.jsx)("option",{children:"7:30"}),Object(r.jsx)("option",{children:"7:45"}),Object(r.jsx)("option",{children:"8:00"}),Object(r.jsx)("option",{children:"8:15"}),Object(r.jsx)("option",{children:"8:30"}),Object(r.jsx)("option",{children:"8:45"}),Object(r.jsx)("option",{children:"9:00"}),Object(r.jsx)("option",{children:"9:15"}),Object(r.jsx)("option",{children:"9:30"}),Object(r.jsx)("option",{children:"9:45"}),Object(r.jsx)("option",{children:"10:00"}),Object(r.jsx)("option",{children:"10:15"}),Object(r.jsx)("option",{children:"10:30"}),Object(r.jsx)("option",{children:"10:45"}),Object(r.jsx)("option",{children:"11:00"}),Object(r.jsx)("option",{children:"11:15"}),Object(r.jsx)("option",{children:"11:30"}),Object(r.jsx)("option",{children:"11:45"})]}),Object(r.jsxs)("select",{defaultValue:x,onChange:function(e){return m(e.target.value)},children:[Object(r.jsx)("option",{children:"am"}),Object(r.jsx)("option",{children:"pm"})]}),Object(r.jsx)("br",{}),Object(r.jsx)("button",{onClick:function(){return P(D-1)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){return P(D+1)},children:"Customize Message"})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Customize Message:"}),Object(r.jsx)("p",{ref:T,contentEditable:!0,children:N}),Object(r.jsx)("button",{onClick:function(){C(T.current.innerText),P(D-1)},children:"Back"}),!h&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{onClick:function(){return P(D-1)},children:"Back"}),Object(r.jsx)("button",{onClick:A,children:"Finish"})]}),!!h&&Object(r.jsx)("button",{children:"Update Notification"})]})];return Object(r.jsxs)(r.Fragment,{children:[s.notifications.length>0&&Object(r.jsx)("p",{children:"All you have to do is specifiy times you want to recieve reminders to enter in your journal and we will automatically send a text to you at that time each day! Click one of the times to remove that notification."}),Object(r.jsx)("div",{className:"notification-list",children:s.notifications.map((function(e){return Object(r.jsxs)("span",{className:"button-styling",onClick:M(e),children:[Object(r.jsx)("span",{children:e.notificationTime})," ",Object(r.jsx)("img",{src:tt})]})}))}),0===s.notifications.length&&Object(r.jsx)("p",{children:"You haven't created any notifications yet, and that's totally ok! Just remember we're always here if you need us!"}),Object(r.jsx)("div",{className:"notification-creator",children:E[D]})]})}var rt={boolean:"Yes/No",number:"Number Range"},ct=function(e){return e<58&&e>47},at=function(e){return 8===e},it=function(e){return 37===e},st=function(e){return 39===e},ot=function(e){return 9===e},ut=function(e){var t=e.value,n=e.setValue;return Object(r.jsx)("b",{contentEditable:!0,onKeyDown:function(e){if(function(e){return 0===[ct,at,it,st,ot].filter((function(t){return t(e.keyCode)})).length}(e))return e.preventDefault();n(parseFloat(e.target.innerText))},children:t})},lt=["What have I done today?","How do I feel?","What else am I going to do?"];function jt(e){var t=e.metric,n=ve().settings,c=n.getSetting,a=n.toggle;return Object(r.jsxs)("li",{className:"setting",children:[Object(r.jsx)("div",{children:t.prompt}),Object(r.jsx)("div",{children:Object(r.jsx)("span",{className:c("show-metrix-metric-".concat(t.id))?"toggle on":"toggle",onClick:a("show-metrix-metric-".concat(t.id))})})]})}function dt(e){var t=e.question,n=e.onToggle,c=e.getSetting;return Object(r.jsxs)("li",{className:"setting",children:[Object(r.jsx)("div",{children:t}),Object(r.jsx)("div",{children:Object(r.jsx)("span",{onClick:n("show-custom-question-".concat(t)),className:c("show-custom-question-".concat(t))?"toggle on":"toggle"})})]})}function ft(){var e=ve(),t=e.writing,n=t.questions,a=t.createQuestion,i=e.settings,s=i.toggle,o=i.getSetting,u=e.metrix,l=u.metrix,h=u.createMetrix,b=e.freeze,p=Object(c.useState)("?"),O=Object(f.a)(p,2),x=O[0],m=O[1],g=Object(c.useState)(null),v=Object(f.a)(g,2),w=v[0],y=v[1],k=Object(c.useState)(1),S=Object(f.a)(k,2),N=S[0],C=S[1],T=Object(c.useState)(10),F=Object(f.a)(T,2),M=F[0],A=F[1],q=Object(c.useState)(1),I=Object(f.a)(q,2),D=I[0],P=I[1],E=Object(c.useState)("as needed"),z=Object(f.a)(E,2),R=z[0],J=z[1],H=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,t=b(),e.next=5,a(x);case 5:m("?"),t(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t();case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(d.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,t=b(),n={prompt:x,unit:w,frequency:R},"number"===w&&(n.range=[N,M],n.step=D),e.next=7,h(n);case 7:L(0),t(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t();case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),B=Object(c.useState)(0),V=Object(f.a)(B,2),Y=V[0],L=V[1],U=[Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Create a Prompt"}),Object(r.jsx)("div",{contentEditable:!0,className:"add-question-input",onInput:function(e){return m(e.target.innerText)},children:"?"}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:H,children:"Add Question"}),Object(r.jsx)("button",{onClick:function(){return L(Y+1)},children:"Add Metric"})]})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Select Metric Type"}),Object(r.jsx)("p",{children:x}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return L(Y-1)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){y("number"),L(Y+1)},children:"Numeric"}),Object(r.jsx)("button",{onClick:function(){y("boolean"),L(Y+2)},children:"Yes/No"})]})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Numeric Metric Details"}),Object(r.jsx)("p",{children:x}),Object(r.jsxs)("p",{children:["Number ",Object(r.jsx)(ut,{value:N,setValue:C})," to ",Object(r.jsx)(ut,{value:M,setValue:A}),"   in intervals of ",Object(r.jsx)(ut,{value:D,setValue:P}),"."]}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return L(Y-1)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){return L(Y+1)},children:"Set Frequency"})]})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Set Frequency"}),Object(r.jsx)("p",{children:x}),Object(r.jsx)("p",{children:rt[w]}),Object(r.jsxs)("p",{children:["This question should be answered ",Object(r.jsxs)("select",{onChange:function(e){return J(e.target.value)},children:[Object(r.jsx)("option",{children:"as needed"}),Object(r.jsx)("option",{children:"daily"}),Object(r.jsx)("option",{children:"weekly"}),Object(r.jsx)("option",{children:"monthly"})]}),"."]}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return L(Y-2)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){return L(Y+1)},children:"Review"})]})]}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:x}),Object(r.jsxs)("p",{children:[rt[w]," - ",R]}),Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:function(){return L(Y-1)},children:"Back"}),Object(r.jsx)("button",{onClick:function(){return W()},children:"Create Metric"})]})]})];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("b",{children:"Default Questions"}),Object(r.jsx)("ul",{className:"current-question-list",children:lt.map((function(e){return Object(r.jsx)("li",{className:"manage-default-question",children:e},"manage-default-questions-".concat(e))}))}),Object(r.jsx)("b",{children:"Custom Questions"}),Object(r.jsx)("ul",{className:"current-question-list",children:n.map((function(e){return Object(r.jsx)(dt,{question:e,onToggle:s,getSetting:o})}))}),Object(r.jsx)("b",{children:"Metrix"}),Object(r.jsx)("ul",{className:"current-question-list",children:l.map((function(e){return Object(r.jsx)(jt,{metric:e})}))}),Object(r.jsx)("div",{children:U[Y]})]})}function ht(){var e=ve(),t=e.sharing.shareJournal,n=e.settings,a=Object(c.useRef)(),i=Object(c.useRef)(),s=Object(c.useRef)(),o=function(){var e=Object(d.a)(j.a.mark((function e(){var r,c,o,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.current.value,r=$e(r),c=i.current.value,o=s.current.value,e.next=6,t(r,c,o);case 6:u=e.sent,n.addSetting("share-".concat(u.id),!0),a.current.value="",s.current.value="";case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"action",children:[Object(r.jsx)("b",{style:{textDecoration:"none"},children:"Share Your Journal With"}),Object(r.jsx)("input",{ref:s,placeholder:"James Allen"}),Object(r.jsx)("input",{type:"tel",ref:a,placeholder:"123-456-7890"}),Object(r.jsx)("p",{style:{textDecoration:"none"},children:"Your Name"}),Object(r.jsx)("input",{ref:i}),Object(r.jsx)("br",{}),Object(r.jsx)("span",{onClick:o,children:"Submit"})]})}function bt(){var e=ve(),t=e.freeze,n=e.sharing,c=n.sharedByMe,a=n.toggleFreeze,i=function(e){return Object(d.a)(j.a.mark((function n(){var r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t(""),n.prev=1,n.next=4,a(e.id);case 4:r(),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),r();case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))};return Object(r.jsxs)("div",{children:[Object(r.jsx)("b",{style:{textDecoration:"none"},children:"Who You Share Your Journal With"}),Object(r.jsx)("hr",{style:{width:"25vw"}}),0===c.length&&Object(r.jsx)("span",{style:{textDecoration:"none"},children:"You haven't shared your journal - no pressure"}),c.map((function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(xt,{onToggle:i(e),title:e.shareWithName||e.shareWith,setting:"share-".concat(e.id)}),Object(r.jsx)("br",{})]})}))]})}function pt(){var e=ve(),t=e.sharing.sharedWithMe,n=e.viewSharedJournal,c=t.filter((function(e){return!e.frozen}));return 0===c.length?Object(r.jsx)("div",{className:"none"}):Object(r.jsxs)("div",{className:"action",children:[Object(r.jsx)("b",{style:{textDecoration:"none"},children:"Journals Shared With You"}),Object(r.jsx)("hr",{style:{width:"25vw"}}),c.map((function(e){return Object(r.jsx)("span",{onClick:function(){return n(e.userId)},children:e.name})}))]})}function Ot(e){var t=e.longTitle,n=e.shortTitle,a=e.children,i=Object(c.useState)(!1),s=Object(f.a)(i,2),o=s[0],u=s[1];return Object(r.jsxs)("div",{className:"setting-group"+(o?" open":""),children:[Object(r.jsxs)("header",{onClick:function(){return u(!o)},children:[Object(r.jsx)("span",{}),Object(r.jsx)(Ae,{short:n,children:t}),Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:Je})})]}),a,Object(r.jsx)("div",{})]})}function xt(e){var t=e.setting,n=e.title,c=e.relationships,a=void 0===c?[]:c,i=e.onToggle,s=ve().settings,o=s.getSetting,u=s.toggle;return a.reduce((function(e,t){if(!e)return e;if("+"!==t.charAt(0))return e;var n=t.substring(1);return o(n)}),!0)?Object(r.jsxs)("div",{className:"setting",children:[Object(r.jsx)("div",{children:Object(r.jsx)("b",{children:n})}),Object(r.jsx)("div",{children:Object(r.jsx)("span",{onClick:i||u(t,a),className:o(t)?"toggle on":"toggle"})})]}):Object(r.jsx)("div",{className:"none"})}var mt=function(){var e=ve(),t=e.router,n=t.page,a=(t.redirect,e.settings),i=a.getSetting,s=(a.iter,e.auth),o=s.user,u=s.logout,l=Object(c.useState)("attributions"),j=Object(f.a)(l,2),d=j[0],h=j[1];return o&&"settings"===n?Object(r.jsxs)("main",{className:"settings",children:[Object(r.jsx)(Fe,{children:"Settings"}),Object(r.jsxs)(Ot,{longTitle:"Journal Settings",shortTitle:"Journal",children:[Object(r.jsx)("p",{children:"Make journal entries the way you want to make them. These settings are specific to your device, so you can have different preferences on your phone, tablet, laptop or whatever else you use!"}),Object(r.jsx)(xt,{setting:"freeform",title:"Enable Freeform"}),i("audio-recording-supported")&&Object(r.jsx)(xt,{setting:"audio-recording",title:"Enable Audio Recording",relationships:["+freeform"]}),Object(r.jsx)(xt,{setting:"default-questions",title:"Show Default Questions",relationships:["custom-questions"]}),Object(r.jsx)(xt,{setting:"custom-questions",title:"Show Custom Questions",relationships:["default-questions"]}),Object(r.jsx)(xt,{setting:"use-metrix",title:"Show Metrix"})]}),Object(r.jsx)(Ot,{shortTitle:"Prompts",longTitle:"Manage Prompts",children:Object(r.jsx)(ft,{})}),Object(r.jsx)(Ot,{longTitle:"Manage Your Notifications",shortTitle:"Notifications",children:Object(r.jsx)(nt,{})}),Object(r.jsxs)(Ot,{shortTitle:"Sharing",longTitle:"Manage Journal Sharing",children:[Object(r.jsx)(pt,{}),Object(r.jsx)("br",{style:{margin:12}}),Object(r.jsx)(bt,{}),Object(r.jsx)(ht,{})]}),Object(r.jsxs)(Ot,{shortTitle:"Misc",longTitle:"Miscellaneous",children:[Object(r.jsx)("div",{className:"action",children:window.navigator.canShare&&Object(r.jsx)("span",{onClick:function(){window.navigator.share({title:"My Journal",url:"https://lincoln-howard-jr.github.io/journal/"})},children:"Share This Application"})}),Object(r.jsx)("div",{className:"action",children:Object(r.jsx)("span",{onClick:u,children:"Log Out"})}),"attributions"===d&&Object(r.jsx)("div",{className:"action",children:Object(r.jsx)("span",{onClick:function(){return h("")},children:"Show Attributions"})}),Object(r.jsxs)("div",{className:"attributions",id:d,children:[Object(r.jsx)("div",{className:"fake-button",children:Object(r.jsx)("span",{onClick:function(){return h("attributions")},children:"Hide Attributions"})}),Object(r.jsx)("ul",{children:Object.keys(et).map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsx)("b",{children:e}),Object(r.jsx)("br",{}),Object(r.jsx)("span",{dangerouslySetInnerHTML:{__html:et[e]}})]},"attribiution-".concat(e))}))})]})]})]}):null};function gt(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("p",{children:"If you're having trouble thinking of some? We made a list of some sample skills!"}),Object(r.jsxs)("section",{children:[Object(r.jsx)("h3",{className:"dont-hide",style:{textDecoration:"underline"},children:"Suggestions:"}),Object(r.jsxs)("ul",{style:{margin:"2vh 0"},children:[Object(r.jsx)("li",{children:"Go for a walk"}),Object(r.jsx)("li",{children:"Focus on a small, simple task"}),Object(r.jsx)("li",{children:"Read a short, interesting article"}),Object(r.jsx)("li",{children:"Practice mindfullness"}),Object(r.jsx)("li",{children:"Listen to your own words"}),Object(r.jsx)("li",{children:"Check the facts"})]})]})]})}var vt=function(){var e=ve(),t=e.auth.user,n=e.router.page,a=e.settings,i=a.getSetting,s=a.toggle,o=(a.iter,e.skills),u=o.skills,l=o.isStaged,f=o.submitSkill,h=o.stageForRemoval,b=o.unstage,p=o.removeSkill,O=e.freeze,x=Object(c.useRef)(),m=Object(c.useRef)(),g=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O(),e.prev=1,r=m.current.value,c=x.current.innerText,e.next=6,f({category:r,skill:c});case 6:m.current.value="Tools For",x.current.innerText="...",n(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n();case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return t?"skills"!==n?null:i("skill-add-mode")?Object(r.jsxs)("main",{children:[Object(r.jsx)("datalist",{id:"skills-categories",children:u.map((function(e){return Object(r.jsx)("option",{children:e.meta.category})}))}),Object(r.jsx)(Fe,{children:"Add A Skill"}),Object(r.jsxs)("div",{children:["Category: ",Object(r.jsx)("input",{list:"skills-categories",ref:m,defaultValue:"Tools For"})]}),Object(r.jsxs)("div",{children:["Skill: ",Object(r.jsx)("p",{style:{padding:7.5},ref:x,contentEditable:!0,children:"..."})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:g,children:"Add Skill"}),Object(r.jsx)("button",{onClick:s("skill-add-mode"),children:"Cancel"})]}),Object(r.jsx)("hr",{style:{margin:"10vh 0"}}),Object(r.jsx)(gt,{})]}):Object(r.jsxs)("main",{className:"skill-category",children:[Object(r.jsx)(Fe,{short:"Skills",children:"Reference Your Skills"}),Object(r.jsx)("div",{className:"text-center",children:Object(r.jsx)("a",{className:"fake-button text-center",onClick:s("skill-add-mode"),children:"Add A Skill"})}),u.map((function(e){return Object(r.jsxs)("section",{className:"skill-category",children:[Object(r.jsx)(Me,{children:e.meta.category}),Object(r.jsx)("ul",{children:e.list.map((function(e){return Object(r.jsxs)("li",{className:l(e.id)?"to-remove":"stable",children:[Object(r.jsx)("span",{children:e.skill}),Object(r.jsx)("span",{children:l(e.id)?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("img",{onClick:function(t){return p(e.id)},src:Ie}),Object(r.jsx)("img",{onClick:function(t){return b(e.id)},src:qe})]}):Object(r.jsx)("img",{onClick:function(t){return h(e.id)},src:ze})})]},"skill-skill-".concat(e.id))}))})]},"skill-category-".concat(e.meta.category))}))]}):null},wt=n.p+"static/media/skill.23054f65.svg",yt=n.p+"static/media/plus.a86e5868.svg",kt=n.p+"static/media/book.65cd22a3.svg",St=n.p+"static/media/settings.d2739024.svg",Nt=n.p+"static/media/dashboard.4dfd917f.svg",Ct=n.p+"static/media/left-arrow.7f101ba2.svg";n.p;function Tt(){var e=ve(),t=e.router,n=t.page,c=t.redirect,a=e.viewMode.isViewOnly,i=e.viewMyJournal;return Object(r.jsx)("nav",{children:Object(r.jsxs)("ul",{children:[a&&Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("li",{className:"write"===n?"active":"",onClick:i,children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:Ct}),Object(r.jsx)("label",{children:"Go Back"})]})}),Object(r.jsxs)("li",{className:"skills"===n?"active":"",onClick:function(){c("/?page=skills")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:wt}),Object(r.jsx)("label",{children:"Skills"})]}),!a&&Object(r.jsxs)("li",{className:"write"===n?"active":"",onClick:function(){c("/?page=write")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:yt}),Object(r.jsx)("label",{children:"Write"})]}),Object(r.jsxs)("li",{className:"journal"===n?"active":"",onClick:function(){c("/?page=journal")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:kt}),Object(r.jsx)("label",{children:"Journal"})]}),Object(r.jsxs)("li",{className:"dashboard"===n?"active":"",onClick:function(){c("/?page=dashboard")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:Nt}),Object(r.jsx)("label",{children:"Dash"})]}),Object(r.jsxs)("li",{className:"settings"===n?"active":"",onClick:function(){c("/?page=settings")},children:[Object(r.jsx)("img",{alt:"",width:"32",height:"32",src:St}),Object(r.jsx)("label",{children:"Settings"})]})]})})}function Ft(){var e=ve().auth,t=e.user,n=e.login,a=e.register,i=Object(c.useState)(""),s=Object(f.a)(i,2),o=s[0],u=s[1],l=Object(c.useState)(!1),h=Object(f.a)(l,2),b=h[0],p=h[1],O=Object(c.useState)((function(e){return console.log(e)})),x=Object(f.a)(O,2),m=x[0],g=x[1],v=Object(c.useRef)(),w=function(e){return u(function(e){var t=function(e){return e.replaceAll(/[^0-9]/g,"")}(e);return t.length>10&&(t=t.substr(0,10)),console.log(t),0===t.length?t:t.length<3?"(".concat(t):t.length<6?"(".concat(t.substr(0,3),") ").concat(t.substr(3)):"(".concat(t.substr(0,3),") ").concat(t.substr(3,3),"-").concat(t.substr(6))}(e))},y=function(e){p(!0),g((function(){return function(){e(v.current.value)}})),v.current.focus()},k=Object(c.useState)(!1),S=Object(f.a)(k,2),N=S[0],C=S[1],T=Object(c.useState)(null),F=Object(f.a)(T,2),M=F[0],A=F[1],q=function(){C(!0)},I=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=$e(o),e.next=4,a(t,y,q);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),A(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=$e(o),e.next=4,n(t,y,q);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),A(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return t?null:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("header",{children:Object(r.jsx)(Fe,{children:"Your Journal"})}),Object(r.jsxs)("main",{children:[Object(r.jsxs)("div",{className:"grid",children:[Object(r.jsx)("h3",{children:N?"Your secret code in on the way!":"Enter your phone number:"}),Object(r.jsx)("span",{style:{display:null!==M?"grid":"none"},className:"error",children:null===M||void 0===M?void 0:M.message})]}),Object(r.jsx)("div",{className:"phone-number-input",children:Object(r.jsx)("input",{autoComplete:"tel-local",type:"tel",placeholder:"123-456-7890",value:o,onChange:function(e){return w(e.target.value)},disabled:!!b})}),b&&Object(r.jsx)("div",{className:"phone-number-input",children:Object(r.jsx)("input",Object(W.a)({ref:v,autoComplete:"one-time-code",placeholder:"Secret Code"},"ref",v))}),Object(r.jsxs)("div",{className:"phone-number-input",children:[!b&&Object(r.jsxs)("span",{children:[Object(r.jsx)("button",{onClick:D,children:"Login"}),Object(r.jsx)("button",{onClick:I,children:"Register"})]}),b&&Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("button",{onClick:m,children:"Submit!"})})]}),Object(r.jsxs)("section",{children:[Object(r.jsx)("h3",{children:"About Us"}),Object(r.jsx)("hr",{style:{width:"35%"}}),Object(r.jsx)("b",{children:"Why A Journal?"}),Object(r.jsx)("p",{children:"Journaling provides anyone with a structure to deeper understanding of themselves and their emotional wellbeing. Oftentimes describing a situation or emotion in writing provides a sense of clarity not found in other ways. Also available to you is a place to write down and sort skills you have learned."}),Object(r.jsx)("b",{children:"How Does It Work?"}),Object(r.jsx)("p",{children:'To start, register an account with your phone number. You will be texted a secret code. Enter that and... well that\'s it, you now have your very own journal! To put it simply, you write details about your life in your journal. Again, but in more detail, you can structure your journal in different ways. Journal entries can be formatted as "question and answer" or as "freeform writing" or "audio journaling" (this is easily switched with one click in the settings tab). All journal entries automatically include the date and time of writing and can be found listed in chronological order. You also can curate a list of skills for different situations and share your journal if need be.'})]}),Object(r.jsxs)("section",{children:[Object(r.jsx)("h3",{children:"Terms of Service"}),Object(r.jsx)("hr",{style:{width:"35%"}}),Object(r.jsx)("b",{children:"Privacy"}),Object(r.jsx)("p",{children:"None of your information (journal entries, coping skills, phone number, etc) will be publicly available nor will it be shared unless you explicitly share it."}),Object(r.jsx)("b",{children:"Sharing"}),Object(r.jsx)("p",{children:"By nature of being a journaling application, the contained subject matter will often be sensitive information. With this application, you can share your journal with anyone. However, it is recommended for, and with intention of, sharing with medical professionals only. In the case of abuse of this feature deemed detrimental to the health of another individual, we retain the right to terminate your account."})]})]})]})}var Mt=n(49);function At(e,t){var n=t.toLowerCase();return e.includes(n)?e.filter((function(e){return e!==n})):e.length<4?[].concat(Object(o.a)(e),[n]):e}var qt=750,It=500,Dt=20,Pt=125,Et=864e5;function zt(){var e=ve().journal.entries,t=Object(c.useState)([]),n=Object(f.a)(t,2),a=n[0],i=n[1],s=Object(c.useReducer)(At,[]),u=Object(f.a)(s,2),l=u[0],j=u[1],d=Object(c.useState)([]),h=Object(f.a)(d,2),b=h[0],p=h[1],O=Object(c.useState)(new Date),x=Object(f.a)(O,2),m=x[0],g=x[1],v=Object(c.useState)(new Date),w=Object(f.a)(v,2),y=w[0],k=w[1],S=Object(c.useState)(1),N=Object(f.a)(S,2),C=N[0],T=N[1],F=function(e){var t=e*(y.getTime()-m.getTime());return t-=t%Et,new Date(m.getTime()+t)},M=function(e){return e/C};Object(c.useEffect)((function(){if(0!==e.length){var t=e.map((function(e){return Object.assign(e,{date:G(e.date)})}));t=(t=t.sort((function(e,t){return e.date-t.date}))).map((function(e){var t=e.list.map((function(e){return"questions"===e.entryType|!e.entryType?e.answers.join(" "):"freeform"===e.entryType?e.freeform:""})).join(" ").toLowerCase();return Object.assign(e,{text:t})})),i(t),g(t[0].date),k(t[t.length-1].date)}}),[e]),Object(c.useEffect)((function(){console.time("generate-word-count-lists");for(var e=Math.floor((y.getTime()-m.getTime())/Et),t=l.map((function(){return new Array(e).fill(0)})),n=0,r=0;r<e;r++){if(!(new Date(m.getTime()+r*Et)<a[n].date)){for(var c=0;c<t.length;c++)t[c][r]=a[n].text.split(l[c]).length-1;n++}}var i=Math.max.apply(Math,Object(o.a)(t.flat()));i<1&&(i=1),T(i),p(t),console.timeEnd("generate-word-count-lists")}),[l]);return Object(r.jsxs)("figure",{className:"keywords",children:[Object(r.jsx)("figcaption",{children:"Keyword Search"}),Object(r.jsx)("section",{className:"keyword-container",children:Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j(e.target.elements.keyword.value),e.target.elements.keyword.value=""},className:"keyword-search",children:[Object(r.jsx)("input",{name:"keyword",placeholder:"keyword"}),Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:Le})})]})}),Object(r.jsxs)("svg",{className:"keyword-chart",viewBox:"0 0 ".concat(qt," ").concat(It),children:[Object(r.jsxs)("g",{className:"keyword-chart-axis",children:[Object(r.jsx)("line",{x1:Dt,x2:730,y1:480,y2:480}),Object(r.jsx)("line",{x1:Dt,x2:Dt,y1:480,y2:145}),Object(r.jsx)("text",{x:10,y:480,textAnchor:"middle",children:"0"}),Object(r.jsx)("text",{x:10,y:145,textAnchor:"middle",children:C}),Object(r.jsx)("text",{x:50,y:495,textAnchor:"middle",children:Y(m)}),Object(r.jsx)("text",{x:227.5,y:495,textAnchor:"middle",children:Y(F(.25))}),Object(r.jsx)("text",{x:405,y:495,textAnchor:"middle",children:Y(F(.5))}),Object(r.jsx)("text",{x:582.5,y:495,textAnchor:"middle",children:Y(F(.75))}),Object(r.jsx)("text",{x:700,y:495,textAnchor:"middle",children:Y(y)}),Object(r.jsx)("g",{className:"keyword-chart-labels",children:l.map((function(e,t){return Object(r.jsx)("text",{textAnchor:"middle",x:Dt+(t+.5)*qt/4,y:Pt,onClick:function(){return j(e)},children:e})}))})]}),b.map((function(e,t){return Object(r.jsx)("g",{className:"keyword-trendline-".concat(t+1),children:e.map((function(t,n){return n===e.length-1?null:Object(r.jsx)("line",{x1:Dt+710*n/e.length,x2:Dt+710*(n+1)/e.length,y1:480-335*M(t),y2:480-335*M(e[n+1])})}))},"keyword-trendline-".concat(l[t]))}))]},"keyword-chart")]})}function Rt(e){var t=e.key,n=e.time,a=e.i,i=e.dashWidth,s=e.dashHeight,o=e.hourlyMax,l=e.onClick,j=Object(c.useState)(!1),d=Object(f.a)(j,2),h=d[0],b=d[1],p=Object(c.useState)([]),O=Object(f.a)(p,2),x=O[0],m=O[1];Object(c.useEffect)((function(){var e=n.filter((function(e){return"questions"===e.entryType||!e.entryType})).length,t=n.filter((function(e){return"freeform"===e.entryType})).length,r=n.filter((function(e){return"audio"===e.entryType})).length,c=e+t+r;m([r/c,t/c,e/c])}),[n]);var g=i/20,v=18*i/20,w=.1*v/24,y={x:g+w+a*v/24,width:v/24-w/2},k=s-20-.66*s*n.length/o,S=.66*s*n.length/o;return Object(r.jsxs)("g",{className:"bar-chart-bar",onMouseEnter:function(e){return b(!0)},onMouseLeave:function(e){return b(!1)},onClick:l,children:[Object(r.jsx)("rect",Object(u.a)(Object(u.a)({},y),{},{y:k,height:x[0]*S})),Object(r.jsx)("rect",Object(u.a)(Object(u.a)({},y),{},{y:k+x[0]*S,height:x[1]*S})),Object(r.jsx)("rect",Object(u.a)(Object(u.a)({},y),{},{y:k+(1-x[2])*S,height:x[2]*S})),h&&Object(r.jsxs)("text",{x:g+a*v/24,y:s,children:[a%12||12,a>11?"PM":"AM"]})]},t)}var Jt=Object(c.memo)(Rt),Ht=function(e,t){return e[new Date(t.start).getHours()].push(t),e},Wt=function(e,t){return e[t.entryType]?e[t.entryType].push(t):e[t.entryType]=[t],e},Bt=750,Vt=500;function Yt(){var e=ve(),t=e.journal,n=t.entryList,a=(t.clearSearch,t.setFilters),i=e.router.redirect,s=Object(c.useState)(0),o=Object(f.a)(s,2),u=o[0],l=o[1],h=Object(c.useState)(null),b=Object(f.a)(h,2),p=b[0],O=b[1],x=Object(c.useState)(null),m=Object(f.a)(x,2),g=m[0],v=m[1],w=Object(c.useState)(-1),y=Object(f.a)(w,2),k=y[0],S=y[1],N=Object(c.useState)(null),C=Object(f.a)(N,2),T=C[0],F=C[1],M=Object(c.useRef)(),A=function(e){return Object(d.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a([{type:"time",value:{mode:"after",minutes:0,hours:e}},{type:"time",value:{mode:"before",minutes:0,hours:e+1}}]),i("/?page=journal");case 2:case"end":return t.stop()}}),t)})))};Object(c.useEffect)((function(){var e=n.reduce(Ht,new Array(24).fill(1).map((function(){return[]})));S(e.reduce((function(e,t){return t.length>e?t.length:e}),1)),O(e),v(function(e){return e.reduce(Wt,{})}(n))}),[n]),Object(c.useEffect)((function(){if(g){var e=Mt.c(M.current);e.selectAll("*").remove();var t=["#4b4486","#CA054D","#A4D4B4","#ffcf9c"],r=Object.keys(g).map((function(e){return Object.create({entryType:e,percent:100*g[e].length/n.length})})),c=Mt.b().value((function(e){return e.percent})),a=Mt.a().outerRadius(166.66666666666666).innerRadius(125),i=e.append("g");i.attr("transform","translate(".concat(375,", ").concat(287.5,")")),i.selectAll("arc").data(c(r)).enter().append("g").attr("class","arc").append("path").attr("fill",(function(e,n){return t[n]})).attr("d",a);var s=e.append("g").attr("class","legend").attr("transform","translate(".concat(300,", ").concat(175,")")),o=225;r.forEach((function(e,n){var c=e.entryType;s.append("circle").attr("r",5).attr("cx",28.125).attr("cy",(n+.5)*o/r.length).attr("fill",t[n]),s.append("text").text(c).attr("x",38.125).attr("y",3.5+(n+.5)*o/r.length)}))}}),[M.current,u,g]);if(!p)return null;var q=[Object(r.jsxs)("figure",{className:"time-of-day",children:[Object(r.jsx)("figcaption",{children:"Entries By Time Of Day"}),Object(r.jsxs)("svg",{viewBox:"0 0 ".concat(Bt," ").concat(Vt),xmlns:"http://www.w3.org/2000/svg",children:[Object(r.jsx)("line",{x1:37.5,y1:480,x2:712.5,y2:480}),p.map((function(e,t){return Object(r.jsx)(Jt,{time:e,i:t,dashHeight:Vt,dashWidth:Bt,hourlyMax:k,onClick:A(t)},"bar-chart-bar-".concat(t))})),Object(r.jsxs)("g",{className:"bar-chart-text",children:[Object(r.jsx)("text",{x:83.33333333333333,y:50,children:"Questions"}),Object(r.jsx)("text",{x:3e3/9,y:50,children:"Freeform"}),Object(r.jsx)("text",{x:5250/9,y:50,children:"Audio"})]})]},"time-of-day-svg")]}),Object(r.jsxs)("figure",{className:"type-of-entry",children:[Object(r.jsx)("figcaption",{children:"Entries By Type"}),Object(r.jsx)("svg",{className:"type-of-entry",ref:M,viewBox:"0 0 ".concat(Bt," ").concat(Vt),xmlns:"http://www.w3.org/2000/svg"},"type-of-entry-svg")]}),Object(r.jsx)(zt,{})];return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{onTouchStart:function(e){F(e.changedTouches[0])},onTouchEnd:function(e){if(T){var t=e.changedTouches[0].pageX-T.pageX,n=e.changedTouches[0].pageY-T.pageY;return F(null),Math.abs(t)>Math.abs(n)?(e.preventDefault(),l(t>0?(0!==u?u:q.length)-1:(u+1)%q.length)):void 0}},className:"dashboard",children:q.map((function(e){return Object(r.jsx)(r.Fragment,{children:e})}))})})}var Lt=function(){return"dashboard"!==ve().router.page?null:Object(r.jsxs)("main",{children:[Object(r.jsx)(Fe,{children:"Dashboard"}),Object(r.jsx)(Yt,{})]})};function Ut(){var e=ve(),t=e.router.page,n=e.metrix,a=n.metrix,i=n.measurements,s=Object(c.useState)([]),u=Object(f.a)(s,2),l=u[0],j=u[1];return"metrix"!==t?null:Object(r.jsxs)("main",{children:[Object(r.jsx)(Fe,{children:"Metrix"}),Object(r.jsx)("ul",{className:"metrix-measurements",children:a.map((function(e){return Object(r.jsxs)("li",{className:-1!==l.indexOf(e.id)?"open":"",children:[Object(r.jsx)("span",{}),Object(r.jsx)("span",{children:Object(r.jsx)(Ae,{children:e.prompt})}),Object(r.jsx)("span",{onClick:(t=e.id,function(){if(!l.filter((function(e){return e===t})).length)return j([].concat(Object(o.a)(l),[t]));j(l.filter((function(e){return e!==t})))}),children:Object(r.jsx)("img",{src:Je})}),Object(r.jsx)("ul",{children:i.filter((function(t){return t.metric===e.id})).map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsxs)("span",{children:[L(e.measuredAt)," at ",U(e.measuredAt)]}),Object(r.jsx)("span",{children:e.value})]})}))})]});var t}))})]})}n(326);var Gt=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ft,{}),Object(r.jsx)(vt,{}),Object(r.jsx)(Pe,{}),Object(r.jsx)(Ze,{}),Object(r.jsx)(mt,{}),Object(r.jsx)(Lt,{}),Object(r.jsx)(Ut,{}),Object(r.jsx)(Tt,{})]})};console.warn=function(){},console.error=function(){},s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(we,{children:Object(r.jsx)(Gt,{})})}),document.getElementById("root"))}},[[327,1,2]]]);
//# sourceMappingURL=main.81a03410.chunk.js.map