{"version":3,"sources":["pages/components/Headers.js","pages/components/H1.js","pages/components/H2.js","pages/components/H3.js","lib/auth.js","lib/keepAlive.js","lib/filters.js","lib/indexing.js","hooks/useSkills.js","lib/base.js","lib/webaudio.js","hooks/useNotifications.js","hooks/index.js","hooks/useAuth.js","hooks/useJournal.js","hooks/useWriting.js","hooks/useSettings.js","hooks/useSharing.js","hooks/useRouter.js","lib/scrolling.js","hooks/useAudio.js","lib/defaultSettings.js","AppProvider.js","pages/components/AudioRecorder.js","pages/Write.js","pages/components/Deferred.js","img/minus.svg","img/trash.svg","img/cancel.svg","img/calendar.svg","img/caret-down.svg","pages/components/DateFilter.js","img/stopwatch.svg","pages/components/TimeFilter.js","img/search.svg","img/filter.svg","pages/components/Query.js","pages/Journal.js","lib/sanitizePhoneNumber.js","lib/attributions.js","pages/components/TextNotifications.js","pages/Settings.js","pages/Skills.js","img/skill.svg","img/plus.svg","img/book.svg","img/settings.svg","img/dashboard.svg","img/left-arrow.svg","pages/components/Nav.js","pages/Auth.js","pages/components/WordCount.js","pages/components/Metrics.js","pages/Dashboard.js","pages/SharedWithMe.js","App.js","index.js"],"names":["H1","props","className","children","short","H2","H3","poolDetails","authDetails","Pool","AmazonCognitoIdentity","UserPoolId","ClientId","cognitoUser","accessToken","refreshToken","headers","get","Headers","login","Username","Promise","resolve","reject","ClientMetadata","phoneNumber","e","getCurrentUser","retrieveAccessToken","getSession","session","getAccessToken","getJwtToken","RefreshToken","getRefreshToken","getToken","signOut","a","register","attributePhoneNumber","Name","Value","customAttributeId","id","attributeList","signUp","err","result","user","customFlow","cb","onCodeSent","setAuthenticationFlowType","console","log","initiateAuth","onSuccess","r","onFailure","customChallenge","challengeParameters","answer","sendCustomChallengeAnswer","entries","fetch","method","body","post","JSON","stringify","skills","shares","questions","audios","notifications","parse","localStorage","getItem","isInRange","is","after","before","toMinutes","hours","minutes","filterTypes","type","value","entry","entryType","date","mode","start","Date","getFullYear","getMonth","getDate","ceil","end","time","getHours","getMinutes","constructFilterList","filters","map","filter","months","days","dateShortHand","_d","d","toString","printDate","getDay","getTime","slice","dateFromShortHand","split","year","month","parseInt","runIndexEntries","arr","el","Object","assign","sort","b","reduce","acc","val","indexedArr","key","meta","found","length","list","index","push","findIndex","path","window","location","href","charAt","substring","encoder","audioCtx","AudioContext","webkitAudioContext","stream","mediaRecorder","chunks","mp3data","hasBrowserSupport","getUserMedia","navigator","mediaDevices","audio","createMediaRecorder","Error","MediaRecorder","ondataavailable","evt","data","isReadyForRecording","offset","setTimeout","stop","extract","freeze","title","unfreeze","arrayBuffer","decoded","lame","Mp3Encoder","numberOfChannels","sampleRate","encodeBuffer","getChannelData","Int16Array","flush","file","File","decodeAudioData","_time","ampm","compareTimes","notificationTime","useAuth","onSessionActive","useState","setUser","setErr","setItem","retrieveSession","logout","reload","init","refreshSession","_register","useEffect","useJournal","entryList","setEntryList","filterIterator","setIter","actualSetFilter","filterList","setFilterList","query","setQuery","setIdx","toRemove","setToRemove","getEntries","sharedJournalId","getById","req","api","json","createEntry","hideEntry","hide","shouldRemove","includes","setFilters","fl","freeform","text","match","toLowerCase","qa","answers","join","runQuery","toggleStageForRemoval","rem","clearSearch","useWriting","setQuestions","getQuestions","qs","q","createQuestion","nq","useSettings","defaultSettings","storage","storedSettings","currentSettings","settings","setSettings","iter","getSetting","setting","relationships","relation","affected","getAll","addSetting","initial","set","changes","_sett","setAll","toggle","to","useSharing","sharedWithMe","setSharedWithMe","sharedByMe","setSharedByMe","sharedJournal","setSharedJournal","getShares","sett","sbm","frozen","getShareById","dict","toggleFreeze","shareJournal","phone","name","shareWithName","shareWith","useSkills","setSkills","staged","setStaged","getSkills","indexed","category","isStaged","submitSkill","skls","pending","action","stageForRemoval","unstage","_id","removeSkill","del","useRouter","initialPage","URLSearchParams","search","page","setPage","params","setParams","redirect","url","nextPage","history","pushState","previous","next","base","scrollBy","left","top","scrollY","behavior","scrollToTop","useAudio","recordingStatus","setRecordingStatus","audioRecording","setAudioRecording","audioRecordingTitle","setAudioRecordingTitle","timeElapsed","setTimeElapsed","timer","setTimer","ready","setReady","startRecording","WebAudio","setInterval","stopRecording","clearInterval","pauseRecording","pause","resumeRecording","resume","initAudio","resetAudioInformation","useNotifications","setNotifications","getNotifications","createNotification","deleteNotification","AppContext","createContext","useApp","React","useContext","AppProvider","setFrozen","message","isViewOnly","setIsViewOnly","viewMode","hooks","sessionStorage","journal","sharing","writing","router","viewSharedJournal","viewMyJournal","auth","forEach","share","Provider","AudioRecorder","onClick","Math","floor","onChange","target","controls","src","URL","createObjectURL","defaultQuestions","CustomQuestionSetting","question","onToggle","Write","setStart","focusList","setFocusList","newQuestionRef","useRef","freeformRef","onFirstFocus","innerText","runSubmitFreeformEntry","current","runSubmitQuestionAnswerEntry","keys","values","all","runSubmitAudioEntry","audioApi","filename","fileUploadResponse","fileUpload","uploadUrl","runCreateQuestion","trim","onFocus","ref","contentEditable","nextSibling","focus","onBlur","defferedClassName","delay","deferring","setDeferring","maxDaysIn","mm","yyyy","DateFilter","remove","setValue","setMode","setMonth","dd","setDate","setYear","maxDays","setMaxDays","NaN","max","CalendarSVG","alt","modeFinal","style","display","transform","width","height","CaretSVG","min","defaultValue","TimeFilter","_setMinutes","displayMinutes","setDisplayMinutes","_setHours","displayHours","setDisplayHours","setHours","hrs","StopwatchSVG","mins","setMinutes","Query","open","setOpen","dateFilters","setDateFilters","timeFilters","setTimeFilters","setTypeFilter","splice","setFilterValue","onSubmit","preventDefault","placeholder","SearchIcon","FilterSVG","Filter","newFilters","curr","fil","EntryHeader","isOpen","close","count","EntryContents","startRemoving","cancelRemove","isNotMain","MinusSVG","TrashSVG","CancelSVG","i","Journal","_entries","showCount","setShowCount","removing","setRemoving","removal","Deferred","indexOf","innerHeight","scrollTo","document","scrollHeight","runScroll","sanitizePhoneNumber","number","reduced","replaceAll","Notifications","setAmpm","setTime","SettingGroup","longTitle","shortTitle","note","ShareJournal","numRef","nameRef","swnRef","textDecoration","SharedByMe","Setting","SharedWithMe","affector","Settings","attributionId","setAttributionId","canShare","attributions","k","dangerouslySetInnerHTML","__html","SkillSuggestions","margin","Skills","sklRef","catRef","addSkill","skill","padding","Nav","BackSVG","NavSkills","NavPlus","NavBook","NavDash","NavSettings","Auth","rawPhoneNumber","_setPhoneNumber","prompt","setPrompt","v","setAnswer","codeRef","setPhoneNumber","stripped","stripPhoneNumber","substr","fmtRawPhoneNumber","promptForCode","_answer","codeSent","setCodeSent","onAuthError","setAuthError","onRegisterClick","onLogInClick","autoComplete","disabled","keywordReducer","state","_keyword","keyword","word","marginTop","oneDay","WordCount","idx","useReducer","keywords","toggleKeyword","wordCounts","setWordCounts","domain_0","setDomain0","domain_n","setDomainN","range_n","setRangeN","xinverse","scale","yscale","obj","domain","wcl","Array","fill","j","rn","flat","elements","viewBox","x1","x2","y1","y2","x","y","textAnchor","_Bar","dashWidth","dashHeight","hourlyMax","showTooltip","setShow","breakdown","setBreakdown","questionsCount","freeformCount","audioCount","total","contentWidth","dimensions","y0","height_total","onMouseEnter","onMouseLeave","Bar","memo","reduceByTime","reduceByType","Metrics","metric","setMetric","setIndexed","typeIndex","setTypeIndex","setMax","tstart","setTouchStart","canvasRef","onBarClick","runIndexByType","svg","d3","selectAll","colors","dataset","create","percent","pie","arc","outerRadius","innerRadius","g","append","attr","enter","legend","innerSize","metrics","xmlns","onTouchStart","changedTouches","onTouchEnd","xmove","pageX","ymove","pageY","abs","Analytics","alert","App","Dashboard","warn","error","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f1ec8ea8.chunk.js","sourcesContent":["import h1 from './H1';\nimport h2 from './H2';\nimport h3 from './H3';\n\nexport const H1 = h1\nexport const H2 = h2\nexport const H3 = h3","export default function H1 (props) {\n  return (\n    <>\n      <h1 className=\"long\">{props.children}</h1>\n      <h1 className=\"short\">{!!props.short ? props.short : props.children}</h1>\n    </>\n  )\n}","export default function H2 (props) {\n  return (\n    <>\n      <h2 className=\"long\">{props.children}</h2>\n      <h2 className=\"short\">{!!props.short ? props.short : props.children}</h2>\n    </>\n  )\n}","export default function H1 (props) {\n  return (\n    <>\n      <h3 className=\"long\">{props.children}</h3>\n      <h3 className=\"short\">{!!props.short ? props.short : props.children}</h3>\n    </>\n  )\n}","import {v4 as id} from 'uuid';\nimport * as AmazonCognitoIdentity from 'amazon-cognito-identity-js';\n\nconst poolDetails = {\n  AppClientId: '2ac3ij97dhtkag9fljdsuo1203',\n  IdentityPool:\t'us-east-1:de5287fc-3a2d-4cad-a685-b9d5bfe936e6',\n  PoolArm: 'arn:aws:cognito-idp:us-east-1:842200175734:userpool/us-east-1_tRcA2uwF6',\n  PoolId:\t'us-east-1_tRcA2uwF6'\n}\n\nlet authDetails = null;\nlet Pool = new AmazonCognitoIdentity.CognitoUserPool ({UserPoolId: poolDetails.PoolId, ClientId: poolDetails.AppClientId});\nlet cognitoUser = null;\nlet accessToken = null;\nlet refreshToken = null;\nlet headers = {\n  get get () {\n    return new Headers ({\n      'x-amz-access-token': accessToken\n    });\n  },\n  get post () {\n    return new Headers ({\n      'x-amz-access-token': accessToken,\n      'Content-Type': 'application/json'\n    });\n  }\n}\nexport const login = (Username) => new Promise ((resolve, reject) => {\n  try {\n    authDetails = new AmazonCognitoIdentity.AuthenticationDetails ({Username, ClientMetadata: {phoneNumber: Username}});\n    cognitoUser = new AmazonCognitoIdentity.CognitoUser ({Username, Pool});\n    resolve ();\n  } catch (e) {\n    reject (e);\n  }\n});\n\nexport const getCurrentUser = () => new Promise ((resolve, reject) => {\n  try {\n    cognitoUser = Pool.getCurrentUser ();\n    resolve ();\n  } catch (e) {\n    reject (e);\n  }\n});\n\nexport const retrieveAccessToken = () => new Promise ((resolve, reject) => {\n  try {\n    if (!cognitoUser) throw 'Cognito user must be defined to get access token';\n    cognitoUser.getSession ((e, session) => {\n      if (e) return reject (e);\n      accessToken = session.getAccessToken ().getJwtToken ();\n      refreshToken = new AmazonCognitoIdentity.CognitoRefreshToken ({RefreshToken: session.getRefreshToken ().getToken ()});\n      resolve ();\n    });\n  } catch (e) {\n    reject (e);\n  }\n});\n\nexport const refreshSession = () => new Promise ((resolve, reject) => {\n  try {\n    if (!cognitoUser) throw 'Cannot refresh empty cognito user';\n    if (!refreshToken) throw 'Cannot refresh empty refresh token';\n    cognitoUser.refreshSession (refreshToken, (err, session) => {\n      if (err) return reject (err);\n      accessToken = session.getAccessToken ().getJwtToken ();\n      refreshToken = new AmazonCognitoIdentity.CognitoRefreshToken ({RefreshToken: session.getRefreshToken ().getToken ()});\n      resolve ();\n    });\n  } catch (e) {\n    reject (e);\n  }\n});\n\nexport const signOut = async () => new Promise (async (resolve, reject) => {\n  try {\n    await cognitoUser.signOut();\n    resolve ();\n  } catch (e) {\n    reject (e);\n  }\n});\n\nexport const register = async (phoneNumber) => new Promise (async (resolve, reject) => {\n  const attributePhoneNumber = new AmazonCognitoIdentity.CognitoUserAttribute ({Name: 'phone_number', Value: phoneNumber});\n  const customAttributeId = new AmazonCognitoIdentity.CognitoUserAttribute ({Name: 'custom:custom:id', Value: id ()})\n  const attributeList = [attributePhoneNumber, customAttributeId];\n  Pool.signUp (phoneNumber, id (), attributeList, null, (err, result) => {\n    if (err) return reject (err);\n    cognitoUser = result.user;\n    resolve ();\n  })\n});\n\nexport const customFlow = (phoneNumber, cb, onCodeSent) => new Promise (async (resolve, reject) => {\n  await login (phoneNumber);\n  cognitoUser.setAuthenticationFlowType ('CUSTOM_CHALLENGE');\n  console.log (cognitoUser, authDetails);\n  cognitoUser.initiateAuth (authDetails, {\n    onSuccess: r => resolve (r),\n    onFailure: e => reject (e),\n    customChallenge: function (challengeParameters) {\n      onCodeSent ();\n      cb (answer => cognitoUser.sendCustomChallengeAnswer (answer, this))\n    }\n  });\n});\n\nexport const entries = {\n  get get () {\n    return () => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries', {\n      method: 'get',\n      headers: headers.get\n    });\n  },\n  get post () {\n    return body => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries', {\n      method: 'post',\n      headers: headers.post,\n      body: JSON.stringify (body)\n    });\n  }, \n  get hide () {\n    return id => fetch (`https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries/${id}`, {\n      method: 'delete',\n      headers: headers.get\n    })\n  }\n}\nexport const skills = {\n  get get () {\n    return () => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills', {\n      method: 'get',\n      headers: headers.get\n    });\n  },\n  get post () {\n    return body => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills', {\n      method: 'post',\n      headers: headers.get,\n      body: JSON.stringify (body)\n    });\n  },\n  get del () {\n    return id => fetch (`https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/skills/${id}`, {\n      method: 'delete',\n      headers: headers.get\n    })\n  }\n}\n\nexport const shares = {\n  get get () {\n    return () => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares', {\n      method: 'get',\n      headers: headers.get\n    });\n  },\n  get getById () {\n    return id => fetch (`https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/entries/${id}`, {\n      method: 'get',\n      headers: headers.get\n    });\n  },\n  get post () {\n    return body => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares', {\n      method: 'post',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken,\n        'Content-Type': 'application/json'\n      }),\n      body: JSON.stringify (body)\n    });\n  },\n  get toggleFreeze () {\n    return id => fetch (`https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/shares/${id}`, {\n      method: 'put',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken\n      })\n    });\n  }\n}\n\nexport const questions = {\n  get get () {\n    return () => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions', {\n      method: 'get',\n      headers: headers.get\n    });\n  },\n  get post () {\n    return body => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/questions', {\n      method: 'post',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken,\n        'Content-Type': 'application/json'\n      }),\n      body: JSON.stringify (body)\n    });\n  }\n}\nexport const audios = {\n  get post () {\n    return body => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/audios', {\n      method: 'post',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken,\n        'Content-Type': 'application/json'\n      }),\n      body: JSON.stringify (body)\n    })\n  }\n}\n\nexport const notifications = {\n  get get () {\n    return () => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/notifications', {\n      headers: new Headers ({\n        'x-amz-access-token': accessToken\n      })\n    })\n  },\n  get post () {\n    return body => fetch ('https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/notifications', {\n      method: 'post',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken,\n        'Content-Type': 'application/json'\n      }),\n      body: JSON.stringify (body)\n    })\n  },\n  get del () {\n    return id => fetch (`https://akqxdqgf7l.execute-api.us-east-1.amazonaws.com/Prod/notifications/${id}`, {\n      method: 'DELETE',\n      headers: new Headers ({\n        'x-amz-access-token': accessToken\n      })\n    })\n  }\n}","export const keepAlive = () => {\n  localStorage.setItem ('keep-alive', true);\n}\nexport const cancelKeepAlive = () => {\n  localStorage.setItem ('keep-alive', false);\n}\nexport const isAlive = JSON.parse (localStorage.getItem ('keep-alive'));","const floor = date => {\n  return new Date (date.getFullYear (), date.getMonth (), date.getDate ())\n}\nconst ceil = date => {\n  return new Date (date.getFullYear (), date.getMonth (), date.getDate () + 1)\n}\nconst isInRange = (is, after, before) => {\n  return is <= before && is >= after;\n}\nconst toMinutes = ({hours, minutes}) => {\n  return hours * 60 + minutes;\n}\n\n// single-day | inclusive after | inclusive before\nconst constructDateFilter = value => entry => {\n  if (value.mode === 'single-day') {\n    return isInRange (entry.start, floor (value.date), ceil (value.date));\n  } else if (value.mode === 'after') {\n    return new Date (entry.start) > value.date;\n  } else if (value.mode === 'before') {\n    return new Date (entry.end) < value.date;\n  }\n}\n\nconst constructTimeFilter = value => entry => {\n  if (value.mode === 'is-at') {\n    return isInRange (toMinutes (value), toMinutes ({hours: entry.start.getHours (), minutes: entry.start.getHours ()}), toMinutes ({hours: entry.end.getHours (), minutes: entry.end.getHours ()}));\n  } else if (value.mode === 'before') {\n    return toMinutes ({hours: entry.start.getHours (), minutes: entry.start.getMinutes ()}) <= toMinutes (value);\n  } else if (value.mode === 'after') {\n    return toMinutes ({hours: entry.start.getHours (), minutes: entry.start.getMinutes ()}) >= toMinutes (value);\n  }\n}\n\nconst constructEntryTypeFilter  = value => entry => {\n  return entry.entryType === value.entryType;\n}\n\nconst filterTypes = {\n  type: constructEntryTypeFilter,\n  date: constructDateFilter,\n  time: constructTimeFilter\n}\n\nconst constructFilterList = filters => {\n  let _f = filters.map (filter => filterTypes [filter.type] (filter.value))\n  return _f;\n}\n\nexport default constructFilterList","export const months = [\n  'January',\n  'February',\n  'March',\n  'April',\n  'May',\n  'June',\n  'July',\n  'August',\n  'September',\n  'October',\n  'November',\n  'December'\n]\nexport const days = [\n  \"Sunday\",\n  'Monday',\n  'Tuesday',\n  'Wednesday',\n  'Thursday',\n  'Friday',\n  'Saturday'\n]\n\nexport const dateShortHand = (_d=new Date ()) => {\n  let d = new Date (_d);\n  return `${d.getFullYear ()}-${d.getMonth () + 1}-${d.getDate ()}`.toString ();\n}\nexport const printDate = (_d=new Date ()) => {\n  let d = new Date (_d);\n  return  `${days [d.getDay ()]}, ${months [d.getMonth ()]} ${d.getDate ()}`;\n}\nexport const getTime = (d=new Date ()) => {  \n  return `${(d.getHours () % 12 || 12)}:${`0${d.getMinutes ()}`.slice(-2)} ${d.getHours () > 11 ? 'pm' : 'am'}`;\n}\nexport const dateFromShortHand = d => {\n  if (d instanceof Date) return d;\n  let [year, month, date] = d.split ('-');\n  year = parseInt (year);\n  month = parseInt (month) - 1;\n  date = parseInt (date);\n  return new Date (year, month, date);\n}\n\nexport const findIndex = (indexedArr=[], key, value, meta={}) => {\n  let found = indexedArr.filter (el => el [key] === value)\n  if (found.length > 0) return found [0].list;\n  let index = {[key]: value, meta, list: []};\n  indexedArr.push (index);\n  return index.list;\n}\n\nexport const runIndexEntries = (entries) => {\n  let arr = entries.map (el => Object.assign (el, {start: new Date (el.start), end: new Date (el.end)}));\n  arr.sort ((a, b) => b.start - a.start);\n  return arr.reduce ((acc, val) => {\n    findIndex (acc, 'date', dateShortHand (val.start), {date: printDate (val.start)}).push (val);\n    return acc;\n  }, []);\n}\n\nexport const wordCount = entry => {\n  if (entry.entryType === 'questions') return entry.answers.join (' ').split (' ').length;\n  if (entry.entryType === 'freeform') return entry.freeform.split (' ').length;\n  return 0;\n}","import {useState} from 'react';\nimport {skills as api} from '../lib/auth';\n\nconst findIndex = (indexedArr, key, value, meta={}) => {\n  let found = indexedArr.filter (el => el [key] === value)\n  if (found.length > 0) return found [0].list;\n  let index = {[key]: value, meta, list: []};\n  indexedArr.push (index);\n  return index.list;\n}\n\nexport default function useSkills () {\n\n  const [skills, setSkills] = useState ([]);\n  const [staged, setStaged] = useState ([]);\n  const getSkills = async () => {\n    try {\n      let req = await api.get ();\n      let data = await req.json ();\n      let indexed = data.reduce ((acc, val) => {\n        findIndex (acc, 'category', val.category, {category: val.category}).push (val);\n        return acc;\n      }, []);\n      setSkills (indexed);\n    } catch (e) {\n    }\n  }\n  const submitSkill = (body) => new Promise (async (resolve, reject) => {\n    try {\n      setSkills (skls => {\n        let idx = findIndex (skls, 'category', body.category, {category: body.category});\n        idx.push (body);\n        return skls;\n      })\n      await api.post (body);\n      resolve ();\n    } catch (e) {\n      let pending = JSON.parse (localStorage.getItem ('pending-actions') || '[]');\n      pending.push ({\n        action: 'submit-skill',\n        body\n      });\n      localStorage.setItem ('pending-actions', JSON.stringify (pending));\n      reject (e);\n    }\n  })\n  const stageForRemoval = id => {\n    setStaged ([...staged, id]);\n  }\n  const unstage = id => {\n    setStaged (staged.filter (_id => _id !== id));\n  }\n  const isStaged = id => {\n    return staged.includes (id);\n  }\n  const removeSkill = id => new Promise (async (resolve, reject) => {\n    try {\n      if (!isStaged (id)) return;\n      await api.del (id);\n      await getSkills ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  });\n  return {skills, getSkills, submitSkill, stageForRemoval, unstage, isStaged, removeSkill}\n\n}","let path = window.location.href.split ('?') [0];\nif (path.charAt (path.length - 1) === '/') path = path.substring (0, path.length - 1);\nexport default path;","import lame from 'lamejs';\n\nlet audioCtx = null;\nlet AudioContext = (window.AudioContext || window.webkitAudioContext);\nlet encoder;\n\n\nlet stream = null;\nlet mediaRecorder = null;\nlet chunks = [];\nlet mp3data = [];\n\nexport const hasBrowserSupport = !!AudioContext;\n\nexport const getUserMedia = async () => new Promise (async (resolve, reject) => {\n  try {\n    stream = await window.navigator.mediaDevices.getUserMedia ({audio: true});\n    resolve ();\n  } catch (e) {\n    reject (e)\n  }\n});\nexport const createMediaRecorder = () => {\n  if (!stream) throw new Error ('no stream available to record');\n  mediaRecorder = new window.MediaRecorder (stream);\n  mediaRecorder.ondataavailable = evt => {\n    chunks.push (evt.data);\n  }\n}\nexport const isReadyForRecording = () => {\n  return (!!stream && !!mediaRecorder && !!chunks);\n}\nexport const getRecorderState = () => mediaRecorder?.state;\nexport const start = async (offset=300) => new Promise (async (resolve, reject) => {\n  try {\n    audioCtx = new AudioContext ();\n    // ensure environment ready for recording\n    if (!isReadyForRecording ()) throw new Error ('Environment not set up for recording');\n    setTimeout (() => {\n      mediaRecorder.start ();\n      resolve ();\n    }, offset);\n  } catch (e) {\n    console.log (e);\n    console.log (`\n    current state:\n      stream = ${stream}\n      mediaRecorder = ${mediaRecorder}\n      chunks = ${chunks}\n    `);\n  }\n})\nexport const stop = async () => new Promise (async (resolve, reject) => {\n  try {\n    mediaRecorder.stop ();\n    setTimeout (() => resolve (), 150);\n  } catch (e) {\n    reject (e);\n    console.log (`\n    current state:\n      stream = ${stream}\n      mediaRecorder = ${mediaRecorder}\n      chunks = ${chunks}\n    `);\n  }\n});\nexport const pause = () => {\n  mediaRecorder.pause ();\n}\nexport const resume = () => {\n  mediaRecorder.resume ();\n}\nexport const extract = async (freeze, title='recording') => new Promise (async (resolve, reject) => {\n  let unfreeze = freeze ();\n  try {\n    audioCtx.decodeAudioData (await chunks [0].arrayBuffer (), decoded => {\n      encoder = new lame.Mp3Encoder (decoded.numberOfChannels, decoded.sampleRate, 256000);\n      mp3data.push (encoder.encodeBuffer (decoded.getChannelData (0).map (data => data * 10000)));\n      mp3data.push (new Int16Array (encoder.flush ()));\n      let file = new File (mp3data, title, {type: 'audio/mp3'});\n      unfreeze ();\n      resolve (file);\n    });\n  } catch (e) {\n    unfreeze ();\n    reject (e);\n  }\n});","import {useState} from 'react';\nimport {notifications as api} from '../lib/auth';\n\nconst getMinutes = _time => {\n  let [time, ampm] = _time.split (' ');\n  let [hours, minutes] = time.split (':');\n  return (parseInt (hours) % 12) * 60 + parseInt (minutes) + (ampm === 'pm' ? 12 * 60 : 0);\n}\n\nconst compareTimes = (a, b) => {\n  let mina = getMinutes (a.notificationTime);\n  let minb = getMinutes (b.notificationTime);\n  return mina - minb;\n}\n\nexport default function useSkills () {\n\n  const [notifications, setNotifications] = useState ([]);\n  const getNotifications = async () => new Promise (async (resolve, reject) => {\n    try {\n      let req = await api.get ();\n      let data = await req.json ();\n      data.sort (compareTimes);\n      setNotifications (data);\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  })\n  const createNotification = body => new Promise (async (resolve, reject) => {\n    try {\n      await api.post (body);\n      await getNotifications ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  })\n  const deleteNotification = id => new Promise (async (resolve, reject) => {\n    try {\n      await api.del (id);\n      await getNotifications ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  });\n  return {notifications, getNotifications, createNotification, deleteNotification}\n\n}","import useAuth from './useAuth';\nimport useJournal from './useJournal';\nimport useWriting from './useWriting';\nimport useSettings from './useSettings';\nimport useSharing from './useSharing';\nimport useSkills from './useSkills';\nimport useRouter from './useRouter';\nimport useAudio from './useAudio';\nimport useNotifications from './useNotifications';\n\nexport default {\n  useAuth,\n  useJournal,\n  useWriting,\n  useSettings,\n  useSharing,\n  useSkills,\n  useRouter,\n  useAudio,\n  useNotifications\n}","import {useState, useEffect} from 'react';\nimport {login as _login, register as _register, getCurrentUser, retrieveAccessToken, refreshSession, signOut, customFlow} from '../lib/auth';\nimport {keepAlive, cancelKeepAlive} from '../lib/keepAlive';\n\nexport default function useAuth (onSessionActive) {\n  // data\n  const [user, setUser] = useState (null);\n  const [err, setErr] = useState (null);\n\n  // login method - gets jwt from cognito and accuires barista session from api\n  const login = async (Username, cb, onCodeSent) => {\n    return new Promise (async (resolve, reject) => {\n      try {\n        await customFlow (Username, cb, onCodeSent);\n        console.log ('custom flow complete');\n        await retrieveAccessToken ();\n        keepAlive ();\n        setUser (true);\n        resolve ();\n      } catch (e) {\n        console.log ('custom flow complete - on err');\n        reject (e);\n      }\n    })\n  }\n\n  // retrieve locally stored user\n  const retrieveSession = async () => new Promise (async (resolve, reject) => {\n    try {\n      await getCurrentUser ();\n      await retrieveAccessToken ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  });\n\n  // logout logs out locally\n  const logout = async () => new Promise (async (resolve, reject) => {\n    try {\n      await signOut ();\n      cancelKeepAlive ();\n      window.location.reload ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  })\n  \n  // init\n  const init = async () => {\n    try {\n      console.log ('init auth')\n      await getCurrentUser ();\n      await retrieveSession ();\n      await refreshSession ();\n      setUser (true);\n    } catch (e) {\n      console.log (e);\n      setUser (false);\n    }\n  }\n\n  const register = async (phoneNumber, cb, onCodeSent) => new Promise (async (resolve, reject) => {\n    try {\n      await _register (phoneNumber);\n      await login (phoneNumber, cb, onCodeSent);\n      setUser (true);\n    } catch (e) {\n      setErr (e);\n    }\n  });\n\n  useEffect (() => {\n    if (user && onSessionActive) onSessionActive ();\n  }, [user]);\n\n  useEffect (() => {\n    init ();\n  }, []);\n\n  return {user, err, login, logout, register};\n}","import {useEffect, useState} from 'react';\nimport {entries as api, shares} from '../lib/auth';\nimport constructFilterList from '../lib/filters';\nimport {runIndexEntries} from '../lib/indexing';\n\nexport default function useJournal () {\n\n  // just journal stuff\n  const [entryList, setEntryList] = useState ([]); \n  // filters n stuff\n  const [filterIterator, setIter] = useState (0);\n  const [filters, actualSetFilter] = useState ([]);\n  const [filterList, setFilterList] = useState ([]);\n  const [query, setQuery] = useState ('');\n  const [entries, setIdx] = useState ([]);\n  // stage for removal\n  const [toRemove, setToRemove] = useState ([]);\n  \n  // read\n  const getEntries = async sharedJournalId => {\n    try {\n      let req;\n      if (sharedJournalId) {\n        req = await shares.getById (sharedJournalId);\n      } else {\n        req = await api.get ();\n      }\n      let arr = await req.json ();\n      setEntryList (arr);\n    } catch (e) {\n    }\n  }\n  // create\n  const createEntry = async body => new Promise (async (resolve, reject) => {\n    try {\n      await api.post (body);\n      await getEntries ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  })\n\n  // stage for removal\n  const toggleStageForRemoval = id => {\n    if (shouldRemove (id)) {\n      setToRemove (rem => rem.filter (entry => entry.id !== id));\n    }\n    setToRemove (rem => [...rem, id]);\n  }\n\n  // delete\n  const hideEntry = async id => new Promise (async (resolve, reject) => {\n    try {\n      await api.hide (id);\n      await getEntries ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  });\n\n  // returns a boolean value if the id is staged to remove\n  const shouldRemove = id => {\n    return toRemove.includes (id);\n  }\n\n  // calculate filter state\n  const setFilters = filters => {\n    actualSetFilter (filters);\n    let fl = constructFilterList (filters);\n    setFilterList (fl);\n    setIter (filterIterator + 1);\n  }\n\n  // actually query the entrylist\n  const runQuery = () => {\n    // run all filters\n    let result = filterList.reduce ((acc, val) => {\n      return acc.filter (val);\n    }, entryList);\n    // scenario in which there is no query\n    if (query.length === 0) return setIdx (runIndexEntries (result));\n    // separate freeform/audio/qa\n    let freeform = entryList.filter (e => e.entryType === 'freeform')\n      .map (entry => Object.assign (entry, {text: entry.freeform}))\n      .filter (({text}) => text.match (query.toLowerCase ()));;\n    let qa = entryList.filter (e => e.entryType === 'questions')\n      .map (entry => Object.assign (entry, {\n        text: entry.answers.join (' ').toLowerCase ()\n      }))\n      .filter (({text}) => text.match (query.toLowerCase ()));\n    result = runIndexEntries ([...qa, ...freeform]);\n    setIdx (result);\n  }\n\n  const clearSearch = () => {\n    setFilters ([]);\n    setQuery ('');\n    setIter (filterIterator + 1);\n  }\n\n  // run the query\n  useEffect (() => {\n    runQuery ();\n  }, [entryList, filters.length, query, filterIterator]);\n\n  return {entries, entryList, filters, getEntries, createEntry, hideEntry, toggleStageForRemoval, shouldRemove, setQuery, clearSearch, setFilters};\n\n}","import { useState } from \"react\";\nimport {questions as api} from '../lib/auth';\n\nexport default function useWriting () {\n\n  const [questions, setQuestions] = useState ([]);\n  \n  const getQuestions = async () => new Promise (async (resolve, reject) => {\n    try {\n      let req = await api.get ();\n      let qs = await req.json ();\n      setQuestions (qs.map (q => q.body));\n      resolve (qs);\n    } catch (e) {\n      reject (e);\n    }\n  });\n\n  const createQuestion = async q => new Promise (async (resolve, reject) => {\n    try {\n      let req = await api.post (q);\n      let nq = await req.json ();\n      setQuestions (questions => [...questions, q]);\n      resolve (nq);\n    } catch (e) {\n      reject (e);\n    }\n  });\n\n  return {questions, getQuestions, createQuestion};\n \n}","import {useState, useEffect} from 'react';\n\n// Relationship API:\n//   |setting - this or setting must be true\n//   !setting - must be inverse of setting\n//   &setting - must also be true\n//   +setting - if setting is true, show this\n\nexport default function useSettings (defaultSettings={}, storage=window.localStorage) {\n  const storedSettings = JSON.parse (storage.getItem ('therapy-journal-settings') || '{}');\n  const currentSettings = Object.assign (defaultSettings, storedSettings);\n  const [settings, setSettings] = useState (currentSettings);\n  const [iter, setIter] = useState (0);\n  const getSetting = (setting, ...relationships) => {\n    if (!relationships.length) return settings [setting];\n    return relationships.reduce ((acc, val) => {\n      let relation = val.charAt (0);\n      let affected = val.substring (1);\n      if (relation === '!') return acc && !settings [affected];\n      if (relation === '|') return acc || settings [affected];\n      if (relation === '&') return acc && settings [affected];\n      return acc;\n    }, settings [setting]);\n  }\n  const getAll = () => {\n    return Object.assign ({}, settings);\n  }\n  const addSetting = (setting, initial) => {\n    if (settings [setting]) return;\n    setSettings ({...settings, [setting]: initial});\n    setIter (iter + 1);\n  }\n  const set = (setting, value, ...relationships) => {\n    if (!relationships.length) return setSettings ({...settings, [setting]: value});\n    let changes = relationships.reduce ((acc, val) => {\n      let relation = val.charAt (0);\n      let affected = val.substring (1);\n      if (relation === '!') return {\n        ...acc,\n        [affected]: !value\n      };\n      if (relation === '|' && value === false) return {\n        ...acc,\n        [affected]: true\n      };\n      return acc;\n    }, {[setting]: value});\n    setSettings (_sett => Object.assign (_sett, changes));\n    setIter (iter + 1);\n  }\n  const setAll = (arr=[]) => {\n    let changes = arr.reduce ((acc, {key, value}) => {\n      return Object.assign (acc, {[key]: value})\n    }, {});\n    setSettings (_sett => Object.assign (_sett, changes));\n    setIter (iter + 1);\n  }\n  const toggle = (setting, relationships=[]) => e => {\n    if (!relationships.length)  return setSettings ({...settings, [setting]: !settings[setting]})\n    let to = !settings [setting];\n    let changes = relationships.reduce ((acc, val) => {\n      let relation = val.charAt (0);\n      let affected = val.substring (1);\n      if (relation === '!') return {\n        ...acc,\n        [affected]: !to\n      };\n      if (relation === '|' && to === false) return {\n        ...acc,\n        [affected]: true\n      };\n      return acc;\n    }, {[setting]: to});\n    setSettings ({...settings, ...changes});\n    setIter (iter + 1);\n  }\n  useEffect (() => {\n    storage.setItem ('therapy-journal-settings', JSON.stringify (settings));\n  }, [settings]);\n\n  return {getSetting, getAll, toggle, addSetting, set, setAll}\n}","import {useState} from 'react';\nimport {shares as api} from '../lib/auth';\nimport {runIndexEntries} from '../lib/indexing';\n\nexport default function useSharing (settings) {\n\n  const [sharedWithMe, setSharedWithMe] = useState ([]);\n  const [sharedByMe, setSharedByMe] = useState ([]);\n  const [sharedJournal, setSharedJournal] = useState ([]);\n  const getShares = async () => {\n    try {\n      let req = await api.get ();\n      let {sharedWithMe, sharedByMe} = await req.json ();\n      setSharedByMe (sharedByMe);\n      setSharedWithMe (sharedWithMe);\n      let sett = sharedByMe.map (sbm => {return {key: `share-${sbm.id}`, value: !sbm.frozen}});\n      settings.setAll (sett);\n    } catch (e) {\n      console.log (e);\n    }\n  }\n  const getShareById = async id => new Promise (async (resolve, reject) => {\n    try {\n      let req = await api.getById (id);\n      let arr = await req.json ();\n      let dict = runIndexEntries (arr);\n      setSharedJournal (dict);\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  })\n\n  const toggleFreeze = async id => new Promise (async (resolve, reject) => {\n    try {\n      await api.toggleFreeze (id);\n      await getShares ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  });\n\n  const shareJournal = async (phone, name, shareWithName) => new Promise (async (resolve, reject) => {\n    try {\n      let shareWith = (phone.length === 10) ? `+1${phone}` : phone;\n      await api.post ({shareWith, name, shareWithName});\n      await getShares ();\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  })\n\n  return {sharedByMe, sharedWithMe, sharedJournal, getShareById, getShares, shareJournal, toggleFreeze};\n\n}","import {useState} from 'react';\nimport base from '../lib/base';\nimport {scrollToTop} from '../lib/scrolling';\n\nexport default function useRouter () {\n  // router section\n  let initialPage = new URLSearchParams (window.location.search).get ('page') || 'write';\n  const [page, setPage] = useState (initialPage);\n  const [params, setParams] = useState (new URLSearchParams (window.location.search));\n  const redirect = (url) => {\n    let arr = url.split ('?');\n    let nextPage = arr.length > 1 ? new URLSearchParams (`?${arr [1]}`).get ('page') : 'write';\n    window.history.pushState ({previous: page, next: nextPage}, 'Journal', `${base}${url}`)\n    setPage (nextPage);\n    if (arr.length > 1) setParams (new URLSearchParams (`?${arr [1]}`));\n    scrollToTop (100);\n  }\n\n  return {page, params, redirect};\n\n}","export const scrollToTop = (offset=0) => setTimeout (() => {\n  window.scrollBy ({\n    left: 0,\n    top: -window.scrollY,\n    behavior: 'smooth'\n  })\n}, offset);\n\nexport const runScroll = (top=2 * window.innerHeight / 3, offset=100) => setTimeout (() => {\n  window.scrollTo ({\n    top: document.body.scrollHeight,\n    behavior: 'smooth'\n  });\n}, offset);","import {getTime, dateShortHand} from '../lib/indexing';\nimport * as WebAudio from '../lib/webaudio';\nimport { useState } from \"react\";\n\nexport default function useAudio (freeze) {\n  // statful stuff\n  const [recordingStatus, setRecordingStatus] = useState ('not-started');\n  const [audioRecording, setAudioRecording] = useState (null);\n  const [audioRecordingTitle, setAudioRecordingTitle] = useState (`audio-recording-${getTime ()}-${dateShortHand ()}.mp3`);\n  const [timeElapsed, setTimeElapsed] = useState (0);\n  const [timer, setTimer] = useState (false);\n  const [ready, setReady] = useState (null);\n\n  // reset all audio recording stuff\n  const resetAudioInformation = () => {\n    setAudioRecording (null);\n    setAudioRecordingTitle (`audio-recording-${getTime ()}-${dateShortHand ()}.mp3`);\n    setTimeElapsed (0);\n    setRecordingStatus ('not-started');\n    setTimer (false);\n  }\n  // start recording audio\n  const startRecording = async () => {\n    await WebAudio.start ();\n    setRecordingStatus ('recording');\n    setTimer (window.setInterval (() => setTimeElapsed (time => time + 1), 1000));\n  }\n  // end the recording and extract the audio\n  const stopRecording = async () => {\n    window.clearInterval (timer);\n    setTimer (false);\n    setTimeElapsed (0);\n    await WebAudio.stop ();\n    let file = await WebAudio.extract (freeze, `audio-recording-${getTime ()}-${dateShortHand ()}.mp3`);\n    console.log (file);\n    setAudioRecording (file);\n    setRecordingStatus ('finished');\n  }\n  // pause the recording, do not end\n  const pauseRecording = async () => {\n    window.clearInterval (timer);\n    setRecordingStatus ('paused');\n    WebAudio.pause ();\n  }\n  // resume the recording\n  const resumeRecording = async () => {\n    setTimer (window.setInterval (() => setTimeElapsed (time => time + 1), 1000));\n    setRecordingStatus ('recording');\n    WebAudio.resume ();\n  }\n  // ensure web-audio is ready\n  const initAudio = async () => {\n    let unfreeze = freeze ();\n    try {\n      await WebAudio.getUserMedia ()\n      WebAudio.createMediaRecorder ();\n      setReady (WebAudio.isReadyForRecording ());\n      unfreeze ();\n    } catch (e) {\n      unfreeze ();\n    }\n  }\n\n  return {initAudio, audioRecording, audioRecordingTitle, timeElapsed, recordingStatus, ready, startRecording, stopRecording, pauseRecording, resumeRecording, resetAudioInformation, setAudioRecordingTitle};\n}","export default {\n  'custom-questions': true,\n  'default-questions': true,\n  freeform: false,\n  'skill-add-mode': false\n}\n","// create a context usable across the whole application\nimport React, { createContext, useState } from \"react\";\nimport hooks from './hooks';\nimport defaultSettings from './lib/defaultSettings';\nimport {hasBrowserSupport} from './lib/webaudio'\n// react context api\nconst AppContext = createContext ();\nexport const useApp = () => React.useContext (AppContext);\n\n// the component\nexport default function AppProvider ({children}) {\n\n  // value used in the ctx\n  const value = {}\n\n  // freeze/unfreeze animation\n  const [frozen, setFrozen] = useState (null);\n  value.freeze = message => {\n    setFrozen (message='');\n    return function unfreeze () {\n      setFrozen (null);\n    }\n  }\n\n  // view only mode for shared journals\n  const [isViewOnly, setIsViewOnly] = useState (false);\n  value.viewMode = {isViewOnly, setIsViewOnly};\n\n  // instantiate hooks\n  value.settings = hooks.useSettings (defaultSettings);\n  value.session = hooks.useSettings ({}, sessionStorage);\n  value.skills = hooks.useSkills ();\n  value.journal = hooks.useJournal ();\n  value.sharing = hooks.useSharing (value.settings);\n  value.writing = hooks.useWriting ();\n  value.router = hooks.useRouter ();\n  value.audio = hooks.useAudio (value.freeze);\n  value.notifications = hooks.useNotifications ();\n\n  // switch to viewing a shared journal\n  value.viewSharedJournal = id => {\n    value.journal.getEntries (id);\n    value.skills.getSkills (id);\n    value.viewMode.setIsViewOnly (true);\n    value.router.redirect ('/?page=journal')\n  }\n  value.viewMyJournal = () => {\n    value.journal.getEntries ();\n    value.skills.getSkills ();\n    value.viewMode.setIsViewOnly (false);\n    value.router.redirect ('/?page=settings');\n  }\n\n  // after log in initialize all the stuff\n  const onAuth = () => {\n    value.skills.getSkills ();\n    value.writing.getQuestions ();\n    value.journal.getEntries ();\n    value.sharing.getShares (({sharedByMe}) => {\n      sharedByMe.forEach (share => {\n        value.settings.set (`share-${share.id}`, !share.frozen);\n      });\n    });\n    value.notifications.getNotifications ();\n    if (!hasBrowserSupport) {\n      value.settings.set ('audio-recording-supported', false);\n      value.settings.set ('audio-recording', false);\n    } else {\n      value.settings.set ('audio-recording-supported', true);\n      value.settings.set ('audio-recording', false);\n    }\n  }\n\n  // auth hook\n  value.auth = hooks.useAuth (onAuth);\n\n  // just wrap the whole app component in this\n  return (\n    <AppContext.Provider value={value} >\n      {\n        frozen !== null &&\n        <div id=\"loading-animation\"></div>\n      }\n      {children}\n    </AppContext.Provider>\n  )\n}","import { useEffect } from 'react';\nimport { useApp } from '../../AppProvider';\n\nfunction AudioRecorder () {\n  const {audio: {\n    initAudio,\n    ready,\n    recordingStatus,\n    audioRecording,\n    timeElapsed,\n    audioRecordingTitle,\n    startRecording,\n    stopRecording,\n    pauseRecording,\n    resumeRecording,\n    resetAudioInformation,\n    setAudioRecordingTitle\n  }} = useApp ();\n\n  useEffect (() => {\n    if (!ready) initAudio ();\n  }, []);\n\n  if (ready === null) return null;\n  if (recordingStatus === 'not-started') return (\n    <div className=\"recorder-container grid text-center\">\n      <p>Click \"Record\" to speak your journal entry!</p>\n      <button onClick={startRecording}>Record</button>\n    </div>\n  )\n  if (recordingStatus === 'paused') return (\n    <div className=\"recorder-container grid text-center\">\n      <div className=\"timer\"><span>{Math.floor (timeElapsed / 60)}:{`00${timeElapsed % 60}`.slice (-2)}</span></div>\n      <div>\n        <button onClick={resumeRecording}>Resume</button>\n        <button onClick={stopRecording}>Finish</button>\n      </div>\n    </div>\n  )\n  if (recordingStatus === 'recording') return (\n    <div className=\"recorder-container grid text-center\">\n      <div className=\"timer flashing\"><span>{Math.floor (timeElapsed / 60)}:{`00${timeElapsed % 60}`.slice (-2)}</span></div>\n      <div>\n        <button onClick={stopRecording}>Stop</button>\n        <button onClick={pauseRecording}>Pause</button>\n      </div>\n    </div>\n  )\n  if (recordingStatus === 'finished') return (\n    <div className=\"recorder-container grid text-center\">\n      <figure className=\"audio-recording\">\n        <figcaption>\n          <p>\n            Title:&nbsp;&nbsp;&nbsp;\n            <input className=\"audio-title-input\" onChange={e => setAudioRecordingTitle (e.target.value)} value={audioRecordingTitle} />\n          </p>\n          <p className=\"fake-button\"><a className=\"error\" onClick={resetAudioInformation}>Start Over</a></p>\n        </figcaption>\n        <audio controls src={window.URL.createObjectURL (audioRecording)} />\n      </figure>\n    </div>\n  )\n  return (\n    <div>Error! Error!</div>\n  )\n}\nexport default AudioRecorder","import {useEffect, useRef, useState} from 'react';\nimport {H1, H2, H3} from './components/Headers';\nimport AudioRecorder from './components/AudioRecorder';\nimport {audios as audioApi} from '../lib/auth';\nimport { useApp } from \"../AppProvider\";\nimport {printDate, getTime} from '../lib/indexing';\n\nlet defaultQuestions = [\n  'What have I done today?',\n  'How do I feel?',\n  'What else am I going to do?'\n];\n\nfunction CustomQuestionSetting ({question, onToggle, getSetting}) {\n  return (\n    <li className=\"setting\">\n      <div>{question}</div>\n      <div><span onClick={onToggle (`show-custom-question-${question}`)} className={getSetting (`show-custom-question-${question}`) ? 'toggle on' : 'toggle'} /></div>\n    </li>\n  )\n}\n\nexport default function Write () {\n  // state mgmt\n  const {auth: {user}, router: {page}, journal: {createEntry}, settings: {getSetting, toggle, set}, writing: {questions, createQuestion, recordingStatus, resetAudioInformation}, audio: {audioRecording, audioRecordingTitle}, session, freeze} = useApp ();\n  const [start, setStart] = useState (new Date ());\n  const [focusList, setFocusList] = useState ({});\n  const newQuestionRef = useRef ();\n  const freeformRef = useRef ();\n  \n  // clear content on first focus\n  const onFirstFocus = (key, text='') => e => {\n    if (focusList [key]) return;\n    e.target.innerText = text;\n    setFocusList ({\n      ...focusList,\n      [key]: true\n    })\n  }\n\n  // call api to create freeform entry\n  const runSubmitFreeformEntry = async e => {\n    let unfreeze = freeze ();\n    try {\n      const entry = {\n        entryType: 'freeform',\n        freeform: freeformRef.current.innerText,\n        start,\n        end: new Date ()\n      }\n      await createEntry (entry);\n      freeformRef.current.innerText = 'Your entry here!';\n      setStart (new Date ());\n      unfreeze ();\n    } catch (error) {\n      unfreeze ();\n    }\n  }\n\n  // call api to create qa entry\n  const runSubmitQuestionAnswerEntry = async e => {\n    let unfreeze = freeze ();\n    try {\n      let qa = session.getAll ();\n      const entry = {\n        entryType: 'questions',\n        questions: Object.keys (qa),\n        answers: Object.values (qa),\n        start,\n        end: new Date ()\n      }\n      await createEntry (entry);\n      let all = Object.keys (qa).map (question => {\n        return {\n          key: question,\n          value: '...'\n        }\n      });\n      session.setAll (all);\n      setStart (new Date ());\n      unfreeze ();\n    } catch (error) {\n      console.log (error);\n      unfreeze ();\n    }\n  }\n  \n  // call api to create audio entry\n  const runSubmitAudioEntry = async e => {\n    let unfreeze = freeze ();\n    try {\n      let body = {\n        entryType: 'audio',\n        start,\n        end: new Date ()\n      };\n      let fileUploadResponse = await audioApi.post ({filename: audioRecordingTitle});\n      let fileUpload = await fileUploadResponse.json ();\n      await fetch (fileUpload.uploadUrl, {\n        method: 'PUT',\n        body: audioRecording\n      });\n      body.audio = fileUpload.id;\n      body.title = audioRecordingTitle\n      await createEntry (body);\n      resetAudioInformation ();\n      unfreeze ();\n    } catch (e) {\n      unfreeze ();\n    }\n  }\n\n  // call api to create new question\n  const runCreateQuestion = async () => {\n    let unfreeze = null;\n    try {\n      let question = newQuestionRef.current.innerText;\n      if (question.trim () === '' || question.trim === '?') return;\n      unfreeze = freeze ();\n      await createQuestion (question);\n      newQuestionRef.current.innerText = '?';\n      unfreeze ();\n    } catch (e) {\n      unfreeze ();\n    }\n  }\n  useEffect (() => {\n    set ('custom-question-editor')\n    return () => set ('custom-question-editor');\n  }, [page])\n\n  if (page !== 'write' || !user) return null;\n  if (getSetting ('freeform', '!audio-recording')) return (\n    <main id=\"freeform-entry\">\n      <H1 short={'New Entry'}>New Freeform Entry</H1>\n      <H2>{printDate ()}</H2>\n      <H3>{getTime (start)}</H3>\n      <div onFocus={onFirstFocus ('freeform')} ref={freeformRef} contentEditable>Your entry here!</div>\n      <button onClick={runSubmitFreeformEntry}>Submit</button>\n    </main>\n  )\n  if (getSetting ('freeform', '&audio-recording')) return (\n    <main id=\"audio-entry\">\n    <H1 short={'New Entry'}>New Audio Entry</H1>\n      <H2>{printDate ()}</H2>\n      <H3>{getTime (start)}</H3>\n      <AudioRecorder />\n      {\n        recordingStatus === 'finished' &&\n        <button onClick={runSubmitAudioEntry}>Submit</button>\n      }\n      \n    </main>\n  )\n  if (getSetting ('custom-question-editor')) return (\n    <main id=\"custom-question-editor\">\n      <H1 short=\"Manage Questions\">Manage Custom Questions</H1>\n      <H2>Default Questions</H2>\n      <ul className=\"current-question-list\">\n        {\n          defaultQuestions.map (q => <li className=\"manage-default-question\" key={`manage-default-questions-${q}`}>{q}</li>)\n        }\n      </ul>\n      <H2>Custom Questions</H2>\n      <ul className=\"current-question-list\">\n        {\n          questions.map (q => (<CustomQuestionSetting question={q} onToggle={toggle} getSetting={getSetting} />))\n        }\n        </ul>\n      <h2>Add A Custom Question?</h2>\n      <h4>Add Question</h4>\n      <div className=\"questions\">\n        <b>Add New Question</b>\n        <div ref={newQuestionRef} onFocus={onFirstFocus ('create-question', '?')} className=\"add-question-input\" contentEditable>...?</div>\n      </div>\n      <div>\n        <button onClick={runCreateQuestion}>Add Question</button>\n        <button onClick={toggle ('custom-question-editor')}>Back To Writing</button>\n      </div>\n    </main>\n  )\n  return (\n    <main id=\"question-answer-entry\">\n      <H1 short={'New Entry'}>{'New Question & Answer Entry'}</H1>\n      <H2>{printDate ()}</H2>\n      <H3>{getTime (start)}</H3>\n      <div className=\"questions\">\n          {\n            getSetting ('default-questions') && defaultQuestions.map (question => (\n              <>\n                <b onClick={e => e.target.nextSibling.focus ()}>{question}</b>\n                <div onFocus={onFirstFocus (question)} contentEditable onBlur={e => {\n                  session.set (question, e.target.innerText);\n                }}>{session.getSetting (question) || '...'}</div>\n              </>\n            ))\n          }\n          {\n            getSetting ('custom-questions') && (\n              <>\n                {\n                  questions.filter (q => getSetting (`show-custom-question-${q}`)).map (question => (\n                    <>\n                      <b>{question}</b>\n                      <div onFocus={onFirstFocus (question)} contentEditable onBlur={e => {\n                        session.set (question, e.target.innerText);\n                      }}>{session.getSetting (question) || '...'}</div>\n                    </>\n                  ))\n                }\n                <span className=\"fake-button\" onClick={toggle ('custom-question-editor')}>\n                  Manage Custom Questions\n                </span>\n              </>\n            )\n          }\n        </div>\n        <button onClick={runSubmitQuestionAnswerEntry}>Submit</button>\n    </main>\n  )\n}","import { useEffect, useState } from \"react\"\n\nexport default function ({key, children, defferedClassName, delay}) {\n  const [deferring, setDeferring] = useState (true);\n  useEffect (() => {\n    setTimeout (() => {\n      setDeferring (false);\n    }, delay);\n  }, []);\n  return deferring ? <article className={defferedClassName} /> : (\n    <>\n      {children}\n    </>\n  );\n}","export default __webpack_public_path__ + \"static/media/minus.88ead845.svg\";","export default __webpack_public_path__ + \"static/media/trash.dd7f053f.svg\";","export default __webpack_public_path__ + \"static/media/cancel.da5c4222.svg\";","export default __webpack_public_path__ + \"static/media/calendar.0073112f.svg\";","export default __webpack_public_path__ + \"static/media/caret-down.bfd98d54.svg\";","import React, { useEffect, useState } from 'react'\nimport CalendarSVG from '../../img/calendar.svg'\nimport CaretSVG from '../../img/caret-down.svg'\n\nconst days = [\n  0,\n  31,\n  28,\n  31,\n  30,\n  31,\n  30,\n  31,\n  31,\n  30,\n  31,\n  30,\n  31\n]\n\nconst maxDaysIn = (mm, yyyy) => days [mm] + (yyyy % 4 === 0 ? 1 : 0);\n\nfunction DateFilter ({value, remove, setValue}) {\n  let d = new Date (value.date);\n  const [mode, setMode] = useState (value.mode);\n  const [mm, setMonth] = useState (d.getMonth () + 1);\n  const [dd, setDate] = useState (d.getDate ());\n  const [yyyy, setYear] = useState (d.getFullYear ());\n  const [maxDays, setMaxDays] = useState (maxDaysIn (mm, yyyy));\n  const cycleMode = () => {\n    if (value.modeFinal) return;\n    setMode (\n      mode === 'single-day' ? 'after' :\n      mode === 'after' ? 'before' : 'single-day'\n    )\n  }\n  useEffect (() => {\n    if (mm === NaN || dd === NaN || yyyy === NaN) return;\n    let max = maxDaysIn (mm, yyyy);\n    setMaxDays (max);\n    setValue (Object.assign (value, {\n      mode,\n      date: new Date (yyyy, mm - 1, dd, 0, 0, 0)\n    }));\n  }, [dd, mm, yyyy, mode]);\n  return (\n    <li className=\"grid filter date-filter\">\n      <span>\n        <img src={CalendarSVG} alt=\"Date Filter\" />\n      </span>\n      <span className={value.modeFinal ? '' : \"fake-button\"} onClick={cycleMode}>\n        <span className=\"grid switch-mode\">\n          <span>\n            {\n              value.mode === 'single-day' ? 'Day Of' :\n              value.mode === 'after' ? 'After' : 'Before'\n            }\n          </span>\n          {\n            !value.modeFinal &&\n            <img style={{display: 'inline', transform: 'rotate(-90deg)'}} width={8} height={8} src={CaretSVG} />\n          }\n        </span>\n      </span>\n      <div>\n        <input type=\"tel\" min={1} max={12} defaultValue={mm} onChange={e=>setMonth (parseInt (e.target.value))} />\n        <span>/</span>\n        <input type=\"tel\" min={1} max={maxDays} defaultValue={dd} onChange={e=>setDate (parseInt (e.target.value))} />\n        <span>/</span>\n        <input type=\"tel\" min={2020} max={new Date ().getFullYear ()} defaultValue={yyyy} onChange={e=>setYear (parseInt (e.target.value))}/>\n      </div>\n      <span>\n        <span className=\"fake-button\" onClick={remove}>remove</span>\n      </span>\n    </li>\n  )\n}\n\nexport default DateFilter\n","export default __webpack_public_path__ + \"static/media/stopwatch.43421b05.svg\";","import {useState, useEffect} from 'react'\nimport StopwatchSVG from '../../img/stopwatch.svg';\nimport CaretSVG from '../../img/caret-down.svg'\n\nfunction TimeFilter ({value, remove, setValue}) {\n  const [mode, setMode] = useState (value.mode);\n  const [minutes, _setMinutes] = useState (value.minutes);\n  const [displayMinutes, setDisplayMinutes] = useState (`00${value.minutes}`.slice (-2))\n  const [hours, _setHours] = useState (value.hours);\n  const [displayHours, setDisplayHours] = useState (value.hours % 12 || 12);\n  const ampm = () => setHours (hours + 12);\n  const setMinutes = e => {\n    let mins = typeof e === 'object' ? parseInt (e.target.value) : e;\n    if (!mins) return setDisplayMinutes ('');\n    if (mins >= 60) return _setMinutes (mins % 60);\n    if (mins < 0) return _setMinutes (mins + 60);\n    _setMinutes (mins);\n  }\n  const setHours = e => {\n    let hrs = typeof e === 'object' ? parseInt (e.target.value) : e;\n    if (!hrs) return setDisplayHours ('');\n    if (hrs > 24) return _setHours (hrs % 24);\n    if (hrs < 0) return _setHours (24 + hrs);\n    _setHours (hrs);\n  }\n  const cycleMode = () => {\n    setMode (\n      mode === 'is-at' ? 'after' :\n      mode === 'after' ? 'before' : 'is-at'\n    )\n  }\n  useEffect (() => {\n    setDisplayHours (hours % 12 || 12);\n    setDisplayMinutes (`00${minutes}`.slice (-2))\n    setValue ({\n      mode,\n      minutes,\n      hours\n    });\n  }, [minutes, hours, mode]);\n  return (\n    <li className=\"grid filter time-filter\">\n      <span>\n        <img src={StopwatchSVG} />\n      </span>\n      <span className=\"fake-button\" onClick={cycleMode}>\n        <span className=\"grid switch-mode\">\n          <span>{value.mode === 'is-at' ? 'Exact' : value.mode === 'after' ? 'After' : 'Before'}</span>\n          <img style={{display: 'inline', transform: 'rotate(-90deg)'}} width={8} height={8} src={CaretSVG} />\n        </span>\n      </span>\n      <div>\n        <input type=\"tel\" value={displayHours} onChange={setHours} />\n        <span>:</span>\n        <input type=\"tel\" value={displayMinutes} onChange={e=>setMinutes (parseInt (e.target.value))} />\n        <span className=\"fake-button\" onClick={ampm}>{hours < 12 ? 'am' : 'pm'}</span>\n      </div>\n      <span>\n        <span className=\"fake-button\" onClick={remove}>remove</span>\n      </span>\n    </li>\n  )\n}\n\nexport default TimeFilter\n","export default __webpack_public_path__ + \"static/media/search.28b0ad10.svg\";","export default __webpack_public_path__ + \"static/media/filter.8be2c938.svg\";","import {useEffect, useState} from 'react';\nimport {useApp} from '../../AppProvider';\nimport DateFilter from './DateFilter';\nimport TimeFilter from './TimeFilter';\nimport CalendarSVG from '../../img/calendar.svg';\nimport StopwatchSVG from '../../img/stopwatch.svg';\nimport SearchIcon from '../../img/search.svg';\nimport FilterSVG from '../../img/filter.svg';\n\nconst filterTypes = {\n  'date': DateFilter,\n  'time': TimeFilter\n}\n\nexport default function Query () {\n  \n  // state mgmt\n  const {journal: {query, filters, setQuery, setFilters}} = useApp ();\n  const [open, setOpen] = useState (false);\n  const [dateFilters, setDateFilters] = useState ([]);\n  const [timeFilters, setTimeFilters] = useState ([]);\n  const [typeFilter, setTypeFilter] = useState ([]);\n  \n  // on filter update, sort out filter lists\n  useEffect (() => {\n    setDateFilters (filters.filter (filter => filter.type === 'date'));\n    setTimeFilters (filters.filter (filter => filter.type === 'time'));\n    setTypeFilter (filters.filter (filter => filter.type === 'type'))\n  }, [filters]);\n\n  // add date filter and reassign mode if necessary\n  const addDateFilter = () => {\n    if (dateFilters.length === 0) {\n      let newFilters = [...filters, {type: 'date', value: {mode: 'single-day', date: new Date ()}}]\n      setFilters (newFilters);\n    } else if (dateFilters.length === 1) {\n      let curr = filters.filter (fil => fil.type === 'date') [0];\n      curr.value = Object.assign (curr.value, {mode: 'after', modeFinal: true});\n      let newFilters = [...filters, {type: 'date', value: {mode: 'before', modeFinal: true, date: new Date ()}}];\n      setFilters (newFilters)\n    } else {\n      return;\n    }\n  }\n  const addTimeFilter = () => {\n    if (timeFilters.length === 0) {\n      let newFilters = [...filters, {\n        type: 'time',\n        value: {\n          mode: 'is-at',\n          minutes: new Date ().getMinutes (),\n          hours: new Date ().getHours ()\n        }\n      }]\n      setFilters (newFilters);\n    } else if (timeFilters.length === 1) {\n      timeFilters [0].value.mode = 'after';\n      let newFilters = [...filters, {\n        type: 'time',\n        value: {\n          mode: 'before',\n          minutes: new Date ().getMinutes (),\n          hours: new Date ().getHours ()\n        }\n      }]\n      setFilters (newFilters);\n    } else {\n      return;\n    }\n  }\n  const remove = index => () => {\n    filters.splice (index, 1);\n    setFilters (filters);\n  }\n  const setFilterValue = index => value => {\n    filters [index].value = value;\n    setFilters (filters);\n  }\n  return (\n    <>\n      <div className=\"grid search-container\">\n        <form className=\"search-bar\" onSubmit={e => e.preventDefault ()}>\n          <input value={query} onChange={e => setQuery (e.target.value)} placeholder=\"Search...\" />\n          <img src={SearchIcon} />\n        </form>\n        <span onClick={e => setOpen (!open)} className=\"open-filters\">\n          <img src={FilterSVG} />\n        </span>\n      </div>\n      {\n        open ? (\n          <>\n            <ol className=\"grid filter-list\">\n              {\n                filters.map ((filter, index) => {\n                  let Filter = filterTypes [filter.type];\n                  return (\n                    <Filter value={filter.value} remove={remove (index)} setValue={setFilterValue (index)} />\n                  );\n                })\n              }\n            </ol>\n            {\n              (filters.length === 0) &&\n              <div className=\"grid\">\n                You don't have any filters, add some by clicking on the icons below!\n              </div>\n            }\n            <ul className=\"grid add-filter-list\">\n              <li onClick={addDateFilter} className={dateFilters.length < 2 ? '' : \"add-filter-disabled\"}>\n                <img src={CalendarSVG} alt=\"date filter\" />\n              </li>\n              <li onClick={addTimeFilter} className={timeFilters.length < 2 ? '' : \"add-filter-disabled\"}>\n                <img src={StopwatchSVG} alt=\"time filter\" />\n              </li>\n            </ul>\n            <hr />\n          </>\n        ) : (\n          <div className=\"none\" />\n        )\n      }\n    </>\n  )\n}","import { useEffect, useState } from 'react'\nimport {H1, H2, H3} from './components/Headers'\nimport Deferred from './components/Deferred';\nimport {getTime} from '../lib/indexing';\nimport {runScroll} from '../lib/scrolling';\nimport MinusSVG from '../img/minus.svg'\nimport TrashSVG from '../img/trash.svg'\nimport CancelSVG from '../img/cancel.svg'\nimport { useApp } from '../AppProvider';\nimport Query from './components/Query';\n\nconst defaultShowCount = 10;\n\nfunction EntryHeader ({date, isOpen, open, close, count}) {\n  return isOpen ? (\n    <header className=\"entry-header\">\n      <span className=\"fake-button\" onClick={close}>close</span>\n      <H2>{date}</H2>\n    </header>\n  ) : (\n    <header className=\"entry-header\">\n      <span className=\"fake-button\" onClick={open}>more</span>\n      <H2>{date}</H2>\n      <div className=\"pill\">\n        <span>{count}</span>\n      </div>\n    </header>\n  )\n}\n\nconst EntryContents = ({entries, open, shouldRemove, startRemoving, cancelRemove, remove, isNotMain}) => entries.map (entry => {\n  return open ? (\n    <section className={!shouldRemove (entry.id) ? \"journal-entry\" : \"journal-entry to-remove\"} key={`entry-${entry.id}`}>\n      <header>\n        <span></span>\n        <H3 short={getTime (entry.start)}>\n          {getTime (entry.start)} - {getTime (entry.end)}\n        </H3>\n        {\n          !isNotMain &&\n          <span>\n            { \n              !shouldRemove (entry.id) &&\n              <img src={MinusSVG} onClick={e=>startRemoving (entry.id)} />\n            }\n            { \n              shouldRemove (entry.id) &&\n              <>\n                <img src={TrashSVG} onClick={e=>remove (entry.id)} />\n                <span />\n                <img src={CancelSVG} onClick={e=>cancelRemove (entry.id)} />\n              </>\n            }\n          </span>\n        }\n      </header>\n      {\n        (entry.entryType === 'questions' || !entry.entryType) &&\n        entry.questions.map ((q, i) => (\n          <section key={`${entry.id}-question-${i}`}>\n            <p>\n              <b>{q} </b>\n              {entry.answers [i]}\n            </p>\n          </section>\n        ))\n      }\n      {\n        entry.entryType === 'freeform' &&\n        <section className=\"journal-entry\">\n          <p>{entry.freeform}</p>\n        </section>\n      }\n      {\n        entry.entryType === 'audio' &&\n          <figure>\n            <figcaption><p>{entry.audio.title}</p></figcaption>\n            <audio controls src={entry.audio.url} />\n          </figure>\n      }\n    </section>\n  ) : null;\n})\n\nfunction Journal({isNotMain, _entries}) {\n  const {router: {page}, journal: {entries, clearSearch, hideEntry}, freeze} = useApp ();\n  const [open, setOpen] = useState ([]);\n  const [showCount, setShowCount] = useState (defaultShowCount);\n  const updateCount = () => {\n    runScroll ();\n    setShowCount (defaultShowCount + showCount);\n  }\n  const [removing, setRemoving] = useState ([]);\n  const startRemoving = id => {\n    if (removing.includes (id)) return remove (id);\n    setRemoving (removing => [...removing, id]);\n  }\n  const cancelRemove = id => {\n    setRemoving (removing => removing.filter (el => el !== id));\n  }\n  const shouldRemove = id => removing.includes (id);\n  const remove = async id => new Promise (async (resolve, reject) => {\n    let unfreeze = freeze ();\n    try {\n      if (!removing.includes (id)) return reject (new Error (`have not staged skill[${id}] for removal, cannot remove`));\n      await hideEntry (id);\n      setRemoving (removing => removing.filter (el => el !== id));\n      unfreeze ();\n      resolve ();\n    } catch (e) {\n      unfreeze ();\n      reject (e);\n    }\n  })\n  let removal = {startRemoving, cancelRemove, shouldRemove, remove}\n\n  let list = isNotMain ? _entries : entries;\n  // body element\n  let body = (\n    <>\n      {\n        list.filter ((d, i) => i < showCount).map ((index, i) => (\n          <Deferred key={`deffered-index-search-results-${index.date}`} delay={i * 50} defferedClassName=\"\">\n            <article key={`index-search-results-${index.date}`}>\n              <EntryHeader count={index.list.length} date={index.meta.date} isOpen={open.indexOf (index.date) !== -1} open={() => {setOpen (open => [...open, index.date])}} close={() => {\n                setOpen (open => open.filter (d => d !== index.date))\n              }} index={index} />\n              <EntryContents isNotMain={isNotMain} open={open.indexOf (index.date) !== -1} entries={index.list} {...removal} />\n            </article>\n          </Deferred>\n        ))\n      }\n      {\n        showCount < list.length &&\n        <div className=\"grid\">\n          <span onClick={updateCount} className=\"fake-button\">Show More</span>\n        </div>\n      }\n    </>\n  );\n  if (list.length === 0) body = (\n    <div className=\"grid\">\n      <span className=\"fake-button\" onClick={clearSearch}>Clear Search Results</span>\n      <H3>Hmmmm, nothing there!</H3>\n    </div>\n  );\n  return (page !== 'journal' && !isNotMain) ? null : isNotMain ? (\n    <>\n      {body}\n    </>\n  )\n  :\n  (\n    <main>\n      <H1>Journal</H1>\n      <Query />\n      {body}\n    </main>\n  )\n}\n\nexport default Journal\n","\nconst sanitizePhoneNumber = number => {\n  let reduced = number.replaceAll (/[^0-9]/g, '');\n  if (reduced.length !== 10) throw new Error ('Phone number must be 10 digits, current length: ' + reduced.length);\n  return '+1' + reduced;\n}\n\nexport const stripPhoneNumber = number => number.replaceAll (/[^0-9]/g, '');\n\nexport default sanitizePhoneNumber","export default {\n  'minus.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/cursor-creative\" title=\"Cursor Creative\">Cursor Creative</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',  'calendar.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/freepik\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'pen.svg': 'Icons made by <a href=\"https://www.flaticon.com/authors/icongeek26\" title=\"Icongeek26\">Icongeek26</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\"> www.flaticon.com</a>',\n  'book.svg': 'Icons made by <a href=\"https://www.flaticon.com/authors/zlatko-najdenovski\" title=\"Zlatko Najdenovski\">Zlatko Najdenovski</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\"> www.flaticon.com</a>',\n  'plus.svg': 'Icons made by <a href=\"https://www.flaticon.com/authors/freepik\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\"> www.flaticon.com</a>',\n  'list.svg': 'Icons made by <a href=\"https://www.flaticon.com/authors/phatplus\" title=\"phatplus\">phatplus</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\"> www.flaticon.com</a>',\n  'skill.svg': 'Icons made by <a href=\"https://www.flaticon.com/authors/freepik\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\"> www.flaticon.com</a>',\n  'settings.svg': 'Icons made by <a href=\"https://www.flaticon.com/authors/srip\" title=\"srip\">srip</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\"> www.flaticon.com</a>',\n  'search.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/pixel-perfect\" title=\"Pixel perfect\">Pixel perfect</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'filter.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/kirill-kazachek\" title=\"Kirill Kazachek\">Kirill Kazachek</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'stopwatch.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/good-ware\" title=\"Good Ware\">Good Ware</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'caret-down.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/dave-gandy\" title=\"Dave Gandy\">Dave Gandy</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'trash.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/dinosoftlabs\" title=\"DinosoftLabs\">DinosoftLabs</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'cancel.svg': '<div>Icons made by <a href=\"https://www.freepik.com\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'back.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/gregor-cresnar\" title=\"Gregor Cresnar\">Gregor Cresnar</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'next.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/gregor-cresnar\" title=\"Gregor Cresnar\">Gregor Cresnar</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'happy.svg': '<div>Icons made by <a href=\"https://www.freepik.com\" title=\"Freepik\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'dashboard.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/pixel-perfect\" title=\"Pixel perfect\">Pixel perfect</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>',\n  'left-arrow.svg': '<div>Icons made by <a href=\"https://www.flaticon.com/authors/pixel-perfect\" title=\"Pixel perfect\">Pixel perfect</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a></div>'\n  \n}","import {SettingGroup} from '../Settings'\nimport { useApp } from \"../../AppProvider\"\nimport { useState } from 'react';\nimport TrashSVG from '../../img/trash.svg';\n\nexport default function Notifications () {\n  const {notifications, freeze} = useApp ();\n  const [ampm, setAmpm] = useState ('am');\n  const [time, setTime] = useState ('12:00');\n  const createNotification = async () => {\n    let unfreeze = freeze ();\n    try {\n      if (!ampm || !time) throw new Error ('Cannot create notification without exact time.');\n      await notifications.createNotification ({notificationTime: `${time} ${ampm}`});\n      unfreeze ();\n    } catch (e) {\n      unfreeze ();\n      console.log (e);\n    }\n  }\n  const deleteNotification = id => async () => {\n    let unfreeze = freeze ();\n    try {\n      await notifications.deleteNotification (id);\n      unfreeze ();\n    } catch (e) {\n      unfreeze ();\n    }\n  }\n  return (\n    <SettingGroup longTitle=\"Manage Your Notifications\" shortTitle=\"Notifications\">\n      {\n        notifications.notifications.length > 0 &&\n        <p>All you have to do is specifiy times you want to recieve reminders to enter in your journal and we will automatically send a text to you at that time each day! Click one of the times to remove that notification.</p>\n      }\n      <div className=\"notification-list\">\n        {\n          notifications.notifications.map (note => (\n            <span className=\"button-styling\" onClick={deleteNotification (note.id)}><span>{note.notificationTime}</span> <img src={TrashSVG} /></span>\n          ))\n        }\n      </div>\n      {\n        notifications.notifications.length === 0 &&\n        <p>You haven't created any notifications yet, and that's totally ok! Just remember we're always here if you need us!</p>\n      }\n      <div className=\"notification-creator\">\n        <select onChange={e => setTime (e.target.value)}>\n          <option>12:00</option>\n          <option>12:15</option>\n          <option>12:30</option>\n          <option>12:45</option>\n          <option>1:00</option>\n          <option>1:15</option>\n          <option>1:30</option>\n          <option>1:45</option>\n          <option>2:00</option>\n          <option>2:15</option>\n          <option>2:30</option>\n          <option>2:45</option>\n          <option>3:00</option>\n          <option>3:15</option>\n          <option>3:30</option>\n          <option>3:45</option>\n          <option>4:00</option>\n          <option>4:15</option>\n          <option>4:30</option>\n          <option>4:45</option>\n          <option>5:00</option>\n          <option>5:15</option>\n          <option>5:30</option>\n          <option>5:45</option>\n          <option>6:00</option>\n          <option>6:15</option>\n          <option>6:30</option>\n          <option>6:45</option>\n          <option>7:00</option>\n          <option>7:15</option>\n          <option>7:30</option>\n          <option>7:45</option>\n          <option>8:00</option>\n          <option>8:15</option>\n          <option>8:30</option>\n          <option>8:45</option>\n          <option>9:00</option>\n          <option>9:15</option>\n          <option>9:30</option>\n          <option>9:45</option>\n          <option>10:00</option>\n          <option>10:15</option>\n          <option>10:30</option>\n          <option>10:45</option>\n          <option>11:00</option>\n          <option>11:15</option>\n          <option>11:30</option>\n          <option>11:45</option>\n        </select>\n        <select onChange={e => setAmpm (e.target.value)}>\n          <option>am</option>\n          <option>pm</option>\n        </select>\n        <br />\n        <button onClick={createNotification}>Create Notification</button>\n      </div>\n    </SettingGroup>\n  )\n}","import { useRef, useState } from \"react\";\nimport sanitizePhoneNumber from '../lib/sanitizePhoneNumber'\nimport {H1, H2, H3} from \"./components/Headers\";\nimport attributions from '../lib/attributions'\nimport {useApp} from '../AppProvider';\nimport Notifications from \"./components/TextNotifications\";\n\nfunction ShareJournal () {\n  const {journal: {shareJournal}, settings} = useApp ();\n  const numRef = useRef ();\n  const nameRef = useRef ();\n  const swnRef = useRef ();\n  const onClick = async () => {\n    let phone = numRef.current.value;\n    phone = sanitizePhoneNumber (phone);\n    let name = nameRef.current.value;\n    let shareWithName = swnRef.current.value;\n    let share = await shareJournal (phone, name, shareWithName);\n    settings.addSetting (`share-${share.id}`, true);\n    numRef.current.value = '';\n    swnRef.current.value = '';\n  }\n  return (\n    <div className=\"action\">\n      <p style={{textDecoration: 'none'}}>Share Your Journal With</p>\n      <input ref={swnRef} placeholder=\"James Allen\" />\n      <input type=\"tel\" ref={numRef} placeholder=\"123-456-7890\" />\n      <p style={{textDecoration: 'none'}}>Your Name</p>\n      <input ref={nameRef} />\n      <br />\n      <span onClick={onClick}>Submit</span>\n    </div>\n  )\n}\n\nfunction SharedByMe () {\n  const {freeze, sharing: {sharedByMe, toggleFreeze}, settings: {set}} = useApp ();\n\n  const onToggle = (share) => async () => {\n    let unfreeze = freeze ('');\n    try {\n      let req = await toggleFreeze (share.id);\n      unfreeze ();\n    } catch (e) {\n      unfreeze ();\n    }\n  }\n  return (\n    <div>\n      <p style={{textDecoration: 'none'}}>Who You Share Your Journal With</p>\n      <hr style={{width: '25vw'}}/>\n      {\n        sharedByMe.length === 0 &&\n        <span style={{textDecoration: 'none'}}>You haven't shared your journal - no pressure</span>\n      }\n      {\n        sharedByMe.map (share => (\n          <Setting onToggle={onToggle (share)} title={share.shareWithName || share.shareWith} setting={`share-${share.id}`} />\n        ))\n      }\n    </div>\n  );\n}\n\nfunction SharedWithMe () {\n  const {sharing: {sharedWithMe}, viewSharedJournal} = useApp ();\n  let shares = sharedWithMe.filter (share => !share.frozen);\n  if (shares.length === 0) return (<div className=\"none\" />)\n  return (\n    <div className=\"action\">\n      <p style={{textDecoration: 'none'}}>Journals Shared With You</p>\n      <hr style={{width: '25vw'}}/>\n      {\n        shares.map (share => (\n          <span onClick={() => viewSharedJournal (share.id)}>{share.name}</span>\n        ))\n      }\n    </div>\n  )\n}\n\nexport function SettingGroup ({longTitle, shortTitle, children}) {\n  return (\n    <div className=\"setting-group\">\n      <header>\n        <H3 short={shortTitle}>{longTitle}</H3>\n      </header>\n      {children}\n      <div></div>\n    </div>\n  )\n}\n\nexport function Setting ({setting, title, relationships=[], onToggle}) {\n  const {settings: {getSetting, toggle}} = useApp ();\n  let show = relationships.reduce ((acc, val) => {\n    if (!acc) return acc;\n    let relation = val.charAt (0);\n    if (relation !== '+') return acc;\n    let affector = val.substring (1);\n    return getSetting (affector);\n  }, true);\n  if (!show) return (\n    <div className=\"none\" />\n  )\n  return (\n    <div className=\"setting\">\n      <div><b>{title}</b></div>\n      <div><span onClick={onToggle ? onToggle : toggle (setting, relationships)} className={getSetting (setting) ? 'toggle on' : 'toggle'} /></div>\n    </div>\n  )\n}\n\nfunction Settings ({entryList}) {\n  const {router: {page, redirect}, settings: {getSetting, iter}, auth: {user, logout}} = useApp ();\n  const [attributionId, setAttributionId] = useState ('attributions');\n  if (!user) return null;\n  return page === 'settings' ? (\n    <main className=\"settings\">\n      <H1>Settings</H1>\n      <Notifications />\n      <SettingGroup longTitle={'Journal Settings'} shortTitle={'Journal'}>\n        <p>Make journal entries the way you want to make them. These settings are specific to your device, so you can have different preferences on your phone, tablet, laptop or whatever else you use!</p>\n        <Setting setting=\"freeform\" title=\"Enable Freeform\" />\n        {\n          getSetting ('audio-recording-supported') &&\n          <Setting setting=\"audio-recording\" title=\"Enable Audio Recording\" relationships={['+freeform']} />\n        }\n        <Setting setting=\"default-questions\" title=\"Show Default Questions\" relationships={['|custom-questions']} />\n        <Setting setting=\"custom-questions\" title=\"Show Custom Questions\" relationships={['|default-questions']} />\n      </SettingGroup>\n      <ShareJournal/>\n      <SharedWithMe/>\n      <SharedByMe/>\n      <div className=\"action\">\n        { \n          window.navigator.canShare &&\n          <span onClick={() => {\n            window.navigator.share ({\n              title: 'My Journal',\n              url: 'https://lincoln-howard-jr.github.io/journal/'\n            })\n          }}>Share This Application</span>\n        }\n        <span onClick={logout}>Log Out</span>\n      </div>\n      {\n        attributionId === 'attributions' &&\n        <div className=\"action\">\n          <span onClick={() => setAttributionId ('')}>Show Attributions</span>\n        </div>\n      }\n      <div className=\"attributions\" id={attributionId}>\n        <H2>Attributions</H2>\n        <div className=\"fake-button\">\n          <span onClick={() => setAttributionId ('attributions')}>Hide Attributions</span>\n        </div>\n        <ul>\n          {Object.keys (attributions).map (k => (\n            <li key={`attribiution-${k}`}>\n              <b>{k}</b>\n              <br />\n              <span dangerouslySetInnerHTML={{__html: attributions [k]}}/>\n            </li>\n          ))}\n        </ul>\n      </div>\n    </main>\n  ) : null;\n}\n\nexport default Settings\n","import { H1, H2 } from './components/Headers';\nimport MinusSVG from '../img/minus.svg'\nimport TrashSVG from '../img/trash.svg'\nimport CancelSVG from '../img/cancel.svg'\nimport { useApp } from '../AppProvider';\nimport { useRef } from 'react';\n\nfunction SkillSuggestions () {\n  return (\n    <>\n      <p>If you're having trouble thinking of some? We made a list of some sample skills!</p>\n      <section>\n        <h3 className=\"dont-hide\" style={{textDecoration: 'underline'}}>Suggestions:</h3>\n        <ul style={{margin: '2vh 0'}}>\n          <li>Go for a walk</li>\n          <li>Focus on a small, simple task</li>\n          <li>Read a short, interesting article</li>\n          <li>Practice mindfullness</li>\n          <li>Listen to your own words</li>\n          <li>Check the facts</li>\n        </ul>\n      </section>\n    </>\n  )\n}\n\nfunction Skills () {\n  const {auth: {user}, router: {page}, settings: {getSetting, toggle, iter}, skills: {skills, isStaged, submitSkill, stageForRemoval, unstage, removeSkill}, freeze} = useApp ();\n\n  const sklRef = useRef ();\n  const catRef = useRef ();\n  const addSkill = async e => {\n    let unfreeze = freeze ();\n    try {\n      let category = catRef.current.value;\n      let skill = sklRef.current.innerText;\n      await submitSkill ({category, skill});\n      catRef.current.value = 'Tools For';\n      sklRef.current.innerText = '...';\n      unfreeze ();\n    } catch (e) {\n      unfreeze ();\n    }\n  }\n  if (!user) return null;\n  if (page !== 'skills') return null;\n  if (!getSetting ('skill-add-mode')) return (\n    <main className=\"skill-category\">\n      <H1 short=\"Skills\">Reference Your Skills</H1>\n      <div className=\"text-center\">\n        <a className=\"fake-button text-center\" onClick={toggle ('skill-add-mode')}>Add A Skill</a>\n      </div>\n      {\n        skills.map (category => (\n          <section key={`skill-category-${category.meta.category}`} className=\"skill-category\">\n            <H2>{category.meta.category}</H2>\n            <ul>\n              {\n                category.list.map (skill => (\n                  <li key={`skill-skill-${skill.id}`} className={isStaged (skill.id) ? 'to-remove' : 'stable'}>\n                    <span>{skill.skill}</span>\n                    <span>\n                      {\n                        isStaged (skill.id) ? \n                        <>\n                          <img onClick={e => removeSkill (skill.id)} src={TrashSVG} />\n                          <img onClick={e => unstage (skill.id)} src={CancelSVG} />\n                        </>\n                        :\n                          <img onClick={e => stageForRemoval (skill.id)} src={MinusSVG} />\n                        }\n                      </span>\n                  </li>\n                ))\n              }\n            </ul>\n          </section>\n        ))\n      }\n    </main>\n  )\n  return (\n    <main>\n      <datalist id=\"skills-categories\">\n        {\n          skills.map (category => (\n            <option>{category.meta.category}</option>\n          ))\n        }\n      </datalist>\n      <H1>Add A Skill</H1>\n      <div>Category: <input list=\"skills-categories\" ref={catRef} defaultValue=\"Tools For\"/></div>\n      <div>Skill: <p style={{padding: 7.5}} ref={sklRef} contentEditable>...</p></div>\n      <div>\n        <button onClick={addSkill}>Add Skill</button>\n        <button onClick={toggle ('skill-add-mode')}>Cancel</button>\n      </div>\n      <hr style={{margin: '10vh 0'}} />\n      <SkillSuggestions />\n    </main>\n  )\n}\nexport default Skills","export default __webpack_public_path__ + \"static/media/skill.23054f65.svg\";","export default __webpack_public_path__ + \"static/media/plus.a86e5868.svg\";","export default __webpack_public_path__ + \"static/media/book.65cd22a3.svg\";","export default __webpack_public_path__ + \"static/media/settings.d2739024.svg\";","export default __webpack_public_path__ + \"static/media/dashboard.4dfd917f.svg\";","export default __webpack_public_path__ + \"static/media/left-arrow.7f101ba2.svg\";","import NavSkills from '../../img/skill.svg'\nimport NavPlus from '../../img/plus.svg'\nimport NavBook from '../../img/book.svg'\nimport NavSettings from '../../img/settings.svg'\nimport NavDash from '../../img/dashboard.svg'\nimport BackSVG from '../../img/left-arrow.svg'\nimport { useApp } from \"../../AppProvider\"\n\nexport default function Nav () {\n  const {router: {page, redirect}, viewMode: {isViewOnly}, viewMyJournal} = useApp ();\n  return (\n    <nav>\n      <ul>\n        {\n          isViewOnly &&\n          <>\n            <li className={page === 'write' ? 'active' : ''} onClick={viewMyJournal}>\n              <img alt=\"\" width=\"32\" height=\"32\" src={BackSVG} />\n              <label>Go Back</label>\n            </li>\n          </>\n        }\n        <li className={page === 'skills' ? 'active' : ''} onClick={() => {redirect (`/?page=skills`)}}>\n          <img alt=\"\" width=\"32\" height=\"32\" src={NavSkills} />\n          <label>Skills</label>\n        </li>\n        {\n          !isViewOnly &&\n          <li className={page === 'write' ? 'active' : ''} onClick={() => {redirect (`/?page=write`)}}>\n            <img alt=\"\" width=\"32\" height=\"32\" src={NavPlus} />\n            <label>Write</label>\n          </li>  \n        }\n        <li className={page === 'journal' ? 'active' : ''} onClick={() => {redirect (`/?page=journal`)}}>\n          <img alt=\"\" width=\"32\" height=\"32\" src={NavBook} />\n          <label>Journal</label>\n        </li>\n        <li className={page === 'dashboard' ? 'active' : ''} onClick={() => {redirect (`/?page=dashboard`)}}>\n          <img alt=\"\" width=\"32\" height=\"32\" src={NavDash} />\n          <label>Dash</label>\n        </li>\n        <li className={page === 'settings' ? 'active' : ''} onClick={() => {redirect (`/?page=settings`)}}>\n          <img alt=\"\" width=\"32\" height=\"32\" src={NavSettings} />\n          <label>Settings</label>\n        </li>\n      </ul>\n    </nav>\n  )\n}","import { useRef, useState } from \"react\";\nimport { useApp } from \"../AppProvider\";\nimport {H1} from './components/Headers';\nimport sanitizePhoneNumber, {stripPhoneNumber} from '../lib/sanitizePhoneNumber';\n\nconst fmtRawPhoneNumber = number => {\n  let stripped = stripPhoneNumber (number);\n  if (stripped.length > 10) stripped = stripped.substr (0, 10);\n  console.log (stripped);\n  if (stripped.length === 0) return stripped;\n  if (stripped.length < 3) return `(${stripped}`;\n  if (stripped.length < 6) return `(${stripped.substr (0, 3)}) ${stripped.substr (3)}`;\n  return `(${stripped.substr (0, 3)}) ${stripped.substr (3, 3)}-${stripped.substr (6)}`;\n}\n\nexport default function Auth () {\n  // important global state\n  const {auth: {user, login, register}} = useApp ();\n  // auth flow\n  const [rawPhoneNumber, _setPhoneNumber] = useState ('');\n  const [prompt, setPrompt] = useState (false);\n  const [answer, setAnswer] = useState (v => console.log (v));\n  const codeRef = useRef ();\n  const setPhoneNumber = (number) => _setPhoneNumber (fmtRawPhoneNumber (number));\n  const promptForCode = _answer => {\n    setPrompt (true);\n    setAnswer (() => () => {_answer (codeRef.current.value)});\n    codeRef.current.focus ();\n  }\n  const [codeSent, setCodeSent] = useState (false);\n  const [onAuthError, setAuthError] = useState (null);\n  const onCodeSent = () => {\n    setCodeSent (true);\n  }\n  const onRegisterClick = async () => {\n    try {\n      let phoneNumber = sanitizePhoneNumber (rawPhoneNumber);\n      await register (phoneNumber, promptForCode, onCodeSent);\n    } catch (e) {\n      setAuthError (e);\n    }\n  }\n  const onLogInClick = async () => {\n    try {\n      let phoneNumber = sanitizePhoneNumber (rawPhoneNumber);\n      await login (phoneNumber, promptForCode, onCodeSent);\n    } catch (e) {\n      setAuthError (e);\n    }\n  }\n  if (!!user) return null;\n  return (\n    <>\n      <header>\n        <H1>Your Journal</H1>\n      </header>\n      <main>\n        <div className=\"grid\">\n          <h3>{codeSent ? 'Your secret code in on the way!' : 'Enter your phone number:'}</h3>\n          <span style={{display: (onAuthError !== null ? 'grid' : 'none')}} className=\"error\">{onAuthError?.message}</span>\n        </div>\n        <div className=\"phone-number-input\">\n          <input autoComplete=\"tel-local\" type=\"tel\" placeholder=\"123-456-7890\" value={rawPhoneNumber} onChange={e => setPhoneNumber (e.target.value)} disabled={!!prompt} />\n        </div>\n        {\n          prompt &&\n          <div className=\"phone-number-input\">\n            <input ref={codeRef} autoComplete=\"one-time-code\" placeholder=\"Secret Code\" ref={codeRef} />\n          </div>\n        }\n        <div className=\"phone-number-input\">\n          { \n            !prompt &&\n            <span>\n              <button onClick={onLogInClick}>Login</button>\n              <button onClick={onRegisterClick}>Register</button>\n            </span>\n          }\n          { prompt && <><button onClick={answer}>Submit!</button></> }\n        </div>\n        <section>\n          <h3>About Us</h3>\n          <hr style={{width: '35%'}}/>\n          <b>Why A Journal?</b>\n          <p>\n            Journaling provides anyone with a structure to\n            deeper understanding of themselves and their emotional wellbeing. Oftentimes describing a situation\n            or emotion in writing provides a sense of clarity not found in other ways. Also available to you is\n            a place to write down and sort skills you have learned.\n          </p>\n          <b>How Does It Work?</b>\n          <p>\n            To start, register an account with your phone number. You will be texted a secret code. Enter that and...\n            well that's it, you now have your very own journal!\n            To put it simply, you write details about your life in your journal. Again, but in more detail, you can\n            structure your journal in different ways. Journal entries can be formatted as \"question and answer\" or as \"freeform\n            writing\" or \"audio journaling\" (this is easily switched with one click in the settings tab). All journal entries automatically include the\n            date and time of writing and can be found listed in chronological order. You also can curate a\n            list of skills for different situations and share your journal if need be.\n          </p>\n        </section>\n        <section>\n          <h3>Terms of Service</h3>\n          <hr style={{width: '35%'}}/>\n          <b>Privacy</b>\n          <p>\n            None of your information (journal entries, coping skills, phone number, etc) will be publicly available\n            nor will it be shared unless you explicitly share it.\n          </p>\n          <b>Sharing</b>\n          <p>\n            By nature of being a journaling application, the contained subject matter will often be sensitive\n            information. With this application, you can share your journal with anyone. However, it is recommended\n            for, and with intention of, sharing with medical professionals only. In the case of abuse of this feature deemed\n            detrimental to the health of another individual, we retain the right to terminate your account.\n          </p>\n        </section>\n      </main>\n    </>\n  );\n}","import { useEffect, useReducer, useState } from 'react';\nimport {useApp} from '../../AppProvider'\nimport SearchIcon from '../../img/search.svg';\nimport { dateFromShortHand, dateShortHand } from '../../lib/indexing';\n\n// \nfunction keywordReducer (state, _keyword) {\n  let keyword = _keyword.toLowerCase ();\n  if (state.includes (keyword)) return state.filter (word => word !== keyword);\n  if (state.length < 4) return [...state, keyword];\n  return state;\n}\n\n// general dimensions for svgs\nconst width = 750; const height = 500; const padding = 20; const marginTop = 125;\nconst oneDay = (1000 * 3600 * 24);\n\nexport default function WordCount () {\n  \n  // get necessary global state\n  const {journal: {entries}} = useApp ();\n  \n  // necessary state\n  const [idx, setIdx] = useState ([]);\n  const [keywords, toggleKeyword] = useReducer (keywordReducer, []);\n  const [wordCounts, setWordCounts] = useState ([]);\n  const [domain_0, setDomain0] = useState (new Date ());\n  const [domain_n, setDomainN] = useState (new Date ());\n  const [range_n, setRangeN] = useState (1);\n  \n  // get {x|y} coordinate [0,1]\n  // const xscale = date => (date.getTime () - domain_0.getTime ()) / (domain_n.getTime () - domain_0.getTime ());\n  const xinverse = scale => {\n    let offset = scale * (domain_n.getTime () - domain_0.getTime ());\n    offset = offset - (offset % oneDay);\n    return new Date (domain_0.getTime () + offset);\n  }\n  const yscale = count => count / range_n;\n\n  // calculate the word cont index and domain\n  useEffect (() => {\n    if (entries.length === 0) return;\n    console.log (entries);\n    let list = entries.map (obj => Object.assign (obj, {date: dateFromShortHand (obj.date)}))\n    list = list.sort ((a, b) => a.date - b.date);\n    list = list.map (idx => {\n      let text = idx.list.map (entry => entry.entryType === 'questions' ? entry.answers.join (' ') : entry.entryType === 'freeform' ? entry.freeform : '').join (' ').toLowerCase ()\n      return Object.assign (idx, {text});\n    });\n    setIdx (list);\n    setDomain0 (list [0].date);\n    setDomainN (list [list.length - 1].date);\n  }, [entries]);\n\n  // generate word counts to show based on keywords\n  useEffect (() => {\n    let domain = Math.floor ((domain_n.getTime () - domain_0.getTime ()) / oneDay);\n    let wcl = keywords.map (() => new Array (domain).fill (0));\n    let placeholder = 0;\n    for (let i = 0; i < idx.length; i++) {\n      let day = new Date (domain_0.getTime () + i * oneDay);\n      if (day < idx [placeholder].date) continue;\n      for (let j = 0; j < wcl.length; j++)\n        wcl [j][i] = idx [placeholder].text.split (keywords [j]).length - 1;\n      placeholder++;\n    }\n    let rn = Math.max (...wcl.flat ());\n    if (rn < 1) rn = 1;\n    setRangeN (rn);\n    setWordCounts (wcl);\n  }, [keywords]);\n\n  // event handlers\n  const addKeyword = e => {\n    e.preventDefault ();\n    toggleKeyword (e.target.elements.keyword.value)\n    e.target.elements.keyword.value = '';\n  }\n\n  return ((\n      <figure className=\"keywords\">\n        <figcaption>Keyword Search</figcaption>\n        <section className=\"keyword-container\">\n          <form onSubmit={addKeyword} className=\"keyword-search\">\n            <input name=\"keyword\" placeholder=\"keyword\" />\n            <span><img src={SearchIcon} /></span>\n          </form>\n        </section>\n        <svg className=\"keyword-chart\" viewBox={`0 0 ${width} ${height}`} key='keyword-chart'>\n          <g className=\"keyword-chart-axis\">\n            {/* axis & labels */}\n            <line x1={padding} x2={width - padding} y1={height - padding} y2={height - padding} />\n            <line x1={padding} x2={padding} y1={height - padding} y2={padding + marginTop} />\n            <text x={padding / 2} y={height - padding} textAnchor=\"middle\">0</text>\n            <text x={padding / 2} y={marginTop + padding} textAnchor=\"middle\">{range_n}</text>\n            <text x={padding * 2.5} y={height - padding / 4} textAnchor=\"middle\">{dateShortHand (domain_0)}</text>\n            <text x={padding * 2.5 + (width - 2 * padding) / 4} y={height - padding / 4} textAnchor=\"middle\">{dateShortHand (xinverse (0.25))}</text>\n            <text x={padding * 2.5 + 2 * (width - 2 * padding) / 4} y={height - padding / 4} textAnchor=\"middle\">{dateShortHand (xinverse (0.5))}</text>\n            <text x={padding * 2.5 + 3 * (width - 2 * padding) / 4} y={height - padding / 4} textAnchor=\"middle\">{dateShortHand (xinverse (0.75))}</text>\n            <text x={width - padding * 2.5} y={height - padding / 4} textAnchor=\"middle\">{dateShortHand (domain_n)}</text>\n            {/* labels */}\n            <g className=\"keyword-chart-labels\">\n              {\n                keywords.map ((word, i) => (\n                  <text textAnchor=\"middle\" x={padding + ((i + 0.5) * width / 4)} y={marginTop} onClick={() => toggleKeyword (word)}>{word}</text>\n                ))\n              }\n            </g>\n          </g>\n          {\n            wordCounts.map ((list, i) => (\n              <g className={`keyword-trendline-${i + 1}`} key={`keyword-trendline-${keywords [i]}`}>\n                {\n                  list.map ((count, i) => i === list.length - 1 ? null :\n                    <line\n                      x1={padding + i * (width - padding * 2) / list.length}\n                      x2={padding + (i + 1) * (width - padding * 2) / list.length}\n                      y1={(height - padding) - yscale (count) * (height - marginTop - padding * 2)}\n                      y2={(height - padding) - yscale (list [i + 1]) * (height - marginTop - padding * 2)}\n                    />\n                  )\n                }\n              </g>\n            ))\n          }\n        </svg>\n      </figure>\n  ))\n}","import * as d3 from 'd3';\nimport { useEffect, useRef, useState, memo } from 'react';\nimport SearchIcon from '../../img/search.svg';\nimport { useApp } from '../../AppProvider';\nimport WordCount from './WordCount';\n\n// component to represent a bar in a bar graph\nfunction _Bar ({key, time, i, dashWidth, dashHeight, hourlyMax, onClick}) {\n  // tooltip state mgmt\n  const [showTooltip, setShow] = useState (false);\n  const show = e => setShow (true);\n  const hide = e => setShow (false);\n  // breakdown state mgmt - [ audio % , freeform % , question % ]\n  const [breakdown, setBreakdown] = useState ([]);\n  useEffect (() => {\n    let questionsCount = time.filter (entry => (entry.entryType === 'questions' || !entry.entryType)).length;\n    let freeformCount = time.filter (entry => entry.entryType === 'freeform').length;\n    let audioCount = time.filter (entry => entry.entryType === 'audio').length;\n    let total = questionsCount + freeformCount + audioCount;\n    setBreakdown ([audioCount / total, freeformCount / total, questionsCount / total]);\n  }, [time]);\n  //positioning calculations\n  let margin = dashWidth / 20;\n  let contentWidth = 18 * dashWidth / 20;\n  let offset = 0.1 * contentWidth / 24;\n  const dimensions = {\n    x: margin + offset + i * contentWidth / 24,\n    width: (contentWidth / 24) - (offset / 2)\n  }\n  const y0 = (dashHeight - 20) - 0.66 * dashHeight * time.length / hourlyMax;\n  const height_total = 0.66 * dashHeight * time.length / hourlyMax;\n  // render\n  return (\n    <g key={key} className=\"bar-chart-bar\" onMouseEnter={show} onMouseLeave={hide} onClick={onClick}>\n      <rect {...dimensions} y={y0} height={breakdown [0] * height_total} />\n      <rect {...dimensions} y={y0 + breakdown [0] * height_total} height={breakdown [1] * height_total} />\n      <rect {...dimensions} y={y0 + (1 - breakdown [2]) * height_total} height={breakdown [2] * height_total} />\n      {\n        showTooltip &&\n        <text x={margin + i * contentWidth / 24} y={dashHeight}>{(i % 12) || 12}{i > 11 ? 'PM' : 'AM'}</text>\n      }\n    </g>\n  )\n}\nconst Bar = memo (_Bar);\n\n//\n// function WordCountLines ({x, y, w, h, entryList, keywords, colors}) {\n//   let {first, last, count} = reduceEntryListToWordList (entryList);\n//   let results = keywords.map (count);\n//   let yMax = Math.max (...results.flat ()) || 1;\n//   const xunit = w / daysBetween (first, last);\n//   const yunit = h / yMax;\n//   return (\n//     <>\n//       {\n//         keywords.map ((word, i) => (\n//           <g>\n//             {\n//               results [i].map ((counts, i) => i < results [i].length ? (\n//                 <line x1={x + i * xunit} x2={x + (i + 1) * xunit} y1={y + counts * yunit} y2={y + counts * yunit} />\n//               ) : null)\n//             }\n//           </g>\n//         ))\n//       }\n//     </>\n//   )\n// }\n\n// calculate days between 2 dates\nconst oneDay = 1000 * 60 * 60 * 24\nconst daysBetween = (a=new Date (), b=new Date ()) => Math.abs ((new Date (a) - new Date (b)) / oneDay);\n\n// calculate log 2 of x rounded up\nconst log2 = x => Math.ceil (Math.log(x) / Math.log (2));\n\n// round a date down to begging of day\nconst roundDown = d => {\n  return new Date (d.getFullYear (), d.getMonth (), d.getDate ());\n}\n\n// index a list of entries by time of day\nconst reduceByTime = (acc, entry) => {\n  acc [new Date (entry.start).getHours ()].push (entry);\n  return acc;\n}\nconst runIndexByTime = entries => entries.reduce (reduceByTime, new Array (24).fill (1).map (() => []));\n\n// index list of entries by entry type\nconst reduceByType = (acc, entry) => {\n  if (acc [entry.entryType]) acc [entry.entryType].push (entry);\n  else acc [entry.entryType] = [entry];\n  return acc;\n}\nconst runIndexByType = entries => entries.reduce (reduceByType, {});\n\n// general dimensions for svgs\nconst dashWidth = 750; const dashHeight = 500;\n\nexport default function Metrics () {\n  const {journal: {entryList, clearSearch, setFilters}, router: {redirect}} = useApp ();\n  const [metric, setMetric] = useState (0);\n  const [indexed, setIndexed] = useState (null);\n  const [typeIndex, setTypeIndex] = useState (null);\n  const [hourlyMax, setMax] = useState (-1);\n  const [keywords, setKeywords] = useState ([]);\n  const [tstart, setTouchStart] = useState (null);\n  const canvasRef = useRef ();\n\n  // goto a specific time\n  const onBarClick = time => () => {\n    clearSearch ();\n    setFilters ([\n      {\n        type: 'time',\n        value: {\n          mode: 'after',\n          minutes: 0,\n          hours: time\n        }\n      },\n      {\n        type: 'time',\n        value: {\n          mode: 'before',\n          minutes: 0,\n          hours: time + 1\n        }\n      }\n    ]);\n    redirect ('/?page=journal');\n  }\n\n  // process entry list on change\n  useEffect (() => {\n    let idx = runIndexByTime (entryList);\n    setMax (idx.reduce ((acc, val) => val.length > acc ? val.length : acc , 1) ) \n    setIndexed (idx);\n    setTypeIndex (runIndexByType (entryList));\n  }, [entryList]);\n  \n  // create pie chart when the canvas is defined or metric changes\n  useEffect (() => {\n    // clear previous data\n    if (!typeIndex) return;\n    let svg = d3.select (canvasRef.current);\n    svg.selectAll ('*').remove ();\n    // initialize data\n    const colors = ['#4b4486', '#CA054D', '#A4D4B4', '#ffcf9c'];\n    let dataset = Object.keys (typeIndex).map (k => Object.create ({\n      entryType: k,\n      percent: 100 * typeIndex [k].length / entryList.length\n    }));\n    // generate pie chart\n    let pie = d3.pie ().value (d => d.percent);\n    let arc = d3.arc ().outerRadius (dashHeight / 3).innerRadius (dashHeight / 4);\n    let g = svg.append ('g');\n    g.attr ('transform', `translate(${dashWidth / 2}, ${1.15 * dashHeight / 2})`);\n    let arcs = g.selectAll ('arc').data (pie (dataset)).enter ().append ('g').attr ('class', 'arc');\n    arcs.append (\"path\").attr ('fill', (d, i) => colors [i]).attr (\"d\", arc);\n    // generate legend\n    let legend = svg.append ('g').attr ('class', 'legend').attr ('transform', `translate(${1.2 * dashWidth / 3}, ${0.7 * dashHeight / 2})`)\n    const innerSize = .9 * dashWidth / 3;\n    dataset.forEach (({entryType}, i) => {\n      legend.append ('circle').attr ('r', 5).attr ('cx', innerSize / 8).attr ('cy', (i + 0.5) * innerSize / dataset.length).attr ('fill', colors [i])\n      legend.append ('text').text (entryType).attr ('x', 10 + innerSize / 8).attr ('y', 3.5 + (i + 0.5) * innerSize / dataset.length);\n    });\n  }, [canvasRef.current, metric, typeIndex]);\n\n  // methods for mutating keywords\n\n  // remove a keyword\n  const removeKeyword = word => e => setKeywords (keywords.filter (w => w !== word));\n\n  // add a keyword\n  const addKeyWord = e => {\n    e.preventDefault ();\n    if (keywords.length > 3) return;\n    setKeywords ([...keywords, e.target.elements.keyword.value]);\n    e.target.elements.keyword.value = '';\n  }\n\n  const touchstart = e => {\n    setTouchStart (e.changedTouches [0]);\n  }\n\n  const touchend = e => {\n    if (!tstart) return;\n    let xmove = e.changedTouches [0].pageX - tstart.pageX;\n    let ymove = e.changedTouches [0].pageY - tstart.pageY;\n    setTouchStart (null);\n    if (Math.abs (xmove) > Math.abs (ymove)) {\n      e.preventDefault ();\n      return xmove > 0 ? \n        setMetric ((metric !== 0 ? metric : metrics.length) - 1)\n        :\n        setMetric ((metric + 1) % metrics.length);\n    } else {\n      return;\n    }\n  }\n\n  if (!indexed) return null;\n  let metrics = [\n    // time of day bar chart\n    (\n      <figure className=\"time-of-day\">\n        <figcaption>Entries By Time Of Day</figcaption>\n        <svg key='time-of-day-svg' viewBox={`0 0 ${dashWidth} ${dashHeight}`} xmlns=\"http://www.w3.org/2000/svg\">\n          {/** axis */}\n          <line x1={dashWidth / 20} y1={dashHeight - 20} x2={dashWidth - dashWidth / 20} y2={dashHeight - 20} />\n          {/* hour based bars */}\n          {\n            indexed.map ((time, i) => <Bar key={`bar-chart-bar-${i}`} time={time} i={i} dashHeight={dashHeight} dashWidth={dashWidth} hourlyMax={hourlyMax} onClick={onBarClick (i)} />)\n          }\n          <g className=\"bar-chart-text\">\n            <text x={dashWidth / 9} y={dashHeight / 10}>Questions</text>\n            <text x={4 * dashWidth / 9} y={dashHeight / 10}>Freeform</text>\n            <text x={7 * dashWidth / 9} y={dashHeight / 10}>Audio</text>\n          </g>\n        </svg>\n      </figure>\n    ),\n    // type of entry pie chart\n    (\n      <figure className=\"type-of-entry\">\n        <figcaption>Entries By Type</figcaption>\n        <svg key='type-of-entry-svg' className=\"type-of-entry\" ref={canvasRef} viewBox={`0 0 ${dashWidth} ${dashHeight}`} xmlns=\"http://www.w3.org/2000/svg\"/>\n      </figure>\n    ),\n    // ),\n    // // keyword trendline chart\n    (\n      <WordCount />\n    )\n  ]\n  // return the dashboard\n  return (\n    <>\n      <div onTouchStart={touchstart} onTouchEnd={touchend} className=\"dashboard\">\n        {\n          metrics.map (metric => (\n            <>\n              {metric}\n            </>\n          ))\n        }\n      </div>\n    </>\n  );\n}\n","import { useApp } from \"../AppProvider\"\nimport Metrics from './components/Metrics'\nimport {H1} from './components/Headers'\nimport { useEffect, useState } from \"react\";\n\n\nfunction Analytics () {\n  const {router: {page}} = useApp ();\n\n  if (page !== 'dashboard') return null;\n  return (\n    <main>\n      <H1>Dashboard</H1>\n      <Metrics />\n    </main>\n  )\n}\n\nexport default Analytics","import { useEffect } from \"react\";\nimport { useApp } from \"../AppProvider\";\nimport Journal from \"./Journal\";\nimport {H2} from './components/Headers';\n\nfunction SharedWithMe () {\n  const {auth: {user}, router: {page, params}, sharing: {getShareById, sharedJournal}} = useApp ();\n  useEffect (() => {\n    if (!user || !params.get ('shareId')) return;\n    (async () => {\n      try {\n        await getShareById (params.get ('shareId'));\n      } catch (e) {\n        alert ('We encountered an experience loading this journal. It may not longer be shared with you...');\n      }\n    }) ();\n  }, [params, page, user]);\n  if (page !== 'sharing' || !user) return null;\n  return (\n    <>\n      <main>\n        <H2>Shared By {params.get ('name')}</H2>\n        <Journal isNotMain _entries={sharedJournal} />\n      </main>\n    </>\n  )\n}\n\nexport default SharedWithMe ","import Write from './pages/Write'\nimport Journal from './pages/Journal'\nimport Settings from './pages/Settings'\nimport Skills from './pages/Skills';\nimport Nav from './pages/components/Nav'\nimport Auth from './pages/Auth';\nimport Dashboard from './pages/Dashboard';\nimport './App.css';\nimport SharedWithMe from './pages/SharedWithMe';\n\nfunction App() {\n  return (\n    <>\n      <Auth />\n      <Skills />\n      <Write />\n      <Journal />\n      <Settings />\n      <Dashboard />\n      <SharedWithMe />\n      <Nav />\n    </>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport AppProvider from './AppProvider';\n// import {isAlive} from './lib/keepAlive';\n\nconsole.warn = () => {}\nconsole.error = () => {}\n// import reportWebVitals from './reportWebVitals';\n// let passthrough = !navigator.onLine && isAlive;\n\n// (async () => {await navigator.serviceWorker.register ('/journal/sw.js', {scope: '/journal/'});}) ()\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppProvider>\n      <App />\n    </AppProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}